<!DOCTYPE html>












  


<html class="theme-next pisces use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
































<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=6.6.0" rel="stylesheet" type="text/css">



  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.jpg?v=6.6.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.jpg?v=6.6.0">










<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '6.6.0',
    sidebar: {"position":"left","display":"always","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="è®°å½•ç¡•å£«ä¸‰å¹´è‡ªå·±çš„ç§¯ç´¯">
<meta property="og:type" content="website">
<meta property="og:title" content="mxxhcm&#39;s blog">
<meta property="og:url" content="http://mxxhcm.github.io/page/20/index.html">
<meta property="og:site_name" content="mxxhcm&#39;s blog">
<meta property="og:description" content="è®°å½•ç¡•å£«ä¸‰å¹´è‡ªå·±çš„ç§¯ç´¯">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="mxxhcm&#39;s blog">
<meta name="twitter:description" content="è®°å½•ç¡•å£«ä¸‰å¹´è‡ªå·±çš„ç§¯ç´¯">



  <link rel="alternate" href="/atom.xml" title="mxxhcm's blog" type="application/atom+xml">




  <link rel="canonical" href="http://mxxhcm.github.io/page/20/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>mxxhcm's blog</title>
  












  <noscript>
  <style>
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion .logo-line-before i { left: initial; }
    .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">mxxhcm's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>é¦–é¡µ</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>æ ‡ç­¾</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>åˆ†ç±»</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>å½’æ¡£</a>

  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mxxhcm.github.io/2019/03/13/python-å¸¸è§é—®é¢˜/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="é©¬æ™“é‘«çˆ±é©¬èŸèŸ">
      <meta itemprop="description" content="è®°å½•ç¡•å£«ä¸‰å¹´è‡ªå·±çš„ç§¯ç´¯">
      <meta itemprop="image" content="/images/favicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mxxhcm's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/03/13/python-å¸¸è§é—®é¢˜/" class="post-title-link" itemprop="http://mxxhcm.github.io/page/20/index.html">python å¸¸è§é—®é¢˜ï¼ˆä¸å®šæœŸæ›´æ–°ï¼‰</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-03-13 10:40:03" itemprop="dateCreated datePublished" datetime="2019-03-13T10:40:03+08:00">2019-03-13</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2019-10-11 13:30:51" itemprop="dateModified" datetime="2019-10-11T13:30:51+08:00">2019-10-11</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="é—®é¢˜1-dict-values-object-does-not-support-indexing">é—®é¢˜1-â€˜dict_valuesâ€™ object does not support indexingâ€™</h2>
<p>å‚è€ƒæ–‡çŒ®[1,2,3]</p>
<h3 id="æŠ¥é”™">æŠ¥é”™</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&apos;dict_values&apos; object does not support indexing&apos;</span><br></pre></td></tr></table></figure>
<h3 id="åŸå› ">åŸå› </h3>
<p>The objects returned by dict.keys(), dict.values() and dict.items() are view objects. They provide a dynamic view on the dictionaryâ€™s entries, which means that when the dictionary changes, the view reflects these changes.<br>
python3 ä¸­è°ƒç”¨å­—å…¸å¯¹è±¡çš„ä¸€äº›å‡½æ•°ï¼Œè¿”å›å€¼æ˜¯view objectsã€‚å¦‚æœè¦è½¬æ¢ä¸ºlistçš„è¯ï¼Œéœ€è¦ä½¿ç”¨list()å¼ºåˆ¶è½¬æ¢ã€‚<br>
è€Œpython2çš„è¿”å›å€¼ç›´æ¥å°±æ˜¯listã€‚</p>
<h3 id="ä»£ç ç¤ºä¾‹">ä»£ç ç¤ºä¾‹</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">m_dict = &#123;<span class="string">'a'</span>: <span class="number">10</span>, <span class="string">'b'</span>: <span class="number">20</span>&#125;</span><br><span class="line">values = m_dict.values()</span><br><span class="line">print(type(values))</span><br><span class="line">print(values)</span><br><span class="line">print(<span class="string">"\n"</span>)</span><br><span class="line"></span><br><span class="line">items = m_dict.items()</span><br><span class="line">print(type(items))</span><br><span class="line">print(items)</span><br><span class="line">print(<span class="string">"\n"</span>)</span><br><span class="line"></span><br><span class="line">keys = m_dict.keys()</span><br><span class="line">print(type(keys))</span><br><span class="line">print(keys)</span><br><span class="line">print(<span class="string">"\n"</span>)</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä½¿ç”¨python3æ‰§è¡Œä»¥ä¸Šä»£ç ï¼Œè¾“å‡ºç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<blockquote>
<p>class 'dict_valuesâ€™<br>
dict_values([10, 20])<br>
class 'dict_itemsâ€™<br>
dict_items([(â€˜aâ€™, 10), (â€˜bâ€™, 20)])<br>
class 'dict_keysâ€™<br>
dict_keys([â€˜aâ€™, â€˜bâ€™])</p>
</blockquote>
<p>å¦‚æœä½¿ç”¨python2æ‰§è¡Œä»¥ä¸Šä»£ç ï¼Œè¾“å‡ºç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<blockquote>
<p>type â€˜listâ€™<br>
[10, 20]<br>
type â€˜listâ€™<br>
[(â€˜aâ€™, 10), (â€˜bâ€™, 20)]<br>
type â€˜listâ€™<br>
[â€˜aâ€™, â€˜bâ€™]</p>
</blockquote>
<h2 id="é—®é¢˜2-timelimit-object-has-no-attribute-ale">é—®é¢˜2-â€˜TimeLimitâ€™ object has no attribute â€˜aleâ€™</h2>
<p>å‚è€ƒæ–‡çŒ®[4,5,6]</p>
<h3 id="é—®é¢˜æè¿°">é—®é¢˜æè¿°</h3>
<p>è¿è¡Œgithub clone ä¸‹æ¥çš„<a href="https://github.com/devsisters/DQN-tensorflow" target="_blank" rel="noopener">DQN-tensorflow</a>ï¼ŒæŠ¥é”™:</p>
<blockquote>
<p>AttributeError: â€˜TimeLimitâ€™ object has no attribute â€˜aleâ€™.</p>
</blockquote>
<h3 id="åŸå› -v2">åŸå› </h3>
<p>æ˜¯å› ä¸ºgymç‰ˆæœ¬åŸå› ï¼Œåœ¨gym 0.7ç‰ˆæœ¬ä¸­ï¼Œå¯ä»¥ä½¿ç”¨env.ale.lives()è®¿é—®aleå±æ€§ï¼Œä½†æ˜¯0.8ç‰ˆæœ¬ä»¥åŠä»¥ä¸Šï¼Œå°±æ²¡æœ‰äº†è¯¥å±æ€§ï¼Œå¯ä»¥åœ¨ç³»åˆ—å‡½æ•°ä¸­æ·»åŠ å¦‚ä¸‹ä¿®æ”¹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, config)</span>:</span></span><br><span class="line">    self.step_info = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">_step</span><span class="params">(self, action)</span>:</span></span><br><span class="line">    self._screen, self.reward, self.terminal, self.step_info = self.env.step(action)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">lives</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> self.step_info <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> self.step_info[<span class="string">'ale.lives'</span>]</span><br></pre></td></tr></table></figure>
<h3 id="aleå±æ€§æ˜¯ä»€ä¹ˆ">aleå±æ€§æ˜¯ä»€ä¹ˆ</h3>
<p>æˆ‘çœ‹å®˜æ–¹æ–‡æ¡£ä¹Ÿæ²¡æœ‰çœ‹æ¸…æ¥šï¼Œä½†æ˜¯æˆ‘è§‰å¾—å°±æ˜¯ç”Ÿå‘½å€¼æ˜¯å¦æ²¡æœ‰äº†</p>
<blockquote>
<p>info (dict): diagnostic information useful for debugging. It can sometimes be useful for learning (for example, it might contain the raw probabilities behind the environmentâ€™s last state change). However, official evaluations of your agent are not allowed to use this for learning.</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> gym</span><br><span class="line">env = gym.make(<span class="string">'CartPole-v0'</span>)</span><br><span class="line"><span class="keyword">for</span> i_episode <span class="keyword">in</span> range(<span class="number">20</span>):</span><br><span class="line">    observation = env.reset()</span><br><span class="line">    <span class="keyword">for</span> t <span class="keyword">in</span> range(<span class="number">100</span>):</span><br><span class="line">        env.render()</span><br><span class="line">        print(observation)</span><br><span class="line">        action = env.action_space.sample()</span><br><span class="line">        observation, reward, done, info = env.step(action)</span><br><span class="line">        <span class="keyword">if</span> done:</span><br><span class="line">            print(<span class="string">"Episode finished after &#123;&#125; timesteps"</span>.format(t+<span class="number">1</span>))</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">env.close()</span><br></pre></td></tr></table></figure>
<h2 id="é—®é¢˜3-cannot-import-name">é—®é¢˜3-cannot import name ***</h2>
<p>å‚è€ƒæ–‡çŒ®[7]</p>
<h3 id="æŠ¥é”™-v2">æŠ¥é”™</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cannot import name tqdm</span><br></pre></td></tr></table></figure>
<h3 id="é—®é¢˜åŸå› ">é—®é¢˜åŸå› </h3>
<p>è°·æ­Œäº†åŠå¤©ï¼Œæ²¡æœ‰å‘ç°åŸå› ï¼Œç„¶åç™¾åº¦äº†ä¸€ä¸‹ï¼Œå‘ç°äº†åŸå› ï¼Œçœ‹æ¥è¿˜æ˜¯è‡ªå·±å¤ªèœäº†ã€‚ã€‚<br>
å› ä¸ºè‡ªå·±èµ·çš„æ–‡ä»¶åå°±å«tqdmï¼Œç„¶åå°±å’Œåº“ä¸­çš„tqdmå†²çªäº†ï¼Œè¿™ä¹Ÿå¤ªè ¢äº†å§ã€‚ã€‚ã€‚</p>
<h2 id="é—®é¢˜4-linuxä¸‹pythonæ‰§è¡Œshellè„šæœ¬è¾“å‡ºé‡å®šå‘">é—®é¢˜4-linuxä¸‹pythonæ‰§è¡Œshellè„šæœ¬è¾“å‡ºé‡å®šå‘</h2>
<p><a href="https://mxxhcm.github.io/2019/06/03/linux-python%E8%B0%83%E7%94%A8shell%E8%84%9A%E6%9C%AC%E5%B9%B6%E5%B0%86%E8%BE%93%E5%87%BA%E9%87%8D%E5%AE%9A%E5%90%91%E5%88%B0%E6%96%87%E4%BB%B6/">è¯¦ç»†ä»‹ç»</a></p>
<h2 id="é—®é¢˜4-importerror-no-module-named-conda-cli">é—®é¢˜4-ImportError: No module named conda.cliâ€™</h2>
<h3 id="é—®é¢˜æè¿°-v2">é—®é¢˜æè¿°</h3>
<p>anacondaçš„pythonç‰ˆæœ¬æ˜¯3.7ï¼Œæ‰§è¡Œäº†conda install python=3.6ä¹‹åï¼Œè¿è¡Œcondaå‘½ä»¤å‡ºé”™ã€‚æŠ¥é”™å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">from conda.cli import main </span><br><span class="line">ModuleNotFoundError: No module named &apos;conda&apos;</span><br></pre></td></tr></table></figure>
<h2 id="è§£å†³æ–¹æ¡ˆ">è§£å†³æ–¹æ¡ˆ</h2>
<p>æ‰¾åˆ°anacondaå®‰è£…åŒ…ï¼ŒåŠ ä¸€ä¸ª-uå‚æ•°ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚é‡æ–°å®‰è£…anacondaè‡ªå¸¦çš„packageï¼Œè‡ªå·±å®‰è£…çš„åŒ…ä¸ä¼šä¸¢å¤±ã€‚<br>
~$:sh <a href="http://xxx.sh" target="_blank" rel="noopener">xxx.sh</a> -u</p>
<h2 id="é—®é¢˜5-python-pipä½¿ç”¨å›½å†…æº">é—®é¢˜5-python-pipä½¿ç”¨å›½å†…æº</h2>
<h3 id="æš‚æ—¶ä½¿ç”¨å›½å†…pipæº">æš‚æ—¶ä½¿ç”¨å›½å†…pipæº</h3>
<p>ä½¿ç”¨æ¸…åæº<br>
~$:pip install -i <a href="https://pypi.tuna.tsinghua.edu.cn/simple" target="_blank" rel="noopener">https://pypi.tuna.tsinghua.edu.cn/simple</a> package-name<br>
ä½¿ç”¨é˜¿é‡Œæº<br>
~$:pip install -i <a href="https://mirrors.aliyun.com/pypi/simple" target="_blank" rel="noopener">https://mirrors.aliyun.com/pypi/simple</a> package-name</p>
<h3 id="å°†å›½å†…pipæºè®¾ä¸ºé»˜è®¤">å°†å›½å†…pipæºè®¾ä¸ºé»˜è®¤</h3>
<p>~$:pip install pip -U<br>
~$:pip config set global.index-url <a href="https://pypi.tuna.tsinghua.edu.cn/simple" target="_blank" rel="noopener">https://pypi.tuna.tsinghua.edu.cn/simple</a><br>
~$:pip config set global.timeout 60</p>
<blockquote>
<p>Writing to /home/username/.config/pip/pip.conf</p>
</blockquote>
<h4 id="æŸ¥çœ‹pipé…ç½®æ–‡ä»¶">æŸ¥çœ‹pipé…ç½®æ–‡ä»¶</h4>
<p>~$:find / -name pip.conf<br>
æˆ‘çš„æ˜¯åœ¨/home/username/.config/pip/pip.conf</p>
<h2 id="é—®é¢˜6-importerror-lib-x86-64-linux-gnu-libc-so-6-version-glibc-2-28-not-found">é—®é¢˜6-ImportError: /lib/x86_64-linux-gnu/libc.so.6: version GLIBC_2.28 not found</h2>
<h3 id="é—®é¢˜æè¿°-v3">é—®é¢˜æè¿°</h3>
<p>å®‰è£…roboschoolä¹‹åï¼Œå‡ºç°ImportErrorã€‚æŠ¥é”™å¦‚ä¸‹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ImportError: /lib/x86_64-linux-gnu/libc.so.6: version `GLIBC_2.28&apos; not found (required by /usr/local/lib/python3.6/dist-packages/roboschool/.libs/libQt5Core.so.5)</span><br></pre></td></tr></table></figure>
<h3 id="è§£å†³æ–¹æ¡ˆ-v2">è§£å†³æ–¹æ¡ˆ</h3>
<p>åœ¨roboschoolä¸Šæ‰¾åˆ°ä¸€ä¸ªissueï¼Œè¯´ä»1.0.49ç‰ˆæœ¬é€€å›åˆ°1.0.48å³å¯ã€‚æˆ‘é€€å›ä¹‹åï¼Œåˆå‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ImportError: libpcre16.so.3: cannot open shared object file: No such file or directory</span><br></pre></td></tr></table></figure>
<p>å®‰è£…ç›¸åº”çš„åº“å³å¯ã€‚å®Œæ•´çš„å‘½ä»¤å¦‚ä¸‹</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">~$:pip install roboschool==1.0.48</span><br><span class="line">~$:sudo apt install libpcre3-dev</span><br></pre></td></tr></table></figure>
<h2 id="å‚è€ƒæ–‡çŒ®">å‚è€ƒæ–‡çŒ®</h2>
<p>1.<a href="https://www.cnblogs.com/timxgb/p/8905290.html" target="_blank" rel="noopener">https://www.cnblogs.com/timxgb/p/8905290.html</a><br>
2.<a href="https://docs.python.org/3/library/stdtypes.html#dictionary-view-objects" target="_blank" rel="noopener">https://docs.python.org/3/library/stdtypes.html#dictionary-view-objects</a><br>
3.<a href="https://stackoverflow.com/questions/43663206/typeerror-unsupported-operand-types-for-dict-values-and-int" target="_blank" rel="noopener">https://stackoverflow.com/questions/43663206/typeerror-unsupported-operand-types-for-dict-values-and-int</a><br>
4.<a href="https://github.com/devsisters/DQN-tensorflow/issues/29" target="_blank" rel="noopener">https://github.com/devsisters/DQN-tensorflow/issues/29</a><br>
5.<a href="https://gym.openai.com/docs" target="_blank" rel="noopener">https://gym.openai.com/docs</a><br>
6.<a href="https://github.com/openai/baselines/issues/42" target="_blank" rel="noopener">https://github.com/openai/baselines/issues/42</a><br>
7.<a href="https://blog.csdn.net/m0_37561765/article/details/78714603" target="_blank" rel="noopener">https://blog.csdn.net/m0_37561765/article/details/78714603</a><br>
8.<a href="https://blog.csdn.net/u014432608/article/details/79066813" target="_blank" rel="noopener">https://blog.csdn.net/u014432608/article/details/79066813</a><br>
9.<a href="https://mirrors.tuna.tsinghua.edu.cn/help/pypi/" target="_blank" rel="noopener">https://mirrors.tuna.tsinghua.edu.cn/help/pypi/</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mxxhcm.github.io/2019/03/09/markdownå¸®åŠ©/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="é©¬æ™“é‘«çˆ±é©¬èŸèŸ">
      <meta itemprop="description" content="è®°å½•ç¡•å£«ä¸‰å¹´è‡ªå·±çš„ç§¯ç´¯">
      <meta itemprop="image" content="/images/favicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mxxhcm's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/03/09/markdownå¸®åŠ©/" class="post-title-link" itemprop="http://mxxhcm.github.io/page/20/index.html">markdownå¸®åŠ©</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-03-09 19:53:32" itemprop="dateCreated datePublished" datetime="2019-03-09T19:53:32+08:00">2019-03-09</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2019-10-25 19:42:39" itemprop="dateModified" datetime="2019-10-25T19:42:39+08:00">2019-10-25</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/å·¥å…·/" itemprop="url" rel="index"><span itemprop="name">å·¥å…·</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="å¼•ç”¨">å¼•ç”¨</h2>
<h3 id="ä»£ç å¼•ç”¨">ä»£ç å¼•ç”¨</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br></pre></td></tr></table></figure>
<h3 id="æ–‡å­—å¼•ç”¨">æ–‡å­—å¼•ç”¨</h3>
<blockquote>
<p>å®é™…æ˜¯äººç±»è¿›æ­¥çš„é˜¶æ¢¯ã€‚ã€€ï¼ï¼é«˜å°”åŸº</p>
</blockquote>
<h2 id="è¡¨æ ¼">è¡¨æ ¼</h2>
<table>
<thead>
<tr>
<th style="text-align:center">name</th>
<th style="text-align:center">age</th>
<th style="text-align:center">gender</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Alice</td>
<td style="text-align:center">11</td>
<td style="text-align:center">female</td>
</tr>
<tr>
<td style="text-align:center">Bob</td>
<td style="text-align:center">82</td>
<td style="text-align:center">male</td>
</tr>
</tbody>
</table>
<h2 id="è¡¨æƒ…">è¡¨æƒ…</h2>
<h3 id="å®‰è£…è¿‡ç¨‹">å®‰è£…è¿‡ç¨‹</h3>
<p>ç¬¬ä¸€æ­¥ï¼Œå¸è½½hexoé»˜è®¤çš„hexo-renderer-marked markdownæ¸²æŸ“å™¨<br>
~$:npm un hexo-renderer-marked --save<br>
ç¬¬äºŒæ­¥ï¼Œå®‰è£…æ”¯æŒemojiçš„markdownæ¸²æŸ“å™¨<br>
~$:npm i hexo-renderer-markdown-it --save<br>
ç¬¬ä¸‰æ­¥ï¼Œä¿®æ”¹åšå®¢æ ¹ç›®å½•ä¸‹çš„_config.ymlæ–‡ä»¶ï¼Œæ·»åŠ ä¸‹åˆ—å†…å®¹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"># Markdown-it config</span><br><span class="line">## Docs: https://github.com/celsomiranda/hexo-renderer-markdown-it/wiki</span><br><span class="line">markdown:</span><br><span class="line">  render:</span><br><span class="line">    html: true</span><br><span class="line">    xhtmlOut: false</span><br><span class="line">    breaks: true</span><br><span class="line">    linkify: true</span><br><span class="line">    typographer: true</span><br><span class="line">    quotes: &apos;â€œâ€â€˜â€™&apos;</span><br><span class="line">  plugins:</span><br><span class="line">    - markdown-it-abbr</span><br><span class="line">    - markdown-it-footnote</span><br><span class="line">    - markdown-it-ins</span><br><span class="line">    - markdown-it-sub</span><br><span class="line">    - markdown-it-sup</span><br><span class="line">    - markdown-it-emoji  ## add emoji</span><br><span class="line">  anchors:</span><br><span class="line">    level: 2</span><br><span class="line">    collisionSuffix: &apos;v&apos;</span><br><span class="line">    # If `true`, creates an anchor tag with a permalink besides the heading.</span><br><span class="line">    permalink: false  </span><br><span class="line">    permalinkClass: header-anchor</span><br><span class="line">    # The symbol used to make the permalink</span><br><span class="line">    permalinkSymbol: Â¶</span><br></pre></td></tr></table></figure>
<p>ç„¶åé‡æ–°ç”Ÿæˆéƒ¨ç½²å³å¯ã€‚<br>
æµ‹è¯•ï¼š<br>
ğŸ˜„<br>
ğŸ˜†<br>
ğŸ‘ƒ</p>
<h2 id="æµ‹è¯•">æµ‹è¯•</h2>
<table>
   <tr>
      <td></td>
   </tr>
   <tr>
      <td>Coding</td>
   </tr>
   <tr>
      <td>Content</td>
   </tr>
   <tr>
      <td>æè¿°æ€§æç‚¼æ€§è´¨çš„ç ”ç©¶</td>
   </tr>
   <tr>
      <td>ç¬¬ä¸€éƒ¨åˆ†ï¼š</td>
   </tr>
   <tr>
      <td>æ–‡çŒ®ç»¼è¿°</td>
   </tr>
   <tr>
      <td>ï¼ˆå¯¹è¯ï¼‰</td>
   </tr>
   <tr>
      <td>SPL</td>
   </tr>
   <tr>
      <td>æœ¬æ–‡çš„æ–‡çŒ®ç»¼è¿°è´¯ç©¿åœ¨è¡Œæ–‡çš„è¿‡ç¨‹ä¸­</td>
   </tr>
   <tr>
      <td>ï¼ˆ1ï¼‰å…³äºåˆ†å®¶çš„åŸå› ï¼š</td>
   </tr>
   <tr>
      <td>æ•Œå†›ï¼šâ‘ å¼—é‡Œå¾·æ›¼å…„å¼Ÿä¹‹é—´çš„åˆ©å®³å†²çªâ‘¡è®¸çƒºå…‰å¤«å¦»çº½å¸¦å¼ºäºçˆ¶å­ä¹‹é—´çš„çº½å¸¦â†’æ¦‚æ‹¬ä¸ºå®¶åº­å†…æ‘©æ“¦</td>
   </tr>
   <tr>
      <td>ä½œè€…ï¼ˆéƒ¨åˆ†è®¤åŒæ•Œå†›åŸºç¡€ä¸Šæå‡ºè‡ªå·±çš„è§‚ç‚¹ï¼‰ï¼šåˆ†å®¶é€æ¸æ¼”åŒ–æˆä¸€ç§â€œæ–‡åŒ–ç°è±¡â€</td>
   </tr>
   <tr>
      <td>ï¼ˆ2ï¼‰åˆ†å®¶ä¸­çš„â€œç»§â€ä¸â€œåˆâ€</td>
   </tr>
   <tr>
      <td>æ•Œå†›ï¼šâ‘ å­”è¿ˆéš†ä»¥å®¶äº§æ­£å¼åˆ†æ‰ç®—åˆ†å®¶çš„å®šä¹‰â‘¡åˆ†ç¶</td>
   </tr>
   <tr>
      <td>è¯„è®ºï¼šâ‘ ç»æµä¸Šçš„è€ƒè™‘å¤šäºç¤¾ä¼šä¸Šçš„è€ƒè™‘â‘¡è®¤ä¸ºåˆ†å®¶æ˜¯å®¶åº­çš„ç ´è£‚ä»¥åŠå…„å¼Ÿæ²¡æœ‰ç»§æ‰¿ä¸€ä¸ªå®Œæ•´çš„å®¶åº­</td>
   </tr>
   <tr>
      <td>ä½œè€…ï¼šåˆ†å®¶ä¸­ä¹Ÿæœ‰å‚ç›´å…³ç³»çš„â€œç»§æ‰¿â€ã€æ¨ªçºµä¸€ä½“çš„â€œåˆâ€</td>
   </tr>
   <tr>
      <td></td>
   </tr>
   <tr>
      <td>CPL</td>
   </tr>
   <tr>
      <td>â‘ å¯¹ç°æœ‰æ–‡çŒ®çš„ç†è§£å’Œçœ‹æ³•â‘¡ä½œè€…åœ¨å“ªä¸ªç»†åˆ†é¢†åŸŸå±•å¼€ç ”ç©¶</td>
   </tr>
   <tr>
      <td>ç†è®ºåŸºç¡€</td>
   </tr>
   <tr>
      <td>RAT</td>
   </tr>
   <tr>
      <td>ä¸Šé¢ä¸¤ä¸ªéƒ¨åˆ†çš„å®Œå–„æ˜¯ä¸ºè¿™ä¸ªéƒ¨åˆ†åšå‡†å¤‡</td>
   </tr>
   <tr>
      <td>ç¬¬äºŒéƒ¨åˆ†ï¼š</td>
   </tr>
   <tr>
      <td>æœºåˆ¶å’Œç»“æ„</td>
   </tr>
   <tr>
      <td>Fï¼ˆxï¼‰</td>
   </tr>
   <tr>
      <td>ç»“æ„ï¼š </td>
   </tr>
   <tr>
      <td>ï¼ˆ1ï¼‰æ¦‚å¿µç•Œå®šï¼šåˆ†å®¶çš„åŸºæœ¬å†…å®¹</td>
   </tr>
   <tr>
      <td>ä»€ä¹ˆæ˜¯åˆ†å®¶ï¼Ÿåˆ†å®¶æ—¶è´¢äº§æŒ‰ç…§â€œè‚¡â€åˆ†å‰²ï¼›åˆ†å®¶çš„åŸå› </td>
   </tr>
   <tr>
      <td>ï¼ˆ2ï¼‰åˆ†å®¶å¸¦æ¥çš„å½±å“ï¼ˆæ¡ˆä¾‹åˆ†æï¼‰ï¼šåˆ†å®¶å¸¦æ¥äº†ç¤¾ä¼šæµåŠ¨</td>
   </tr>
   <tr>
      <td>  å€Ÿç”¨è¯´â€œåˆ†å®¶ä¸‰å¹´æ˜¾é«˜ä½â€ã€â€œå¯Œä¸è¿‡ä¸‰ä»£â€ã€â€œçˆ¶å­ä¸€æ¡å¿ƒï¼Œé»„åœŸå˜æˆé‡‘â€ä¸‰å¥ä¿šè¯­æ¥è¯´æ˜åˆ†å®¶å¯¹ç¤¾ä¼šå˜åŒ–çš„å½±å“</td>
   </tr>
   <tr>
      <td>ï¼ˆ3ï¼‰åˆ†å®¶çš„ä¸­â€œç»§â€ä¸â€œåˆâ€</td>
   </tr>
   <tr>
      <td>  ç»§ï¼šèµ¡å…»è€äººã€ç»§å®—ç¥§ï¼ˆtiao 1å£°ï¼‰ï¼Œå¯¹åº”å„’çš„å­ã€çˆ¶å­ä¸€ä½“è§‚å¿µ</td>
   </tr>
   <tr>
      <td>  åˆï¼šç”Ÿäº§ç”Ÿæ´»ä¸Šçš„åˆä½œ</td>
   </tr>
   <tr>
      <td>ï¼ˆ4ï¼‰ç»“è¯­</td>
   </tr>
   <tr>
      <td>æœºåˆ¶ï¼šå¯¹åº”å„’çš„å­ã€çˆ¶å­ä¸€ä½“è§‚å¿µï¼›ç”Ÿäº§ç”Ÿæ´»ä¸Šçš„åˆä½œ</td>
   </tr>
   <tr>
      <td>Argument</td>
   </tr>
   <tr>
      <td>CA</td>
   </tr>
   <tr>
      <td>åˆ†ä¸­æœ‰ç»§ä¹Ÿæœ‰åˆ</td>
   </tr>
   <tr>
      <td>ç¬¬ä¸‰éƒ¨åˆ†ï¼š</td>
   </tr>
   <tr>
      <td>é—®é¢˜å’Œå‘å±•</td>
   </tr>
   <tr>
      <td>    ï¼ˆ1ï¼‰ æ–‡çŒ®ç»¼è¿°æ‰¾æ•Œå†›å¯ä»¥å€Ÿé‰´ï¼Œä»¥åŠæ–‡çŒ®è¯„è¿°</td>
   </tr>
   <tr>
      <td>    ï¼ˆ2ï¼‰ æ–‡çŒ®ç»¼è¿°å¯ä»¥åŠ ä¸€äº›å‹å†›</td>
   </tr>
   <tr>
      <td>    ï¼ˆ3ï¼‰ æ–‡ç« å¯èƒ½å†™çš„å¤ªæ—©äº†ï¼Œä¸å¤ªç¬¦åˆç°åœ¨çš„æ–‡ç« å†™ä½œè§„èŒƒã€‚ä¸å¤ªç†è§£ç¬¬äºŒéƒ¨åˆ†â€œåˆ†å®¶å¯¹ç¤¾ä¼šå‘å±•çš„å½±å“â€å¯¹æ•´ç¯‡æ–‡ç« æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿï¼Ÿæ˜¯ä¸æ˜¯æ²¡æœ‰å¿…è¦å è¿™ä¹ˆå¤§ç¯‡å¹…</td>
   </tr>
   <tr>
      <td>    ï¼ˆ4ï¼‰ å†…å®¹æ–¹é¢ï¼š</td>
   </tr>
   <tr>
      <td>éšç€æ—¶é—´çš„æ¼”å˜ï¼Œä»–ä»¬çš„åˆè¶Šæ¥è¶Šå±€é™äºå°ï¼Œç”·å¥³åŒæ–¹çš„ç›´ç³»äº²å±ï¼Œç›´ç³»çš„å…„å¼Ÿå…³ç³»å’Œå§»äº²å…³ç³»ï¼Œå¤§å®¶æ—çš„è”ç³»è¶Šæ¥è¶Šå°‘ï¼›å¤§å®¶æ—å³ä½¿ç¥–åŸæ”¾åœ¨ä¸€èµ·ï¼Œä¹Ÿéš¾ä»¥é€šè¿‡ç¥­ç¥€çš„æ‰‹æ®µè”ç³»èµ·æ¥ï¼Œæ…¢æ…¢å†œæ‘ä¹Ÿå½¢æˆåŸå­åŒ–çš„å®¶åº­å•ä½ï¼Œå¯¹äºåŒæ‘çš„äººæ¥è¯´ï¼Œåœ°ç¼˜å…³ç³»ã€é‚»é‡Œå…³ç³»æ˜¯æ¯”è¡€ç¼˜å…³ç³»æ›´é‡è¦çš„å­˜åœ¨</td>
   </tr>
   <tr>
      <td></td>
   </tr>
</table>
<h2 id="å‚è€ƒæ–‡çŒ®">å‚è€ƒæ–‡çŒ®</h2>
<p>1.<a href="https://daringfireball.net/projects/markdown/syntax" target="_blank" rel="noopener">https://daringfireball.net/projects/markdown/syntax</a><br>
2.<a href="https://www.webfx.com/tools/emoji-cheat-sheet/" target="_blank" rel="noopener">https://www.webfx.com/tools/emoji-cheat-sheet/</a><br>
3.<a href="https://guides.github.com/features/mastering-markdown/" target="_blank" rel="noopener">https://guides.github.com/features/mastering-markdown/</a><br>
4.<a href="https://github.com/mxxhcm/use_vim_as_ide#8.4" target="_blank" rel="noopener">https://github.com/mxxhcm/use_vim_as_ide#8.4</a><br>
5.<a href="https://chaxiaoniu.oschina.io/2017/07/10/HexoAddEmoji/" target="_blank" rel="noopener">https://chaxiaoniu.oschina.io/2017/07/10/HexoAddEmoji/</a><br>
6.<a href="https://www.markdownguide.org/basic-syntax/" target="_blank" rel="noopener">https://www.markdownguide.org/basic-syntax/</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mxxhcm.github.io/2019/03/07/tensorflow-problems/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="é©¬æ™“é‘«çˆ±é©¬èŸèŸ">
      <meta itemprop="description" content="è®°å½•ç¡•å£«ä¸‰å¹´è‡ªå·±çš„ç§¯ç´¯">
      <meta itemprop="image" content="/images/favicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mxxhcm's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/03/07/tensorflow-problems/" class="post-title-link" itemprop="http://mxxhcm.github.io/page/20/index.html">tensorflow å¸¸è§é—®é¢˜ï¼ˆä¸å®šæœŸæ›´æ–°ï¼‰</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-03-07 14:51:01" itemprop="dateCreated datePublished" datetime="2019-03-07T14:51:01+08:00">2019-03-07</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2019-07-18 20:27:16" itemprop="dateModified" datetime="2019-07-18T20:27:16+08:00">2019-07-18</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/tensorflow/" itemprop="url" rel="index"><span itemprop="name">tensorflow</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="é—®é¢˜1-the-value-of-a-feed-cannot-be-a-tf-tensor-object">é—®é¢˜1-The value of a feed cannot be a tf.Tensor object</h2>
<h3 id="æŠ¥é”™">æŠ¥é”™</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TypeError: The value of a feed cannot be a tf.Tensor object</span><br></pre></td></tr></table></figure>
<h3 id="é—®é¢˜åŸå› ">é—®é¢˜åŸå› </h3>
<p>sess.run(op, feed_dict={})ä¸­çš„feed valueä¸èƒ½æ˜¯tf.Tensorç±»å‹ã€‚</p>
<h3 id="è§£å†³æ–¹æ³•">è§£å†³æ–¹æ³•</h3>
<p>sess.run(train, feed_dict={x:images, y:labels}çš„è¾“å…¥ä¸èƒ½æ˜¯tensorï¼Œå¯ä»¥ä½¿ç”¨sess.run(tensor)å¾—åˆ°numpy.arrayå½¢å¼çš„æ•°æ®å†å–‚ç»™feed_dictã€‚</p>
<blockquote>
<p>Once you have launched a sess, you can use your_tensor.eval(session=sess) or sess.run(your_tensor) to get you feed tensor into the format of numpy.array and then feed it to your placeholder.</p>
</blockquote>
<h2 id="é—®é¢˜2-could-not-create-cudnn-handle-cudnn-status-internal-error">é—®é¢˜2-Could not create cudnn handle: CUDNN_STATUS_INTERNAL_ERROR</h2>
<h3 id="é…ç½®">é…ç½®</h3>
<p>ç¯å¢ƒé…ç½®å¦‚ä¸‹ï¼š</p>
<ul>
<li>Ubuntu 18.04</li>
<li>CUDA 10.0</li>
<li>CuDNN 7.4.2</li>
<li>Python3.7.3</li>
<li>Tensorflow 1.13.1</li>
<li>Nvidia Drivers 430.09</li>
<li>RTX2070</li>
</ul>
<h3 id="æŠ¥é”™-v2">æŠ¥é”™</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">2019-05-12 14:45:59.355405: E tensorflow/stream_executor/cuda/cuda_dnn.cc:334] Could not create cudnn handle: CUDNN_STATUS_INTERNAL_ERROR</span><br><span class="line">2019-05-12 14:45:59.357698: E tensorflow/stream_executor/cuda/cuda_dnn.cc:334] Could not create cudnn handle: CUDNN_STATUS_INTERNAL_ERROR</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<h3 id="é—®é¢˜åŸå› -v2">é—®é¢˜åŸå› </h3>
<p>GPUä¸å¤Ÿç”¨äº†ã€‚</p>
<h3 id="è§£å†³æ–¹æ³•-v2">è§£å†³æ–¹æ³•</h3>
<p>åœ¨ä»£ç ä¸­æ·»åŠ ä¸‹é¢å‡ å¥ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">config = tf.ConfigProto()</span><br><span class="line">config.gpu_options.allow_growth = <span class="literal">True</span></span><br><span class="line">session = InteractiveSession(config=config)</span><br></pre></td></tr></table></figure>
<h2 id="é—®é¢˜3-libcublas-so-10-0-cannot-open-shared-object-file-no-such-file-or-directory">é—®é¢˜3-libcublas.so.10.0: cannot open shared object file: No such file or directory</h2>
<p>åœ¨å‘½ä»¤è¡Œæˆ–è€…pycharmä¸­import tensorflowæŠ¥é”™</p>
<h3 id="æŠ¥é”™-v3">æŠ¥é”™</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ImportError: libcublas.so.10.0: cannot open shared object file: No such file or directory</span><br><span class="line">Failed to load the native TensorFlow runtime.</span><br></pre></td></tr></table></figure>
<h3 id="é—®é¢˜åŸå› -v3">é—®é¢˜åŸå› </h3>
<p>æ²¡æœ‰é…ç½®CUDAç¯å¢ƒå˜é‡</p>
<h3 id="è§£å†³æ–¹æ³•-v3">è§£å†³æ–¹æ³•</h3>
<h4 id="å‘½ä»¤è¡Œä¸­">å‘½ä»¤è¡Œä¸­</h4>
<p>åœ¨.bashrcæ–‡ä»¶ä¸­åŠ å…¥ä¸‹åˆ—è¯­å¥ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export PATH=/usr/local/cuda/bin$&#123;PATH:+:$&#123;PATH&#125;&#125;</span><br><span class="line">export LD_LIBRARY_PATH=/usr/local/cuda/lib64:$&#123;LD_LIBRARY_PATH:+:$&#123;LD_LIBRARY_PATH&#125;&#125;</span><br><span class="line">export CUDA_HOME=/usr/local/cuda</span><br></pre></td></tr></table></figure>
<h4 id="pycharmä¸­">pycharmä¸­</h4>
<h5 id="æ–¹æ³•1-è¿™ç§æ–¹æ³•æˆ‘æ²¡æœ‰å®éªŒæˆåŠŸ-ä¸çŸ¥é“ä¸ºä»€ä¹ˆ">æ–¹æ³•1ï¼ˆè¿™ç§æ–¹æ³•æˆ‘æ²¡æœ‰å®éªŒæˆåŠŸï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼‰</h5>
<p>åœ¨å·¦ä¸Šè§’é€‰ä¸­<br>
File&gt;&gt;Settings&gt;&gt;Build.Execution,Deployment&gt;&gt;Console&gt;&gt;Python Console<br>
åœ¨Environmentä¸‹çš„Environment variablesä¸­æ·»åŠ <br>
LD_LIBRARY_PATH=/usr/local/cuda/lib64:${LD_LIBRARY_PATH:+:${LD_LIBRARY_PATH}}å³å¯ã€‚</p>
<h5 id="æ–¹æ³•2">æ–¹æ³•2</h5>
<p>ä¿®æ”¹å®Œ.bashrcæ–‡ä»¶åä»ç»ˆç«¯ä¸­è¿è¡Œpycharmã€‚</p>
<h2 id="é—®é¢˜4-dlerror-libcupti-so-10-0-cannot-open-shared-object-file-no-such-file-or-directory">é—®é¢˜4-dlerror: libcupti.so.10.0: cannot open shared object file: No such file or directory</h2>
<p>æ‰§è¡Œmnist_with_summaryä»£ç æ—¶æŠ¥é”™</p>
<h3 id="æŠ¥é”™-v4">æŠ¥é”™</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">I tensorflow/stream_executor/dso_loader.cc:142] Couldn&apos;t open CUDA library libcupti.so.10.0. LD_LIBRARY_PATH: /usr/local/cuda/lib64:</span><br><span class="line">2019-05-13 23:04:10.620149: F tensorflow/stream_executor/lib/statusor.cc:34] Attempting to fetch value instead of handling error Failed precondition: could not dlopen DSO: libcupti.so.10.0; dlerror: libcupti.so.10.0: cannot open shared object file: No such file or directory</span><br><span class="line">Aborted (core dumped)</span><br></pre></td></tr></table></figure>
<h3 id="é—®é¢˜é—®é¢˜é—®é¢˜é—®é¢˜é—®é¢˜é—®é¢˜é—®é¢˜é—®é¢˜é—®é¢˜åŸå› ">é—®é¢˜é—®é¢˜é—®é¢˜é—®é¢˜é—®é¢˜é—®é¢˜é—®é¢˜é—®é¢˜é—®é¢˜åŸå› </h3>
<p>libcupti.so.10.0åŒ…æ²¡æ‰¾åˆ°</p>
<h3 id="è§£å†³æ–¹æ³•-v4">è§£å†³æ–¹æ³•</h3>
<p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œæ‰¾åˆ°ç›¸å…³çš„ä¾èµ–åŒ…ï¼š<br>
~$:find /usr/local/cuda/ -name libcupti.so.10.0<br>
è¾“å‡ºå¦‚ä¸‹ï¼š</p>
<blockquote>
<p>/usr/local/cuda/extras/CUPTI/lib64/libcupti.so.10.0</p>
</blockquote>
<p>ç„¶åä¿®æ”¹~/.bashrcæ–‡ä»¶ä¸­ç›¸åº”çš„ç¯å¢ƒå˜é‡:<br>
export LD_LIBRARY_PATH=/usr/local/cuda/lib64:/usr/local/cuda/extras/CUPTI/lib64/ğŸ˜’{LD_LIBRARY_PATH:+:${LD_LIBRARY_PATH}}<br>
é‡æ–°è¿è¡Œå³å¯ã€‚</p>
<h2 id="é—®é¢˜5-unhashable-type-list">é—®é¢˜5-unhashable type: â€˜listâ€™</h2>
<p>sess.run(op, feed_dict={})ä¸­feedçš„æ•°æ®ä¸­åŒ…å«æœ‰listçš„æ—¶å€™ä¼šæŠ¥é”™ã€‚</p>
<h3 id="æŠ¥é”™-v5">æŠ¥é”™</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TypeError: unhashable type: &apos;list&apos;</span><br></pre></td></tr></table></figure>
<h3 id="é—®é¢˜åŸå› -v4">é—®é¢˜åŸå› </h3>
<p>feed_dictä¸­ä¸èƒ½çš„valueä¸èƒ½æ˜¯listã€‚</p>
<h3 id="è§£å†³æ–¹æ³•-v5">è§£å†³æ–¹æ³•</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">feed_dict = &#123;</span><br><span class="line">               placeholder : value </span><br><span class="line">                  <span class="keyword">for</span> placeholder, value <span class="keyword">in</span> zip(placeholder_list, inputs_list))</span><br><span class="line">            &#125;</span><br></pre></td></tr></table></figure>
<h3 id="ä»£ç ç¤ºä¾‹">ä»£ç ç¤ºä¾‹</h3>
<p><a href="https://github.com/mxxhcm/code/blob/master/tf/ops/tf_placeholder_list.py" target="_blank" rel="noopener">ä»£ç åœ°å€</a></p>
<h2 id="é—®é¢˜6-attempting-to-use-uninitialized-value">é—®é¢˜6-Attempting to use uninitialized value</h2>
<p>tf.Session()å’Œtf.InteractiveSession()æ··ç”¨é—®é¢˜ã€‚</p>
<h3 id="æŠ¥é”™-v6">æŠ¥é”™</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tensorflow.python.framework.errors_impl.FailedPreconditionError: Attempting to use uninitialized value prediction/l1/w</span><br><span class="line">	 [[&#123;&#123;node prediction/l1/w/read&#125;&#125;]]</span><br><span class="line">	 [[&#123;&#123;node prediction/LogSoftmax&#125;&#125;]]</span><br></pre></td></tr></table></figure>
<h3 id="é—®é¢˜åŸå› -v5">é—®é¢˜åŸå› </h3>
<p>å£°æ˜äº†å¦‚ä¸‹session:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sess = tf.Session()</span><br><span class="line">sess.run(tf.global_variables_initializer())</span><br></pre></td></tr></table></figure>
<p>åœ¨æ¥ä¸‹æ¥çš„ä»£ç ä¸­ï¼Œå› ä¸ºæˆ‘å£°æ˜çš„æ˜¯tf.Session()ï¼Œä½¿ç”¨äº†op.eval()å‡½æ•°ï¼Œè¿™ç§ç”¨æ³•æ˜¯tf.InteractiveSessionçš„ç”¨æ³•ï¼Œæ‰€ä»¥å°±ç›¸å½“äºæ²¡æœ‰åˆå§‹åŒ–ã€‚<br>
result = op.eval(feed_dict={})<br>
ç„¶åå°±æŠ¥äº†æœªåˆå§‹åŒ–çš„é”™è¯¯ã€‚<br>
æŠŠä»£ç æ”¹æˆï¼š<br>
result = sess.run([op], feeed_dct={})<br>
å³å¯ï¼Œå³ä¸Šä¸‹æ–‡ä½¿ç”¨çš„sessionåº”è¯¥ä¸€è‡´ã€‚</p>
<h3 id="è§£å†³æ–¹æ¡ˆ">è§£å†³æ–¹æ¡ˆ</h3>
<p>ä½¿ç”¨ç»Ÿä¸€çš„sessionç±»å‹</p>
<h2 id="é—®é¢˜7-setting-an-array-element-with-a-sequence">é—®é¢˜7-setting an array element with a sequence</h2>
<p>feed_dicté”®å€¼å¯¹ä¸­ä¸­å€¼å¿…é¡»æ˜¯numpy.ndarrayï¼Œä¸èƒ½æ˜¯å…¶ä»–ç±»å‹ã€‚</p>
<h3 id="æŠ¥é”™-v7">æŠ¥é”™</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">value error setting an array element with a sequence,</span><br></pre></td></tr></table></figure>
<h3 id="é—®é¢˜åŸå› -v6">é—®é¢˜åŸå› </h3>
<p>feed_dictä¸­key-valueçš„valueå¿…é¡»æ˜¯numpy.ndarrayï¼Œä¸èƒ½æ˜¯å…¶ä»–ç±»å‹ï¼Œå°¤å…¶ä¸èƒ½æ˜¯tf.Variableã€‚</p>
<h3 id="è§£å†³æ–¹æ³•-v6">è§£å†³æ–¹æ³•</h3>
<p>æ£€æŸ¥sess.run(op, feed_dict={})ä¸­çš„feed_dictï¼Œç¡®ä¿ä»–ä»¬çš„ç±»å‹ï¼Œä¸èƒ½æ˜¯tf.Variable()ç±»å‹çš„å¯¹è±¡ï¼Œéœ€è¦æ˜¯numpy.ndarrayã€‚</p>
<h2 id="é—®é¢˜8-è®¿é—®tf-variable-çš„å€¼">é—®é¢˜8-è®¿é—®tf.Variable()çš„å€¼</h2>
<p>å¦‚ä½•è·å¾—tf.Variable()å¯¹è±¡çš„å€¼</p>
<h3 id="è§£å†³æ–¹æ³•-v7">è§£å†³æ–¹æ³•</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line">x = tf.Varialbe([<span class="number">1.0</span>, <span class="number">2.0</span>])</span><br><span class="line">sess = tf.Session()</span><br><span class="line">sess.run(tf.global_variables_initializer())</span><br><span class="line">value = sess.run(x)</span><br></pre></td></tr></table></figure>
<p>æˆ–è€…</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">import tensorflow as tf</span><br><span class="line">x = tf.Varialbe([1.0, 2.0])</span><br><span class="line">sess = tf.InteractiveSession()</span><br><span class="line">sess.run(tf.global_variables_initializer())</span><br><span class="line">x.eval()</span><br></pre></td></tr></table></figure>
<h2 id="é—®é¢˜9-can-not-convert-a-ndarray-into-a-tensor-or-operation">é—®é¢˜9-Can not convert a ndarray into a Tensor or Operation</h2>
<h3 id="æŠ¥é”™-v8">æŠ¥é”™</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Can not convert a ndarray into a Tensor or Operation.</span><br></pre></td></tr></table></figure>
<h3 id="é—®é¢˜åŸå› -v7">é—®é¢˜åŸå› </h3>
<p>åŸå› æ˜¯sess.run()å‰åå‚æ•°åé‡äº†ï¼Œæ¯”å¦‚outputs = sess.run(outputs)ï¼Œoutputsæœ¬æ¥æ˜¯è‡ªå·±å®šä¹‰çš„ä¸€ä¸ªopï¼Œä½†æ˜¯sess.run(outputs)ä¹‹åoutputså°±æˆäº†ä¸€ä¸ªå˜é‡ï¼Œå°±æŠŠå®šä¹‰çš„outputs opè¦†ç›–äº†ã€‚</p>
<h3 id="è§£å†³æ–¹æ³•-v8">è§£å†³æ–¹æ³•</h3>
<p>æ¢ä¸ªå˜é‡åå­—å°±è¡Œ</p>
<h2 id="é—®é¢˜10-æœ¬åœ°ä½¿ç”¨gpu-serverçš„tensorboard">é—®é¢˜10-æœ¬åœ°ä½¿ç”¨gpu serverçš„tensorboard</h2>
<h3 id="é—®é¢˜æè¿°">é—®é¢˜æè¿°</h3>
<p>åœ¨gpu serverè·‘çš„å®éªŒç»“æœï¼Œç„¶åsummaryçš„è®°å½•ä¹Ÿåœ¨serverä¸Šï¼Œä½†æ˜¯åˆæ²¡åŠæ³•å¯è§†åŒ–ï¼Œåªå¥½åœ¨æœ¬åœ°å¯è§†åŒ–ã€‚</p>
<h3 id="è§£å†³æ–¹æ³•-v9">è§£å†³æ–¹æ³•</h3>
<p>ä½¿ç”¨sshè¿›è¡Œæ˜ å°„å¥½äº†ã€‚</p>
<h4 id="æœ¬æœºè®¾ç½®">æœ¬æœºè®¾ç½®</h4>
<p>~$:ssh -L 12345:10.1.114.50:6006 <a href="mailto:mxxmhh@127.0.0.1" target="_blank" rel="noopener">mxxmhh@127.0.0.1</a><br>
å°†æœ¬æœºçš„12345ç«¯å£æ˜ å°„åˆ°10.1.114.50çš„6006ç«¯å£ï¼Œä¸­é—´æœåŠ¡å™¨ä½¿ç”¨çš„æ˜¯æœ¬æœºã€‚<br>
æˆ–è€…å¯ä»¥ä½¿ç”¨10.1.114.50ä½œä¸ºä¸­é—´æœåŠ¡å™¨ã€‚<br>
~$:ssh -L 12345:10.1.114.50:6006 <a href="mailto:liuchi@10.1.114.50" target="_blank" rel="noopener">liuchi@10.1.114.50</a><br>
æˆ–è€…å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹æ³•ï¼š<br>
~$:ssh -L 12345:127.0.0.1:6006 <a href="mailto:liuchi@10.1.114.50" target="_blank" rel="noopener">liuchi@10.1.114.50</a><br>
ä»è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œå¯ä»¥çœ‹å‡º127.0.0.1è¿™ä¸ªipæ˜¯ä¸­é—´æœåŠ¡å™¨å¯ä»¥è®¿é—®çš„ipã€‚<br>
ä»¥ä¸Šä¸‰ç§æ–¹æ³•ä¸­ï¼Œ-Låçš„ç«¯å£å·12345å¯ä»¥éšæ„è®¾ç½®ï¼Œåªè¦ä¸å†²çªå³å¯ã€‚</p>
<h4 id="æœåŠ¡ç«¯è®¾ç½®">æœåŠ¡ç«¯è®¾ç½®</h4>
<p>ç„¶ååœ¨æœåŠ¡ç«¯è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š<br>
~$:tensorboard --logdir logdir -port 6006<br>
è¿™ä¸ªç«¯å£å·ä¹Ÿæ˜¯å¯ä»¥ä»»æ„è®¾ç½®çš„ï¼Œä¸å†²çªå³å¯ã€‚</p>
<h4 id="è¿è¡Œ">è¿è¡Œ</h4>
<p>ç„¶ååœ¨æœ¬æœºè®¿é—®<br>
<a href="https://127.0.0.1:12345" target="_blank" rel="noopener">https://127.0.0.1:12345</a>å³å¯ã€‚</p>
<h2 id="é—®é¢˜11-æ¯ä¸€æ­¥summaryä¸€ä¸ªlistçš„æ¯ä¸€ä¸ªå…ƒç´ ">é—®é¢˜11-æ¯ä¸€æ­¥summaryä¸€ä¸ªlistçš„æ¯ä¸€ä¸ªå…ƒç´ </h2>
<h3 id="é—®é¢˜åŸå› -v8">é—®é¢˜åŸå› </h3>
<p>æœ‰ä¸€ä¸ªtf listçš„placeholderï¼Œä½†æ˜¯æ¯ä¸€æ­¥åªèƒ½ç”Ÿæˆå…¶ä¸­çš„ä¸€ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥æ€ä¹ˆæ ·summaryä¸­å…¶ä¸­çš„æŸä¸€ä¸ªï¼Ÿ</p>
<h3 id="è§£å†³æ–¹æ³•-v10">è§£å†³æ–¹æ³•</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">import tensorflow as tf</span><br><span class="line">import numpy as np</span><br><span class="line"></span><br><span class="line">number = 3</span><br><span class="line">x_ph_list = []</span><br><span class="line">for i in range(number):</span><br><span class="line">    x_ph_list.append(tf.placeholder(tf.float32, shape=None))</span><br><span class="line"></span><br><span class="line">x_summary_list = []</span><br><span class="line">for i in range(number):</span><br><span class="line">    x_summary_list.append(tf.summary.scalar("x%s" % i, x_ph_list[i]))</span><br><span class="line"></span><br><span class="line">writer = tf.summary.FileWriter("./tf_summary/scalar_list_summary/sep")</span><br><span class="line">with tf.Session() as sess:</span><br><span class="line">    scope = 10</span><br><span class="line">    inputs = np.arange(scope*number)</span><br><span class="line">    inputs = inputs.reshape(scope, number)</span><br><span class="line">    # inputs = np.random.randn(scope, number)</span><br><span class="line">    for i in range(scope):</span><br><span class="line">        for j in range(number):</span><br><span class="line">            out, xj_s = sess.run([x_ph_list[j], x_summary_list[j]], feed_dict=&#123;x_ph_list[j]: inputs[i][j]&#125;)</span><br><span class="line">            writer.add_summary(xj_s, global_step=i)</span><br></pre></td></tr></table></figure>
<h2 id="é—®é¢˜12-for-value-in-summary-value-attributeerror-list-object-has-no-attribute-value">é—®é¢˜12- for value in summary.value: AttributeError: â€˜listâ€™ object has no attribute â€˜valueâ€™</h2>
<h3 id="é—®é¢˜æè¿°-v2">é—®é¢˜æè¿°</h3>
<p>writer.add_summaryæ—¶æŠ¥é”™</p>
<h3 id="æŠ¥é”™-v9">æŠ¥é”™</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">File &quot;/home/mxxmhh/anaconda3/lib/python3.7/site-packages/tensorflow/python/summary/writer/writer.py&quot;, line 127, in add_summary</span><br><span class="line">    for value in summary.value:</span><br><span class="line">AttributeError: &apos;list&apos; object has no attribute &apos;value&apos;</span><br></pre></td></tr></table></figure>
<h3 id="é—®é¢˜åŸå› -v9">é—®é¢˜åŸå› </h3>
<p>æ‰§è¡Œä»¥ä¸‹ä»£ç </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">s_ = sess.run([loss_summary], feed_dict=&#123;p_losses_ph: inputs1, q_losses_ph: inputs2&#125;)</span><br><span class="line">writer.add_summary(s_, global_step=<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<p>å› ä¸º[loss_summary]åŠ äº†æ–¹æ‹¬å·ï¼Œå°±æŠŠå®ƒå½“æˆäº†ä¸€ä¸ªlistã€‚ã€‚è¿”å›å€¼ä¹Ÿæ˜¯listï¼Œå°±æŠ¥é”™äº†</p>
<h3 id="è§£å†³æ–¹æ³•-v11">è§£å†³æ–¹æ³•</h3>
<ul>
<li>æ–¹æ³•1ï¼Œåœ¨ç­‰å·å·¦è¾¹åŠ ä¸€ä¸ªé€—å·ï¼Œå–å‡ºlistä¸­çš„å€¼</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s_, = sess.run([loss_summary], feed_dict=&#123;p_losses_ph: inputs1, q_losses_ph: inputs2&#125;)</span><br></pre></td></tr></table></figure>
<ul>
<li>æ–¹æ³•2ï¼Œå»æ‰loss_summaryå¤–é¢çš„ä¸­æ‹¬å·ã€‚</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s_ = sess.run(loss_summary, feed_dict=&#123;p_losses_ph: inputs1, q_losses_ph: inputs2&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="é—®é¢˜13-tf-get-default-session-always-returns-none-type">é—®é¢˜13- tf.get_default_session() always returns None type:</h2>
<h3 id="é—®é¢˜æè¿°-v3">é—®é¢˜æè¿°</h3>
<p>è°ƒç”¨tf.get_default_session()æ—¶ï¼Œè¿”å›çš„æ˜¯None</p>
<h3 id="æŠ¥é”™-v10">æŠ¥é”™</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">    tf.get_default_session().run(y)</span><br><span class="line">AttributeError: &apos;NoneType&apos; object has no attribute &apos;run&apos;</span><br></pre></td></tr></table></figure>
<h3 id="é—®é¢˜åŸå› -v10">é—®é¢˜åŸå› </h3>
<p>åªæœ‰åœ¨è®¾å®šdefault sessionä¹‹åï¼Œæ‰èƒ½ä½¿ç”¨tf.get_default_session()è·å¾—å½“å‰çš„é»˜è®¤sessionï¼Œåœ¨æˆ‘ä»¬å†™ä»£ç çš„æ—¶å€™ï¼Œä¸€èˆ¬ä¼šæŒ‰ç…§ä¸‹é¢çš„æ–¹å¼å†™ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line">    some operations</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure>
<p>è¿™ç§æƒ…å†µä¸‹å·²ç»æŠŠtf.Session()ç”Ÿæˆçš„sessionå½“åšäº†é»˜è®¤sessionï¼Œä½†æ˜¯å¦‚æœä»…ä»…ä½¿ç”¨ä»¥ä¸‹ä»£ç ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"></span><br><span class="line">sess =  tf.Session()</span><br><span class="line">sess.run(some operations)</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>æ˜¯æ²¡æœ‰æŠŠtf.Session()å½“æˆé»˜è®¤sessionçš„ï¼Œå³åªæœ‰åœ¨with blockå†…ï¼Œæ‰ä¼šå°†è¿™ä¸ªsessionå½“åšé»˜è®¤sessionã€‚</p>
<h3 id="è§£å†³æ–¹æ¡ˆ-v2">è§£å†³æ–¹æ¡ˆ</h3>
<h2 id="å‚è€ƒæ–‡çŒ®">å‚è€ƒæ–‡çŒ®</h2>
<p>1.<a href="https://github.com/tensorflow/tensorflow/issues/4842" target="_blank" rel="noopener">https://github.com/tensorflow/tensorflow/issues/4842</a><br>
2.<a href="https://github.com/tensorflow/tensorflow/issues/24496" target="_blank" rel="noopener">https://github.com/tensorflow/tensorflow/issues/24496</a><br>
3.<a href="https://github.com/tensorflow/tensorflow/issues/9530" target="_blank" rel="noopener">https://github.com/tensorflow/tensorflow/issues/9530</a><br>
4.<a href="https://stackoverflow.com/questions/51128427/how-to-feed-list-of-values-to-a-placeholder-list-in-tensorflow" target="_blank" rel="noopener">https://stackoverflow.com/questions/51128427/how-to-feed-list-of-values-to-a-placeholder-list-in-tensorflow</a><br>
5.<a href="https://github.com/tensorflow/tensorflow/issues/11897" target="_blank" rel="noopener">https://github.com/tensorflow/tensorflow/issues/11897</a><br>
6.<a href="https://stackoverflow.com/questions/34156639/tensorflow-python-valueerror-setting-an-array-element-with-a-sequence-in-t" target="_blank" rel="noopener">https://stackoverflow.com/questions/34156639/tensorflow-python-valueerror-setting-an-array-element-with-a-sequence-in-t</a><br>
7.<a href="https://stackoverflow.com/questions/33679382/how-do-i-get-the-current-value-of-a-variable" target="_blank" rel="noopener">https://stackoverflow.com/questions/33679382/how-do-i-get-the-current-value-of-a-variable</a><br>
8.<a href="https://blog.csdn.net/michael__corleone/article/details/79007425" target="_blank" rel="noopener">https://blog.csdn.net/michael__corleone/article/details/79007425</a><br>
9.<a href="https://stackoverflow.com/questions/47721792/tensorflow-tf-get-default-session-after-sess-tf-session-is-none" target="_blank" rel="noopener">https://stackoverflow.com/questions/47721792/tensorflow-tf-get-default-session-after-sess-tf-session-is-none</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mxxhcm.github.io/2019/03/04/lycheeå›¾åºŠæ­å»º/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="é©¬æ™“é‘«çˆ±é©¬èŸèŸ">
      <meta itemprop="description" content="è®°å½•ç¡•å£«ä¸‰å¹´è‡ªå·±çš„ç§¯ç´¯">
      <meta itemprop="image" content="/images/favicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mxxhcm's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/03/04/lycheeå›¾åºŠæ­å»º/" class="post-title-link" itemprop="http://mxxhcm.github.io/page/20/index.html">lycheeå›¾åºŠæ­å»º</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-03-04 21:03:55" itemprop="dateCreated datePublished" datetime="2019-03-04T21:03:55+08:00">2019-03-04</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2019-05-07 00:22:27" itemprop="dateModified" datetime="2019-05-07T00:22:27+08:00">2019-05-07</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/å·¥å…·/" itemprop="url" rel="index"><span itemprop="name">å·¥å…·</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="å®‰è£…">å®‰è£…</h2>
<h3 id="åŸºæœ¬è¦æ±‚">åŸºæœ¬è¦æ±‚</h3>
<ol>
<li>web server (Apache, nginx, etc)</li>
<li>A MySQL database (MariaDB also works)</li>
<li>PHP 7.1 or later with the following extensions: session, exif, mbstring, gd, mysqli, json, zip, and optionally, imagick<br>
~#:apt install nginx<br>
~#:apt install mysql-server<br>
~#:apt install php</li>
</ol>
<h3 id="é…ç½®nginx">é…ç½®nginx</h3>
<p>é‡æ–°å®‰è£…nginxå‡ºç°é—®é¢˜ï¼Œè§å‚è€ƒæ–‡çŒ®2ã€‚</p>
<h3 id="é…ç½®mysql">é…ç½®mysql</h3>
<p>~#:mysql -u root -p<br>
é»˜è®¤å¯†ç æ˜¯å›è½¦ï¼Ÿï¼Ÿï¼Ÿ<br>
ä¿®æ”¹å¯†ç <br>
~#:</p>
<h3 id="é…ç½®php">é…ç½®php</h3>
<h2 id="å‚è€ƒæ–‡çŒ®">å‚è€ƒæ–‡çŒ®</h2>
<p>1.<a href="https://juejin.im/post/5c1b869b6fb9a049ad770424" target="_blank" rel="noopener">https://juejin.im/post/5c1b869b6fb9a049ad770424</a><br>
2.<a href="https://segmentfault.com/a/1190000014027697?utm_source=tag-newest" target="_blank" rel="noopener">https://segmentfault.com/a/1190000014027697?utm_source=tag-newest</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mxxhcm.github.io/2019/03/04/linux-æŸ¥çœ‹python-packageçš„å®‰è£…ä½ç½®/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="é©¬æ™“é‘«çˆ±é©¬èŸèŸ">
      <meta itemprop="description" content="è®°å½•ç¡•å£«ä¸‰å¹´è‡ªå·±çš„ç§¯ç´¯">
      <meta itemprop="image" content="/images/favicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mxxhcm's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/03/04/linux-æŸ¥çœ‹python-packageçš„å®‰è£…ä½ç½®/" class="post-title-link" itemprop="http://mxxhcm.github.io/page/20/index.html">linux-æŸ¥çœ‹python packageçš„å®‰è£…ä½ç½®</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-03-04 14:52:16" itemprop="dateCreated datePublished" datetime="2019-03-04T14:52:16+08:00">2019-03-04</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2019-05-12 12:03:26" itemprop="dateModified" datetime="2019-05-12T12:03:26+08:00">2019-05-12</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>ä½¿ç”¨pip install package-nameä¹‹åï¼Œä¸çŸ¥é“è¯¥åŒ…å­˜åœ¨äº†å“ªä¸ªè·¯å¾„ä¸‹ã€‚<br>
å¯ä»¥å†æ¬¡ä½¿ç”¨pip install package-nameï¼Œè¿™æ—¶å€™å°±ä¼šç»™å‡ºè¯¥åŒ…å­˜æ”¾åœ¨å“ªä¸ªè·¯å¾„ä¸‹ã€‚</p>
<h2 id="å‚è€ƒæ–‡çŒ®">å‚è€ƒæ–‡çŒ®</h2>
<ol>
<li><a href="https://blog.csdn.net/weixin_41712059/article/details/82940516" target="_blank" rel="noopener">https://blog.csdn.net/weixin_41712059/article/details/82940516</a></li>
</ol>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mxxhcm.github.io/2019/03/04/linux-shadowsocksæœåŠ¡ç«¯ä»¥åŠå®¢æˆ·ç«¯é…ç½®/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="é©¬æ™“é‘«çˆ±é©¬èŸèŸ">
      <meta itemprop="description" content="è®°å½•ç¡•å£«ä¸‰å¹´è‡ªå·±çš„ç§¯ç´¯">
      <meta itemprop="image" content="/images/favicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mxxhcm's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/03/04/linux-shadowsocksæœåŠ¡ç«¯ä»¥åŠå®¢æˆ·ç«¯é…ç½®/" class="post-title-link" itemprop="http://mxxhcm.github.io/page/20/index.html">shadowsocksæœåŠ¡ç«¯ä»¥åŠå®¢æˆ·ç«¯é…ç½®</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-03-04 13:03:57" itemprop="dateCreated datePublished" datetime="2019-03-04T13:03:57+08:00">2019-03-04</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2019-06-19 11:39:56" itemprop="dateModified" datetime="2019-06-19T11:39:56+08:00">2019-06-19</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="æœåŠ¡å™¨ç«¯é…ç½®">æœåŠ¡å™¨ç«¯é…ç½®</h2>
<p>é¦–å…ˆéœ€è¦æœ‰ä¸€ä¸ªVPSè´¦å·ï¼Œvultr,digitalocean,æ¬ç“¦å·¥ç­‰ç­‰éƒ½è¡Œã€‚<br>
é¦–å…ˆåˆ°ä¸‹é¢ä¸¤ä¸ªç½‘ç«™æ£€æµ‹22ç«¯å£æ˜¯å¦å¼€å¯ï¼Œå¦‚æœå…³é—­çš„è¯ï¼Œvpsæ¢ä¸ªipæŠŠã€‚ã€‚<br>
<a href="http://tool.chinaz.com/port" target="_blank" rel="noopener">http://tool.chinaz.com/port</a><br>
<a href="https://www.yougetsignal.com/tools/open-ports/" target="_blank" rel="noopener">https://www.yougetsignal.com/tools/open-ports/</a></p>
<h3 id="å¯ç”¨bbråŠ é€Ÿ">å¯ç”¨BBRåŠ é€Ÿ</h3>
<p>~#:apt update<br>
~#:apt upgrade<br>
~#:echo â€œnet.core.default_qdisc=fqâ€ &gt;&gt; /etc/sysctl.conf<br>
~#:echo â€œnet.ipv4.tcp_congestion_control=bbrâ€ &gt;&gt; /etc/sysctl.conf<br>
~#:sysctl -p<br>
ä¸Šè¿°å‘½ä»¤å°±å®Œæˆäº†BBRåŠ é€Ÿï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤éªŒè¯ï¼š<br>
~#:lsmod |grep bbr<br>
çœ‹åˆ°è¾“å‡ºåŒ…å«tcp_bbrå°±è¯´æ˜å·²ç»æˆåŠŸäº†ã€‚</p>
<h3 id="æ­å»ºshadowsocks-server">æ­å»ºshadowsocks server</h3>
<h4 id="å®‰è£…shadowsocks-server">å®‰è£…shadowsocks server</h4>
<p>~#:apt install python-pip<br>
~#:pip install shadowsocks<br>
éœ€è¦è¯´ä¸€ä¸‹çš„æ˜¯ï¼Œshadowsocksç›®å‰è¿˜ä¸æ”¯æŒpython3.5åŠä»¥ä¸Šç‰ˆæœ¬ï¼Œä¸Šæ¬¡æˆ‘æŠŠ/usr/bin/pythonæŒ‡å‘äº†python3.6ï¼Œå°±æ˜¯ç³»ç»Ÿé»˜è®¤çš„pythonæŒ‡å‘äº†python3.6ï¼Œç„¶åå°±ggäº†ã€‚ä¸€å®šè¦ä½¿ç”¨Python 2.6,2.7,3.3,3.4ä¸­çš„ä¸€ä¸ªç‰ˆæœ¬æ‰èƒ½ä½¿ç”¨ã€‚ã€‚</p>
<h4 id="åˆ›å»ºshadowsocksé…ç½®æ–‡ä»¶">åˆ›å»ºshadowsocksé…ç½®æ–‡ä»¶</h4>
<p>å¦‚æœä½ çš„VPSæ”¯æŒipv6çš„è¯ï¼Œé‚£ä¹ˆå¯ä»¥å¼€å¤šè¿›ç¨‹åˆ†åˆ«è¿è¡Œipv4å’Œipv6çš„shadowsocks serverã€‚æœ¬åœ°åªæœ‰ipv4çš„è¯ï¼Œå¯ä»¥ç”¨æœ¬åœ°ipv4è®¿é—®ipv6ï¼Œä»è€Œè®¿é—®byrç­‰ç½‘ç«™ï¼Œä½†æ˜¯å…­ç»´ç©ºé—´å¯¹æ­¤åšäº†å±è”½ã€‚å¦‚æœæœ¬åœ°æœ‰ipv6çš„è¯ï¼Œè¿˜å¯ä»¥ç”¨æœ¬åœ°çš„ipv6è®¿é—®ipv6å®ç°æ ¡å›­ç½‘ä¸èµ°ipv4æµé‡ã€‚</p>
<h5 id="ipv4é…ç½®">ipv4é…ç½®</h5>
<p>~#:vim /etc/shadowsocks_v4.json<br>
é…ç½®æ–‡ä»¶å¦‚ä¸‹</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="attr">"server"</span>:<span class="string">"0.0.0.0"</span>,</span><br><span class="line"><span class="attr">"server_port"</span>:<span class="string">"ä½ çš„ç«¯å£å·"</span>,</span><br><span class="line"><span class="attr">"local_address"</span>:<span class="string">"127.0.0.1"</span>,</span><br><span class="line"><span class="attr">"local_port"</span>:<span class="number">1080</span>,</span><br><span class="line"><span class="attr">"password"</span>:<span class="string">"ä½ çš„å¯†ç "</span>,</span><br><span class="line"><span class="attr">"timeout"</span>:<span class="number">600</span>,</span><br><span class="line"><span class="attr">"method"</span>:<span class="string">"aes-256-cfb"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="ipv6é…ç½®">ipv6é…ç½®</h5>
<p>~#:vim /etc/shadowsocks_v6.json<br>
é…ç½®æ–‡ä»¶å¦‚ä¸‹</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="attr">"server"</span>:<span class="string">"::"</span>,</span><br><span class="line"><span class="attr">"server_port"</span>:<span class="string">"ä½ çš„ç«¯å£å·"</span>,</span><br><span class="line"><span class="attr">"local_address"</span>:<span class="string">"127.0.0.1"</span>,</span><br><span class="line"><span class="attr">"local_port"</span>:<span class="number">1080</span>,</span><br><span class="line"><span class="attr">"password"</span>:<span class="string">"ä½ çš„å¯†ç "</span>,</span><br><span class="line"><span class="attr">"timeout"</span>:<span class="number">600</span>,</span><br><span class="line"><span class="attr">"method"</span>:<span class="string">"aes-256-cfb"</span></span><br><span class="line">&#125;</span><br><span class="line">``` </span><br><span class="line">æ³¨æ„è¿™ä¸¤ä¸ªæ–‡ä»¶çš„server_portä¸€å®šè¦ä¸åŒï¼Œä»¥åŠåŒå¼•å·å¿…é¡»æ˜¯è‹±æ–‡å¼•å·ã€‚</span><br><span class="line">##### 1.2.2.3.æ‰‹åŠ¨è¿è¡Œshadowsocks server</span><br><span class="line">~#:ssserver -c /etc/shadowsock_v4.json -d start --pid-file ss1.pid</span><br><span class="line">~#:ssserver -c /etc/shadowsock_v6.json -d start --pid-file ss2.pid</span><br><span class="line">æ³¨æ„è¿™é‡Œè¦ç»™ä¸¤æ¡å‘½ä»¤åˆ†é…ä¸åŒçš„è¿›ç¨‹å·ã€‚</span><br><span class="line"></span><br><span class="line">### è®¾ç½®shadowsocks serverå¼€æœºè‡ªå¯</span><br><span class="line">å¦‚æœé‡å¯æœåŠ¡å™¨çš„è¯ï¼Œå°±éœ€è¦é‡æ–°æ‰‹åŠ¨æ‰§è¡Œä¸Šè¿°å‘½ä»¤ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒå†™æˆå¼€æœºè‡ªå¯è„šæœ¬ã€‚</span><br><span class="line">~#:vim /etc/init.d/shadowsocks_v4</span><br><span class="line">å†…å®¹å¦‚ä¸‹ï¼š</span><br><span class="line">``` shell</span><br><span class="line">#!/bin/sh</span><br><span class="line">### BEGIN INIT INFO</span><br><span class="line"># Provides:          apache2</span><br><span class="line"># Required-Start:    $local_fs $remote_fs $network $syslog</span><br><span class="line"># Required-Stop:     $local_fs $remote_fs $network $syslog</span><br><span class="line"># Default-Start:     2 3 4 5</span><br><span class="line"># Default-Stop:      0 1 6</span><br><span class="line"># Short-Description: apache2 service</span><br><span class="line"># Description:       apache2 service daemon</span><br><span class="line">### END INIT INFO</span><br><span class="line">start()&#123;</span><br><span class="line">  ssserver -c /etc/shadowsocks_v4.json -d start --pid-file ss2.pid</span><br><span class="line">&#125;</span><br><span class="line">stop()&#123;</span><br><span class="line">  ssserver -c /etc/shadowsocks_v4.json -d stop --pid-file ss2.pid</span><br><span class="line">&#125;</span><br><span class="line">case "$1" in</span><br><span class="line">start)</span><br><span class="line">  start</span><br><span class="line">  ;;</span><br><span class="line">stop)</span><br><span class="line">  stop</span><br><span class="line">  ;;</span><br><span class="line">restart)</span><br><span class="line">  stop</span><br><span class="line">  start</span><br><span class="line">  ;;</span><br><span class="line">*)</span><br><span class="line">  echo "Uasage: $0 &#123;start|reload|stop&#125;$"</span><br><span class="line">  exit 1</span><br><span class="line">  ;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>
<p>~#:vim /etc/init.d/shadowsocks_v6<br>
å†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span>!/bin/sh</span><br><span class="line"><span class="meta">#</span>## BEGIN INIT INFO</span><br><span class="line"><span class="meta">#</span> Provides:          apache2</span><br><span class="line"><span class="meta">#</span> Required-Start:    $local_fs $remote_fs $network $syslog</span><br><span class="line"><span class="meta">#</span> Required-Stop:     $local_fs $remote_fs $network $syslog</span><br><span class="line"><span class="meta">#</span> Default-Start:     2 3 4 5</span><br><span class="line"><span class="meta">#</span> Default-Stop:      0 1 6</span><br><span class="line"><span class="meta">#</span> Short-Description: apache2 service</span><br><span class="line"><span class="meta">#</span> Description:       apache2 service daemon</span><br><span class="line"><span class="meta">#</span>## END INIT INFO</span><br><span class="line">start()&#123;</span><br><span class="line">  ssserver -c /etc/shadowsocks_v6.json -d start --pid-file ss1.pid</span><br><span class="line">&#125;</span><br><span class="line">stop()&#123;</span><br><span class="line">  ssserver -c /etc/shadowsocks_v6.json -d stop --pid-file ss1.pid</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">case "$1" in</span><br><span class="line">start)</span><br><span class="line">  start</span><br><span class="line">  ;;</span><br><span class="line">stop)</span><br><span class="line">  stop</span><br><span class="line">  ;;</span><br><span class="line">restart)</span><br><span class="line">  stop</span><br><span class="line">  start</span><br><span class="line">  ;;</span><br><span class="line">*)</span><br><span class="line">  echo "Uasage: $0 &#123;start|reload|stop&#125;$"</span><br><span class="line">  exit 1</span><br><span class="line">  ;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>
<p>ç„¶åæ‰§è¡Œä¸‹åˆ—å‘½ä»¤å³å¯ï¼š<br>
~#:chmod a+x /etc/init.d/shadowsocks_v4<br>
~#:chmod a+x /etc/init.d/shadowsocks_v6<br>
~#:update-rc.d shadowsocks_v4 defaults<br>
~#:update-rc.d shadowsocks_v6 defaults</p>
<p>è‡³æ­¤ï¼ŒæœåŠ¡å™¨ç«¯é…ç½®å®Œæˆã€‚</p>
<h2 id="æœåŠ¡ç«¯è‡ªåŠ¨é…ç½®è„šæœ¬">æœåŠ¡ç«¯è‡ªåŠ¨é…ç½®è„šæœ¬</h2>
<p><a href="https://github.com/mxxhcm/code/tree/master/shell/ss" target="_blank" rel="noopener">åœ°å€</a><br>
é¦–å…ˆå°†è¯¥æ–‡ä»¶ä¸­æ‰€æœ‰æ–‡ä»¶å¤åˆ¶åˆ°vpsä¸Šï¼Œç„¶åæ‰§è¡Œ<br>
~#:sh install_ss_server.sh<br>
å³å¯</p>
<h3 id="è¡¥å……è¯´æ˜">è¡¥å……è¯´æ˜</h3>
<p>è¯¥æ–‡ä»¶å¤¹å…±åŒ…å«äº”ä¸ªæ–‡ä»¶<br>
shadowsocks_v4.jsonä¸ºipv4 ssé…ç½®æ–‡ä»¶ï¼Œå¯æ ¹æ®è‡ªå·±çš„éœ€è¦ä¿®æ”¹ç«¯å£å·å’Œå¯†ç <br>
shadowsocks_v6.jsonä¸ºipv6 ssé…ç½®æ–‡ä»¶ï¼Œå¯æ ¹æ®è‡ªå·±çš„éœ€è¦ä¿®æ”¹ç«¯å£å·å’Œå¯†ç <br>
shadowsocks_v4ä¸ºipv4 ssè‡ªå¯åŠ¨æ–‡ä»¶ï¼Œæ— éœ€ä¿®æ”¹<br>
shadowsocks_v6ä¸ºipv6 ssè‡ªå¯åŠ¨æ–‡ä»¶ï¼Œæ— éœ€ä¿®æ”¹<br>
install_ss_server.shä¸ºå®‰è£…è„šæœ¬ï¼Œè¯¥è„šæœ¬åŒæ—¶é…ç½®ipv4å’Œipv6 ss serverã€‚å¯æ ¹æ®è‡ªå·±éœ€è¦è‡ªè¡Œé€‰æ‹©ã€‚</p>
<h2 id="å®¢æˆ·ç«¯é…ç½®">å®¢æˆ·ç«¯é…ç½®</h2>
<h3 id="windowså®¢æˆ·ç«¯é…ç½®">Windowså®¢æˆ·ç«¯é…ç½®</h3>
<h4 id="å®‰è£…shadowsockå®¢æˆ·ç«¯">å®‰è£…shadowsockå®¢æˆ·ç«¯</h4>
<p>åˆ°è¯¥ç½‘å€ <a href="https://github.com/shadowsocks/shadowsocks-windows/releases" target="_blank" rel="noopener">https://github.com/shadowsocks/shadowsocks-windows/releases</a> ä¸‹è½½ç›¸åº”çš„windowså®¢æˆ·ç«¯ç¨‹åºã€‚<br>
ç„¶åé…ç½®æœåŠ¡å™¨å³å¯ï½</p>
<h3 id="linuxå®¢æˆ·ç«¯é…ç½®">Linuxå®¢æˆ·ç«¯é…ç½®</h3>
<h4 id="å®‰è£…shadowsocksç¨‹åº">å®‰è£…shadowsocksç¨‹åº</h4>
<p>~$:sudo pip install shadowsocks</p>
<h4 id="è¿è¡Œshadowsockså®¢æˆ·ç«¯ç¨‹åº">è¿è¡Œshadowsockså®¢æˆ·ç«¯ç¨‹åº</h4>
<p>~$:sudo vim /etc/shadowsocks.json<br>
å¡«å…¥ä»¥ä¸‹é…ç½®æ–‡ä»¶<br>
{<br>
â€œserverâ€:â€œå¡«ä¸Šè‡ªå·±çš„shadowsocks server ipåœ°å€â€,<br>
â€œserver_portâ€:â€œ8888â€,//å¡«ä¸Šè‡ªå·±çš„shadowsocks server ç«¯å£&quot;<br>
â€œlocal_portâ€:1080,<br>
â€œpasswordâ€:â€œmxxhcm150929â€,<br>
â€œtimeoutâ€:600,<br>
â€œmethodâ€:â€œaes-256-cfbâ€<br>
}</p>
<p>æ¥ä¸‹æ¥å¯ä»¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤è¿è¡Œshadowsockså®¢æˆ·ç«¯ï¼š<br>
~$:sudo sslocal -c /etc/shadowsocks.json<br>
ç„¶åæŠ¥é”™ï¼š</p>
<blockquote>
<p>INFO: loading config from /etc/shadowsocks.json<br>
2019-03-04 14:37:49 INFO     loading libcrypto from libcrypto.so.1.1<br>
Traceback (most recent call last):<br>
File â€œ/usr/local/bin/sslocalâ€, line 11, in <module><br>
load_entry_point(â€˜shadowsocks==2.8.2â€™, â€˜console_scriptsâ€™, â€˜sslocalâ€™)()<br>
File â€œ/usr/local/lib/python2.7/dist-packages/shadowsocks/local.pyâ€, line 39, in main<br>
config = shell.get_config(True)<br>
File â€œ/usr/local/lib/python2.7/dist-packages/shadowsocks/shell.pyâ€, line 262, in get_config<br>
check_config(config, is_local)<br>
File â€œ/usr/local/lib/python2.7/dist-packages/shadowsocks/shell.pyâ€, line 124, in check_config<br>
encrypt.try_cipher(config[â€˜passwordâ€™], config[â€˜methodâ€™])<br>
File â€œ/usr/local/lib/python2.7/dist-packages/shadowsocks/encrypt.pyâ€, line 44, in try_cipher<br>
Encryptor(key, method)<br>
File â€œ/usr/local/lib/python2.7/dist-packages/shadowsocks/encrypt.pyâ€, line 83, in <strong>init</strong><br>
random_string(self._method_info[1]))<br>
File â€œ/usr/local/lib/python2.7/dist-packages/shadowsocks/encrypt.pyâ€, line 109, in get_cipher<br>
return m[2](method, key, iv, op)<br>
File â€œ/usr/local/lib/python2.7/dist-packages/shadowsocks/crypto/openssl.pyâ€, line 76, in <strong>init</strong><br>
load_openssl()<br>
File â€œ/usr/local/lib/python2.7/dist-packages/shadowsocks/crypto/openssl.pyâ€, line 52, in load_openssl<br>
libcrypto.EVP_CIPHER_CTX_cleanup.argtypes = (c_void_p,)<br>
File â€œ/usr/lib/python2.7/ctypes/<strong>init</strong>.pyâ€, line 379, in <strong>getattr</strong><br>
func = self.<strong>getitem</strong>(name)<br>
File â€œ/usr/lib/python2.7/ctypes/<strong>init</strong>.pyâ€, line 384, in <strong>getitem</strong><br>
func = self._FuncPtr((name_or_ordinal, self))<br>
AttributeError: /usr/lib/x86_64-linux-gnu/libcrypto.so.1.1: undefined symbol: EVP_CIPHER_CTX_cleanup</module></p>
</blockquote>
<p>æŒ‰ç…§å‚è€ƒæ–‡çŒ®4çš„åšæ³•ï¼Œæ˜¯åœ¨openssl 1.1.0ç‰ˆæœ¬ä¸­æ”¾å¼ƒäº†EVP_CIPHER_CTX_cleanupå‡½æ•°</p>
<blockquote>
<p>EVP_CIPHER_CTX was made opaque in OpenSSL 1.1.0. As a result, EVP_CIPHER_CTX_reset() appeared and EVP_CIPHER_CTX_cleanup() disappeared.<br>
EVP_CIPHER_CTX_init() remains as an alias for EVP_CIPHER_CTX_reset().</p>
</blockquote>
<p>å°†opensslåº“ä¸­çš„EVP_CIPHER_CTX_cleanupæ”¹ä¸ºEVP_CIPHER_CTX_resetå³å¯ã€‚<br>
å†æ¬¡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼ŒæŸ¥çœ‹shadowsockså®‰è£…ä½ç½®<br>
~#:pip install shadowsocks<br>
Requirement already satisfied: shadowsocks in /usr/local/lib/python2.7/dist-packages<br>
~#:cd /usr/local/lib/python2.7/dist-packages/shadowsocks<br>
~#:vim crypto/openssl.py<br>
æœç´¢cleanupï¼Œå°†å…¶æ›¿æ¢ä¸ºreset<br>
å…·ä½“ä½ç½®åœ¨ç¬¬52è¡Œlibcrypto.EVP_CIPHER_CTX_cleanup.argtypes = (c_void_p,)å’Œç¬¬111è¡Œlibcrypto.EVP_CIPHER_CTX_cleanup(self._ctx)</p>
<h4 id="æ‰‹åŠ¨è¿è¡Œåå°æŒ‚èµ·">æ‰‹åŠ¨è¿è¡Œåå°æŒ‚èµ·</h4>
<p>å°†æ‰€æœ‰çš„logé‡å®šå‘åˆ°~/.log/sslocal.logæ–‡ä»¶ä¸­<br>
~$:mkdir ~/.log<br>
~$:touch ~/.log/ss-local.log<br>
~$:nohup sslocal -c /etc/shadowsocks_v6.json &lt;/dev/null &amp;&gt;&gt;~/.log/ss-local.log &amp;</p>
<h4 id="å¼€æœºè‡ªå¯shadowsocks-client">å¼€æœºè‡ªå¯shadowsocks client</h4>
<p>ä½†æ˜¯è¿™æ ·å­çš„è¯ï¼Œæ¯æ¬¡å¼€æœºéƒ½è¦é‡æ–°è¿è¡Œä¸Šè¿°å‘½ä»¤ï¼Œå¤ªéº»çƒ¦äº†ã€‚å¯ä»¥å†™ä¸ªå¼€æœºè‡ªå¯è„šæœ¬ã€‚æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š<br>
~$:sudo vim /etc/init.d/shadowsocks<br>
å†…å®¹ä¸ºä»¥ä¸‹shellè„šæœ¬</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span>!/bin/sh</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span>## BEGIN INIT INFO</span><br><span class="line"><span class="meta">#</span> Provides:          shadowsocks local</span><br><span class="line"><span class="meta">#</span> Required-Start:    $local_fs $remote_fs $network $syslog</span><br><span class="line"><span class="meta">#</span> Required-Stop:     $local_fs $remote_fs $network $syslog</span><br><span class="line"><span class="meta">#</span> Default-Start:     2 3 4 5</span><br><span class="line"><span class="meta">#</span> Default-Stop:      0 1 6</span><br><span class="line"><span class="meta">#</span> Short-Description: shadowsocks service</span><br><span class="line"><span class="meta">#</span> Description:       shadowsocks service daemon</span><br><span class="line"><span class="meta">#</span>## END INIT INFO</span><br><span class="line">start()&#123;</span><br><span class="line">ã€€ã€€  sslocal -c /etc/shadowsocks.json -d start</span><br><span class="line">&#125;</span><br><span class="line">stop()&#123;</span><br><span class="line">ã€€ã€€  sslocal -c /etc/shadowsocks.json -d stop</span><br><span class="line">&#125;</span><br><span class="line">case â€œ$1â€ in</span><br><span class="line">start)</span><br><span class="line">ã€€ã€€ã€€start</span><br><span class="line">ã€€ã€€ã€€;;</span><br><span class="line">stop)</span><br><span class="line">ã€€ã€€ã€€stop</span><br><span class="line">ã€€ã€€ã€€;;</span><br><span class="line">reload)</span><br><span class="line">ã€€ã€€ã€€stop</span><br><span class="line">ã€€ã€€ã€€start</span><br><span class="line">ã€€ã€€ã€€;;</span><br><span class="line">\*)</span><br><span class="line">ã€€ã€€ã€€echo â€œUsage: $0 &#123;start|reload|stop&#125;â€</span><br><span class="line">ã€€ã€€ã€€exit 1</span><br><span class="line">ã€€ã€€ã€€;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>
<p>ç„¶åæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å³å¯ï¼š<br>
~$:sudo chomod a+x /etc/init.d/shadowsocks<br>
~$:sudo update_rc.d shadowsocks defaults<br>
ä¸Šè¿°å‘½ä»¤æ‰§è¡Œå®Œæˆä»¥åï¼Œè¿›è¡Œæµ‹è¯•<br>
~$:sudo service shadosowcks start</p>
<h4 id="é…ç½®ä»£ç†">é…ç½®ä»£ç†</h4>
<p>ä¸Šä¸€æ­¥çš„ç›®çš„æ˜¯å»ºç«‹äº†shadowsocksæœåŠ¡çš„æœ¬åœ°å®¢æˆ·ç«¯ï¼Œsocks5æµé‡ä¼šèµ°è¯¥é€šé“ï¼Œä½†æ˜¯æµè§ˆå™¨çš„ç½‘é¡µçš„æµé‡æ˜¯httpsçš„ï¼Œæˆ‘ä»¬éœ€è¦é…ç½®ç›¸åº”çš„ä»£ç†ï¼Œå°†httpsæµé‡è½¬æ¢ä¸ºsocks5æµé‡ï¼Œèµ°sså®¢æˆ·ç«¯åˆ°è¾¾ssæœåŠ¡ç«¯ã€‚å½“ç„¶ï¼Œä¹Ÿå¯ä»¥æŠŠå…¶ä»–å„ç§æµé‡ï¼Œå¦‚tcp,udpç­‰å„ç§æµé‡éƒ½è½¬æ¢ä¸ºsocks5æµé‡ï¼Œè¿™ä¸ªå¯ä»¥é€šè¿‡å…¨å±€ä»£ç†å®ç°ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æ·»åŠ ç‰¹å®šçš„ä»£ç†è§„åˆ™å®ç°ã€‚</p>
<h5 id="é…ç½®å…¨å±€ä»£ç†">é…ç½®å…¨å±€ä»£ç†</h5>
<p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæ·»åŠ ubuntu socks5ç³»ç»Ÿä»£ç†ï¼š</p>
<p>ç„¶åå°±å¯ä»¥æˆåŠŸä¸Šç½‘äº†ã€‚</p>
<h5 id="ä½¿ç”¨switchyomegaé…ç½®chromeä»£ç†">ä½¿ç”¨SwitchyOmegaé…ç½®chromeä»£ç†</h5>
<p>é¦–å…ˆåˆ° <a href="https://github.com/FelisCatus/SwitchyOmega/releases" target="_blank" rel="noopener">https://github.com/FelisCatus/SwitchyOmega/releases</a> ä¸‹è½½SyitchyOmega.crxã€‚ç„¶ååœ¨chromeçš„åœ°å€æ è¾“å…¥chrome://extensionsï¼Œå°†åˆšæ‰ä¸‹è½½çš„æ’ä»¶æ‹–è¿›å»ã€‚<br>
ç„¶ååœ¨æµè§ˆå™¨å³ä¸Šè§’å°±æœ‰äº†è¿™ä¸ªæ’ä»¶ï¼Œæ¥ä¸‹æ¥é…ç½®æ’ä»¶ã€‚å¦‚ä¸‹å›¾ï¼š<br>
<img src="https:" alt="mxx"><br>
ç›´æ¥é…ç½®proxyï¼Œæ·»åŠ å¦‚å›¾æ‰€ç¤ºçš„è§„åˆ™ï¼Œè¿™æ ·chromeæ‰“å¼€çš„æ‰€æœ‰ç½‘ç«™éƒ½æ˜¯èµ°ä»£ç†çš„ã€‚</p>
<h4 id="ä½¿ç”¨privoxyè®©terminalèµ°socks5">ä½¿ç”¨privoxyè®©terminalèµ°socks5</h4>
<p>~$:sudo apt install privoxy<br>
~$:sudo vim /etc/privoxy/config<br>
å–æ¶ˆä¸‹åˆ—è¡Œçš„æ³¨é‡Šï¼Œæˆ–è€…æ·»åŠ ç›¸åº”æ¡ç›®<br>
forward-socks5 / 127.0.0.1:1080 . # SOCKS5ä»£ç†åœ°å€<br>
listen-address 127.0.0.1:8118     # HTTPä»£ç†åœ°å€<br>
forward 10.*.*.*/ .               # å†…ç½‘åœ°å€ä¸èµ°ä»£ç†<br>
forward .abc.com/ .             # æŒ‡å®šåŸŸåä¸èµ°ä»£ç†<br>
é‡å¯privoxyæœåŠ¡<br>
~$:sudo service privoxy restart<br>
åœ¨bashrcä¸­æ·»åŠ å¦‚ä¸‹ç¯å¢ƒå˜é‡<br>
export http_proxy=&quot;<a href="http://127.0.0.1:8118" target="_blank" rel="noopener">http://127.0.0.1:8118</a>&quot;<br>
export https_proxy=â€œ<a href="http://127.0.0.1:8118" target="_blank" rel="noopener">http://127.0.0.1:8118</a>â€</p>
<p>~$:source ~/.bashrc<br>
~$:curl.gs</p>
<h2 id="å‚è€ƒæ–‡çŒ®">å‚è€ƒæ–‡çŒ®</h2>
<ol>
<li><a href="http://godjose.com/2017/06/14/new-article/" target="_blank" rel="noopener">http://godjose.com/2017/06/14/new-article/</a></li>
<li><a href="https://www.polarxiong.com/archives/%E6%90%AD%E5%BB%BAipv6-VPN-%E8%AE%A9ipv4%E4%B8%8Aipv6-%E4%B8%8B%E8%BD%BD%E9%80%9F%E5%BA%A6%E6%8F%90%E5%8D%87%E5%88%B0100M.html" target="_blank" rel="noopener">https://www.polarxiong.com/archives/æ­å»ºipv6-VPN-è®©ipv4ä¸Šipv6-ä¸‹è½½é€Ÿåº¦æå‡åˆ°100M.html</a></li>
<li><a href="https://blog.csdn.net/li1914309758/article/details/86510127" target="_blank" rel="noopener">https://blog.csdn.net/li1914309758/article/details/86510127</a></li>
<li><a href="https://blog.csdn.net/blackfrog_unique/article/details/60320737" target="_blank" rel="noopener">https://blog.csdn.net/blackfrog_unique/article/details/60320737</a></li>
<li><a href="https://blog.csdn.net/qq_31851531/article/details/78410146" target="_blank" rel="noopener">https://blog.csdn.net/qq_31851531/article/details/78410146</a></li>
</ol>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mxxhcm.github.io/2019/03/02/dqn/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="é©¬æ™“é‘«çˆ±é©¬èŸèŸ">
      <meta itemprop="description" content="è®°å½•ç¡•å£«ä¸‰å¹´è‡ªå·±çš„ç§¯ç´¯">
      <meta itemprop="image" content="/images/favicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mxxhcm's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/03/02/dqn/" class="post-title-link" itemprop="http://mxxhcm.github.io/page/20/index.html">DQN</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-03-02 19:29:35" itemprop="dateCreated datePublished" datetime="2019-03-02T19:29:35+08:00">2019-03-02</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2019-10-24 14:37:58" itemprop="dateModified" datetime="2019-10-24T14:37:58+08:00">2019-10-24</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/å¼ºåŒ–å­¦ä¹ /" itemprop="url" rel="index"><span itemprop="name">å¼ºåŒ–å­¦ä¹ </span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="èƒŒæ™¯">èƒŒæ™¯</h2>
<ol>
<li>Atari 2600æ˜¯ä¸€ä¸ªRL benchmarkï¼Œæœ‰2600ä¸ªæ¸¸æˆï¼Œæ¯ä¸ªagentä¼šå¾—åˆ°ä¸€ä¸ªå›¾åƒè¾“å…¥(60Hzçš„210 x 160 RGBè§†é¢‘)ã€‚æœ¬æ–‡çš„ç›®æ ‡æ˜¯è®¾è®¡ä¸€ä¸ªNNæ¶æ„å°½å¯èƒ½å­¦ä¼šæ›´å¤šæ¸¸æˆï¼Œç½‘ç»œçš„è¾“å…¥åªæœ‰è§†é¢‘ä¿¡æ¯ï¼Œrewardå’Œterminalä¿¡å·ä»¥åŠå¯èƒ½é‡‡å–çš„actionï¼Œå’Œäººç±»ç©æ¸¸æˆæ—¶å¾—åˆ°çš„ä¿¡æ¯æ˜¯ä¸€æ ·çš„ã€‚</li>
<li>Agentä¸Atariæ¨¡æ‹Ÿå™¨ä¸æ–­äº¤äº’ï¼Œagentä¸èƒ½è§‚æµ‹åˆ°æ¨¡æ‹Ÿå™¨çš„å†…éƒ¨çŠ¶æ€ï¼Œåªèƒ½å¾—åˆ°å½“å‰å±å¹•ä¿¡æ¯çš„ä¸€ä¸ªå›¾ç‰‡ã€‚è¿™ä¸ªtaskå¯ä»¥è®¤ä¸ºæ˜¯éƒ¨åˆ†å¯è§‚æµ‹çš„ï¼Œå› ä¸ºä»…ä»…ä»å½“å‰çš„å±å¹•å›¾åƒ$x_t$ä¸Šæ˜¯ä¸èƒ½å®Œå…¨ç†è§£æ•´ä¸ªæ¸¸æˆçŠ¶å†µçš„ã€‚æ‰€æœ‰çš„åºåˆ—éƒ½è®¤ä¸ºåœ¨æœ‰é™æ­¥éª¤å†…æ˜¯ä¼šç»“æŸçš„ã€‚</li>
<li>æ³¨æ„agentå½“å‰çš„å¾—åˆ†å–å†³äºæ•´ä¸ªsequenceçš„actionå’Œobservationã€‚ä¸€ä¸ªactionçš„feedbackå¯èƒ½ç­‰åˆ°å¥½å‡ åƒä¸ªtimestepsä¹‹åæ‰èƒ½å¾—åˆ°ã€‚</li>
<li>agentçš„ç›®æ ‡æœ€å¤§åŒ–ç´¯è®¡rewardã€‚å®šä¹‰$t$æ—¶åˆ»çš„å›æŠ¥returnä¸º$R_t = \sum^T_{tâ€™=t} \gamma^{tâ€™-t}r_{tâ€™}$ï¼Œå…¶ä¸­$\gamma$æ˜¯æŠ˜æ‰£å› å­ï¼Œ$T$æ˜¯æ¸¸æˆç»ˆæ­¢çš„æ—¶é—´æ­¥ã€‚</li>
<li>å®šä¹‰æœ€ä¼˜çš„åŠ¨ä½œå€¼å‡½æ•°$Q^{*}(s,a)$æ˜¯éµå¾ªæœ€ä¼˜ç­–ç•¥åœ¨çŠ¶æ€$s$å¤„é‡‡å–åŠ¨ä½œ$a$èƒ½è·å¾—çš„æœ€å¤§çš„æœŸæœ›å›æŠ¥ï¼Œ$Q^{*}(s,a) = \max_{\pi}E[R_t|s_t=s,a_t=a,\pi]$ã€‚</li>
<li>æœ€ä¼˜çš„åŠ¨ä½œå€¼å‡½æ•°éµå¾ªBellman optimal equationã€‚å¦‚æœåœ¨ä¸‹ä¸ªæ—¶é—´æ­¥çš„çŠ¶æ€$sâ€™$å¤„ï¼Œå¯¹äºæ‰€æœ‰å¯èƒ½çš„$aâ€™$ï¼Œ$Q^{*}(sâ€™,aâ€™)$çš„æœ€ä¼˜å€¼æ˜¯å·²çŸ¥çš„ï¼ˆè¿™é‡Œå°±æ˜¯å¯¹äºæ¯ä¸€ä¸ª$aâ€™$ï¼Œéƒ½ä¼šæœ‰ä¸€ä¸ªæœ€ä¼˜çš„$Q(sâ€™,aâ€™)$ï¼Œæœ€ä¼˜çš„ç­–ç•¥å°±æ˜¯é€‰æ‹©æœ€å¤§åŒ–$r+Q^{*}(sâ€™,aâ€™)$çš„åŠ¨ä½œ$aâ€™$ï¼š<br>
$$Q^{*}(s,a) = E_{s\sim E}[r+ \gamma \max_{aâ€™} Q^{*}(sâ€™,aâ€™)|s,a], \tag{1}$$<br>
å¼ºåŒ–å­¦ä¹ çš„ä¸€ä¸ªæ€è·¯å°±æ˜¯ä½¿ç”¨Bellman optimal equationæ›´æ–°åŠ¨ä½œå€¼å‡½æ•°ï¼Œ$Q_{i+1}(s,a) = E[r + \gamma Q_i(sâ€™,aâ€™)|s,a]$ï¼Œå½“$i\rightarrow \infty$æ—¶ï¼Œ$Q_i \rightarrow Q^{*}$ã€‚</li>
<li>ä¸Šè¿°ä¾‹å­æ˜¯state-action pairå¾ˆå°‘çš„æƒ…å†µï¼Œå½“æœ‰æ— ç©·å¤šä¸ªçš„æ—¶å€™ï¼Œæ˜¯æ— æ³•ç²¾ç¡®è®¡ç®—çš„ã€‚è¿™æ—¶å€™å¯ä»¥é‡‡ç”¨å‡½æ•°æ¥ä¼°è®¡åŠ¨ä½œå€¼å‡½æ•°ï¼Œ$Q(s,a;\theta) \approx Q^{*}(s,a)$ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œé€šå¸¸é‡‡ç”¨çº¿æ€§å‡½æ•°è¿›è¡Œä¼°è®¡ï¼Œå½“ç„¶å¯ä»¥é‡‡ç”¨éçº¿æ€§çš„å‡½æ•°ï¼Œå¦‚ç¥ç»ç½‘ç»œç­‰ç­‰ã€‚è¿™é‡Œé‡‡ç”¨çš„æ˜¯ç¥ç»ç½‘ç»œï¼Œç”¨$\theta$è¡¨ç¤ºç½‘ç»œçš„å‚æ•°ï¼Œè¿™ä¸ªç½‘ç»œå«åšQç½‘ç»œï¼ŒQç½‘ç»œé€šè¿‡æœ€å°åŒ–ä¸‹åˆ—lossè¿›è¡Œè®­ç»ƒï¼š<br>
$$L_i(\theta_i) = E_{s,a\sim \rho(\cdot)}\left[(y_i - Q(s,a;\theta_i))^2\right]\tag{2}$$<br>
å…¶ä¸­$y_i = E_{sâ€™\sim E}[r+\gamma \max_{aâ€™}Q(sâ€™,aâ€™;\theta_{i-1})]$æ˜¯ç¬¬$i$æ¬¡è¿­ä»£çš„targetå€¼ï¼Œå…¶ä¸­$\rho(s,a)$æ˜¯$(s,a)$æœä»çš„æ¦‚ç‡åˆ†å¸ƒã€‚</li>
<li>æ³¨æ„åœ¨ä¼˜åŒ–$L_i(\theta_i)$æ—¶ï¼Œä¸Šä¸€æ¬¡è¿­ä»£çš„$\theta_{i-1}$æ˜¯ä¸å˜çš„ï¼Œtargetå–å†³äºç½‘ç»œå‚æ•°ï¼Œå’Œç›‘ç£å­¦ä¹ ä½œå¯¹æ¯”ï¼Œç›‘ç£å­¦ä¹ çš„targetå’Œç½‘ç»œå‚æ•°æ— å…³ã€‚</li>
<li>å¯¹Losså‡½æ•°è¿›è¡Œæ±‚å¯¼ï¼Œå¾—åˆ°ä¸‹åˆ—çš„gradientä¿¡æ¯ï¼š<br>
$$\nabla_{\theta_i}L_i(\theta_i) = E_{s,a\sim \rho(\cdot),sâ€™\sim E}\left[(r+\gamma \max_{aâ€™}Q(sâ€™,aâ€™;\theta_{i-1})-Q(s,a;\theta_i))\nabla_{\theta_i}Q(s,a;\theta_i)\right]\tag{3}$$<br>
é€šè¿‡SGDä¼˜åŒ–losså‡½æ•°ã€‚å¦‚æœæƒé‡æ˜¯æ¯éš”å‡ ä¸ªtimestepè¿›è¡Œæ›´æ–°ï¼Œå¹¶ä¸”ç”¨ä»åˆ†å¸ƒ$\rho$å’Œç¯å¢ƒ$E$ä¸­é‡‡æ ·å¾—åˆ°çš„æ ·æœ¬å–ä»£æœŸæœ›ï¼Œå°±å¯ä»¥å¾—åˆ°ç†Ÿæ‚‰çš„Q-learningç®—æ³•[2]ã€‚(è¿™ä¸ªå…·ä½“ä¸ºä»€ä¹ˆæ˜¯è¿™æ ·ï¼Œæˆ‘ä¹Ÿä¸æ¸…æ¥šï¼Œå¯ä»¥çœ‹å‚è€ƒæ–‡çŒ®2)</li>
<li>ä»€ä¹ˆæ˜¯on-polciyç®—æ³•ï¼š</li>
</ol>
<blockquote>
<p>On-policy methods attempt to evaluate or improve the policy that is used to make decisions, whereasÂ  off-policy methods evaluate or improve a policy different from that used to generate the data.</p>
</blockquote>
<p>Sarsaå’ŒQ-learningçš„åŒºåˆ«åœ¨äºæ›´æ–°Qå€¼æ—¶çš„target policyå’Œbehaviour policyæ˜¯å¦ç›¸åŒã€‚æˆ‘è§‰çš„æ˜¯æ˜¯policy evaluationå’Œvalue iterationçš„åŒºåˆ«ï¼Œpolicy evaluationä½¿ç”¨åŠ¨æ€è§„åˆ’ç®—æ³•æ›´æ–°$V(s)$ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰æ”¹å˜è¡Œä¸ºç­–ç•¥ï¼Œæ›´æ–°è¿­ä»£ç”¨çš„æ•°æ®éƒ½æ˜¯åˆ©ç”¨ä¹‹å‰çš„è¡Œä¸ºç­–ç•¥ç”Ÿæˆçš„ã€‚è€Œå€¼è¿­ä»£æ˜¯policy evaluation+policy improvementï¼Œæ¯ä¸€æ­¥éƒ½ç”¨è´ªå¿ƒç­–ç•¥é€‰æ‹©å‡ºæœ€å¤§çš„$a$æ›´æ–°$V(s)$ï¼Œtarget policyï¼ˆgreedyï¼‰å’Œbehaviour policyï¼ˆ$\varepsilon$-greedyï¼‰æ˜¯ä¸åŒçš„ã€‚</p>
<h2 id="å¼ºåŒ–å­¦ä¹ éœ€è¦è§£å†³çš„é—®é¢˜">å¼ºåŒ–å­¦ä¹ éœ€è¦è§£å†³çš„é—®é¢˜</h2>
<ol>
<li>å¤§é‡æœ‰æ ‡è®°çš„è®­ç»ƒæ•°æ®ã€‚</li>
<li>delayed-rewardã€‚è¿™ä¸ªdelayå­˜åœ¨äºactionå’Œrewardä¹‹é—´ï¼Œå¯ä»¥è¾¾åˆ°å‡ åƒä¸ªtimestepsé‚£ä¹ˆè¿œï¼Œå’Œsupervised learnignä¸­è¾“å…¥å’Œè¾“å…¥ä¹‹é—´ç›´æ¥çš„å…³ç³»ç›¸æ¯”è¦å¤æ‚çš„å¤šã€‚</li>
<li>å¤§å¤šæ•°æ·±åº¦å­¦ä¹ ç®—æ³•å‡è®¾æ ·æœ¬ä¹‹é—´éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œç„¶è€Œå¼ºåŒ–å­¦ä¹ çš„ä¸€ä¸ªsequence(åºåˆ—)é€šå¸¸æ˜¯é«˜åº¦ç›¸å…³çš„ã€‚</li>
<li>å¼ºåŒ–å­¦ä¹ ç®—æ³•å­¦ä¹ åˆ°çš„policyå˜åŒ–æ—¶ï¼Œæ•°æ®æœä»çš„åˆ†å¸ƒé€šå¸¸ä¼šæ”¹å˜ï¼Œç„¶è€Œæ·±åº¦å­¦ä¹ é€šå¸¸å‡è®¾æ•°æ®æœä»ä¸€ä¸ªå›ºå®šçš„åˆ†å¸ƒã€‚</li>
</ol>
<h2 id="dqn">DQN</h2>
<p>è®ºæ–‡åç§°<a href="https://arxiv.org/pdf/1312.5602.pdf" target="_blank" rel="noopener">Playing Atari with Deep Reinforcement Learning</a></p>
<h3 id="æ¦‚è¿°">æ¦‚è¿°</h3>
<p>DQNç®—æ³•ä½¿ç”¨å·ç§¯ç¥ç»ç½‘ç»œä»£æ›¿Q-learningä¸­tabularçš„å€¼å‡½æ•°ï¼Œå¹¶æå‡ºäº†å‡ ä¸ªtrickä¿ƒè¿›æ”¶æ•›ã€‚DQN agnetçš„è¾“å…¥æ˜¯åŸå§‹çš„å›¾ç‰‡ï¼Œè¾“å‡ºæ˜¯å›¾ç‰‡è¡¨ç¤ºçš„stateå¯èƒ½é‡‡å–çš„actionçš„$Q$å€¼ã€‚</p>
<ol>
<li>dqnæ˜¯Model-Freeçš„ï¼Œå®ƒç›´æ¥ä»ç¯å¢ƒ$E$ä¸­é‡‡æ ·ï¼Œå¹¶æ²¡æœ‰æ˜¾å¼çš„å¯¹ç¯å¢ƒè¿›è¡Œå»ºæ¨¡ã€‚</li>
<li>dqnæ˜¯ä¸€ä¸ªonlineçš„æ–¹æ³•ï¼Œå³è®­ç»ƒæ•°æ®ä¸æ–­å¢åŠ ï¼›offlineæ˜¯è®­ç»ƒæ•°æ®å›ºå®šã€‚</li>
<li>dqnæ˜¯ä¸€ä¸ªoff-policyç®—æ³•ï¼Œtarget policy æ˜¯greedy policyï¼Œbehaviour policyæ˜¯$\varepsilon$-greedy policyï¼Œtarget policyå’Œgreedy policyç­–ç•¥ä¸åŒã€‚</li>
<li>DQNæ˜¯ä¸æ”¶æ•›çš„ã€‚</li>
</ol>
<h3 id="è§£å†³æ–¹æ¡ˆ">è§£å†³æ–¹æ¡ˆ</h3>
<h4 id="experience-replay">Experience replay</h4>
<ol>
<li>DQNä½¿ç”¨äº†experience replayï¼Œå°†å¤šä¸ªepisodesä¸­çš„ç»éªŒå­˜å‚¨åˆ°ä¸€ä¸ªå¤§å°ä¸º$N$çš„replay bufferä¸­ã€‚åœ¨æ›´æ–°$Q$å€¼çš„æ—¶å€™ï¼Œä»replay bufferä¸­è¿›è¡Œé‡‡æ ·æ›´æ–°ã€‚behaviour policyæ˜¯$\varepsilon$-greedyç­–ç•¥ï¼Œä¿æŒæ¢ç´¢ã€‚target policyæ˜¯$\varepsilon$ greedy ç®—æ³•ï¼Œå› ä¸ºreplay bufferä¸­å­˜æ”¾çš„éƒ½æ˜¯behaviour policyç”Ÿæˆçš„experienceï¼Œæ‰€ä»¥æ˜¯off-policyç®—æ³•ã€‚<br>
é‡‡ç”¨experience replayçš„DQNå’ŒQ-learningç®—æ³•ç›¸æ¯”æœ‰ä¸‰ä¸ªå¥½å¤„ï¼Œç¬¬ä¸€ä¸ªæ˜¯æ¯ä¸€ä¸ªexperienceå¯ä»¥å¤šæ¬¡ç”¨æ¥æ›´æ–°å‚æ•°ï¼Œæé«˜äº†æ•°æ®è®­ç»ƒæ•ˆç‡ï¼›ç¬¬äºŒä¸ªæ˜¯ç›´æ¥ä»è¿ç»­çš„æ ·æœ¬ä¸­è¿›è¡Œå­¦ä¹ æ˜¯ä½æ•ˆçš„ï¼Œå› ä¸ºæ ·æœ¬ä¹‹é—´å­˜åœ¨å¼ºå…³è”æ€§ã€‚ç¬¬ä¸‰ä¸ªæ˜¯on-policyçš„å­¦ä¹ ä¸­ï¼Œå½“å‰çš„å‚æ•°å†³å®šä¸‹ä¸€æ¬¡é‡‡æ ·çš„æ ·æœ¬ï¼Œå°±å¯èƒ½ä½¿å­¦ä¹ å‡ºæ¥çš„ç»“æœå‘ç”Ÿåç§»ã€‚</li>
<li>replay bufferä¸­åªå­˜å‚¨æœ€è¿‘Nä¸ªexperienceã€‚</li>
</ol>
<h4 id="data-preprocess">Data preprocess</h4>
<ol>
<li>åŸå§‹å›¾åƒæ˜¯$210\times 160$çš„RGBå›¾åƒï¼Œé¢„å¤„ç†é¦–å…ˆå°†å®ƒå˜ä¸ºç°åº¦å›¾ï¼Œå¹¶è¿›è¡Œä¸‹é‡‡æ ·å¾—åˆ°ä¸€ä¸ª$110\times 84$çš„å›¾åƒï¼Œç„¶åä»è¿™ä¸ªå›¾åƒä¸­æˆªå–ä¸€ä¸ª$84\times 84$çš„å›¾åƒã€‚</li>
<li>ä½œè€…ä½¿ç”¨é¢„å¤„ç†å‡½æ•°$\phi$å¤„ç†è¿ç»­å››å¼ çš„å›¾åƒè€Œä¸æ˜¯ä¸€å¼ ï¼Œç„¶åå°†è¿™ä¸ªé¢„å¤„ç†åçš„ç»“æœè¾“å…¥$Q$å‡½æ•°ã€‚</li>
<li>é¢„å¤„ç†å‡½æ•°$\phi$æ˜¯ä¸€ä¸ªå·ç§¯ç¥ç»ç½‘ç»œï¼Œè¾“å…¥æ˜¯$84\times 84\times 4$çš„å›¾åƒçŸ©é˜µï¼Œç»è¿‡$16$ä¸ªstrideä¸º$4$çš„$8\times 8$filterï¼Œç»è¿‡reluæ¿€æ´»å‡½æ•°ï¼Œå†ç»è¿‡$32$ä¸ªstrideä¸º$2$çš„$4\times 4$filterï¼Œç»è¿‡reluæ¿€æ´»å‡½æ•°ï¼Œæœ€åæ¥ä¸€ä¸ª256ä¸ªå•å…ƒçš„å…¨è¿æ¥å±‚ã€‚è¾“å‡ºå±‚çš„å¤§å°æ ¹æ®ä¸åŒæ¸¸æˆçš„åŠ¨ä½œä¸ªæ•°å†³å®šã€‚</li>
<li>$Q$ç½‘ç»œçš„è¾“å…¥æ˜¯é¢„å¤„ç†åçš„å›¾åƒstateï¼Œè¾“å‡ºæ˜¯æ‰€æœ‰å½“å‰stateå¯èƒ½é‡‡å–çš„actionçš„$Q$å€¼ã€‚</li>
</ol>
<h3 id="ç½‘ç»œç»“æ„">ç½‘ç»œç»“æ„</h3>
<p>è¾“å…¥ï¼š[batch_size, 84, 84, 4]<br>
ç¬¬ä¸€ä¸ªéšè—å±‚ï¼š16ä¸ªæ­¥é•¿ä¸º$4$çš„$8\times 8$çš„filters<br>
ç¬¬äºŒä¸ªéšè—å±‚ï¼š32ä¸ªæ­¥é•¿ä¸º$2$çš„$4\times 4$çš„filters<br>
å…¨è¿æ¥å±‚ï¼š256ä¸ªunits<br>
è¾“å‡ºå±‚ï¼šsoftmax</p>
<h3 id="ç®—æ³•">ç®—æ³•</h3>
<p>ç®—æ³• 1 Deep Q-learning with Experience Replay<br>
Initialize replay memory D to capacity N<br>
Initialize action-value function Q with random weights<br>
for episode = $1, M$ do<br>
$\ \ \ \ \ \ \ \ $Initialize sequence $s_1 = {x_1}$ and preprocessed sequenced $\phi_1 = \phi(s_1)$<br>
$\ \ \ \ \ \ \ \ $for $t = 1,T$ do<br>
$\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ $With probability $\varepsilon$ select a random action $a_t$<br>
$\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ $otherwise select $a_t = \max_a Q^{âˆ—}(\phi(s_t), a; Î¸)$<br>
$\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ $Execute action $a_t$ in emulator and observe reward $r_t$ and image $x_{t+1}$<br>
$\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ $Set $s_{t+1} = s_t, a_t, x_{t+1}$ and preprocess $\phi_{t+1} = \phi(s_{t+1})$<br>
$\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ $Store transition $(\phi_t, a_t, r_t, \phi_{t+1})$ in D<br>
$\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ $Sample random minibatch of transitions $(\phi_j, a_j, r_j, \phi_{j+1})$ from D<br>
$\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ $Set $y_j = \begin{cases}r_j&amp;\ \ \ \ for\ terminal\ \phi_{j+1}\\r_j+\gamma \max_{aâ€™}Q(\phi_{j+1},aâ€™|\theta)&amp;\ \ \ \ for\ non-terminal\ \phi_{j+1}\end{cases}$<br>
$\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ $Perform a gradient descent step on $(y_j âˆ’ Q(\phi_j, a_j|Î¸))^2$<br>
$\ \ \ \ \ \ \ \ $end for<br>
end for</p>
<h3 id="experiments">Experiments</h3>
<h4 id="datasets">Datasets</h4>
<p>ä¸ƒä¸ªAtari 2600 games: B.Rider, Breakout, Enduro, Pong, Q bert, Seaquest, S.Invadersã€‚<br>
åœ¨å…­ä¸ªæ¸¸æˆä¸ŠDQNæ˜¯SOTAï¼Œåœ¨ä¸‰ä¸ªæ¸¸æˆä¸ŠDQNçš„è¡¨ç°è¶…è¿‡äº†äººç±»ã€‚</p>
<h4 id="settings">Settings</h4>
<ol>
<li>ä¸åŒæ¸¸æˆçš„rewardå˜åŒ–å¾ˆå¤§ï¼Œè¿™é‡ŒæŠŠæ­£çš„rewardå…¨éƒ¨è®¾ç½®ä¸º$1$ï¼ŒæŠŠè´Ÿçš„rewardå…¨éƒ¨è®¾ç½®ä¸º$-1$ï¼Œrewardä¸º$0$çš„ä¿æŒä¸å˜ã€‚è¿™æ ·å­åœ¨ä¸åŒæ¸¸æˆä¸­ä¹Ÿå¯ä»¥ç»Ÿä¸€å­¦ä¹ ç‡ã€‚</li>
<li>é‡‡ç”¨RMSPropä¼˜åŒ–ç®—æ³•ï¼Œbatch sizeä¸º$32$ï¼Œbehaviour policyé‡‡ç”¨çš„æ˜¯$\varepsilon$-greedyï¼Œåœ¨å‰$100$ä¸‡æ­¥å†…ï¼Œ$\varepsilon$ä»$1$å˜åˆ°$0.1$ï¼Œæ¥ä¸‹æ¥ä¿æŒä¸å˜ã€‚</li>
<li>ä½¿ç”¨äº†fram-skipæŠ€æœ¯ï¼Œæ¯éš”$k$æ­¥ï¼Œagentæ‰é€‰æ‹©ä¸€ä¸ªactionï¼Œåœ¨ä¸­é—´çš„$k-1$æ­¥ä¸­ï¼Œä¿æŒåŸæ¥çš„actionä¸å˜ã€‚è¿™é‡Œé€‰æ‹©äº†$k=4$ï¼Œæœ‰çš„æ¸¸æˆè®¾ç½®çš„ä¸º$k=3$ã€‚</li>
<li>è¶…å‚æ•°è®¾ç½®æ²¡æœ‰è¯´</li>
</ol>
<h4 id="metrics">Metrics</h4>
<p>æ¯ä¸ªagentè®­ç»ƒ$10$ millionså¸§ï¼Œreplay buffer sizeæ˜¯$1$ millionã€‚æ¯ä¸ªepochè¿›è¡Œ$50000$ä¸ªminibatch weight updatesæˆ–è€…å¤§çº¦$30$åˆ†é’Ÿçš„è®­ç»ƒï¼ˆè¿™é‡Œæœ‰äº›ä¸ç†è§£ï¼‰ã€‚ç„¶åä½¿ç”¨$\epsilon$-greedy($\epsilon=0.05$) evaluation $10000$ä¸ªstepsã€‚</p>
<h5 id="average-total-reward">average total reward</h5>
<p>ç¬¬ä¸€ä¸ªmetricæ˜¯åœ¨ä¸€ä¸ªepisodeæˆ–è€…ä¸€æ¬¡æ¸¸æˆå†…total rewardçš„å¹³å‡å€¼ã€‚è¿™ä¸ªmetricå¸¦æœ‰å¾ˆå¤§å™ªéŸ³ï¼Œå› ä¸ºpolicyæƒå€¼ä¸€ä¸ªå¾ˆå°çš„æ”¹å˜å¯èƒ½å°±ä¼šå¯¹policyè®¿é—®statesçš„åˆ†å¸ƒé€ æˆå¾ˆå¤§çš„å½±å“ã€‚</p>
<h5 id="action-value-function">action value function</h5>
<p>ç¬¬äºŒä¸ªmetricæ˜¯ä¼°è®¡çš„action-value functionï¼Œè¿™é‡Œä½œè€…çš„åšæ³•æ˜¯åœ¨è®­ç»ƒå¼€å§‹å‰ä½¿ç”¨random policyæ”¶é›†ä¸€ä¸ªå›ºå®šçš„states setï¼Œç„¶åtrackè¿™ä¸ªsetä¸­statesæœ€å¤§é¢„æµ‹$Q$å€¼çš„å¹³å‡ã€‚å°½ç®¡ç¼ºä¹ç†è®ºæ”¶æ•›ä¿è¯ï¼ŒDQNçœ‹èµ·æ¥è¿˜ä¸é”™ã€‚</p>
<h4 id="baselines">Baselines</h4>
<ol>
<li>Sarsa</li>
<li>Contingency</li>
<li>DQN</li>
<li>Human</li>
</ol>
<h3 id="ä»£ç ">ä»£ç </h3>
<p><a href="https://github.com/devsisters/DQN-tensorflow" target="_blank" rel="noopener">https://github.com/devsisters/DQN-tensorflow</a></p>
<h2 id="nature-dqn">Nature DQN</h2>
<h3 id="éçº¿æ€§æ‹Ÿåˆå‡½æ•°ä¸æ”¶æ•›çš„åŸå› ">éçº¿æ€§æ‹Ÿåˆå‡½æ•°ä¸æ”¶æ•›çš„åŸå› </h3>
<ol>
<li>åºåˆ—ä¸­çŠ¶æ€çš„é«˜åº¦ç›¸å…³æ€§ã€‚</li>
<li>$Q$å€¼çš„ä¸€ç‚¹æ›´æ–°å°±ä¼šå¯¹policyæ”¹å˜é€ æˆå¾ˆå¤§çš„å½±å“ï¼Œä»è€Œæ”¹å˜æ•°æ®çš„åˆ†å¸ƒã€‚</li>
<li>å¾…ä¼˜åŒ–çš„$Q$å€¼å’Œtarget value(ç›®æ ‡Qå€¼)ä¹‹é—´çš„å…³ç³»ï¼Œæ¯æ¬¡ä¼˜åŒ–æ—¶çš„ç›®æ ‡Qå€¼éƒ½æ˜¯å›ºå®šä¸Šæ¬¡çš„å‚æ•°å¾—æ¥çš„ï¼Œä¼˜åŒ–ç›®æ ‡éšç€ä¼˜åŒ–è¿‡ç¨‹ä¸€ç›´åœ¨å˜ã€‚<br>
å‰ä¸¤ä¸ªé—®é¢˜æ˜¯é€šè¿‡DQNä¸­æå‡ºçš„replay bufferè§£å†³çš„ï¼Œç¬¬ä¸‰ä¸ªé—®é¢˜æ˜¯Natura DQNä¸­è§£å†³çš„ï¼Œåœ¨ä¸€å®šæ—¶é—´æ­¥å†…ï¼Œå›ºå®štarget networkå‚æ•°ï¼Œæ›´æ–°å¾…networkçš„å‚æ•°ï¼Œç„¶åæ¯éš”å›ºå®šæ­¥æ•°å°†networkçš„å‚æ•°æ‹·è´ç»™target networkã€‚</li>
</ol>
<blockquote>
<p>This instability has several causes: the correlations present in the sequence of observations, the fact that small updates to Q may significantly change the policy and therefore change the data distribution, and the correlations between the action-values (Q) and the target values $r+\gamma \max_{aâ€™}Q(sâ€™,aâ€™)$.<br>
We address these instabilities with a novel variant of Q-learning, which uses two key ideas. First, we used a biologically inspired mechanism termed experience replay that randomizes over the data, thereby removing correlations in the observation sequence and smoothing over changes in the data distribution. Second, we used an iterative update that adjusts the action-values (Q) towards target values that are only periodically updated, thereby reducing correlations with the target.</p>
</blockquote>
<h3 id="è§£å†³æ–¹æ¡ˆ-v2">è§£å†³æ–¹æ¡ˆ</h3>
<ol>
<li>é¢„å¤„ç†çš„ç»“æ„å˜äº†,CNNçš„å±‚æ•°å¢åŠ äº†ä¸€å±‚ï¼Œ</li>
<li>åŠ äº†target networkï¼Œ</li>
<li>å°†erroré™åˆ¶åœ¨$[-1,1]$ä¹‹é—´ã€‚</li>
</ol>
<blockquote>
<p>clip the error term from the update $r + \gamma \max_{aâ€™} Q(sâ€™,aâ€™;\theta_i^{-} - Q(s,a;\theta_i)$ to be between $-1$ and $1$. Because the absolute value loss function $|x|$ has a derivative of $-1$ for all negative values of $x$ and a derivative of $1$ for all positive values of $x$, clipping the squared error to be between $-1$ and $1$ corresponds to using an absolute value loss function for errors outside of the $(-1,1)$ interval.</p>
</blockquote>
<h3 id="æ¡†æ¶å’Œç½‘ç»œç»“æ„">æ¡†æ¶å’Œç½‘ç»œç»“æ„</h3>
<h4 id="æ¡†æ¶">æ¡†æ¶</h4>
<p>Nature-DNQçš„æ¡†æ¶å¦‚ä¸‹æ‰€ç¤º<br>
<img src="/2019/03/02/dqn/nature-dqn.png" alt="ndqn"></p>
<h4 id="ç½‘ç»œç»“æ„-v2">ç½‘ç»œç»“æ„</h4>
<p>è¾“å…¥:[batch_size, 84, 84, 4]<br>
ä¸‰ä¸ªå·ç§¯å±‚ï¼Œä¸¤ä¸ªå…¨è¿æ¥å±‚ï¼ˆåŒ…å«è¾“å‡ºå±‚ï¼‰<br>
ç¬¬ä¸€ä¸ªéšè—å±‚ï¼š$32$ä¸ªæ­¥é•¿ä¸º$4$çš„$8\times 8$filtersï¼Œä»¥åŠä¸€ä¸ªrelu<br>
ç¬¬äºŒä¸ªéšè—å±‚ï¼š$64$ä¸ªæ­¥é•¿ä¸º$2$çš„$4\times 4$filtersï¼Œä»¥åŠä¸€ä¸ªrelu<br>
ç¬¬ä¸‰ä¸ªéšè—å±‚ï¼š$64$ä¸ªæ­¥é•¿ä¸º$1$çš„$3\times 3$filtersï¼Œä»¥åŠä¸€ä¸ªrelu<br>
ç¬¬å››ä¸ªéšè—å±‚ï¼š$512$ä¸ªunits<br>
è¾“å‡ºå±‚ï¼šsoftmaxï¼Œè¾“å‡ºæ¯ä¸ªactionå¯¹åº”çš„$Q$å€¼</p>
<h3 id="ç®—æ³•-v2">ç®—æ³•</h3>
<p>ç®—æ³• 2 deep Q-learning with experience replay, target network<br>
Initialize replay memory D to capacity N<br>
Initialize action-value function Q with random weights $\theta$<br>
Initialize target action-value function $\hat{Q}$ with weights $\theta^{-}=\theta$<br>
for episode = $1, M$ do<br>
$\ \ \ \ \ \ \ \ $Initialize sequence $s_1 = {x_1}$ and preprocessed sequenced $\phi_1 = \phi(s_1)$<br>
$\ \ \ \ \ \ \ \ $for $t = 1,T$ do<br>
$\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ $With probability $\varepsilon$ select a random action $a_t$<br>
$\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ $otherwise select $a_t = \max_a Q^{âˆ—}(\phi(s_t), a; Î¸)$<br>
$\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ $Execute action $a_t$ in emulator and observe reward $r_t$ and image $x_{t+1}$<br>
$\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ $Set $s_{t+1} = s_t, a_t, x_{t+1}$ and preprocess $\phi_{t+1} = \phi(s_{t+1})$<br>
$\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ $Store transition $(\phi_t, a_t, r_t, \phi_{t+1})$ in D<br>
$\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ $Sample random minibatch of transitions $(\phi_j, a_j, r_j, \phi_{j+1})$ from D<br>
$\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ $Set $y_j = \begin{cases}r_j&amp;\ \ \ \ for\ terminal\ \phi_{j+1}\\r_j+\gamma \max_{aâ€™}Q(\phi_{j+1},aâ€™|\theta^{-})&amp;\ \ \ \ for\ non-terminal\ \phi_{j+1}\end{cases}$<br>
$\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ $Perform a gradient descent step on $(y_j âˆ’ Q(\phi_j, a_j|Î¸))^2$ with respect to the network parameters $\theta$<br>
$\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ $Every $C$ steps reset $\hat{Q} = Q$<br>
$\ \ \ \ \ \ \ \ $end for<br>
end for</p>
<h3 id="experiments-v2">Experiments</h3>
<h4 id="settings-v2">Settings</h4>
<ul>
<li>batch-size: 32</li>
<li>replacy memory size: 1000000 frames</li>
<li>target network update frequency: 10000</li>
<li>discount factor: 0.99</li>
<li>action repeat: 4 # å°±æ˜¯frame skip</li>
<li>history length: 4 # ä½¿ç”¨æœ€è¿‘çš„å‡ å¸§é‡å ï¼Œå®é™…ä¸Šæ˜¯16å¸§</li>
<li>paramteter update frequency: 4 # æ‰§è¡Œsgd trainçš„frequency</li>
<li>learning rate: 0.00025</li>
<li>gradient momentum: 0.95</li>
<li>squared gradient momentum: 0.95</li>
<li>min squared gradient: 0.01</li>
<li>initial exploration: 1</li>
<li>final exploration 0.1</li>
<li>final exploration frame: 1000000</li>
<li>replay start size: 50000</li>
<li>no-op max: 30</li>
<li>reward: clipped to [-1, 1]</li>
<li>total train frames: 50 millons frameï¼ˆå®é™…ä¸Šæ˜¯200 millions emulated framesï¼Œå› ä¸ºæœ‰è®¾ç½®ä¸º$4$ frame skipï¼‰ã€‚</li>
<li>é€‰æ‹©randomä½œä¸ºä¸€ä¸ªbaselineï¼Œå› ä¸ºäººç±»çš„æé™æ˜¯$10$hzï¼Œä¸ºäº†å…¬å¹³èµ·è§ï¼Œrandom baselineä»¥$10$hzçš„é¢‘ç‡éšæœºé€‰æ‹©ä¸€ä¸ªactionï¼Œatariè§†é¢‘çš„é¢‘ç‡æ˜¯$60$hzï¼Œæ‰€ä»¥æ¯éš”$6$å¸§ï¼Œéšæœºé€‰æ‹©ä¸€ä¸ªactionï¼Œåœ¨é€‰æ‹©actionä¸­é—´çš„å¸§ä¸­ä¿æŒè¿™ä¸€ä¸ªactionã€‚</li>
</ul>
<h4 id="experiments-v3">Experiments</h4>
<ul>
<li>Average scoreå’Œaverage action value<br>
æ¯ä¸ªtraining epochä¹‹åè¿›è¡Œä¸€æ¬¡evaluationï¼Œè®°å½•evaluationè¿‡ç¨‹ä¸­average episode rewardã€‚æ€»å…±train $50$million framesï¼Œå¤§æ¦‚æœ‰$200$ä¸ªepochï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªepochæ˜¯$25$ä¸‡framesï¼Œåœ¨æ¯ä¸ªepochåä½¿ç”¨$\epsilon$-greedy($\epsilon =0.05$)ç­–ç•¥evaluate $520k$ä¸ªframesã€‚</li>
<li>Main-Evaluation: Compartion between DQN and other baselines<br>
Baselinesæœ‰Random play, best linear learnerï¼ŒSARSAï¼ŒHuamnç­‰ã€‚<br>
DQNæ€»å…±è®­ç»ƒäº†$50$ million framesï¼Œreplay bufferå­˜æ”¾æœ€è¿‘çš„$1$ million framemsã€‚åœ¨å®Œæˆè®­ç»ƒåï¼Œè‡³å¤šæ‰§è¡Œ$30$æ¬¡no-opï¼Œäº§ç”Ÿéšæœºåˆå§‹çŠ¶æ€ï¼Œä½¿ç”¨$\epsilon$-greedy($\epsilon=0.05$)ç©$5$åˆ†é’Ÿï¼Œå¯¹å¤šæ¬¡ç»“æœå–å¹³å‡ã€‚<br>
Humançš„æ•°æ®æ˜¯åœ¨ç©å®¶é¦–å…ˆè¿›è¡Œäº†$2$ä¸ªå°æ—¶è®­ç»ƒåï¼Œç„¶åç©å¤§çº¦20 episodesï¼Œæ¯ä¸ªepisodeæœ€é•¿5 minçš„ average rewardã€‚<br>
è¡¨æ ¼ä¸­æœ€åä¸€åˆ—è¿˜ç»™å‡ºäº†ä¸€ä¸ªç™¾åˆ†æ¯”ï¼Œ$100\times \frac{\text{DQN score} - \text{random play score}}{\text{human score} - \text{random play score}}$ã€‚</li>
<li>Replay bufferå’Œtarget networkçš„abalationå®éªŒ<br>
åœ¨ä¸‰ä¸ªä¸åŒçš„learning rateä¸‹ä½¿ç”¨standard hyperparametersè®­ç»ƒDQN $10$ million framesã€‚æ¯éš”$250,000$ training frameså¯¹æ¯ä¸ªagentè¿›è¡Œ$135,000$ framesçš„validationï¼Œè®°å½•æœ€é«˜çš„average episode scoreã€‚ è¿™äº›valuation episodeså¹¶æ²¡æœ‰åœ¨$5$ minçš„æ—¶å€™æˆªæ–­ï¼Œè¿™ä¸ªå®éªŒä¸­Enduroå¾—åˆ°çš„scoreè¦æ¯”main evaluationä¸­é«˜ã€‚è¿™ä¸ªå®éªŒä¸­trainingçš„å¸§æ•°($10$ million frames)è¦æ¯”baselineä¸­trainingçš„frames($50$ million frames)å°‘ã€‚</li>
<li>DQNå’Œlinear function approximatoræ¯”è¾ƒ<br>
é™¤äº†function approximatorç”±CNNå˜æˆlinearçš„ï¼Œå…¶ä»–éƒ½æ²¡æœ‰å˜ã€‚<br>
åœ¨$5$ä¸ªvalidation gamesä¸Šï¼Œæ¯ä¸ªagentåœ¨ä¸‰ä¸ªä¸åŒçš„learning ratesä½¿ç”¨æ ‡å‡†çš„å‚æ•°è®­ç»ƒäº†$10$ million framesã€‚æ¯éš”$250000$ä¸ªtraining frameså¯¹agentè¿›è¡Œ$135,000$ framesçš„validationï¼Œreported æœ€é«˜çš„average episode scoreã€‚ è¿™äº›valuation episodeså¹¶æ²¡æœ‰åœ¨$5$ minçš„æ—¶å€™æˆªæ–­ï¼Œè¿™ä¸ªå®éªŒä¸­Enduroå¾—åˆ°çš„scoreè¦æ¯”main evaluationä¸­é«˜ã€‚è¿™ä¸ªå®éªŒä¸­trainingçš„å¸§æ•°($10$ million frames)è¦æ¯”baselineä¸­trainingçš„frames($50$ million frames)å°‘ã€‚</li>
</ul>
<h2 id="gorila-dqn">Gorila DQN</h2>
<p>è®ºæ–‡åç§°ï¼š<br>
Massively Parallel Methods for Deep Reinforcement Learning<br>
ä¸‹è½½åœ°å€ï¼š<br>
<a href="https://arxiv.org/pdf/1507.04296.pdf" target="_blank" rel="noopener">https://arxiv.org/pdf/1507.04296.pdf</a></p>
<h3 id="experiments-v4">Experiments</h3>
<h4 id="settings-v3">Settings</h4>
<ul>
<li>ç½‘ç»œç»“æ„å’Œnature DQNä¸€æ ·ã€‚</li>
<li>ä½¿ç”¨äº†frame-skipï¼Œè®¾ç½®ä¸º$4$ã€‚</li>
<li>Replay memoryæ˜¯$1$M&gt;</li>
</ul>
<h4 id="evaluation">Evaluation</h4>
<p>Evaluationæœ‰ä¸¤ç§ï¼š</p>
<h5 id="null-op-starts">null op starts</h5>
<p>æ¯ä¸ªagentåœ¨å®ƒè®­ç»ƒçš„æ¸¸æˆä¸Ševaluated $30$ä¸ªepisodesï¼Œæ¯ä¸ªepisodeéšæœºçš„è‡³å¤šæ‰§è¡Œ$30$æ¬¡no-opä¹‹åï¼Œè¯„ä¼°$5$minçš„emulatoræ—¶é—´($18000$ frames)ã€‚ç„¶åå–è¿™$100$æ¬¡çš„å¹³å‡å€¼ã€‚</p>
<h5 id="human-starts">human starts</h5>
<p>Human startsæ˜¯ç”¨æ¥è¡¡é‡å®ƒå¯¹äºagentå¯èƒ½æ²¡æœ‰é‡åˆ°è¿‡çš„stateçš„æ³›åŒ–èƒ½åŠ›ã€‚å¯¹äºæ¯ä¸€ä¸ªæ¸¸æˆï¼Œä»ä¸€ä¸ªäººç±»ç©å®¶çš„gameplayä¸­éšæœºå–$100$ä¸ªå¼€å§‹ç‚¹ï¼Œä½¿ç”¨$\epsilon$-greedy policyç©ä¸‰ååˆ†é’Ÿemulatoræ—¶é—´ï¼ˆå³$108000$frames)ã€‚</p>
<h2 id="double-dqn">Double DQN</h2>
<h3 id="dqnä¸­çš„overestimateé—®é¢˜">DQNä¸­çš„overestimateé—®é¢˜</h3>
<p>è§£å†³overestimateé—®é¢˜ï¼ŒQ-learningä¸­åœ¨estimated valuesä¸Šè¿›è¡Œäº†maxæ“ä½œï¼Œå¯èƒ½ä¼šå¯¼è‡´æŸäº›æ›´åçˆ±overestimated valueè€Œä¸æ˜¯underestimated valuesã€‚<br>
æœ¬æ–‡å°†Double Q-learningçš„æƒ³æ³•æ¨å¹¿åˆ°äº†dqnä¸Šå½¢æˆäº†double-dqnã€‚å®éªŒç»“æœè¡¨æ˜äº†overestimated valueå¯¹äºpolicyæœ‰å½±å“ï¼Œdouble ä¼šäº§ç”Ÿå¥½çš„action valueï¼ŒåŒæ—¶åœ¨ä¸€äº›æ¸¸æˆä¸Šä¼šå¾—åˆ°æ›´é«˜çš„scoresã€‚</p>
<h3 id="contributions">Contributions</h3>
<ol>
<li>è§£é‡Šäº†åœ¨large scale é—®é¢˜ä¸Šï¼ŒQ-learningè¢«overoptimisticçš„åŸå› æ˜¯å­¦ä¹ å›ºæœ‰çš„estimation errorsã€‚</li>
<li>overestimationåœ¨å®è·µä¸­æ˜¯å¾ˆå¸¸è§ï¼Œä¹Ÿå¾ˆä¸¥é‡çš„ã€‚</li>
<li>Double Q-learningå¯ä»¥å‡å°‘overoptimism</li>
<li>æå‡ºäº†double-dqnã€‚</li>
<li>double-dqnåœ¨æŸäº›æ¸¸æˆä¸Šå¯ä»¥æ‰¾åˆ°æ›´å¥½çš„policyã€‚</li>
</ol>
<h3 id="double-q-learning">Double Q-learning</h3>
<p>Q-learningç®—æ³•è®¡ç®—target value $y$çš„å…¬å¼å¦‚ä¸‹ï¼š<br>
$$y = r + \gamma \max_aâ€™ Q(sâ€™, aâ€™|\theta_t)\tag{4}$$<br>
åœ¨è®¡ç®—target valueçš„æ—¶å€™ï¼Œä½¿ç”¨åŒä¸€ä¸ªç½‘ç»œé€‰æ‹©å’Œè¯„ä¼°action $aâ€™$ï¼Œè¿™å¯èƒ½ä¼šè®©ç½‘ç»œé€‰æ‹©ä¸€ä¸ªoverestimated valueï¼Œæœ€åå¾—åˆ°ä¸€ä¸ªoveroptimistic value estimateã€‚æ‰€æœ‰å°±æœ‰äº†double Q-learningï¼Œè®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š<br>
$$y = r + \gamma Q(sâ€™, \arg\max_aâ€™ Q(sâ€™,a;\theta_t);\thetaâ€™_t)\tag{5}$$<br>
target policyè¿˜æ˜¯greedy policyï¼Œé€šè¿‡ä½¿ç”¨$\theta$å¯¹åº”çš„ç½‘ç»œé€‰æ‹©actionï¼Œç„¶ååœ¨è®¡ç®—target valueçš„æ—¶å€™ä½¿ç”¨$\thetaâ€™$å¯¹åº”çš„ç½‘ç»œã€‚<br>
åŸæœ‰çš„å…¬å¼å¯ä»¥å†™æˆä¸‹å¼ï¼Œ<br>
$$y = r + \gamma Q(sâ€™, \arg\max_aâ€™ Q(sâ€™,a;\theta_t);\theta_t)\tag{6}$$<br>
å³é€‰æ‹©actionå’Œè®¡ç®—target valueéƒ½æ˜¯ä½¿ç”¨çš„åŒä¸€ä¸ªç½‘ç»œã€‚</p>
<h3 id="double-dqn-v2">Double DQN</h3>
<p><img src="/2019/03/02/dqn/double-dqn.png" alt="double-dqn"><br>
Double Q-learnignçš„åšæ³•æ˜¯åˆ†è§£target actionä¸­çš„max opearationä¸ºé€‰æ‹©å’Œevaluationã€‚è€Œåœ¨Nature-dqnä¸­ï¼Œæå‡ºäº†target networkï¼Œæ‰€ä»¥åˆ†åˆ«ä½¿ç”¨networkå’Œtarget networkå»é€‰æ‹©å’Œevaluation actionæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„åšæ³•ï¼Œè¿™æ ·å­å…¬å¼å°±å˜æˆäº†<br>
$$y = r + \gamma Q(sâ€™, \arg\max_aâ€™ Q(sâ€™,a;\theta_t);\theta^{-}_t)\tag{7}$$<br>
å’ŒQ-learnignç›¸æ¯”ï¼Œå°†$\thetaâ€™$æ¢æˆäº†$\theta^{-}$ evaluate actionï¼Œtarget networkçš„æ›´æ–°å’Œnature-dqnä¸€æ ·ï¼Œè¿‡ä¸€æ®µæ—¶é—´å¤åˆ¶networkçš„å‚æ•°ã€‚</p>
<h3 id="double-q-learning-vs-q-learning">Double Q learning vs Q-learning</h3>
<p>å¯ä»¥åœ¨æ•°å­¦ä¸Šè¯æ˜ï¼ŒQ-learningæ˜¯overestimationçš„ï¼Œä½†æ˜¯double q leraingæ˜¯æ— åçš„ã€‚ã€‚ã€‚è¯æ˜ç•™å¾…ä»¥åå†è¯´ã€‚<br>
<todo></todo></p>
<h3 id="ç½‘ç»œç»“æ„-v3">ç½‘ç»œç»“æ„</h3>
<p>ç½‘ç»œç»“æ„å’Œnature DQNä¸€æ ·ã€‚</p>
<h3 id="ç®—æ³•-v3">ç®—æ³•</h3>
<p>ç®—æ³• 3: Double DQN Algorithm.<br>
è¾“å…¥: replay buffer $D$, åˆå§‹networkå‚æ•°$\theta$,target networkå‚æ•°$\theta^{-}$<br>
è¾“å…¥ : replay bufferçš„å¤§å°$N_r$, batch size $N_b$, target networkæ›´æ–°é¢‘ç‡$N^{-}$<br>
<strong>for</strong> episode $e \in {1, 2,\cdots, M}$ do<br>
$\qquad$åˆå§‹åŒ–frame sequence $\mathbf{x} \leftarrow ()$<br>
$\qquad$<strong>for</strong> $t \in {0, 1, \cdots}$ do<br>
$\qquad\qquad$è®¾ç½®state $s \leftarrow \mathbf{x}$, é‡‡æ · action $a \sim\pi_B$<br>
$\qquad\qquad$ç»™å®š$(s, a)$ï¼Œä»ç¯å¢ƒ$E$ä¸­é‡‡æ ·æ¥ä¸‹æ¥çš„frame $x_t$,æ¥æ”¶reward $r$,åœ¨åºåˆ—$\mathbf{x}$ä¸Šæ‹¼æ¥$x$<br>
$\qquad\qquad$<strong>if</strong> $|\mathbf{x}| \gt N_f$<br>
$\qquad\qquad$<strong>then</strong><br>
$\qquad\qquad\qquad$ä»$\mathbf{x}$ä¸­åˆ é™¤æœ€è€çš„frame $x_{t_min}$<br>
$\qquad\qquad$è®¾ç½®$sâ€™ \leftarrow \mathbf{x}$,æ·»åŠ transition tuple (s, a, r, s 0 ) åˆ°buffer Dä¸­ï¼Œå¦‚æœ$|D| \ge N_r$æ›¿æ¢æœ€è€çš„tuple<br>
$\qquad\qquad$é‡‡æ ·$N_b$ä¸ªtuples $(s, a, r, sâ€™) \sim Unif(D)$<br>
$\qquad\qquad$è®¡ç®—target values, one for each of $N_b$ tuples:<br>
$\qquad\qquad$å®šä¹‰$a^{\max}(sâ€™; \theta) = \arg \max_{aâ€™} Q(sâ€™, aâ€™;\theta)$<br>
$\qquad\qquad y_j = \begin{cases}r&amp;\qquad if\ \ sâ€™\ \ is\ \ terminal\\ r+\gamma Q(sâ€™, a^{\max}(sâ€™;\theta);\theta^{-}, &amp;\qquad otherwise\end{cases}$<br>
$\qquad\qquad$åˆ©ç”¨loss $||y_j âˆ’ Q(s, a; \theta)||^2$çš„æ¢¯åº¦æ›´æ–°<br>
$\qquad\qquad$æ¯éš”$N^{-}$ä¸ªæ­¥éª¤æ›´æ–°ä¸€ä¸‹target network å‚æ•°$\theta^{-}$<br>
$\qquad$<strong>end</strong><br>
<strong>end</strong></p>
<h3 id="experiments-v5">Experiments</h3>
<h4 id="settings-v4">Settings</h4>
<p>Tunned Double DQNï¼Œupdate frequencyä»$10000$æ”¹æˆäº†$30000$ï¼Œè®­ç»ƒæ—¶$\epsilon$åœ¨$1$ millonå†…ä»$0.1$é€€ç«åˆ°$0.01$ã€‚Evaluationæ—¶æ˜¯$0.001$ã€‚</p>
<h4 id="evaluation-v2">Evaluation</h4>
<p>å’ŒGorila DQNä¸€æ ·ï¼Œç”¨äº†ä¸¤ç§ï¼šno-opå’Œhuman startsã€‚</p>
<h4 id="training">Training</h4>
<p>åœ¨æ¯ä¸ªæ¸¸æˆä¸Šï¼Œç½‘ç»œéƒ½è®­ç»ƒäº†$200$M framesï¼Œä¹Ÿå°±æ˜¯$50$M stepsã€‚æ¯éš”$1$M stepè¿›è¡Œä¸€æ¬¡evaluationï¼Œä»evaluationsä¸­é€‰å‡ºæœ€å¥½çš„policyä½œä¸ºè¾“å‡ºã€‚</p>
<h4 id="metric">Metric</h4>
<p>æå‡ºäº†ä¸€ä¸ªæŒ‡æ ‡ï¼Œnormalized scoreï¼Œè®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š<br>
$$score_{normalized} = \frac{score_{agent}- score_{random}}{score_{human}-score_{random}}\tag{8}$$<br>
åˆ†æ¯æ˜¯humanå’Œrandomä¹‹å·®ï¼Œå¯¹åº”$100%$ã€‚</p>
<h2 id="prioritized-dqn-per">Prioritized DQN(PER)</h2>
<h3 id="contributions-v2">contributions</h3>
<p>æœ¬æ–‡æå‡ºä¸€ç§äº†proritizing experienceçš„æ¡†æ¶ï¼Œåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­å¤šæ¬¡ä½¿ç”¨é‡è¦çš„transtions replayè¿›è¡Œæ›´æ–°ï¼Œè®©è®­ç»ƒå˜å¾—çš„æ›´æœ‰æ•ˆç‡ã€‚<br>
ä½¿ç”¨TD-errorsä½œä¸ºprioritization mechanismï¼Œç»™å‡ºäº†ä¸¤ç§protitizationè®¡ç®—æ–¹å¼ï¼Œæå‡ºäº†ä¸€ç§stochastic prioritizationä»¥åŠimportance samplingæ–¹æ³•ã€‚</p>
<h3 id="prioritized-replay">Prioritized replay</h3>
<p>å¯ä»¥ä»ä¸¤ä¸ªç»´åº¦ä¸Šè€ƒè™‘replay memeoryçš„æ”¹è¿›ï¼Œä¸€ä¸ªæ˜¯å­˜å“ªäº›experiencesï¼Œä¸€ä¸ªæ˜¯ä½¿ç”¨å“ªäº›experiencesè¿›è¡Œå›æ”¾ã€‚æœ¬æ–‡æ˜¯ä»ç¬¬äºŒä¸ªæ–¹å‘ä¸Šè¿›è¡Œçš„è€ƒè™‘ã€‚</p>
<p>ä»bufferä¸­éšæœºæŠ½æ ·çš„æ–¹æ³•ä¸­ï¼Œupdate stepså’Œmemory sizeæ˜¯çº¿æ€§å…³ç³»ï¼Œä½œè€…æƒ³æ‰¾ä¸€ä¸ªupdate stepså’Œmemory sizeæ˜¯logå…³ç³»çš„oracleï¼Œä½†æ˜¯å¾ˆé—æ†¾ï¼Œè¿™æ˜¯ä¸ç°å®çš„ï¼Œæ‰€ä»¥ä½œè€…æƒ³è¦æ‰¾ä¸€ç§æ¯”uniform random replayå¥½å°½é‡æ¥è¿‘oracleçš„æ–¹æ³•ã€‚</p>
<h4 id="prioritizion-with-td-error">Prioritizion with TD-error</h4>
<p>prioritized replayæœ€é‡è¦çš„éƒ¨åˆ†æ˜¯å¦‚ä½•è¯„ä»·æ¯ä¸€ä¸ªtransitionçš„é‡è¦ç¨‹åº¦ã€‚ä¸€ä¸ªç†æƒ³çš„criterionæ˜¯agentåœ¨å½“å‰çš„stateå¯ä»¥ä»æŸä¸ªtransitionä¸­å­¦åˆ°å¤šå°‘ã€‚è¿™ä¸ªmeasure metricæ˜¯ä¸ç¡®å®šçš„ï¼Œä¸€ä¸ªæ›¿ä»£æ–¹æ¡ˆæ˜¯ä½¿ç”¨TD error $\delta$ï¼Œè¡¨ç¤ºhow â€˜suprisingâ€™ æˆ–è€…upexpected the transitionï¼šå°±æ˜¯å½“å‰çš„valueç¦»next-step bootstrapå¾—åˆ°çš„valueç›¸å·®å¤šå°‘ï¼Œbooststrapå°±æ˜¯åŸºäºå…¶ä»–ä¼°è®¡å€¼è¿›è¡Œè®¡ç®—ã€‚ã€‚è¿™ä¸­æ–¹æ³•å¯¹äºincremental,online RLæ–¹æ³•ï¼Œä¾‹å¦‚SARSAä»¥åŠQ-learningæ¥è¯´éƒ½æ˜¯å¾ˆåˆé€‚çš„ï¼Œå› ä¸ºä»–ä»¬ä¼šè®¡ç®—TD-errorï¼Œç„¶åç»™TD-errorä¸€ä¸ªæ¯”ä¾‹ç³»æ•°ç”¨æ¥æ›´æ–°å‚æ•°ã€‚ç„¶åå½“rewardæ˜¯noisyçš„æ—¶å€™ï¼ŒTD-erroræ•ˆæœå¯èƒ½å¾ˆå·®ã€‚<br>
ä½œè€…åœ¨ä¸€ä¸ªäººå·¥è®¾è®¡çš„ç¯å¢ƒä¸­ä½¿ç”¨äº†greedy TD-error prioritizationç®—æ³•ï¼Œç®—æ³•åœ¨æ¯æ¬¡å­˜transitionåˆ°replay bufferçš„æ—¶å€™ï¼ŒåŒæ—¶è¿˜ä¼šå­˜ä¸€ä¸‹è¯¥transitionæœ€æ–°çš„TD-errorï¼Œç„¶ååœ¨æ›´æ–°çš„æ—¶å€™ä»memoryä¸­é€‰æ‹©TD-erroræœ€å¤§çš„transitionã€‚æœ€æ–°çš„transition TD-erroræ²¡æœ‰ç®—å‡ºæ¥ï¼Œå°±ç»™å®ƒä¸€ä¸ªæœ€å¤§çš„priorityï¼Œä¿è¯æ‰€æœ‰çš„experienceéƒ½è‡³å°‘è¢«çœ‹åˆ°è¿‡ä¸€æ¬¡ã€‚<br>
é‡‡ç”¨äºŒå‰å †ç”¨å®ç°ä¼˜å…ˆé˜Ÿåˆ—ï¼ŒæŸ¥æ‰¾å¤æ‚åº¦æ˜¯$O(1)$ï¼Œæ›´æ–°prioritiesçš„å¤æ‚åº¦æ˜¯$O(logN)$ã€‚</p>
<h4 id="stochastic-prioritization">Stochastic prioritization</h4>
<p>ä¸Šè¿°æ–¹æ³•æœ‰å¾ˆå¤šé—®é¢˜ã€‚ç¬¬ä¸€ï¼Œæ¯æ¬¡éƒ½sweepæ•´ä¸ªreplay memoryçš„è®¡ç®—é‡å¾ˆå¤§ï¼Œæ‰€ä»¥åªæœ‰è¢«replayedçš„experiencesçš„TD-errorsæ‰ä¼šè¢«æ›´æ–°ã€‚å¼€å§‹æ—¶ä¸€ä¸ªTD errorå¾ˆå°çš„transitionå¯èƒ½å¾ˆé•¿ä¸€æ®µäº‹ä»¶ä¸ä¼šè¢«replayedï¼Œè¿™å°±å¯¼è‡´äº†replay bufferçš„sliding windowä¸èµ·ä½œç”¨äº†ã€‚ç¬¬äºŒï¼ŒTD-errorå¯¹äºnoise spikeå¾ˆæ•æ„Ÿï¼Œè¿˜ä¼šè¢«bootstrapåŠ å‰§ï¼Œä¼°è®¡è¯¯å·®å¯èƒ½ä¼šæ˜¯å¦ä¸€ä¸ªnoiseã€‚ç¬¬ä¸‰ï¼Œgreedy prioritizationé›†ä¸­åœ¨experiencesçš„ä¸€ä¸ªsubsetï¼šerrorså‡å°çš„å¾ˆæ…¢ï¼Œå°¤å…¶æ˜¯ä½¿ç”¨function appriximationæ—¶ï¼Œè¿™å°±æ„å‘³ç€åˆå§‹çš„é«˜errorçš„transitionsä¼šè¢«replayedçš„å¾ˆé¢‘ç¹ï¼Œç„¶åä¼šover-fittingå› ä¸ºç¼ºä¹diversityã€‚<br>
ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œå¼•å…¥äº†ä¸€ä¸ªä»‹äºpure greedy prioritizaitonä»¥åŠuniform random samplingä¹‹é—´çš„stochasticé‡‡æ ·æ–¹æ³•ï¼Œpriorityé«˜çš„transitionæœ‰æ›´å¤§çš„æ¦‚ç‡è¢«é‡‡æ ·ï¼Œè€Œlowest-priorityçš„transitionä¹Ÿæœ‰æ¦‚ç‡è¢«é€‰ä¸­ï¼Œå…·ä½“çš„å®šä¹‰transition $i$çš„æ¦‚ç‡å¦‚ä¸‹ï¼š<br>
$$P(i) = \frac{p_i^{\alpha}}{\sum_kp_k^{\alpha}}\tag{9}$$<br>
$\alpha$ç¡®å®šprioritizaitonçš„æ¯”é‡ï¼Œå¦‚æœ$\alpha=0$å°±æ˜¯unifromã€‚</p>
<p>æœ‰ä¸¤ç§$p_i$çš„è®¡ç®—æ–¹æ³•ï¼Œä¸€ç§æ˜¯ç›´æ¥çš„proportional prioritizationï¼Œ$p_i = |\delta_i| + \varepsilon$ï¼Œå…¶ä¸­$\varepsilon$æ˜¯ä¸€ä¸ªå°çš„æ­£æ•´æ•°ï¼Œç¡®å®šå½“$p_i=0$æ—¶ï¼Œè¯¥transitionä»èƒ½è¢«replayï¼›ç¬¬äºŒç§æ˜¯é—´æ¥çš„ï¼Œ$p_i = \frac{1}{rank(i)}$ï¼Œå…¶ä¸­$rank(i)$æ˜¯æ‰€æœ‰replay memoryä¸­çš„experiencesæ ¹æ®$|\delta_i|$æ’åºåçš„rankã€‚ç¬¬äºŒç§æ–¹æ³•çš„é²æ£’æ€§æ›´å¥½ã€‚<br>
åœ¨å®ç°ä¸Šï¼Œä¸¤ç§æ–¹æ³•éƒ½æœ‰ç›¸åº”çš„trickï¼Œè®©å¤æ‚åº¦ä¸ä¾èµ–äºmemory å¤§å°$N$ã€‚Proportional prioritizationé‡‡ç”¨äº†â€™sum-treeâ€™æ•°æ®ç»“æ„ï¼Œæ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½æ˜¯å®ƒçš„å­èŠ‚ç‚¹çš„childrenï¼Œprioritiesæ˜¯leaf nodesã€‚è€Œrank-basedæ–¹æ³•ï¼Œä½¿ç”¨çº¿æ€§å‡½æ•°ä¼°è®¡ç´¯è®¡å¯†åº¦å‡½æ•°ï¼Œå…·ä½“æ€ä¹ˆå®ç°æ²¡æœ‰ç»†çœ‹ã€‚</p>
<h4 id="annealing-the-bias">annealing the bias</h4>
<p>å› ä¸ºrandom sampleæ–¹æ³•ï¼Œsamplesä¹‹é—´æ²¡æœ‰ä¸€ç‚¹è”ç³»ï¼Œé€‰æ‹©æ¯ä¸€ä¸ªsampleçš„æ¦‚ç‡éƒ½æ˜¯ç›¸ç­‰çš„ï¼Œä½†æ˜¯å¦‚æœåŠ ä¸Šäº†priorityï¼Œå°±æœ‰ä¸€ä¸ªbias towardé«˜priorityçš„samplesã€‚ISå’Œprioritized replayçš„ç»„åˆåœ¨non-learn FAä¸­æœ‰ä¸€ä¸ªç”¨å¤„ï¼Œlarge stepså¯èƒ½ä¼šäº§ç”Ÿä¸å¥½çš„å½±å“ï¼Œå› ä¸ºæ¢¯åº¦ä¿¡æ¯å¯èƒ½æ˜¯å±€éƒ¨reliableï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨ä¸€ä¸ªå°ç‚¹çš„step-sizeã€‚<br>
åœ¨æœ¬æ–‡ä¸­ï¼Œhigh-errorçš„æ ·æœ¬å¯èƒ½ä¼šè§‚æµ‹åˆ°å¾ˆå¤šæ¬¡ï¼Œä½¿ç”¨ISå‡å°gradientçš„å¤§å°ï¼Œå¯¹åº”äºé«˜priorityçš„samplesçš„weightè¢«å¾®è°ƒäº†ä¸€ä¸‹ï¼Œè€Œå¯¹åº”äºä½priorityçš„æ ·æœ¬åŸºæœ¬ä¸å˜ã€‚<br>
weigthçš„è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š<br>
$$w_i = (\frac{1}{N}\cdot \frac{1}{P(i)})^{\beta}\tag{10}$$<br>
OK,è¿™é‡ŒISçš„ä½œç”¨æœ‰äº›ä¸æ˜ç™½ã€‚ã€‚ã€‚ã€‚<todo></todo></p>
<h3 id="ç®—æ³•-v4">ç®—æ³•</h3>
<p>ç®—æ³• 4<br>
è¾“å…¥: minibatch $k$, å­¦ä¹ ç‡ï¼ˆæ­¥é•¿ï¼‰$\eta$, replay period $K$ and size $N$ , exponents $\alpha$ and $\beta$, budget $T$.<br>
åˆå§‹åŒ–replay memory $H = \emptyset, \Delta = 0, p_1 = 1$<br>
æ ¹æ®$S_0$é€‰æ‹© $A_0 \sim \pi_{\theta}|(S_0)$<br>
<strong>for</strong> $t = 1,\cdots, T$ do<br>
$\qquad$è§‚æµ‹$S_t, R_t, \gamma_t$<br>
$\qquad$å­˜å‚¨transition $(S_{tâˆ’1}, A_{tâˆ’1}, R_t , \gamma_t, S_t)$ åˆ°replay memoryï¼Œä»¥åŠ$p_t$çš„æœ€å¤§priority $p_t = \max {i\lt t} p_i$<br>
$\qquad$<strong>if</strong> $t â‰¡ 0$ mod $K$ then<br>
$\qquad\qquad$<strong>for</strong> j = 1 to k do<br>
$\qquad\qquad\qquad$Sample transition $j \sim P(j) = \frac{p_j^{\alpha}}{\sum_i p_i^{\alpha}}$<br>
$\qquad\qquad\qquad$è®¡ç®—importance-sampling weight $w_j = \frac{(N \cdot P(j))^{\beta}}{\max_i w_i}$<br>
$\qquad\qquad\qquad$è®¡ç®—TD-error $\delta_j = R_j + \gamma_j Q_{target} (S_j$, $arg \max_a Q(S_j, a)) âˆ’ Q(S_{jâˆ’1} , A\ {jâˆ’1})$<br>
$\qquad\qquad\qquad$æ›´æ–°transitionçš„priority $p_j \leftarrow |\delta_j|$<br>
$\qquad\qquad\qquad$ç´¯è®¡weight-change $\Delta \leftarrow \Delta + w_j \cdot \delta_j \cdot \nabla_{\theta} Q(S_{jâˆ’1}, A_{jâˆ’1})$<br>
$\qquad\qquad$<strong>end for</strong><br>
$\qquad\qquad$æ›´æ–°weights $\theta\leftarrow \theta+ \eta\cdot\Delta$, é‡ç½®$\Delta = 0$<br>
$\qquad\qquad$æ¯éš”ä¸€æ®µæ—¶é—´æ›´æ–°target network $\theta_{target} \leftarrow \theta$<br>
$\qquad$<strong>end if</strong><br>
$\qquad$é€‰æ‹©action $A_t \sim \pi_{\theta}(S_t)$<br>
<strong>end for</strong></p>
<h3 id="experiments-v6">Experiments</h3>
<p>ä¸¤ç»„å®éªŒï¼Œ<br>
ä¸€ç»„æ˜¯DQNå’Œproportional prioritizationä½œæ¯”è¾ƒã€‚<br>
ä¸€ç»„æ˜¯tuned Double DQNå’Œrank-basedä»¥åŠproportional prioritizaitonã€‚</p>
<h4 id="metrics-v2">Metrics</h4>
<p>ç”¨çš„æ˜¯double dqnæå‡ºæ¥çš„nomalized scoreï¼Œè¿™é‡Œåœ¨åˆ†æ¯ä¸ŠåŠ äº†ç»å¯¹å€¼ã€‚<br>
ä¸»è¦ç”¨çš„median scoreså’Œmean scoresã€‚</p>
<h2 id="dueling-dqn">Dueling DQN</h2>
<h3 id="ä»‹ç»">ä»‹ç»</h3>
<p>æœ¬æ–‡ä½œè€…æå‡ºæ¥å°†duelingç½‘ç»œæ¡†æ¶åº”ç”¨åœ¨model-freeç®—æ³•ä¸Šã€‚The dueling architectureèƒ½ç”¨ä¸€ä¸ªdeep modelåŒæ—¶è¡¨ç¤º$V(s)$å’Œä¼˜åŠ¿å‡½æ•°$A(s,a)$ï¼Œç½‘ç»œçš„è¾“å‡ºå°†$V$å’Œ$A$ç»“åˆäº§ç”Ÿ$Q(s,a)$ã€‚å’Œadvantageä¸ä¸€æ ·çš„æ˜¯ï¼Œè¿™ç§æ–¹å¼åœ¨æ„å»ºæ—¶å°±å°†ä»–ä»¬è¿›è¡Œäº†è§£è€¦ï¼Œå› æ­¤ï¼Œdueling architectureå¯ä»¥åº”ç”¨åœ¨å„ç§å„æ ·çš„model free RLç®—æ³•ä¸Šã€‚<br>
æœ¬æ–‡çš„æ¶æ„æ˜¯å¯¹ç®—æ³•åˆ›æ–°çš„è¡¥å……ï¼Œå®ƒå¯ä»¥å¯¹ä¹‹å‰å·²æœ‰çš„å„ç§DQNç®—æ³•è¿›è¡Œç»“åˆã€‚</p>
<h3 id="dueling-network-architecture">dueling network architecture</h3>
<p>è¿™ä¸ªæ–°çš„architectureçš„æ ¸å¿ƒæƒ³æ³•æ˜¯ï¼Œæ²¡æœ‰å¿…è¦ä¼°è®¡æ‰€æœ‰statesçš„action valueã€‚åœ¨ä¸€äº›statesï¼Œéœ€è¦action valueå»ç¡®å®šæ‰§è¡Œå“ªä¸ªactionï¼Œä½†æ˜¯åœ¨è®¸å¤šå…¶ä»–statesï¼Œaction valueså¹¶æ²¡æœ‰ä»€ä¹ˆç”¨ã€‚å½“ç„¶ï¼Œå¯¹äºbootstrapç®—æ³•æ¥è¯´ï¼Œæ¯ä¸€ä¸ªstateçš„value estimationéƒ½å¾ˆé‡è¦ã€‚<br>
<img src="/2019/03/02/dqn/deuling-dqn.png" alt="dueling-dqn"><br>
ä½œè€…ç»™å‡ºäº†ä¸€ä¸ªsingle Q-networkçš„architectureï¼Œå¦‚å›¾æ‰€ç¤ºã€‚<br>
ç½‘ç»œç»“æ„å’Œnature-dqnä¸€æ ·ï¼Œä½†æ˜¯è¿™é‡ŒåŠ äº†ä¸¤ä¸ªfully connected layersï¼Œä¸€ä¸ªç”¨äºè¾“å‡º$V$ï¼Œä¸€ä¸ªç”¨äºè¾“å‡º$A$ã€‚ç„¶å$A$å’Œ$V$ç»“åˆåœ¨ä¸€èµ·ï¼Œäº§ç”Ÿ$Q$ï¼Œç½‘ç»œçš„è¾“å‡ºå’Œnature dqnä¸€æ ·ï¼Œå¯¹åº”äºæŸä¸ªstateçš„ä¸€ç³»åˆ—action valueã€‚<br>
ä»$Q$å‡½æ•°çš„å®šä¹‰$Q^{\pi}(s,a) = V^{\pi}(s)+A^{\pi}(s,a)$ä»¥åŠ$Q$å’Œ$V$ä¹‹é—´çš„å…³ç³»$V^{\pi}(s) = \mathbb{E}_{a\sim\pi(s)}\left[Q^{\pi}(s,a)\right] = \pi(a|s)Q^{\pi}(s,a)$ï¼Œæ‰€ä»¥æœ‰$\mathbb{E}_{a\sim\pi(s)}\left[A^{\pi}(s,a)\right]=0$ã€‚æ­¤å¤–ï¼Œå¯¹äºdeterministic policyï¼Œ$a^{*} = \arg \max_{aâ€™\in A}Q(s,aâ€™)$ï¼Œæœ‰$V(s) = Q(s,a^{*})$ï¼Œå³$A(s,a^{*}) = 0$ã€‚<br>
å¦‚å›¾æ‰€ç¤ºçš„networkä¸­ï¼Œä¸€ä¸ªç½‘ç»œè¾“å‡ºscalar $V(s;\theta, \beta)$ï¼Œä¸€ä¸ªç½‘ç»œè¾“å‡ºä¸€ä¸ª$|A|$ç»´çš„vector $A(s,a;\theta, \alpha)$ï¼Œå…¶ä¸­$\theta$æ˜¯ç½‘ç»œå‚æ•°ï¼Œ$\alpha$å’Œ$\beta$æ˜¯ä¸¤ä¸ªå…¨è¿æ¥å±‚çš„å‚æ•°ã€‚<br>
æ ¹æ®advantageçš„å®šä¹‰ï¼Œå¯ä»¥ç›´æ¥å°†ä»–ä»¬åŠ èµ·æ¥ï¼Œå³ï¼š<br>
$$Q(s,a;\theta, \alpha, \beta) = V(s;\theta, \beta) + A(s,a;\theta, \alpha) \tag{11}$$<br>
ä½†æ˜¯ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“çš„ä¸€ç‚¹æ˜¯ï¼Œ$Q(s, a;\theta, \alpha, \beta)$ä»…ä»…æ˜¯$Q$çš„ä¸€ä¸ªå‚æ•°åŒ–ä¼°è®¡ã€‚å®ƒç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼Œä¸€éƒ¨åˆ†æ˜¯$V$ï¼Œä¸€éƒ¨åˆ†æ˜¯$A$ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œçš„$V$å’Œ$Q$åªæ˜¯æˆ‘ä»¬å«å®ƒ$V$å’Œ$A$ï¼Œå®ƒçš„å®é™…æ„ä¹‰å¹¶ä¸æ˜¯$V$å’Œ$A$ã€‚ç»™äº†$Q$ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ä»»æ„çš„$Q(s, a) = V(s) + A(s,a)$ï¼Œè€Œ$V$å’Œ$Q$å¹¶ä¸ä»£è¡¨value functionå’Œadvantage functinoã€‚<br>
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½œè€…æå‡ºäº†é€‰æ‹©è®©advantageä¸º$0$çš„actionï¼Œå³ï¼š<br>
$$Q(s, a; \theta,\alpha, \beta) = V(s; \theta, \beta) + \left(A(s,a;\theta,\alpha) - \max_{aâ€™\in |A|}A(s, aâ€™; \theta, \alpha)\right)\tag{12}$$<br>
é€‰æ‹©$a^{*} = \arg \max_{aâ€™\in A} Q(s, aâ€™; \theta, \alpha, \beta) = \arg \max_{aâ€™\in A}A(s, aâ€™;\theta, \alpha)$ï¼Œæˆ‘ä»¬å¾—åˆ°$Q(s,a^{*}; \theta, \alpha,\beta) = V(s;\theta, \beta)$ã€‚è¿™ä¸ªæ—¶å€™ï¼Œè¾“å‡º$V$çš„ç½‘ç»œç»™å‡ºçš„çœŸçš„æ˜¯state valueçš„ä¼°è®¡$V(s;\theta, \beta)$ï¼Œå¦ä¸€ä¸ªç½‘ç»œçœŸçš„ç»™å‡ºçš„æ˜¯advantageçš„ä¼°è®¡ã€‚<br>
å¦ä¸€ç§æ–¹æ³•æ˜¯ç”¨meanå–ä»£maxæ“ä½œï¼š<br>
$$Q(s, a; \theta,\alpha, \beta) = V(s; \theta, \beta) + \left(A(s,a;\theta,\alpha)- \frac{1}{|A|}\sum_{aâ€™}A(s, aâ€™; \theta, \alpha)\right)\tag{13}$$<br>
ä¸€æ–¹é¢è¿™ç§æ–¹æ³•å¤±å»äº†$V$å’Œ$A$çš„åŸå§‹è¯­ä¹‰ï¼Œå› ä¸ºå®ƒä»¬æœ‰ä¸€ä¸ªå¸¸æ•°çš„off-targetï¼Œä½†æ˜¯å¦ä¸€æ–¹é¢å®ƒå¢åŠ äº†ä¼˜åŒ–çš„ç¨³å®šæ€§ï¼Œå› ä¸ºä¸Šå¼ä¸­advantageçš„æ”¹å˜åªéœ€è¦å’Œmeanä¿æŒä¸€è‡´å³å¯ï¼Œä¸éœ€è¦optimal actionâ€™s advantangeä¸€æœ‰å˜åŒ–å°±è¦æ”¹å˜ã€‚</p>
<h3 id="ç®—æ³•-v5">ç®—æ³•</h3>
<h2 id="distributed-dqn">Distributed DQN</h2>
<h2 id="noisy-dqn">Noisy DQN</h2>
<h3 id="ä»‹ç»-v2">ä»‹ç»</h3>
<p>å·²æœ‰æ–¹æ³•çš„explorationéƒ½æ˜¯é€šè¿‡agent policyçš„random perturbationsï¼Œæ¯”å¦‚å¸¸è§çš„$\varepsilon$-greedyç­‰æ–¹æ³•ã€‚è¿™äº›æ–¹æ³•ä¸èƒ½æ‰¾å‡ºç¯å¢ƒä¸­efficient explorationçš„behavioural patternsã€‚å¸¸è§çš„æ–¹æ³•æœ‰ä»¥ä¸‹å‡ ç§:<br>
ç¬¬ä¸€ç§æ–¹æ³•æ˜¯optimism in the face of uncertaintyï¼Œç†è®ºä¸Šè¯æ˜å¯è¡Œï¼Œä½†æ˜¯é€šå¸¸åº”ç”¨åœ¨state-action spaceså¾ˆå°çš„æƒ…å†µä¸‹æˆ–è€…linear FAï¼Œå¾ˆéš¾å¤„ç†non-linearn FAï¼Œè€Œä¸”non-linearæƒ…å†µä¸‹æ”¶æ•›æ€§æ²¡æœ‰ä¿è¯ã€‚<br>
å¦ä¸€ç§æ–¹æ³•æ˜¯æ·»åŠ é¢å¤–çš„intrinsic motivation termï¼Œè¯¥æ–¹æ³•çš„é—®é¢˜æ˜¯å°†ç®—æ³•çš„generalisation mechanismå’Œexplorationåˆ†å‰²å¼€ï¼Œå³æœ‰instrinsic rewardå’Œenvironment rewardï¼Œå®ƒä»¬çš„æ¯”ä¾‹å¦‚ä½•å»è®¾ç½®ï¼Œéœ€è¦è®¤ä¸ºæŒ‡å®šã€‚å¦‚æœä¸ä»”ç»†è°ƒæ•´ï¼Œoptimal policyå¯èƒ½ä¼šå—intrinsic rewardå½±å“å¾ˆå¤§ã€‚æ­¤å¤–ä¸ºäº†å¢åŠ explorationçš„é²é‚¦æ€§ï¼Œæ‰°åŠ¨é¡¹ä»ç„¶æ˜¯éœ€è¦çš„ã€‚è¿™äº›ç®—æ³•å¾ˆå…·ä½“ä¹Ÿèƒ½åº”ç”¨åœ¨å‚æ•°åŒ–policyä¸Šï¼Œä½†æ˜¯å¾ˆä½æ•ˆï¼Œè€Œä¸”éœ€è¦å¾ˆå¤šæ¬¡policy evaluationã€‚<br>
æœ¬æ–‡æå‡ºNoisyNetå­¦ä¹ ç½‘ç»œå‚æ•°çš„perturbationsï¼Œä¸»è¦æƒ³æ³•æ˜¯å‚æ•°çš„ä¸€ç‚¹æ”¹å˜å¯èƒ½ä¼šå¯¼è‡´policyåœ¨å¾ˆå¤šä¸ªtimstepsä¸Šçš„consistentï¼Œcomplex, state-dependentçš„å˜åŒ–ï¼Œè€Œå¦‚$\varepsilon$-greedyçš„ditheringç®—æ³•ä¸­ï¼Œæ¯ä¸€æ­¥æ·»åŠ åˆ°policyä¸Šçš„noiseéƒ½æ˜¯ä¸ç›¸å…³çš„ã€‚pertubationsä»ä¸€ä¸ªnoiseåˆ†å¸ƒä¸­è¿›è¡Œé‡‡æ ·ï¼Œå®ƒçš„varianceå¯ä»¥çœ‹æˆnoiseçš„energyï¼Œvarianceçš„å‚æ•°å’Œç½‘ç»œå‚æ•°éƒ½æ˜¯é€šè¿‡lossçš„æ¢¯åº¦è¿›è¡Œæ›´æ–°ã€‚ç½‘ç»œå‚æ•°ä¸­ä»…ä»…åŠ å…¥äº†å™ªéŸ³ï¼Œæ²¡æœ‰distributionï¼Œå¯ä»¥è‡ªåŠ¨å­¦ä¹ ã€‚<br>
åœ¨é«˜ç»´åº¦ä¸Šï¼Œæœ¬æ–‡çš„ç®—æ³•æ˜¯ä¸€ä¸ªrandomised value functionï¼Œè¿™ä¸ªå‡½æ•°æ˜¯neural networkï¼Œç½‘ç»œçš„å‚æ•°å¹¶æ²¡æœ‰åŠ å€ï¼Œlinear çš„å‚æ•°åŠ å€ï¼Œè€Œå‚æ•°æ˜¯noiseçš„ä¸€ä¸ªç®€å•å˜æ¢ã€‚<br>
è¿˜æœ‰äººæ·»åŠ constant Gaussian nioseåˆ°ç½‘ç»œå‚æ•°ï¼Œè€Œæ–‡æœ¬çš„ç®—æ³•æ·»åŠ çš„noiseå¹¶ä¸æ˜¯é™åˆ¶åœ¨Gaussion noise distributionsã€‚æ·»åŠ noiseè¾…åŠ©è®­ç»ƒåœ¨ç›‘ç£å­¦ä¹ ç­‰ä»»åŠ¡ä¸­ä¸€ç›´éƒ½æœ‰ï¼Œä½†æ˜¯è¿™äº›å™ªéŸ³éƒ½æ˜¯ä¸èƒ½è®­ç»ƒçš„ï¼Œè€ŒNoisyNetä¸­çš„å™ªéŸ³æ˜¯å¯ä»¥æ¢¯åº¦ä¸‹é™æ›´æ–°çš„ã€‚</p>
<h3 id="noisynets">NoisyNets</h3>
<p><img src="/2019/03/02/dqn/noisy_linear_layer.png" alt="noisy_linear_layer"><br>
ç”¨$\theta$è¡¨ç¤ºnoisy netçš„å‚æ•°ï¼Œè¾“å…¥æ˜¯$x$ï¼Œè¾“å‡ºæ˜¯$y$ï¼Œå³$y=f_{\theta}(x)$ã€‚$\theta$å®šä¹‰ä¸º$\theta=\mu+\Sigma\odot\varepsilon$ï¼Œå…¶ä¸­$\zeta=(\mu,\Sigma)$è¡¨ç¤ºå¯ä»¥å­¦ä¹ çš„å‚æ•°ï¼Œ$\varepsilon$è¡¨ç¤ºæœä»å›ºå®šåˆ†å¸ƒçš„å‡å€¼ä¸º$0$çš„å™ªéŸ³,$\varepsilon$æ˜¯random variableã€‚$\odot$è¡¨ç¤ºelement-wiseä¹˜æ³•ã€‚æœ€åçš„losså‡½æ•°æ˜¯å…³äº$\varepsilon$çš„æœŸæœ›ï¼š$\bar{L}(\zeta)=\mathbb{E}\left[L(\theta)\right]$ï¼Œç„¶åä¼˜åŒ–ç›¸åº”çš„$\zeta$ï¼Œ$\varepsilon$ä¸èƒ½è¢«ä¼˜åŒ–ï¼Œå› ä¸ºå®ƒæ˜¯random variableã€‚<br>
ä¸€ä¸ªæœ‰$p$ä¸ªè¾“å…¥å•å…ƒï¼Œ$q$ä¸ªè¾“å‡ºå•å…ƒçš„fully-connected layerè¡¨ç¤ºå¦‚ä¸‹ï¼š<br>
$$y=wx+b \tag{14}$$<br>
å…¶ä¸­$w\in \mathbb{R}^{q\times p}$ï¼Œ$x\in \mathbb{R}^{p}$,$b\in \mathbb{R}^{q}$ï¼Œå¯¹åº”çš„noisy linear layerå®šä¹‰å¦‚ä¸‹ï¼š<br>
$$y=(\mu^w+\sigma^w\odot\varepsilon^w)x + \mu^b+\sigma^b\odot\varepsilon^b \tag{15}$$<br>
å°±æ˜¯ç”¨$\mu^w+\sigma^w\odot\varepsilon^w$å–ä»£$w$ï¼Œç”¨$\mu^b+\sigma^b\odot\varepsilon^b$å–ä»£$b$ã€‚å…¶ä¸­$\mu^w,\sigma^w\in \mathbb{R}^{q\times p} $ï¼Œè€Œ$\mu^b,\sigma^b\in\mathbb{R}^{q}$æ˜¯å¯ä»¥å­¦ä¹ çš„å‚æ•°ï¼Œè€Œ$\varepsilon^w\in \mathbb{R}^{p\times q},\varepsilon^b \in \mathbb{R}^{q}$æ˜¯random variableã€‚<br>
ä½œè€…æå‡ºäº†ä¸¤ç§æ·»åŠ noiseçš„æ–¹å¼ï¼Œä¸€ç§æ˜¯Independent Gaussian noiseï¼Œä¸€ç§æ˜¯Factorised Gaussion noiseã€‚ä½¿ç”¨Factorisedçš„åŸå› æ˜¯å‡å°‘éšæœºå˜é‡çš„è®¡ç®—æ—¶é—´ï¼Œè¿™äº›æ—¶é—´å¯¹äºå•çº¿ç¨‹çš„ä»»åŠ¡æ¥è¯´è¿˜æ˜¯å¾ˆå¤šçš„ã€‚</p>
<h4 id="independent-gaussian-noise">Independent Gaussian noise</h4>
<p>åº”ç”¨åˆ°æ¯ä¸€ä¸ªweightå’Œbiasçš„noiseéƒ½æ˜¯independentçš„ï¼Œå¯¹äº$\varepsilon^w$çš„æ¯ä¸€é¡¹$\varepsilon_{i,j}^w$æ¥è¯´ï¼Œå®ƒä»¬çš„å€¼éƒ½æ˜¯ä»ä¸€ä¸ªunit Gaussion distributionä¸­é‡‡æ ·å¾—åˆ°çš„ï¼›$varepsilon^b$åŒç†ã€‚æ‰€ä»¥å¯¹äºä¸€ä¸ª$p$ä¸ªè¾“å…¥,$q$ä¸ªè¾“å‡ºçš„noisy linear layeræ€»å…±æœ‰$pq+q$ä¸ªnoise å˜é‡ã€‚</p>
<h4 id="factorised-gaussian-noise">Factorised Gaussian noise</h4>
<p>é€šè¿‡å¯¹$\varepsilon_{i,j}^w$æ¥è¯´ï¼Œå¯ä»¥å°†å…¶åˆ†è§£æˆ$p$ä¸ª$\varepsilon_i$ç”¨äº$p$ä¸ªè¾“å…¥å’Œ$q$ä¸ª$\varepsilon_j$ç”¨äº$q$ä¸ªè¾“å‡ºï¼Œæ€»å…±æœ‰$p+q$ä¸ªnoisså˜é‡ã€‚æ¯ä¸€ä¸ª$\varepsilon_{i,j}^w$å’Œ$\varepsilon_{j}^b$å¯ä»¥å†™æˆï¼š<br>
$$\varepsilon_{i,j}^w = f(\varepsilon_i)f(\varepsilon_j) \tag{16}$$<br>
$$\varepsilon_{j}^b = f(\varepsilon_j)\tag{17}$$<br>
å…¶ä¸­$f$æ˜¯ä¸€ä¸ªå®å‡½æ•°ï¼Œåœ¨ç¬¬ä¸€ä¸ªå¼å­ä¸­$f(x) = sng(x)\sqrt{|x|}$ï¼Œåœ¨ç¬¬äºŒä¸ªå¼å­ä¸­å¯ä»¥å–$f(x)=x$ï¼Œè¿™é‡Œé€‰æ‹©äº†å’Œç¬¬ä¸€ä¸ªå¼å­ä¸­ä¸€è‡´ã€‚<br>
å› ä¸ºnoisy networkçš„losså‡½æ•°æ˜¯$\bar{L}(\zeta)=\mathbb{E}\left[L(\theta)\right]$ï¼Œæ˜¯å…³äºnoiseçš„ä¸€ä¸ªæœŸæœ›ï¼Œæ¢¯åº¦å¦‚ä¸‹ï¼š<br>
$$\nabla\bar{L}(\zeta)=\nabla\mathbb{E}\left[L(\theta)\right]=\mathbb{E}\left[\nabla_{\mu,\Sigma}L(\mu+\Sigma\odot\varepsilon)\right] \tag{18}$$<br>
ä½¿ç”¨Monte Carloä¼°è®¡ä¸Šè¿°æ¢¯åº¦ï¼Œåœ¨æ¯ä¸€ä¸ªstepé‡‡æ ·ä¸€ä¸ªsampleè¿›è¡Œoptimization:<br>
$$\nabla\bar{L}(\zeta)\approx\nabla_{\mu,\Sigma}L(\mu+\Sigma\odot\varepsilon) \tag{19}$$</p>
<h3 id="noisy-dqn-and-dueling">Noisy DQN and dueling</h3>
<p>ç›¸å¯¹äºDQNå’Œdueling DQNæ¥è¯´ï¼Œnoisy DQN and duelingä¸»è¦åšäº†ä¸¤æ–¹é¢çš„æ”¹è¿›ï¼š</p>
<ol>
<li>ä¸å†ä½¿ç”¨$\varepsilon$-greedy behaviour policyäº†ï¼Œè€Œæ˜¯ä½¿ç”¨greedy behaviour policyé‡‡æ ·ä¼˜åŒ–randomised action-value functionã€‚</li>
<li>ç½‘ç»œä¸­çš„fully connected layerså…¨éƒ½æ¢æˆäº†å‚æ•°åŒ–çš„noisy networkï¼Œnoisy networkçš„å‚æ•°åœ¨æ¯ä¸€æ¬¡replayä¹‹åä»noiseæœä»çš„distributionä¸­è¿›è¡Œé‡‡æ ·ã€‚è¿™é‡Œä½¿ç”¨çš„noseæ˜¯factorised Gaussian noiseã€‚</li>
</ol>
<p>åœ¨replay æ•´ä¸ªbatchçš„è¿‡ç¨‹ä¸­ï¼Œnoisy network parameter sampleä¿æŒä¸å˜ã€‚å› ä¸ºDQNå’ŒDuelingæ¯æ‰§è¡Œä¸€ä¸ªaction stepä¹‹åéƒ½ä¼šæ‰§è¡Œä¸€æ¬¡optimizationï¼Œæ¯æ¬¡é‡‡æ ·actionä¹‹å‰éƒ½è¦é‡æ–°é‡‡æ ·noisy network parametersã€‚</p>
<h4 id="loss">Loss</h4>
<p>$Q(s,a,\epsilon;\zeta)$å¯ä»¥çœ‹æˆ$\zeta$çš„ä¸€ä¸ªrandom variableï¼ŒNoisyNet-DQN losså¦‚ä¸‹ï¼š<br>
$$\bar{L}(\zeta) = \mathbb{E}\left[\mathbb{E}_{(x,a,r,y)}\sim D\left[r + \gamma \max_{b\in A}Q(y, b, \varepsilonâ€™;\zeta^{-}) - Q(x,a,\varepsilon;\zeta)\right]^2\right]\tag{20}$$<br>
å…¶ä¸­å¤–å±‚çš„æœŸæœ›æ˜¯$\varepsilon$ç›¸å¯¹äºnoisy value function $Q(x,a, \varepsilon;\zeta)$å’Œ$\varepsilonâ€™$ç›¸å¯¹äºnoisy target value function $Q(x,a, \varepsilonâ€™;\zeta^{-}$ã€‚å¯¹äºbufferä¸­çš„æ¯ä¸€ä¸ªtransitionï¼Œè®¡ç®—lossçš„æ— åä¼°è®¡ï¼Œåªéœ€è¦è®¡ç®—target valueå’Œtrue valueå³å¯ï¼Œä¸ºäº†è®©target valueå’Œtrueä¹‹é—´æ²¡æœ‰å…³è”ï¼Œtarget networkå’Œonline networké‡‡ç”¨independent noisesã€‚<br>
å°±double dqnä¸­çš„actioné€‰æ‹©æ¥è¯´ï¼Œé‡‡æ ·ä¸€ä¸ªæ–°çš„independent sample $\varepsilon^{â€™â€™}$è®¡ç®—action valueï¼Œç„¶åä½¿ç”¨greedyæ“ä½œï¼ŒNoisyNet-Duelingçš„losså¦‚ä¸‹ï¼š<br>
$$\bar{L}(\zeta) = \mathbb{E}\left[\mathbb{E}_{(x,a,r,y)}\sim D\left[r + \gamma Q(y, b^{*}(y), \varepsilonâ€™;\zeta^{-} - Q(x,a,\varepsilon;\zeta)\right]^2\right]\tag{21}$$<br>
$$b^{*}(y) = \arg \max_{b\in A} Q(y, b(y), \varepsilon^{â€™â€™};\zeta)\tag{22}$$</p>
<h3 id="noisy-a3c">Noisy-A3C</h3>
<p>Noisy-A3Cç›¸å¯¹äºA3Cæœ‰ä»¥ä¸‹çš„æ”¹è¿›ï¼š</p>
<ol>
<li>entropyé¡¹è¢«å»æ‰äº†;</li>
<li>fully-connected layerè¢«æ›¿æ¢æˆäº†noisy networkã€‚</li>
</ol>
<p>A3Cç®—æ³•ä¸­æ²¡æœ‰åƒ$\epsilon$-greedyè¿™æ ·è¿›è¡Œaction explorationï¼Œé€‰ä¸­çš„actioné€šå¸¸æ˜¯ä»current policyä¸­é€‰çš„ï¼ŒåŠ å…¥entropyæ˜¯ä¸ºäº†é¼“åŠ±explorationï¼Œè€Œä¸æ˜¯é€‰æ‹©ä¸€ä¸ªdeterministic policyã€‚å½“æ·»åŠ äº†noisy weightsæ—¶ï¼Œå¯¹å‚æ•°è¿›è¡Œé‡‡æ ·å°±è¡¨ç¤ºé€‰æ‹©ä¸åŒçš„current policyï¼Œå°±å·²ç»ä»£è¡¨äº†explorationã€‚NoisyNetç›¸å½“äºç›´æ¥åœ¨policy spaceä¸­è¿›è¡Œexplorationï¼Œè€Œentropyé¡¹å°±å¯ä»¥å»æ‰äº†ã€‚</p>
<h3 id="noisy-networksçš„åˆå§‹åŒ–">Noisy Networksçš„åˆå§‹åŒ–</h3>
<p>åœ¨unfactorised noisy networksä¸­ï¼Œæ¯ä¸ª$\mu_{i,j}$ä»ç‹¬ç«‹çš„å‡åŒ€åˆ†å¸ƒ$U\left[-\sqrt{\frac{3}{p}}, \sqrt{\frac{3}{p}}\right]$ä¸­é‡‡æ ·åˆå§‹åŒ–ï¼Œå…¶ä¸­$p$æ˜¯å¯¹åº”linear layerçš„è¾“å…¥ä¸ªæ•°ï¼Œ$\sigma_{i,j}$è®¾ç½®ä¸ºä¸€ä¸ªå¸¸æ•°$0.0017$ï¼Œè¿™æ˜¯ä»ç›‘ç£å­¦ä¹ çš„ä»»åŠ¡ä¸­å€Ÿé‰´çš„ã€‚<br>
åœ¨factorised noisy netowrksä¸­ï¼Œæ¯ä¸ª$\mu_{i,j}$ä»ç‹¬ç«‹çš„å‡åŒ€åˆ†å¸ƒ$U\left[-\sqrt{\frac{1}{p}}, \sqrt{\frac{1}{p}}\right]$ä¸­è¿›è¡Œé‡‡æ ·ï¼Œ$\sigma_{i,j}$è®¾ç½®ä¸º$\frac{\sigma_0}{p}$ï¼Œè¶…å‚æ•°$\sigma_0$è®¾ç½®ä¸º$0.5$ã€‚</p>
<h3 id="ç®—æ³•-v6">ç®—æ³•</h3>
<p>ç®—æ³•5 NoisyNet-DQN / NoisyNet-Dueling<br>
è¾“å…¥: Env Environment; $\varepsilon$ random variables of the networkçš„é›†åˆ<br>
è¾“å…¥: DUELING Boolean; &quot;true&quot;ä»£è¡¨NoisyNet-Dueling and &quot;false&quot;ä»£è¡¨ NoisyNet-DQN<br>
è¾“å…¥: $B$ç©ºreplay buffer; $\zeta$åˆå§‹çš„network parameters; $\zeta^{-}$åˆå§‹çš„target network parameters<br>
è¾“å…¥: replay bufferå¤§å°$N_B$; batch size $N_T$; target networkæ›´æ–°é¢‘ç‡$N^{-}$<br>
è¾“å‡º: $Q(\cdot, \varepsilon; \zeta)$ action-value function<br>
<strong>for</strong> episode $e\in  {1,\cdots , M}$ do<br>
$\qquad$åˆå§‹åŒ–state sequence $x_0 \sim Env$<br>
$\qquad$<strong>for</strong> $t \in {1,\cdots }$ do<br>
$\qquad\qquad$è®¾ç½®$x \leftarrow x_0$<br>
$\qquad\qquad$é‡‡æ · a noisy network  $\xi\sim \varepsilon$<br>
$\qquad\qquad$é€‰æ‹©an action $a \leftarrow \arg \max_{b\in A} Q(x, b, \xi; \zeta)$<br>
$\qquad\qquad$é‡‡æ · next state $y \sim  P (\cdot|x, a)$, æ¥æ”¶ reward $r \leftarrow R(x, a) $ä»¥åŠ$x_0 \leftarrow y$<br>
$\qquad\qquad$å°†transition (x, a, r, y)æ·»åŠ åˆ°replay buffer<br>
$\qquad\qquad$<strong>if</strong> $|B| \gt N_B$ then<br>
$\qquad\qquad\qquad$åˆ æ‰æœ€è€çš„transition<br>
$\qquad\qquad$<strong>end if</strong><br>
$\qquad$é‡‡æ ·ä¸€ä¸ªå¤§å°ä¸º$N_T$çš„batch, transitions $((x_j, a_j, r_j, y_j) \sim D)_{j=1}^{N_T}$<br>
$\qquad\qquad$é‡‡æ ·noisy variablesç”¨äºonline network $\xi \sim\varepsilon$<br>
$\qquad\qquad$é‡‡æ ·noisy variablesç”¨äºtarget network $\xiâ€™\sim\varepsilon$<br>
$\qquad\qquad\qquad$<strong>if</strong> DUELING then<br>
$\qquad\qquad\qquad$é‡‡æ ·noisy variablesç”¨äºé€‰æ‹©actionçš„network $\xi\sim\varepsilon$<br>
$\qquad\qquad$<strong>end if</strong><br>
$\qquad\qquad$<strong>for</strong> $j \in {1,\cdots, N_T}$ do<br>
$\qquad\qquad\qquad$<strong>if</strong> $y_j$ is a terminal state then<br>
$\qquad\qquad\qquad\qquad$$\hat{Q}\leftarrow r_j$<br>
$\qquad\qquad\qquad$<strong>end if</strong><br>
$\qquad\qquad\qquad$<strong>if</strong> DUELING then<br>
$\qquad\qquad\qquad\qquad b^{*}(y_j) = \arg \max_{b\in A} Q(y_j, b, \xi^{â€™â€™}; \zeta)$<br>
$\qquad\qquad\qquad\qquad\qquad \hat{Q}\leftarrow r_j + \gamma Q(y_j, b^{*}(y_j), \xiâ€™;\zeta^{-})$<br>
$\qquad\qquad\qquad$<strong>else</strong><br>
$\qquad\qquad\qquad\qquad$$\hat{Q}\leftarrow r_j + \gamma \max_{b\in A} Q(y_j, b, \xiâ€™;\zeta^{-})$<br>
$\qquad\qquad$<strong>end if</strong><br>
$\qquad\qquad\qquad$åˆ©ç”¨loss $(\hat{Q}-Q(x_j,a_j, \xi;\zeta))^2$çš„æ¢¯åº¦æ›´æ–°$\zeta$<br>
$\qquad\qquad$<strong>end for</strong><br>
$\qquad\qquad$æ¯éš”$N^{-}$æ­¥æ›´æ–°target network:$ \zeta^{âˆ’}\leftarrow \zeta$<br>
$\qquad$<strong>end for</strong><br>
<strong>end for</strong></p>
<p>ç®—æ³•6 NoisyNet-A3C for each actor-learner thread<br>
è¾“å…¥: Environment Env, å…¨å±€å…±äº«å‚æ•°$(\zeta_{\pi},\zeta_{V})$ , å…¨å±€å…±äº«counter $T$å’Œmaximal time $T_{max}$<br>
è¾“å…¥: æ¯ä¸ªçº¿ç¨‹çš„å‚æ•° $(\zetaâ€™_{\pi},\zetaâ€™_{V})$, random variables $\varepsilon$çš„é›†åˆ, æ¯ä¸ªçº¿ç¨‹çš„counter $t$å’ŒTD-$\gamma$çš„é•¿åº¦$t_{max}$<br>
è¾“å‡º: policy $\pi(\cdot; \zeta_{\pi}, \varepsilon)$å’Œvalue $V(\cdot; \zeta_{V}, \varepsilon)$<br>
åˆå§‹åŒ–çº¿ç¨‹counter $t \leftarrow 1$<br>
<strong>repeat</strong><br>
$\qquad$é‡ç½®acumulative gradients: $d\zeta_{\pi}\leftarrow 0$å’Œ$d\zeta_V \leftarrow 0$<br>
$\qquad$Synchroniseæ¯ä¸ªçº¿ç¨‹çš„parameters: $\zetaâ€™_{\pi}\leftarrow \zeta_{\pi}$å’Œ$\zeta_V\leftarrow \zeta_V$<br>
$\qquad$counter $\leftarrow 0$<br>
$\qquad$ä»Envä¸­å¾—åˆ°state $x_t$<br>
$\qquad$é‡‡æ ·noise: $\xi\sim\varepsilon$<br>
$\qquad r \leftarrow []$<br>
$\qquad a \leftarrow []$<br>
$\qquad x \leftarrow []$å’Œ$x[0] \leftarrow x_t$<br>
$\qquad$<strong>repeat</strong><br>
$\qquad\qquad$é‡‡æ ·action: $a_t \sim\pi(\cdot|x_t;\zetaâ€™_{\pi};\xi)$<br>
$\qquad\qquad$$a[âˆ’1]\leftarrow a_t$<br>
$\qquad\qquad$æ¥æ”¶reward $r_t$å’Œnext state $x_{t+1}$<br>
$\qquad\qquad$$r[âˆ’1]\leftarrow r_t$å’Œ$x[âˆ’1]\leftarrow x_t+1$<br>
$\qquad\qquad$$t\leftarrow t + 1$å’Œ $T\leftarrow T + 1$<br>
$\qquad\qquad$$counter = counter + 1$<br>
$\qquad\qquad$<strong>until</strong> $x_t\ \ terminal\ \ or\ \ counter == t_{max} + 1$<br>
$\qquad$<strong>if</strong> $x_t$ is a terminal state then<br>
$\qquad\qquad$$Q = 0$<br>
$\qquad$<strong>else</strong><br>
$\qquad\qquad$$Q = V(x_t; \zetaâ€™_{V}, \xi)$<br>
$\qquad$<strong>end if</strong><br>
$\qquad$<strong>for</strong> $i \in {counter âˆ’ 1, \cdots, 0}$ do<br>
$\qquad\qquad$æ›´æ–°Q: $Q\leftarrow r[i] + \gamma Q$<br>
$\qquad\qquad$ç´¯ç§¯policy-gradient: $d\zeta_{\pi} \leftarrow d\zeta_{\pi} + \nabla \zetaâ€™_{\pi}log(\pi(a[i]|x[i]; \zetaâ€™_{\pi}, \xi))[Q âˆ’ V(x[i]; \zetaâ€™_{\pi}V, \xi)]$<br>
$\qquad\qquad$ç´¯ç§¯ value-gradient: $d\zeta_V \leftarrow â† d\zeta_V+ \nabla \zetaâ€™_{V}[Q âˆ’ V(x[i]; \zetaâ€™_{V}, \xi)]^2$<br>
$\qquad$<strong>end for</strong><br>
$\qquad$æ‰§è¡Œ$\zeta_{\pi}$çš„asynchronous update: $\zeta_{\pi}\leftarrow \zeta_{\pi} + \alpha_{\pi}d\zeta_{\pi}$<br>
$\qquad$æ‰§è¡Œ$\zeta_{V}$çš„asynchronous update: $\zeta_{V}\leftarrow \zeta_{V} âˆ’ \alpha_VdV\zeta_{V}$<br>
<strong>until</strong> $T \gt T_{max}$</p>
<h2 id="rainbow">Rainbow</h2>
<h2 id="å‚è€ƒæ–‡çŒ®">å‚è€ƒæ–‡çŒ®</h2>
<p>1.<a href="https://blog.csdn.net/yangshaokangrushi/article/details/79774031" target="_blank" rel="noopener">https://blog.csdn.net/yangshaokangrushi/article/details/79774031</a><br>
2.<a href="https://link.springer.com/article/10.1007%2FBF00992698" target="_blank" rel="noopener">https://link.springer.com/article/10.1007%2FBF00992698</a><br>
3.<a href="https://www.jianshu.com/p/b92dac7a4225" target="_blank" rel="noopener">https://www.jianshu.com/p/b92dac7a4225</a><br>
4.<a href="https://datascience.stackexchange.com/questions/20535/what-is-experience-replay-and-what-are-its-benefits/20542#20542" target="_blank" rel="noopener">https://datascience.stackexchange.com/questions/20535/what-is-experience-replay-and-what-are-its-benefits/20542#20542</a><br>
5.<a href="https://stats.stackexchange.com/questions/897/online-vs-offline-learning" target="_blank" rel="noopener">https://stats.stackexchange.com/questions/897/online-vs-offline-learning</a><br>
6.<a href="https://www.freecodecamp.org/news/improvements-in-deep-q-learning-dueling-double-dqn-prioritized-experience-replay-and-fixed-58b130cc5682/" target="_blank" rel="noopener">https://www.freecodecamp.org/news/improvements-in-deep-q-learning-dueling-double-dqn-prioritized-experience-replay-and-fixed-58b130cc5682/</a><br>
7.<a href="https://jaromiru.com/2016/11/07/lets-make-a-dqn-double-learning-and-prioritized-experience-replay/" target="_blank" rel="noopener">https://jaromiru.com/2016/11/07/lets-make-a-dqn-double-learning-and-prioritized-experience-replay/</a><br>
8.<a href="https://datascience.stackexchange.com/questions/32873/prioritized-replay-what-does-importance-sampling-really-do" target="_blank" rel="noopener">https://datascience.stackexchange.com/questions/32873/prioritized-replay-what-does-importance-sampling-really-do</a><br>
9.<a href="https://papers.nips.cc/paper/5249-weighted-importance-sampling-for-off-policy-learning-with-linear-function-approximation.pdf" target="_blank" rel="noopener">https://papers.nips.cc/paper/5249-weighted-importance-sampling-for-off-policy-learning-with-linear-function-approximation.pdf</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mxxhcm.github.io/2019/01/29/Modeling-Others-using-Oneself-in-Multi-Agent-Reinforcement-Learning/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="é©¬æ™“é‘«çˆ±é©¬èŸèŸ">
      <meta itemprop="description" content="è®°å½•ç¡•å£«ä¸‰å¹´è‡ªå·±çš„ç§¯ç´¯">
      <meta itemprop="image" content="/images/favicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mxxhcm's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/01/29/Modeling-Others-using-Oneself-in-Multi-Agent-Reinforcement-Learning/" class="post-title-link" itemprop="http://mxxhcm.github.io/page/20/index.html">Modeling Others using Oneself in Multi-Agent Reinforcement Learning</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-01-29 13:19:33" itemprop="dateCreated datePublished" datetime="2019-01-29T13:19:33+08:00">2019-01-29</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2019-05-07 00:22:27" itemprop="dateModified" datetime="2019-05-07T00:22:27+08:00">2019-05-07</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/å¼ºåŒ–å­¦ä¹ /" itemprop="url" rel="index"><span itemprop="name">å¼ºåŒ–å­¦ä¹ </span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="æ‘˜è¦">æ‘˜è¦</h2>
<p>æˆ‘ä»¬è€ƒè™‘ä½¿ç”¨ä¸å®Œå…¨ä¿¡æ¯çš„å¤šæ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ é—®é¢˜ï¼Œæ¯ä¸ªæ™ºèƒ½ä½“çš„ç›®æ ‡æ˜¯æœ€å¤§åŒ–è‡ªèº«çš„æ•ˆç”¨ã€‚å¥–åŠ±å‡½æ•°å–å†³äºä¸¤ä¸ªæ™ºèƒ½ä½“çš„éšè—çŠ¶æ€ï¼ˆæˆ–è€…ç›®æ ‡ï¼‰ï¼Œæ¯ä¸€ä¸ªæ™ºèƒ½ä½“å¿…é¡»ä»å®ƒè§‚å¯Ÿåˆ°çš„è¡Œä¸ºä¸­æ¨æ–­å‡ºå…¶ä»–ç©å®¶çš„éšè—ç›®æ ‡ä»è€Œå®Œæˆä»»åŠ¡ã€‚æˆ‘ä»¬æå‡ºäº†ä¸€ç§æ–°çš„æ–¹æ³•åœ¨è¿™äº›é¢†åŸŸä¸­è¿›è¡Œå­¦ä¹ ï¼šè‡ªæˆ‘å…¶ä»–å»ºæ¨¡ï¼ˆSOMï¼‰ï¼Œæ™ºèƒ½ä½“ä½¿ç”¨è‡ªå·±çš„ç­–ç•¥æ¥é¢„æµ‹å…¶ä»–æ™ºèƒ½ä½“çš„åŠ¨ä½œå¹¶å®æ—¶æ›´æ–°å…¶ä»–æ™ºèƒ½ä½“éšè—çŠ¶æ€çš„ç½®ä¿¡åº¦ã€‚æˆ‘ä»¬åœ¨ä¸‰ä¸ªä¸åŒçš„ä»»åŠ¡ä¸Šå¯¹è¯¥æ–¹æ³•è¿›è¡Œäº†è¯„ä¼°ï¼Œç»“æœè¡¨æ˜æ™ºèƒ½ä½“æ— è®ºåœ¨åˆä½œè¿˜æ˜¯å¯¹æŠ—ç¯å¢ƒä¸­éƒ½èƒ½ä½¿ç”¨ä»–ä»¬å¯¹å…¶ä»–ç©å®¶éšè—çŠ¶æ€çš„ä¼°è®¡æ¥å­¦ä¹ åˆ°æ›´å¥½çš„ç­–ç•¥ã€‚</p>
<h2 id="å¼•è¨€">å¼•è¨€</h2>
<p>åœ¨å¤šæ™ºèƒ½ä½“ç³»ç»Ÿä¸­æ¨ç†å…¶ä»–æ™ºèƒ½ä½“çš„æ„å›¾å¹¶é¢„æµ‹å®ƒä»¬çš„è¡Œä¸ºæ˜¯å¾ˆé‡è¦çš„ï¼Œè¿™äº›æ™ºèƒ½ä½“å¯èƒ½æœ‰ä¸åŒçš„ç”šè‡³æ˜¯ç«äº‰çš„ç›®æ ‡é›†ã€‚ç”±äºå¤šæ™ºèƒ½ä½“ç³»ç»Ÿçš„ä¸ç¨³å®šæ€§ï¼Œè¿™ä»ç„¶æ˜¯ä¸€ä¸ªéå¸¸å…·æœ‰æŒ‘æˆ˜æ€§çš„é—®é¢˜ã€‚<br>
åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†ä¸€ç§ä»å…¶ä»–æ™ºèƒ½ä½“çš„è¡Œä¸ºä¸­ä¼°è®¡å¯¹åº”çš„æœªçŸ¥çš„ç›®æ ‡å’Œå¹¶åˆ©ç”¨è¿™äº›ä¼°è®¡çš„ç›®æ ‡é€‰æ‹©åŠ¨ä½œçš„æ–°æ–¹æ³•ã€‚æˆ‘ä»¬è¯æ˜äº†åœ¨æœ¬æ–‡æåˆ°çš„ä»»åŠ¡ä¸­ï¼Œåœ¨æ¸¸æˆä¸­æ˜¾å¼çš„å¯¹å…¶ä»–ç©å®¶è¿›è¡Œå»ºæ¨¡æ¯”å°†å…¶ä»–æ™ºèƒ½ä½“çœ‹åšç¯å¢ƒçš„ä¸€éƒ¨åˆ†ä¼šæœ‰æ›´å¥½çš„æ€§èƒ½ã€‚æˆ‘ä»¬å°†é—®é¢˜å®šä¹‰ä¸ºåŒäººéšæœºæ¸¸æˆï¼Œä¹Ÿå«åŒäººé©¬å°”å¯å¤«æ¸¸æˆï¼Œå…¶ä¸­ç¯å¢ƒå¯¹äºæ™ºèƒ½ä½“æ˜¯å®Œå…¨å¯è§çš„ï¼Œä½†æ˜¯æ²¡æœ‰å…³äºå…¶ä»–æ™ºèƒ½ä½“ç›®æ ‡çš„æ˜ç¡®çŸ¥è¯†è€Œä¸”æ²¡æœ‰æ²Ÿé€šä¿¡é“ã€‚æ¯ä¸ªæ™ºèƒ½ä½“åœ¨å›åˆç»“æŸæ—¶æ”¶åˆ°çš„å¥–åŠ±å–å†³äºä¸¤ä¸ªæ™ºèƒ½ä½“çš„ç›®æ ‡ï¼Œå› æ­¤æ˜¯æ¯ä¸ªæ™ºèƒ½ä½“æœ€ä¼˜çš„ç­–ç•¥éƒ½å¿…é¡»è€ƒè™‘åˆ°æ‰€æœ‰æ™ºèƒ½ä½“çš„ç›®æ ‡ã€‚<br>
è®¤çŸ¥ç§‘å­¦ç ”ç©¶è¡¨æ˜ï¼Œäººç±»ç»´æŒä¸ä»–ä»¬è”ç³»çš„å…¶ä»–äººçš„æ¨¡å‹ï¼Œè¿™äº›æ¨¡å‹ç”¨æ¥æ•æ‰é‚£äº›äººçš„ç›®æ ‡ï¼Œä¿¡ä»°æˆ–åå¥½ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œäººç±»åˆ©ç”¨è‡ªå·±çš„å¿ƒç†è¿‡ç¨‹æ¥æ¨¡æ‹Ÿä»–äººçš„è¡Œä¸ºã€‚è¿™ä½¿ä»–ä»¬èƒ½å¤Ÿç†è§£å…¶ä»–äººçš„æ„å›¾æˆ–åŠ¨æœºï¼Œå¹¶èƒ½åœ¨ç¤¾äº¤åœºåˆé‡‡å–ç›¸åº”çš„è¡ŒåŠ¨ã€‚å—è¿™äº›ç ”ç©¶çš„å¯å‘ï¼Œå…³é”®æƒ³æ³•æ˜¯è¦ç†è§£æ¸¸æˆä¸­å…¶ä»–ç©å®¶æ­£åœ¨åšä»€ä¹ˆï¼Œæ™ºèƒ½ä½“åº”è¯¥é—®è‡ªå·±â€œå¦‚æœæˆ‘æ‰®æ¼”å¦ä¸€ä¸ªç©å®¶çš„è§’è‰²ï¼Œæˆ‘çš„ç›®æ ‡æ˜¯ä»€ä¹ˆï¼Ÿâ€ã€‚æˆ‘ä»¬é€šè¿‡ä½¿ç”¨ä¸€ä¸ªå¤šå±‚å¾ªç¯ç¥ç»ç½‘ç»œå‚æ•°åŒ–æ™ºèƒ½ä½“çš„åŠ¨ä½œå’Œå€¼å‡½æ•°æ¥å®ç°è¿™ä¸ªæƒ³æ³•ï¼Œè¯¥ç¥ç»ç½‘ç»œå°†çŠ¶æ€å’Œç›®æ ‡ä½œä¸ºè¾“å…¥ã€‚å½“æ™ºèƒ½ä½“ç©æ¸¸æˆæ—¶ï¼Œå®ƒé€šè¿‡ç›´æ¥ä½¿ç”¨è‡ªå·±çš„åŠ¨ä½œå‡½æ•°ä¼˜åŒ–ç›®æ ‡æ¥æœ€å¤§åŒ–å¯¹æ–¹è¡ŒåŠ¨çš„å¯èƒ½æ€§ï¼Œä»è€Œæ¨æ–­å‡ºå…¶ä»–æ™ºèƒ½ä½“çš„æœªçŸ¥ç›®æ ‡ã€‚</p>
<h2 id="æ–¹æ³•">æ–¹æ³•</h2>
<p><strong>èƒŒæ™¯</strong> ä¸¤ä¸ªæ™ºèƒ½ä½“çš„é©¬å°”å¯å¤«æ¸¸æˆç”±æè¿°æ‰€æœ‰æ™ºèƒ½ä½“çš„å¯èƒ½é…ç½®çš„ä¸€ç»„çŠ¶æ€é›†åˆ$S$ï¼Œä¸¤ç»„åŠ¨ä½œé›†åˆ$A_1$ï¼Œ$A_2$å’Œä¸¤ä¸ªæ™ºèƒ½ä½“çš„è§‚å¯Ÿ$O_1$ï¼Œ$O_2$ä»¥åŠè½¬æ¢å‡½æ•°$\Tau$ï¼š$S\times A_1 \times A_2 \rightarrow S$ä½œä¸ºå½“å‰çŠ¶æ€å’ŒåŠ¨ä½œçš„å‡½æ•°ç»™å‡ºä¸‹ä¸€ä¸ªçŠ¶æ€çš„æ¦‚ç‡åˆ†å¸ƒã€‚æ¯ä¸ªæ™ºèƒ½ä½“$i$é€šè¿‡ä»éšæœºç­–ç•¥$\pi_{\theta_i}:S\times A_i\rightarrow [0,1]$ä¸­é‡‡æ ·é€‰æ‹©åŠ¨ä½œã€‚æ¯ä¸ªæ™ºèƒ½ä½“éƒ½æœ‰ä¸€ä¸ªå¥–åŠ±å‡½æ•°ï¼Œå®ƒå–å†³äºæ™ºèƒ½ä½“çš„çŠ¶æ€å’ŒåŠ¨ä½œï¼š$r_iï¼šS\times A_i\rightarrow R$ã€‚æ¯ä¸ªæ™ºèƒ½ä½“$i$è¯•å›¾æœ€å¤§åŒ–è‡ªå·±çš„æ€»é¢„æœŸæ”¶ç›Š$R_i = \sum_{t =0}<sup>T\gamma</sup>tr_i^t$ï¼Œå…¶ä¸­$\gamma$æ˜¯æŠ˜æ‰£å› å­ï¼Œ$T$æ˜¯æ—¶é—´èŒƒå›´ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬è€ƒè™‘äº†åˆä½œä»¥åŠç«äº‰ç¯å¢ƒã€‚<br>
æ¥ä¸‹æ¥ä»‹ç»è‡ªæˆ‘å…¶ä»–æ¨¡å‹ï¼ˆSOMï¼‰ï¼Œè¿™æ˜¯ä¸€ç§åœ¨ä¸€ä¸ªå›åˆå†…ä»¥å®æ—¶æ–¹å¼æ¨æ–­å…¶ä»–æ™ºèƒ½ä½“çš„ç›®æ ‡å¹¶ä½¿ç”¨è¿™äº›ä¼°è®¡æ¥é€‰æ‹©åŠ¨ä½œçš„æ–°æ–¹æ³•ã€‚ä¸ºäº†å†³å®šä¸€ä¸ªåŠ¨ä½œå¹¶ä¼°è®¡ä¸€ä¸ªçŠ¶æ€çš„å€¼ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªç¥ç»ç½‘ç»œ$f$å°†å®ƒè‡ªå·±çš„ç›®æ ‡$z_{self}$ï¼Œå¦ä¸€ä¸ªç©å®¶çš„ä¼°è®¡ç›®æ ‡$\hat{z}<em>{self}$ï¼Œå¹¶ä¸”ä»–è‡ªå·±çš„è§’åº¦çš„è§‚å¯ŸçŠ¶æ€$s</em>{self}$ä½œä¸ºè¾“å…¥ï¼Œè¾“å‡ºåŠ¨ä½œ$\pi$çš„ä¸€ä¸ªæ¦‚ç‡åˆ†å¸ƒå’Œå€¼ä¼°è®¡$V$ï¼Œå³å¯¹äºæ¯ä¸ªç©æ¸¸æˆçš„æ™ºèƒ½ä½“ï¼Œæœ‰ï¼š<br>
$$\begin{bmatrix}\pi<sup>i\V</sup>i\end{bmatrix}=f<sup>i(s_{self}</sup>i,z_{self}<sup>i,\hat{z}_{other}</sup>i;\theta^i)$$<br>
å…¶ä¸­$\theta_i$æ˜¯æ™ºèƒ½ä½“$i$çš„ç¥ç»ç½‘ç»œ$f$çš„å‚æ•°ï¼ŒåŒ…æ‹¬ä¸€ä¸ªsoftmaxå±‚è¾“å‡ºç­–ç•¥ï¼Œä¸€ä¸ªçº¿æ€§å±‚è¾“å‡ºå€¼å‡½æ•°ï¼Œæ‰€æœ‰éè¾“å‡ºå±‚æ˜¯å…±äº«çš„ã€‚åŠ¨ä½œæ˜¯ä»ç­–ç•¥$\pi$ä¸­é‡‡æ ·å¾—åˆ°çš„ã€‚è§‚å¯ŸçŠ¶æ€$s_{self}<sup>i$åŒ…å«$f</sup>i$æ™ºèƒ½ä½“çš„ä½ç½®ï¼Œä»¥åŠå…¶ä»–æ™ºèƒ½ä½“çš„ä½ç½®ã€‚æ¯ä¸ªæ™ºèƒ½ä½“éƒ½æœ‰ä¸¤ä¸ªç½‘ç»œï¼ˆä¸ºäº†ç®€æ´ï¼Œçœç•¥äº†æ™ºèƒ½ä½“ä¸Šæ ‡$i$ï¼‰ï¼Œä¸€ä¸ªè®¡ç®—å®ƒè‡ªå·±çš„åŠ¨ä½œå’Œå€¼å‡½æ•°ï¼Œä¸€ä¸ªè®¡ç®—å…¶ä»–æ™ºèƒ½ä½“çš„ä¼°è®¡å€¼ï¼Œå¦‚ä¸‹ï¼š<br>
\begin{equation}<br>
f_{self}(s_{self},z_{self},\hat{z}<em>{other};\theta</em>{self})<br>
\end{equation}<br>
\begin{equation}<br>
f_{other}(s_{other},\hat{z}<em>{other},z</em>{self};\theta_{self})<br>
\end{equation}<br>
è¿™ä¸¤ä¸ªç½‘ç»œä½¿ç”¨çš„æ–¹å¼ä¸åŒï¼š$f_{self}$ç”¨äºè®¡ç®—æ™ºèƒ½ä½“è‡ªå·±çš„è¡Œä¸ºå’Œä»·å€¼ï¼Œå¹¶ä»¥å‰é¦ˆæ–¹å¼è¿è¡Œã€‚ç»™å‡ºå…¶ä»–æ™ºèƒ½ä½“è§‚å¯Ÿåˆ°çš„åŠ¨ä½œï¼Œæ™ºèƒ½ä½“ä½¿ç”¨$f_{other}$é€šè¿‡ä¼˜åŒ–$\hat{z}<em>{other}$æ¨æ–­å…¶ä»–æ™ºèƒ½ä½“çš„ç›®æ ‡ã€‚<br>
æˆ‘ä»¬å»ºè®®æ¯ä¸ªæ™ºèƒ½ä½“ä½¿ç”¨è‡ªå·±çš„ç­–ç•¥æ¨¡æ‹Ÿå…¶ä»–ç©å®¶çš„è¡Œä¸ºï¼Œè¿™æ ·$f</em>{other}$çš„å‚æ•°ä¸$f_{self}$çš„å‚æ•°æ˜¯ç›¸åŒçš„ã€‚ä½†è¯·æ³¨æ„ï¼Œä¸¤ä¸ªç½‘ç»œçš„è¾“å…¥$z_{self}$å’Œ$\hat{z}<em>{other}$çš„ç›¸å¯¹ä½ç½®ä¸åŒã€‚å¦å¤–ï¼Œç”±äºç¯å¢ƒæ˜¯å®Œå…¨å¯è§‚æµ‹çš„ï¼Œä¸¤ä¸ªæ™ºèƒ½ä½“çš„è§‚å¯ŸçŠ¶æ€çš„ä¸åŒä»…é€šè¿‡åœ°å›¾ä¸Šæ™ºèƒ½ä½“çš„èº«ä»½ä½“ç°å‡ºæ¥ï¼ˆå³ï¼Œæ¯ä¸ªæ™ºèƒ½ä½“å°†èƒ½å¤ŸåŒºåˆ†å…¶è‡ªå·±çš„ä½ç½®å’Œå¦ä¸€ä¸ªæ™ºèƒ½ä½“çš„ä½ç½®ï¼‰ã€‚å› æ­¤ï¼Œåœ¨actingæ¨¡å¼ä¸‹ï¼Œ$f</em>{self}$ç½‘ç»œå°†$s_{self}$ä½œä¸ºè¾“å…¥ï¼›åœ¨æ¨ç†æ¨¡å¼ä¸‹ï¼Œ$f_{other}$ç½‘ç»œå°†$s_{other}$ä½œä¸ºè¾“å…¥ã€‚åœ¨æ¸¸æˆçš„æ¯ä¸€æ­¥ï¼Œæ™ºèƒ½ä½“éœ€è¦æ¨ç†$\hat{z}<em>{other}$å°†å…¶ä½œä¸º(1)çš„è¾“å…¥å¹¶é€‰æ‹©å…¶åŠ¨ä½œã€‚ä¸ºäº†å®ç°è¿™ä¸ªç›®çš„ï¼Œåœ¨æ¯ä¸€æ­¥ä¸­ï¼Œæ™ºèƒ½ä½“è§‚å¯Ÿå¦ä¸€ä¸ªæ™ºèƒ½ä½“é‡‡å–çš„è¡ŒåŠ¨ï¼Œå¹¶ä¸”åœ¨ä¸‹ä¸€æ­¥ä¸­ï¼Œæ™ºèƒ½ä½“ä½¿ç”¨å…ˆå‰è§‚å¯Ÿåˆ°çš„å¦ä¸€ä¸ªæ™ºèƒ½ä½“çš„åŠ¨ä½œä½œä¸ºç›‘ç£ä¿¡å·ï¼Œä½¿ç”¨å¼å­(2)åå‘ä¼ æ’­å¹¶ä¼˜åŒ–å…¶$\hat{z}</em>{other}$ï¼Œå¦‚å›¾1æ‰€ç¤ºã€‚<br>
æ¨ç†è¿‡ç¨‹ä¼˜åŒ–å™¨ä¸­é‡‡å–çš„æ­¥æ•°æ˜¯ä¸€ä¸ªå¯æ ¹æ®æ¸¸æˆçš„ä¸åŒè€Œå˜åŒ–çš„è¶…å‚æ•°ã€‚å› æ­¤ï¼Œåœ¨æ¸¸æˆçš„æ¯ä¸€æ­¥ä¸­å…¶ä»–æ™ºèƒ½ä½“çš„ç›®æ ‡ä¼°è®¡$\hat{z}<em>{other}$ä¼šè¢«æ›´æ–°å¤šæ¬¡ã€‚å‚æ•°$\theta</em>{self}$åœ¨æ¯ä¸ªå›åˆç»“æŸæ—¶ä½¿ç”¨å’Œå¸¦æœ‰æ™ºèƒ½ä½“è·å¾—çš„å¥–åŠ±ä¿¡å·çš„Asynchronous Advantage Actor-Criticï¼ˆA3Cï¼‰è¿›è¡Œæ›´æ–°ã€‚<br>
ç®—æ³•1ç»™å‡ºäº†ä¸€ä¸ªå›åˆå†…è®­ç»ƒSOMæ™ºèƒ½ä½“çš„ä¼ªä»£ç ã€‚è¿™é‡Œè€ƒè™‘çš„æ‰€æœ‰ä»»åŠ¡çš„ç›®æ ‡éƒ½æ˜¯ç¦»æ•£çš„ï¼Œæ™ºèƒ½ä½“çš„ç›®æ ‡$\hat{z}<em>{self}$è¢«<br>
è¡¨ç¤ºç‹¬çƒ­å‘é‡ï¼Œç»´åº¦æ˜¯æ™ºèƒ½ä½“ç›®æ ‡æ‰€æœ‰å¯èƒ½çš„æƒ…å†µæ•°ã€‚å¦ä¸€ä¸ªç©å®¶çš„ç›®æ ‡åµŒå…¥$\hat{z}</em>{other}$æœ‰ç›¸åŒçš„ç»´åº¦ã€‚ä¸ºäº†ä¼°è®¡ç»è¿‡ç¦»æ•£è€Œä¸å¯å¾®çš„å˜é‡$\hat{z}<em>{other}$çš„æ¢¯åº¦ï¼Œæˆ‘ä»¬ç”¨Gumbel-Softmaxåˆ†å¸ƒä¸Šçš„ä¸€ä¸ªå¯å¾®æ ·æœ¬$\hat{z}</em>{other}^G$ä»£æ›¿å®ƒã€‚è¿™ç§é‡æ–°å‚æ•°åŒ–æŠ€å·§è¢«è¯æ˜å¯ä»¥æœ‰æ•ˆåœ°äº§ç”Ÿä½æ–¹å·®åç½®çš„æ¢¯åº¦ã€‚ä½¿ç”¨è¯¥æ–¹æ³•åœ¨æ¯ä¸€æ­¥ä¼˜åŒ–è¿‡$\hat{z}<em>{other}$ä¹‹åï¼Œ$\hat{z}</em>{other}$é€šå¸¸åç¦»ç‹¬çƒ­å‘é‡ã€‚åœ¨ä¸‹ä¸€æ­¥ä¸­ï¼Œ$f_{self}$å°†å¯¹åº”äºå…ˆå‰æ›´æ–°çš„$z_{other}$ argmaxçš„ä¸€ä¸ªç‹¬çƒ­å‘é‡é‡$\hat{z}<em>{other}^OH$ä½œä¸ºè¾“å…¥ã€‚<br>
æ™ºèƒ½ä½“çš„ç­–ç•¥ç”±é•¿çŸ­æœŸè®°å¿†ï¼ˆLSTMï¼‰å•å…ƒå‚æ•°åŒ–ï¼Œä»¥åŠä¸¤ä¸ªå…¨è¿æ¥çš„çº¿æ€§å±‚å’ŒæŒ‡æ•°çº¿æ€§å•å…ƒï¼ˆELUï¼‰æ¿€æ´»å‡½æ•°ã€‚ç¥ç»ç½‘ç»œçš„æƒé‡ç”¨åŠæ­£äº¤çŸ©é˜µåˆå§‹åŒ–ã€‚<br>
ç”±äº$f</em>{other}$çš„å¾ªç¯æ€§ï¼Œå½“æ¨ç†æ­¥æ•°$\gt 1$æ—¶å¿…é¡»ç‰¹åˆ«å°å¿ƒã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåœ¨æ¸¸æˆçš„æ¯ä¸€æ­¥ä¸­ï¼Œæˆ‘ä»¬åœ¨æ¨ç†æ¨¡å¼ä¸­çš„ç¬¬ä¸€æ¬¡å‰å‘ä¼ æ’­ä¹‹å‰ä¿å­˜$f_{other}$çš„å¾ªç¯çŠ¶æ€ï¼Œå¹¶ä¸”åœ¨æ¯ä¸ªæ¨ç†æ­¥éª¤å°†å¾ªç¯çŠ¶æ€åˆå§‹åŒ–ä¸ºæ­¤å€¼ã€‚è¿™ä¸ªè¿‡ç¨‹å¯ä»¥ç¡®ä¿åœ¨åŠ¨ä½œå’Œæ¨ç†æ¨¡å¼ä¸‹$f_{other}$å¯ä»¥å±•å¼€ç›¸åŒæ•°é‡çš„æ­¥éª¤ã€‚</p>
<h2 id="ç›¸å…³å·¥ä½œ">ç›¸å…³å·¥ä½œ</h2>
<p>ä¸å®Œå…¨ä¿¡æ¯çš„æ¸¸æˆä¸­å¯¹æ‰‹å»ºæ¨¡ä¸€ç›´åœ¨è¢«å¹¿æ³›ç ”ç©¶ã€‚ä½†æ˜¯ï¼Œå¤§å¤šæ•°ä»¥å‰çš„æ–¹æ³•éƒ½ä¾§é‡äºç ”ç©¶ç‰¹å®šé¢†åŸŸå†…çš„æ¦‚ç‡å…ˆéªŒæˆ–å‚æ•°åŒ–ç­–ç•¥çš„æ¨¡å‹ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œæœ¬æ–‡çš„å·¥ä½œä¸ºå¯¹æ‰‹å»ºæ¨¡æå‡ºäº†ä¸€ä¸ªæ›´é€šç”¨çš„æ¡†æ¶ã€‚ç»™å®šæ¯”èµ›å†å²ï¼ŒDavidsonä½¿ç”¨MLPé¢„æµ‹å¯¹æ‰‹çš„åŠ¨ä½œï¼Œä½†æ˜¯æ™ºèƒ½ä½“æ— æ³•å®æ—¶é€‚åº”å¯¹æ‰‹çš„è¡Œä¸ºã€‚Lockettç­‰äººè®¾è®¡äº†ä¸€ç§ç¥ç»ç½‘ç»œç»“æ„ï¼Œé€šè¿‡åœ¨ç»™å®šçš„ä¸€ç»„ä¸»è¦å¯¹æ‰‹ä¸Šå­¦ä¹ æƒé‡çš„å€¼æ¥è¯†åˆ«å¯¹æ‰‹ç±»å‹ã€‚ç„¶è€Œï¼Œæ¸¸æˆå¹¶æ²¡æœ‰åœ¨å¼ºåŒ–å­¦ä¹ æ¡†æ¶å†…å±•å¼€ã€‚<br>
å¤§é‡å¤šæ™ºèƒ½ä½“æ·±åº¦å¼ºåŒ–å­¦ä¹ çš„ç ”ç©¶ä¸­ä¾§é‡äºéƒ¨åˆ†å¯è§çš„ï¼Œå®Œå…¨åˆä½œå’Œç´§æ€¥é€šä¿¡ç­‰ç¯å¢ƒã€‚æœ¬æ–‡ä¸å…è®¸æ™ºèƒ½ä½“ä¹‹é—´è¿›è¡Œä»»ä½•æ²Ÿé€šï¼Œå› æ­¤ç©å®¶å¿…é¡»åˆ©ç”¨ä»–ä»¬è§‚å¯Ÿåˆ°çš„è¡Œä¸ºé—´æ¥æ¨ç†ä»–ä»¬å¯¹æ‰‹çš„æ„å›¾ã€‚ä½œä¸ºå¯¹æ¯”ï¼ŒLeiboç­‰è€ƒè™‘åŠåˆä½œå¤šæ™ºèƒ½ä½“ç¯å¢ƒï¼Œæ™ºèƒ½ä½“æ ¹æ®ä»»åŠ¡ç±»å‹å’Œå¥–åŠ±ç»“æ„åˆ¶å®šåˆä½œå’Œç«äº‰ç­–ç•¥ã€‚ç±»ä¼¼åœ°ï¼ŒLoweç­‰äººæå‡ºäº†ä¸€ç§é›†ä¸­ACæ¡†æ¶ï¼Œç”¨äºåœ¨å…·æœ‰æ··åˆç­–ç•¥çš„ç¯å¢ƒä¸­è¿›è¡Œé«˜æ•ˆçš„è®­ç»ƒã€‚ Lererå’ŒPeysakhoviché€šè¿‡å°†é’ˆé”‹ç›¸å¯¹çš„è‘—åæ¸¸æˆç†è®ºç­–ç•¥æ¨å¹¿åˆ°å¤šæ™ºèƒ½ä½“é©¬å°”å¯å¤«æ¸¸æˆï¼Œè®¾è®¡äº†èƒ½å¤Ÿåœ¨å¤æ‚ç¤¾ä¼šå›°å¢ƒä¸­ä¿æŒåˆä½œçš„å¼ºåŒ–å­¦ä¹ æ™ºèƒ½ä½“ã€‚æœ€è¿‘è®¤çŸ¥ç§‘å­¦æ–¹é¢çš„å·¥ä½œè¯•å›¾é€šè¿‡ä½¿ç”¨åˆ†å±‚çš„ç¤¾ä¼šæ™ºèƒ½ä½“æ¨¡å‹æ¥ç†è§£äººç±»çš„å†³ç­–ï¼Œå®ƒèƒ½æ¨æ–­å‡ºå…¶ä»–äººç±»æ™ºèƒ½ä½“çš„æ„å›¾ï¼Œä»è€Œå†³å®šæ˜¯å¦é‡‡å–åˆä½œæˆ–ç«äº‰ç­–ç•¥ã€‚ç„¶è€Œï¼Œè¿™äº›è®ºæ–‡éƒ½æ²¡æœ‰è®¾è®¡å‡ºèƒ½å¤Ÿæ˜¾å¼æ¨¡æ‹Ÿç¯å¢ƒä¸­å…¶ä»–äººå·¥æ™ºèƒ½ä½“æˆ–è€…ä¼°è®¡ä»–ä»¬æ„å›¾çš„ç®—æ³•æ¥æ”¹å–„æ™ºèƒ½ä½“çš„å†³ç­–ã€‚<br>
é€†å¼ºåŒ–å­¦ä¹ é¢†åŸŸä¹Ÿä¸æœ¬æ–‡è€ƒè™‘çš„é—®é¢˜æœ‰å…³ã€‚é€†å¼ºåŒ–å­¦ä¹ çš„ç›®çš„æ˜¯é€šè¿‡è§‚å¯Ÿæ™ºèƒ½ä½“çš„è¡Œä¸ºæ¥æ¨æ–­æ™ºèƒ½ä½“çš„å¥–åŠ±å‡½æ•°ã€‚ç›¸åï¼Œæˆ‘ä»¬çš„æ–¹æ³•ä½¿ç”¨è§‚å¯Ÿåˆ°å…¶ä»–ç©å®¶çš„è¡Œä¸ºä»¥åœ¨çº¿æ–¹å¼ç›´æ¥æ¨æ–­ä»–ä»¬çš„ç›®æ ‡ï¼Œç„¶ååœ¨ç¯å¢ƒçš„actingæ¨¡å¼ä¸­ç”±æ™ºèƒ½ä½“ä½¿ç”¨ã€‚è¿™é¿å…ä¸ºäº†ä¼°è®¡å¥–åŠ±å‡½æ•°æ”¶é›†å…¶ä»–æ™ºèƒ½ä½“çŠ¶æ€-åŠ¨ä½œå¯¹ç¦»çº¿æ ·æœ¬çš„éœ€è¦ï¼Œç„¶åä½¿ç”¨å®ƒæ¥å­¦ä¹ æœ€å¤§åŒ–è¯¥æ•ˆç”¨çš„å•ç‹¬ç­–ç•¥ã€‚æœ€è¿‘Hadfield-Menellç­‰çš„è®ºæ–‡ä¹Ÿå…³æ³¨æ¨ç†ä»–äººæ„å›¾çš„é—®é¢˜ï¼Œä½†ä»–ä»¬å…³æ³¨çš„æ˜¯äººæœºäº¤äº’å’Œä»·å€¼è°ƒæ•´ã€‚åœ¨ç±»ä¼¼ç›®æ ‡çš„æ¨åŠ¨ä¸‹ï¼ŒChandrasekaranç­‰äººè€ƒè™‘å»ºç«‹äººå·¥æ™ºèƒ½ç†è®ºçš„é—®é¢˜ï¼Œä»¥æ”¹å–„äººå·¥æ™ºèƒ½äº¤äº’å’Œäººå·¥æ™ºèƒ½ç³»ç»Ÿçš„å¯è§£é‡Šæ€§ã€‚ä¸ºäº†è¿™ä¸ªç›®æ ‡ï¼Œä»–ä»¬å±•ç¤ºäº†å¯ä»¥ä½¿ç”¨å°‘é‡ç¤ºä¾‹è®­ç»ƒäººä»¬é¢„æµ‹è§†è§‰é—®ç­”æ¨¡å‹çš„å“åº”ã€‚<br>
Foersterç­‰äººå’ŒHeç­‰äººçš„å·¥ä½œä¸æˆ‘ä»¬çš„å·¥ä½œæœ€æ¥è¿‘ã€‚Foersterç­‰äººè®¾è®¡å¼ºåŒ–å­¦ä¹ æ™ºèƒ½ä½“åœ¨æ›´æ–°è‡ªå·±çš„ç­–ç•¥æ—¶åŒæ—¶è€ƒè™‘åˆ°ç¯å¢ƒä¸­å…¶ä»–æ™ºèƒ½ä½“çš„å­¦ä¹ ã€‚è¿™ä½¿å¾—æ™ºèƒ½ä½“èƒ½å¤Ÿå‘ç°è‡ªç§è€Œåˆåä½œçš„ç­–ç•¥ï¼Œä¾‹å¦‚åœ¨è¿­ä»£å›šå¾’å›°å¢ƒä¸­çš„é’ˆé”‹ç›¸å¯¹ç­–ç•¥ã€‚è™½ç„¶æˆ‘ä»¬çš„å·¥ä½œæ²¡æœ‰æ˜ç¡®åœ°è¯•å›¾å¡‘é€ å…¶ä»–æ™ºèƒ½ä½“çš„å­¦ä¹ ï¼Œä½†å®ƒçš„ä¼˜ç‚¹æ˜¯æ™ºèƒ½ä½“å¯ä»¥åœ¨ä¸€ä¸ªå›åˆä¸­æ›´æ–°ä»–ä»¬çš„ä¿¡å¿µå¹¶ä»¥åœ¨çº¿æ–¹å¼æ›´æ–°ç­–ç•¥ä»¥è·å¾—æ›´å¤šå¥–åŠ±ã€‚æˆ‘ä»¬çš„è®¾ç½®ä¹Ÿæœ‰æ‰€ä¸åŒï¼Œå®ƒè®¤ä¸ºæ¯ä¸ªæ™ºèƒ½ä½“éƒ½æœ‰ä¸€äº›å…¶ä»–ç©å®¶æ‰€éœ€çš„éšè—ä¿¡æ¯ï¼Œä»¥ä¾¿æœ€å¤§åŒ–å…¶å›æŠ¥ã€‚<br>
æˆ‘ä»¬çš„å·¥ä½œéå¸¸ç¬¦åˆHeç­‰äººçš„å·¥ä½œï¼Œä½œè€…æ„å»ºäº†ä¸€ä¸ªç”¨äºåœ¨å¼ºåŒ–å­¦ä¹ ç¯å¢ƒä¸­æ„å»ºå…¶ä»–æ™ºèƒ½ä½“çš„ä¸€èˆ¬æ¡†æ¶ã€‚Heç­‰äººæå‡ºäº†ä¸€ä¸ªæ¨¡å‹ï¼Œé€šè¿‡å°†å¯¹æ‰‹çš„è§‚å¯Ÿä½¿ç”¨DQNè¿›è¡Œç¼–ç ï¼Œå…±åŒå­¦ä¹ ä¸€ä¸ªç­–ç•¥å’Œå¯¹æ‰‹çš„è¡Œä¸ºå¯¹æ‰‹ã€‚ä»–ä»¬çš„æ··åˆä¸“å®¶æ¶æ„èƒ½å¤Ÿåœ¨ä¸¤ä¸ªçº¯å¯¹æŠ—æ€§ä»»åŠ¡ä¸­å‘ç°ä¸åŒå¯¹æ‰‹çš„ç­–ç•¥æ¨¡å¼ã€‚æˆ‘ä»¬çš„å·¥ä½œä¸Heç­‰äººçš„å·¥ä½œä¹‹é—´çš„ä¸€ä¸ªåŒºåˆ«åœ¨äºï¼Œæˆ‘ä»¬çš„ç›®æ ‡ä¸æ˜¯æ¨æ–­å…¶ä»–æ™ºèƒ½ä½“çš„ç­–ç•¥ï¼Œè€Œæ˜¯ä¸“æ³¨äºæ˜¾å¼ä¼°è®¡ä»–ä»¬åœ¨ç¯å¢ƒä¸­çš„ç›®æ ‡ã€‚æ­¤å¤–ï¼Œåœ¨è¿™é¡¹å·¥ä½œä¸­ï¼Œæ™ºèƒ½ä½“ä¸æ˜¯ä½¿ç”¨å…¶ä»–æ™ºèƒ½ä½“åŠ¨ä½œçš„äººå·¥è®¾è®¡ç‰¹å¾ï¼Œè€Œæ˜¯æ ¹æ®è‡ªå·±çš„æ¨¡å‹ç«¯åˆ°ç«¯çš„å­¦ä¹ å…¶ä»–æ™ºèƒ½ä½“æ¨¡å‹ã€‚å¦ä¸€ä¸ªåŒºåˆ«æ˜¯ï¼Œåœ¨è¿™é¡¹å·¥ä½œä¸­ï¼Œæ™ºèƒ½ä½“ä½¿ç”¨ä¼˜åŒ–æ¨æ–­å…¶ä»–æ™ºèƒ½ä½“çš„éšè—çŠ¶æ€ï¼Œè€Œä¸æ˜¯é€šè¿‡å‰é¦ˆç½‘ç»œæ¨æ–­å…¶ä»–æ™ºèƒ½ä½“çš„éšè—çŠ¶æ€ã€‚åœ¨ä¸‹é¢çš„å®éªŒä¸­ï¼Œæˆ‘ä»¬è¡¨æ˜SOMä¼˜äºHeç­‰äººçš„æ–¹æ³•ã€‚</p>
<h2 id="å®éªŒ">å®éªŒ</h2>
<p>åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬åœ¨ä¸‰ä¸ªä»»åŠ¡ä¸Šè¯„ä¼°SOMæ¨¡å‹ï¼š</p>
<ul>
<li>ç¡¬å¸æ¸¸æˆï¼Œè¿™æ˜¯ä¸€ä¸ªå®Œå…¨åˆä½œçš„ä»»åŠ¡ï¼Œæ™ºèƒ½ä½“çš„è§’è‰²æ˜¯å¯¹ç§°çš„ã€‚</li>
<li>é…æ–¹æ¸¸æˆï¼Œå®ƒæ˜¯å¯¹æŠ—çš„ï¼Œä½†å…·æœ‰å¯¹ç§°è§’è‰²ã€‚</li>
<li>é—¨ç¦æ¸¸æˆï¼Œå®ƒæ˜¯å®Œå…¨åˆä½œçš„ï¼Œä½†æ˜¯ä¸¤ä¸ªç©å®¶æ‹¥æœ‰ä¸å¯¹ç§°çš„è§’è‰²ã€‚</li>
</ul>
<p>æˆ‘ä»¬å°†SOMä¸å…¶ä»–ä¸‰ä¸ªbaselinesä»¥åŠä¸€ä¸ªå¯ä»¥è®¿é—®å…¶ä»–æ™ºèƒ½ä½“ç›®æ ‡çš„ground truthçš„æ¨¡å‹è¿›è¡Œæ¯”è¾ƒã€‚æ‰€æœ‰ä»»åŠ¡éƒ½æ˜¯åœ¨Mazebase gridworldç¯å¢ƒä¸­åˆ›å»ºçš„ã€‚</p>
<h3 id="baselines">Baselines</h3>
<p>TRUE-OTHER-GOALï¼ˆTOGï¼‰ï¼šæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªç»™å‡ºçš„æ¨¡å‹æ€§èƒ½ä¸Šé™çš„ç­–ç•¥ç½‘ç»œï¼Œè¯¥ç½‘ç»œå°†å…¶ä»–æ™ºèƒ½ä½“çš„çœŸæ­£ç›®æ ‡$z_{other}$ï¼Œä»¥åŠçŠ¶æ€ç‰¹å¾$s_{self}$å’Œè‡ªå·±çš„ç›®æ ‡$z_{self}$ä½œä¸ºè¾“å…¥ã€‚å› ä¸ºè¿™ä¸ªæ¨¡å‹å¯ä»¥ç›´æ¥è®¿é—®å…¶ä»–æ™ºèƒ½ä½“çœŸæ­£çš„ç›®æ ‡ï¼Œå› æ­¤ä¸éœ€è¦å•ç‹¬çš„ç½‘ç»œæ¥æ¨¡æ‹Ÿå…¶ä»–æ™ºèƒ½ä½“çš„è¡Œä¸ºã€‚ TOGçš„ç»“æ„ä¸SOMçš„ä¸€ä¸ªç­–ç•¥ç½‘ç»œ$f_{self}$ç›¸åŒã€‚ NO-OTHER-MODELï¼ˆNOMï¼‰ï¼šæˆ‘ä»¬ä½¿ç”¨çš„ç¬¬ä¸€ä¸ªbaselineä»…ä½¿ç”¨è§‚å¯ŸçŠ¶æ€$s_{self}$å’Œè‡ªèº«ç›®æ ‡$z_{self}$ä½œä¸ºè¾“å…¥ã€‚NOMä¸SOMçš„ä¸€ä¸ªç­–ç•¥ç½‘ç»œ$f_{self}$æœ‰ç›¸åŒçš„æ¶æ„ã€‚è¯¥baselineæ²¡æœ‰å¯¹å…¶ä»–æ™ºèƒ½ä½“çš„æ˜¾å¼å»ºæ¨¡æˆ–ä¼°è®¡å®ƒä»¬çš„ç›®æ ‡ã€‚<br>
é›†æˆ-ç­–ç•¥-é¢„æµ‹å™¨ï¼ˆIPPï¼‰ï¼šä»NOMçš„ä½“ç³»ç»“æ„å’Œè¾“å…¥å¼€å§‹ï¼Œæˆ‘ä»¬æ„å»ºäº†ä¸€ä¸ªæ›´å¼ºçš„baseline IPPï¼Œå®ƒæœ‰ä¸€ä¸ªé¢å¤–çš„æœ€ç»ˆçº¿æ€§å±‚è¾“å‡ºå¦ä¸€ä¸ªæ™ºèƒ½ä½“ä¸‹ä¸€ä¸ªåŠ¨ä½œçš„æ¦‚ç‡åˆ†å¸ƒã€‚é™¤äº†ç”¨äºè®­ç»ƒè¯¥ç½‘ç»œç­–ç•¥çš„A3CæŸå¤±å‡½æ•°ï¼Œæˆ‘ä»¬è¿˜æ·»åŠ äº¤å‰ç†µæŸå¤±é¡¹è®­ç»ƒå…¶ä»–æ™ºèƒ½ä½“çš„è¡Œä¸ºçš„é¢„æµ‹ã€‚<br>
åˆ†ç¦»-ç­–ç•¥-é¢„æµ‹å™¨ï¼ˆSPPï¼‰ï¼šHeç­‰äººæå‡ºäº†ä¸€ä¸ªåŸºäºDQNçš„å¯¹æ‰‹å»ºæ¨¡æ¡†æ¶ã€‚åœ¨ä»–ä»¬çš„æ–¹æ³•ä¸­ï¼Œç»™å®šå¯¹æ‰‹ç‰¹æœ‰çš„äººå·¥æå–çš„çŠ¶æ€ä¿¡æ¯ï¼Œè®­ç»ƒä¸€ä¸ªç¥ç»ç½‘ç»œé¢„æµ‹å¯¹æ‰‹çš„åŠ¨ä½œã€‚è¯¥ç½‘ç»œçš„ä¸­é—´éšè—è¡¨ç¤ºç”¨ä½œQç½‘ç»œçš„è¾“å…¥ã€‚<br>
æˆ‘ä»¬ä¿®æ”¹äº†Heç­‰äººçš„æ¨¡å‹åº”ç”¨åˆ°æœ¬æ–‡çš„åœºæ™¯ä¸­ã€‚ç‰¹åˆ«çš„ï¼Œæˆ‘ä»¬ä½¿ç”¨A3Cè€Œä¸æ˜¯DQNï¼Œæˆ‘ä»¬ä¸ä½¿ç”¨ç‰¹å®šé¢†åŸŸçš„ç‰¹å¾è¡¨ç¤ºå¯¹æ‰‹çš„éšè—çŠ¶æ€ã€‚<br>
æœ€åäº§ç”Ÿçš„SPPæ¨¡å‹ç”±ä¸¤ä¸ªç‹¬ç«‹çš„ç½‘ç»œç»„æˆï¼Œä¸€ä¸ªç­–ç•¥ç½‘ç»œç”¨äºå†³å®šæ™ºèƒ½ä½“çš„åŠ¨ä½œï¼Œä¸€ä¸ªå¯¹æ‰‹ç½‘ç»œç”¨äºé¢„æµ‹å…¶ä»–æ™ºèƒ½ä½“çš„åŠ¨ä½œã€‚å¯¹æ‰‹ç½‘ç»œå°†ä¸–ç•ŒçŠ¶æ€$s$å’Œè‡ªå·±çš„ç›®æ ‡$z_{self}$ä½œä¸ºè¾“å…¥ï¼Œå¹¶è¾“å‡ºå…¶ä»–æ™ºèƒ½ä½“åœ¨ä¸‹ä¸€æ­¥é‡‡å–åŠ¨ä½œçš„æ¦‚ç‡åˆ†å¸ƒï¼Œä»¥åŠå…¶éšè—çŠ¶æ€ï¼ˆç”±ç½‘ç»œçš„å¾ªç¯ç»™å‡ºï¼‰ã€‚ä¸IPPä¸€æ ·ï¼Œæˆ‘ä»¬ä½¿ç”¨å…¶ä»–æ™ºèƒ½ä½“çš„çœŸå®åŠ¨ä½œè®­ç»ƒå¯¹æ‰‹ç­–ç•¥é¢„æµ‹å™¨çš„äº¤å‰ç†µæŸå¤±ã€‚åœ¨æ¯ä¸€æ­¥ä¸­ï¼Œè¯¥ç½‘ç»œè¾“å‡ºçš„éšè—çŠ¶æ€ä»¥åŠæ™ºèƒ½ä½“è§‚å¯ŸçŠ¶æ€å’Œæ™ºèƒ½ä½“è‡ªèº«çš„ç›®æ ‡è¢«ä½œä¸ºæ™ºèƒ½ä½“çš„ç­–ç•¥ç½‘ç»œçš„è¾“å…¥ã€‚ç­–ç•¥ç½‘ç»œå’Œå¯¹æ‰‹ç­–ç•¥é¢„æµ‹å™¨éƒ½æ˜¯ä¸SOMç»“æ„ç›¸åŒçš„LSTMç½‘ç»œã€‚<br>
ä¸SOMä½œå¯¹æ¯”ï¼ŒSPPæ²¡æœ‰æ˜¾å¼æ¨æ–­å‡ºå…¶ä»–æ™ºèƒ½ä½“çš„ç›®æ ‡ã€‚ç›¸åï¼Œå®ƒé€šè¿‡é¢„æµ‹æ™ºèƒ½ä½“åœ¨æ¯ä¸ªæ—¶é—´æ­¥çš„åŠ¨ä½œæ¥éšå¼çš„æ„å»ºå¯¹æ‰‹æ¨¡å‹ã€‚åœ¨SOMä¸­ï¼Œä¸€ä¸ªå‚è€ƒçš„ç›®æ ‡ä½œä¸ºç­–ç•¥ç½‘ç»œçš„é™„åŠ è¾“å…¥ã€‚è€Œåœ¨SPPï¼Œç±»ä¼¼çš„å‚è€ƒç›®æ ‡æ˜¯ä»å¯¹æ‰‹ç­–ç•¥é¢„æµ‹å™¨å¾—åˆ°çš„éšè—è¡¨ç¤ºï¼ŒæŠŠå®ƒä½œä¸ºç­–ç•¥ç½‘ç»œçš„é™„åŠ è¾“å…¥ã€‚<br>
<strong>è®­ç»ƒç»†èŠ‚</strong>ã€‚åœ¨æˆ‘ä»¬çš„æ‰€æœ‰å®éªŒä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ç³»æ•°ä¸º$0.01$çš„ç†µï¼Œä»·å€¼æŸå¤±ç³»æ•°ä¸º$0.5$ï¼ŒæŠ˜æ‰£ç³»æ•°ä¸º$0.99$çš„A3Cè®­ç»ƒæ™ºèƒ½ä½“çš„ç­–ç•¥ã€‚ä½¿ç”¨Adamä¼˜åŒ–æ™ºèƒ½ä½“å•†ç­–ç•¥çš„å‚æ•°ï¼Œå…¶ä¸­$\beta_1= 0.9,\beta_2= 0.999,\epsilonn =1\times 10^{-8}$ï¼Œæƒé‡è¡°å‡ä¸º$0$ã€‚å­¦ä¹ ç‡ä¸º$0.1$çš„SGDç”¨äºæ¨æ–­å¦ä¸€ä¸ªæ™ºèƒ½ä½“çš„ç›®æ ‡ï¼Œ$\hat{z}_{other}$ã€‚<br>
ç¡¬å¸å’Œé£Ÿè°±æ¸¸æˆä¸­ç­–ç•¥ç½‘ç»œçš„éšè—å±‚ç»´åº¦ä¸º$64$ï¼Œé—¨æ¸¸æˆä¸­ä¸º$128$ã€‚æ‰€æœ‰æ¸¸æˆå’Œæ¨¡å‹çš„å­¦ä¹ ç‡éƒ½æ˜¯$1\times 10^{-4}$ã€‚<br>
è§‚æµ‹çŠ¶æ€$s$ç”¨ä¸€äº›ç‹¬çƒ­å‘é‡è¡¨ç¤ºï¼ŒåŒ…æ‹¬ç¯å¢ƒä¸­æ‰€æœ‰ç‰©ä½“çš„ä½ç½®ï¼Œä»¥åŠæ™ºèƒ½ä½“å’Œå¦ä¸€ä¸ªæ™ºèƒ½ä½“çš„ä½ç½®ã€‚è¿™ä¸ªè¾“å…¥çŠ¶æ€çš„ç»´åº¦æ˜¯$1\times n$ç‰¹å¾ï¼Œå…¶ä¸­Coinï¼ŒRecipeå’ŒDooræ¸¸æˆçš„ç‰¹å¾æ•°åˆ†åˆ«ä¸º$384$,$192$å’Œ$900$ã€‚å¯¹äºæ¯ä¸ªå®éªŒï¼Œæˆ‘ä»¬ä½¿ç”¨5ä¸ªä¸åŒçš„éšæœºç§å­è®­ç»ƒæ¨¡å‹ã€‚é™¤éç‰¹æ®Šè¯´æ˜ï¼Œå¦åˆ™è®ºæ–‡ä¸­å±•ç¤ºçš„æ‰€æœ‰æ¸¸æˆç»“æœéƒ½æ˜¯æ¯æ­¥è¿›è¡Œçš„10æ¬¡ä¼˜åŒ–æ›´æ–°çš„ç»“æœã€‚</p>
<!--
### ç¡¬å¸æ¸¸æˆã€‚
é¦–å…ˆï¼Œæˆ‘ä»¬åœ¨ä¸€ä¸ªå®Œå…¨åˆä½œçš„ä»»åŠ¡ä¸Šè¯„ä¼°æ¨¡å‹ï¼Œåœ¨è¿™ä¸ªä»»åŠ¡ä¸­ï¼Œå½“æ™ºèƒ½ä½“ä½¿ç”¨ä»–ä»¬ä¸¤ä¸ªçš„ç›®æ ‡è€Œä¸ä»…ä»…æ˜¯ä»–ä»¬è‡ªå·±çš„ç›®æ ‡æ—¶ï¼Œä»–ä»¬å¯ä»¥è·å¾—æ›´å¤šçš„å¥–åŠ±ã€‚å› æ­¤ï¼Œä¼°è®¡å…¶ä»–ç©å®¶çš„ç›®æ ‡å¹¶åœ¨é‡‡å–è¡ŒåŠ¨æ—¶ä½¿ç”¨è¯¥ä¿¡æ¯ç¬¦åˆæ¯ä¸ªæ™ºèƒ½ä½“äººçš„æœ€ä½³åˆ©ç›Šã€‚å¦‚å›¾4çš„å·¦å›¾æ‰€ç¤ºï¼Œæ¸¸æˆåœ¨8Ã—8ç½‘æ ¼ä¸Šè¿›è¡Œï¼Œè¯¥ç½‘æ ¼åŒ…å«12ä¸ª3ç§ä¸åŒé¢œè‰²çš„ç¡¬å¸ï¼ˆæ¯ç§é¢œè‰²4ä¸ªç¡¬å¸ï¼‰ã€‚åœ¨æ¯é›†å¼€å§‹æ—¶ï¼Œæ™ºèƒ½ä½“è¢«éšæœºåˆ†é…ä¸‰ç§é¢œè‰²ä¸­çš„ä¸€ç§ã€‚åŠ¨ä½œç©ºé—´åŒ…æ‹¬ï¼šä¸Šï¼Œä¸‹ï¼Œå·¦ï¼Œå³æˆ–é€šè¿‡ã€‚ä¸€æ—¦æ™ºèƒ½ä½“äººè¸©åˆ°ç¡¬å¸ï¼Œé‚£ä¸ªç¡¬å¸å°±ä¼šä»ç½‘æ ¼ä¸­æ¶ˆå¤±ã€‚æ¸¸æˆåœ¨20ä¸ªæ­¥éª¤åç»“æŸï¼ˆå³æ¯ä¸ªæ™ºèƒ½ä½“éœ€è¦10ä¸ªæ­¥éª¤ï¼‰ã€‚ä¸¤åç‰¹å·¥åœ¨æ¯”èµ›ç»“æŸæ—¶æ”¶åˆ°çš„å¥–åŠ±ç”±ä¸‹é¢çš„å…¬å¼ç»™å‡ºï¼š
2ï¼‰ï¼Œå…¶ä»–nå…¶ä»–Cselfæ˜¯è‡ªæˆ‘ç›®æ ‡é¢œè‰²çš„ç¡¬å¸æ•°é‡ï¼Œç”±å…¶ä»–æ™ºèƒ½ä½“äººæ”¶é›†ï¼Œè€Œn self Cneitheræ˜¯ä¸è‡ªå·±æ”¶é›†çš„æ™ºèƒ½ä½“äººç›®æ ‡ç›¸å¯¹åº”çš„ç¡¬å¸æ•°é‡ã€‚å¯¹äºå›¾4ä¸­çš„ç¤ºä¾‹ï¼Œæ™ºèƒ½ä½“1å…·æœ‰Cself =æ©™è‰²å’ŒCother =é’è‰²ï¼Œè€Œæ™ºèƒ½ä½“2çš„Cselfæ˜¯é’è‰²è€ŒCotheræ˜¯æ©™è‰²ã€‚å¯¹äºä¸¤ç§è¯å‰‚ï¼Œä¸¤è€…éƒ½æ˜¯çº¢è‰²çš„ã€‚
æ”¶é›†ä¸ç¬¦åˆä»»ä½•æ™ºèƒ½ä½“äººç›®æ ‡çš„ç¡¬å¸çš„æƒ©ç½šçš„ä½œç”¨æ˜¯é¿å…æ”¶æ•›åˆ°æš´åŠ›æ”¿ç­–ï¼Œåœ¨è¿™ç§æ”¿ç­–ä¸­ï¼Œæ™ºèƒ½ä½“äººå¯ä»¥é€šè¿‡æ”¶é›†å…¶é™„è¿‘çš„æ‰€æœ‰ç¡¬å¸è€Œè·å¾—ä¸å¯å¿½è§†çš„å¥–åŠ±é‡‘é¢ï¼Œè€Œä¸æ˜¯å…³äºä»–ä»¬çš„é¢œè‰²ã€‚ä¸ºäº†æœ€å¤§åŒ–å…¶å›æŠ¥ï¼Œæ¯ä¸ªæ™ºèƒ½ä½“äººéœ€è¦æ”¶é›†è‡ªå·±çš„ç¡¬å¸æˆ–å…¶åˆä½œè€…çš„é¢œè‰²ï¼Œè€Œä¸æ˜¯å‰©ä½™é¢œè‰²çš„ç¡¬å¸ã€‚å› æ­¤ï¼Œå½“ä¸¤ä¸ªæ™ºèƒ½ä½“äººèƒ½å¤Ÿåœ¨æ¸¸æˆä¸­å°½å¯èƒ½æ—©åœ°é«˜ç²¾åº¦åœ°æ¨æ–­å…¶åˆä½œè€…çš„ç›®æ ‡æ—¶.
-->
<h2 id="è®¨è®º">è®¨è®º</h2>
<p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†ä¸€ç§æ–°æ–¹æ³•ï¼Œç”¨äºä»å…¶ä»–æ™ºèƒ½ä½“çš„è¡Œä¸ºä¸­æ¨æ–­ä»–ä»¬çš„éšè—çŠ¶æ€ï¼Œå¹¶ä½¿ç”¨è¿™äº›ä¼°è®¡æ¥é€‰æ‹©åŠ¨ä½œã€‚æˆ‘ä»¬è¯æ˜äº†æ™ºèƒ½ä½“èƒ½å¤Ÿåœ¨åˆä½œå’Œç«äº‰ç¯å¢ƒä¸­ä¼°è®¡å…¶ä»–å‚ä¸è€…çš„éšè—ç›®æ ‡ï¼Œè¿™ä½¿ä»–ä»¬èƒ½å¤Ÿæ”¶æ•›åˆ°æ›´å¥½çš„æ”¿ç­–å¹¶è·å¾—æ›´é«˜çš„å›æŠ¥ã€‚åœ¨æœ¬æ–‡æå‡ºçš„ä»»åŠ¡ä¸­ï¼Œå¯¹å…¶ä»–æ™ºèƒ½ä½“çš„æ˜¾å¼å»ºæ¨¡æ¯”ä»…ä»…è€ƒè™‘å…¶ä»–ä»£ç†æˆä¸ºç¯å¢ƒçš„ä¸€éƒ¨åˆ†æ›´å¥½çš„æ€§èƒ½ã€‚ 	SOMçš„ä¸€ä¸ªé™åˆ¶æ˜¯å®ƒæ¯”å…¶ä»–baselineéœ€è¦æ›´é•¿çš„è®­ç»ƒæ—¶é—´ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨æ¯ä¸€æ­¥éƒ½è¿›è¡Œäº†åå‘ä¼ æ’­ã€‚ä½†æ˜¯ï¼Œå®ƒçš„onlineæ›´æ–°æ–¹å¼å¯¹äºé€‚åº”ç¯å¢ƒä¸­å…¶ä»–æ™ºèƒ½ä½“çš„åŠ¨ä½œå˜åŒ–è‡³å…³é‡è¦ã€‚SOMçš„ä¸€äº›ä¸»è¦ä¼˜ç‚¹æ˜¯ç®€å•æ€§å’Œçµæ´»æ€§ï¼Œå®ƒä¸éœ€è¦ä»»ä½•é¢å¤–å‚æ•°æ¥æ¨¡æ‹Ÿç¯å¢ƒä¸­çš„å…¶ä»–ä»£ç†ï¼Œå¯ä»¥ä½¿ç”¨ä»»ä½•å¼ºåŒ–å­¦ä¹ ç®—æ³•è¿›è¡Œè®­ç»ƒï¼Œå¹¶ä¸”å¯ä»¥è½»æ¾åœ°ä¸ä»»ä½•ç­–ç•¥å‚æ•°åŒ–æˆ–ç½‘ç»œç»“æ„é›†æˆã€‚SOMå¯ä»¥é€‚åº”å…·æœ‰ä¸¤ä¸ªä»¥ä¸Šæ™ºèƒ½ä½“çš„ç¯å¢ƒï¼Œå› ä¸ºæ™ºèƒ½ä½“å¯ä»¥ä½¿ç”¨è‡ªå·±çš„ç­–ç•¥æ¥æ¨¡æ‹Ÿä»»æ„æ•°é‡çš„æ™ºèƒ½ä½“çš„åŠ¨ä½œå¹¶æ¨æ–­å…¶ç›®æ ‡ã€‚è€Œä¸”ï¼Œå®ƒå¯ä»¥å¾ˆå®¹æ˜“åœ°æ¨å¹¿åˆ°è®¸å¤šä¸åŒçš„ç¯å¢ƒå’Œä»»åŠ¡ã€‚<br>
æˆ‘ä»¬è®¡åˆ’é€šè¿‡è¯„ä¼°æ›´å¤æ‚ç¯å¢ƒä¸­çš„æ¨¡å‹æ¥æ‰©å±•è¿™é¡¹å·¥ä½œï¼ŒåŒ…æ‹¬ä¸¤ä¸ªä»¥ä¸Šçš„å‚ä¸è€…ï¼Œæ··åˆç­–ç•¥ï¼Œæ›´å¤šæ ·åŒ–çš„æ™ºèƒ½ä½“ç±»å‹ï¼ˆä¾‹å¦‚å…·æœ‰ä¸åŒåŠ¨ä½œç©ºé—´çš„æ™ºèƒ½ä½“ï¼Œå¥–åŠ±å‡½æ•°ï¼Œè§’è‰²æˆ–ç­–ç•¥ï¼‰ï¼Œä»¥åŠå‡è®¾å…¶ä»–ç©å®¶å’Œè‡ªå·±ä¸€æ ·çš„æ¨¡å‹åå·®ã€‚<br>
æœªæ¥ç ”ç©¶çš„å…¶ä»–é‡è¦é€”å¾„æ˜¯è®¾è®¡èƒ½å¤Ÿé€‚åº”ç¯å¢ƒä¸­å…¶ä»–æ™ºèƒ½ä½“éå¹³ç¨³ç­–ç•¥çš„æ¨¡å‹ï¼Œå¤„ç†å…·æœ‰åˆ†å±‚ç›®æ ‡çš„ä»»åŠ¡ï¼Œå¹¶åœ¨æµ‹è¯•æ—¶é‡åˆ°æ–°æ™ºèƒ½ä½“æ—¶è¡¨ç°è‰¯å¥½ã€‚<br>
æœ€åï¼Œè®¸å¤šç ”ç©¶é¢†åŸŸå¯ä»¥ä»æ‹¥æœ‰å…¶ä»–æ™ºèƒ½ä½“çš„æ¨¡å‹ä¸­å—ç›Šï¼Œè¿™äº›æ™ºèƒ½ä½“èƒ½å¤Ÿæ¨ç†å…¶ä»–æ™ºèƒ½ä½“çš„æ„å›¾å¹¶é¢„æµ‹ä»–ä»¬çš„åŠ¨ä½œã€‚è¿™äº›æ¨¡å‹å¯èƒ½å¯¹äººæœºæˆ–å¸ˆç”Ÿäº’åŠ¨ï¼Œä»¥åŠä»·å€¼å¯¹é½é—®é¢˜æœ‰æ’å¤§å¸®åŠ©ã€‚æ­¤å¤–ï¼Œè¿™äº›æ–¹æ³•å¯ç”¨äºå¤šæ™ºèƒ½ä½“ä»»åŠ¡ä¸­åŸºäºæ¨¡å‹çš„å¼ºåŒ–å­¦ä¹ ï¼Œå› ä¸ºå‰å‘æ¨¡å‹çš„å‡†ç¡®æ€§å¾ˆå¤§ç¨‹åº¦ä¸Šå–å†³äºé¢„æµ‹å…¶ä»–æ™ºèƒ½ä½“åŠ¨ä½œçš„èƒ½åŠ›ã€‚</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mxxhcm.github.io/2019/01/26/Policy-Gradient-With-Value-Function-Approximation-For-Collective-Multiagent-Planning/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="é©¬æ™“é‘«çˆ±é©¬èŸèŸ">
      <meta itemprop="description" content="è®°å½•ç¡•å£«ä¸‰å¹´è‡ªå·±çš„ç§¯ç´¯">
      <meta itemprop="image" content="/images/favicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mxxhcm's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/01/26/Policy-Gradient-With-Value-Function-Approximation-For-Collective-Multiagent-Planning/" class="post-title-link" itemprop="http://mxxhcm.github.io/page/20/index.html">Policy Gradient With Value Function Approximation For Collective Multiagent Planning</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-01-26 19:33:50" itemprop="dateCreated datePublished" datetime="2019-01-26T19:33:50+08:00">2019-01-26</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2019-05-07 00:22:27" itemprop="dateModified" datetime="2019-05-07T00:22:27+08:00">2019-05-07</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/å¼ºåŒ–å­¦ä¹ /" itemprop="url" rel="index"><span itemprop="name">å¼ºåŒ–å­¦ä¹ </span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="æ‘˜è¦">æ‘˜è¦</h2>
<p>åˆ†å¸ƒå¼çš„éƒ¨åˆ†å¯è§‚æµ‹é©¬å°”ç§‘å¤«å†³ç­–è¿‡ç¨‹(Dec POMDP)ä¸ºè§£å†³å¤šæ™ºèƒ½ä½“ç³»ç»Ÿä¸­çš„åºåˆ—å†³ç­–é—®é¢˜æä¾›äº†ä¸€ä¸ªæ¡†æ¶ã€‚è€ƒè™‘åˆ°POMDPçš„è®¡ç®—å¤æ‚åº¦ï¼Œæœ€è¿‘çš„ç ”ç©¶ä¸»è¦é›†ä¸­åœ¨Dec-POMDPä¸­ä¸€äº›æ˜“äºå¤„ç†ä½†æ˜¯æ¯”è¾ƒå®ç”¨çš„å­é—®é¢˜ã€‚æœ¬æ–‡è§£å†³çš„å°±æ˜¯å…¶ä¸­çš„ä¸€ä¸ªå­é—®é¢˜å«åšCDec-POMDPå…¶ä¸­ä¸€ç³»åˆ—æ™ºèƒ½ä½“çš„å…±åŒè¡Œä¸ºå½±å“äº†å®ƒä»¬å…¬å…±çš„rewardå’Œç¯å¢ƒå˜åŒ–ã€‚æœ¬æ–‡çš„ä¸»è¦è´¡çŒ®æ˜¯æå‡ºäº†ä¸€ä¸ªactor-critic(AC)å¼ºåŒ–å­¦ä¹ ç®—æ³•ä¼˜åŒ–CDec-POMDPé—®é¢˜çš„policyã€‚æ™®é€šçš„ACç®—æ³•å¯¹äºå¤§å‹é—®é¢˜æ”¶æ•›çš„å¾ˆæ…¢ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæœ¬æ–‡å±•ç¤ºäº†å¦‚ä½•å°†æ™ºèƒ½ä½“çš„ä¼°è®¡åŠ¨ä½œå€¼å‡½æ•°è¿›è¡Œåˆ†è§£ä»è€Œäº§ç”Ÿæœ‰æ•ˆçš„æ›´æ–°ä»¥åŠæ¨å¯¼å‡ºä¸€ä¸ªåŸºäºå±€éƒ¨å¥–åŠ±ä¿¡å·çš„æ–°çš„criticè®­ç»ƒæ–¹å¼ã€‚é€šè¿‡åœ¨ä¸€ä¸ªåˆæˆçš„benchmarkä»¥åŠçœŸå®çš„å‡ºç§Ÿè½¦è½¦é˜Ÿä¼˜åŒ–é—®é¢˜ä¸Šå’Œå…¶ä»–æ–¹æ³•è¿›è¡Œå¯¹æ¯”ï¼Œç»“æœè¡¨æ˜æœ¬æ–‡çš„ACæ–¹æ³•æä¾›äº†æ¯”ä¹‹å‰æœ€å¥½çš„æ–¹æ³•è¿˜è¦é«˜è´¨é‡çš„æ–¹æ³•ã€‚</p>
<h2 id="å¼•è¨€">å¼•è¨€</h2>
<p>è¿‘äº›å¹´æ¥ï¼Œåˆ†å¸ƒå¼çš„éƒ¨åˆ†å¯è§‚æµ‹é©¬å°”ç§‘å¤«å†³ç­–è¿‡ç¨‹å·²ç»å‘å±•æˆäº†è§£å†³å¤šæ™ºèƒ½ä½“åä½œçš„åºåˆ—å†³ç­–é—®é¢˜çš„ä¸€ä¸ªå¾ˆæœ‰å‰æ™¯çš„(promising)æ–¹æ³•ã€‚Dec-POMDPå¯¹æ™ºèƒ½ä½“åŸºäºç¯å¢ƒå’Œå…¶ä»–æ™ºèƒ½ä½“çš„ä¸åŒéƒ¨åˆ†è§‚æµ‹æœ€å¤§åŒ–ä¸€ä¸ªå…¨å±€çš„ç›®æ ‡è¿›è¡Œå»ºæ¨¡ã€‚Dec-POMDPçš„å…·ä½“åº”ç”¨åŒ…æ‹¬åè°ƒè¡Œæ˜Ÿæ¢æµ‹ï¼Œå¤šæœºå™¨äººåè°ƒæ§åˆ¶ä»¥åŠæ— çº¿ç½‘ç»œçš„ååé‡ä¼˜åŒ–ã€‚ç„¶è€Œï¼Œè§£å†³åˆ†å¸ƒå¼çš„éƒ¨åˆ†é©¬å°”ç§‘å¤«å†³ç­–è¿‡ç¨‹æ˜¯ç›¸å½“å›°éš¾çš„ï¼Œå³ä½¿å¯¹äºåªæœ‰$2$ä¸ªæ™ºèƒ½ä½“çš„é—®é¢˜å‘¢æ˜¯NPéš¾çš„ã€‚<br>
ä¸ºäº†å¢å¤§è§„æ¨¡å’Œæé«˜çœŸå®é—®é¢˜ä¸­çš„åº”ç”¨ï¼Œè¿‡å»çš„ç ”ç©¶å·²ç»æ¢ç´¢äº†æ™ºèƒ½ä½“ä¹‹é—´ä¸¥æ ¼çš„äº¤äº’ï¼Œå¦‚çŠ¶æ€è½¬æ¢å’Œè§‚æµ‹ç‹¬ç«‹ï¼Œäº‹ä»¶é©±åŠ¨çš„çš„äº¤äº’ä»¥åŠæ™ºèƒ½ä½“ä¹‹é—´çš„å¼±è€¦åˆæ€§ã€‚æœ€è¿‘ï¼Œä¸€ç³»åˆ—å·¥ä½œå¼€å§‹å…³æ³¨äºæ™ºèƒ½ä½“çš„èº«ä»½ä¸å½±å“å®ƒä»¬ä¹‹é—´çš„äº¤äº’ä¸Šï¼Œç¯å¢ƒçš„å˜åŒ–ä¸»è¦å—åˆ°æ™ºèƒ½ä½“çš„å…±åŒå½±å“ï¼Œå’Œè‘—åçš„é˜»å¡æ¸¸æˆå¾ˆåƒã€‚ä¸€äº›åŸå¸‚äº¤é€šä¸­çš„é—®é¢˜å¦‚å‡ºç§Ÿè½¦è°ƒåº¦å¯ä»¥ç”¨è¿™æ ·çš„ååŒè§„åˆ’æ¨¡å‹è¿›è¡Œå»ºæ¨¡ã€‚<br>
åœ¨æœ¬æ–‡ä¸­ï¼Œä½œè€…ç€é‡äºé›†ä¸­çš„Dec-POMDPæ¡†æ¶å°†ä¸€ç±»ä¸ç¡®å®šæƒ…å†µä¸‹çš„é›†ä¸­å¤šæ™ºèƒ½ä½“åºåˆ—å†³ç­–é—®é¢˜å½¢å¼åŒ–ã€‚Nguyenç­‰äººæå‡ºäº†ä¸€ä¸ªé‡‡æ ·æ–¹æ³•ä¼˜åŒ–CDec-POMDPæ¨¡å‹ä¸­çš„policyã€‚ä¹‹å‰æ–¹æ³•çš„ä¸€ä¸ªä¸»è¦ç¼ºç‚¹æ˜¯policyæ˜¯ç”¨è¡¨æ ¼å½¢å¼å±•ç°çš„ï¼Œéšç€æ™ºèƒ½ä½“çš„observation spacesæ”¹å˜æ—¶ï¼Œè¡¨æ ¼å½¢å¼çš„policyä¸èƒ½å¾ˆå¥½çš„è¿›è¡Œæ‰©å±•ã€‚å—åˆ°æœ€è¿‘ä¸€äº›å¼ºåŒ–å­¦ä¹ å·¥ä½œçš„å¯å‘ï¼Œæœ¬æ–‡çš„è´¡çŒ®æ˜¯ä¸€ä¸ªACæ¡†æ¶çš„å¼ºåŒ–å­¦ä¹ ç®—æ³•ç”¨æ¥ä¼˜åŒ–CDec-POMDPçš„policyã€‚Policyç”¨å‡½æ•°å¦‚ç¥ç»ç½‘ç»œæ¥è¡¨ç¤ºå¯ä»¥é¿å…è¡¨æ ¼å½¢å¼çš„policyçš„æ‰©å±•æ€§é—®é¢˜ã€‚æˆ‘ä»¬æ¨å¯¼å‡ºäº†ç­–ç•¥æ¢¯åº¦å¹¶ä¸”åŸºäºCDec-POMDPä¸­æ™ºèƒ½ä½“çš„äº¤äº’æå‡ºäº†ä¸€ä¸ªä¼°è®¡çš„å› å­åŠ¨ä½œå€¼å‡½æ•°ã€‚æ™®é€šçš„ACç®—æ³•å› ä¸ºå­¦ä¹ å…¨å±€rewardçš„åŸå› ï¼Œåœ¨è§£å†³å¤§å‹å¤šæ™ºèƒ½ä½“ç³»ç»Ÿé—®é¢˜æ—¶æ”¶æ•›çš„å¾ˆæ…¢ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæœ¬æ–‡æå‡ºäº†ä¸€ç§æ–°çš„æ–¹å¼å»è®­ç»ƒcriticï¼Œé«˜æ•ˆåˆ©ç”¨æ™ºèƒ½ä½“çš„å±€éƒ¨å€¼å‡½æ•°çš„ä¼°è®¡åŠ¨ä½œå€¼å‡½æ•°ã€‚<br>
æˆ‘ä»¬åœ¨ä¸€ä¸ªåˆæˆçš„å¤šæœºå™¨äººå¯¼èˆªé¢†åŸŸå’Œç°å®ä¸–ç•Œä¸­ä¸€ä¸ªäºšæ´²åŸå¸‚çš„å‡ºç§Ÿè½¦è°ƒåº¦é—®é¢˜ä¸Šæµ‹è¯•äº†æœ¬æ–‡çš„æ–¹æ³•ï¼Œç»“æœå±•ç¤ºäº†æœ¬æ–‡çš„æ–¹æ³•å¯ä»¥æ‰©å±•åˆ°å¤§å‹å¤šæ™ºèƒ½ä½“ç³»ç»Ÿä¸Šã€‚æ ¹æ®ç»éªŒï¼Œæˆ‘ä»¬å› å¼ACæ–¹æ³•æ¯”ä»¥å‰æœ€å¥½çš„æ–¹æ³•ç»™å‡ºçš„è§£å†³æ–¹æ¡ˆéƒ½è¦å¥½ã€‚å› å¼ACæ–¹æ³•æ”¶æ•›çš„ä¹Ÿæ¯”æ™®é€šçš„ACæ–¹æ³•å¿«å¾ˆå¤šï¼ŒéªŒè¯äº†æˆ‘ä»¬æå‡ºçš„criticè®­ç»ƒæ–¹æ³•çš„æœ‰æ•ˆæ€§ã€‚<br>
<strong>ç›¸å…³å·¥ä½œ</strong> æˆ‘ä»¬çš„å·¥ä½œåŸºäºå…·æœ‰è¿‘ä¼¼å€¼å‡½æ•°çš„ç­–ç•¥æ¢¯åº¦æ¡†æ¶ã€‚ç„¶è€Œï¼Œæ ¹æ®ä»¥å¾€çš„ç»éªŒæ˜¾ç¤ºï¼Œç›´æ¥åº”ç”¨åŸå§‹çš„ç­–ç•¥æ¢¯åº¦åˆ°å¤šæ™ºèƒ½ä½“ä»»åŠ¡ä¸­ï¼Œå°¤å…¶æ˜¯CDec-POMDPæ¨¡å‹ä¸­ä¼šäº§ç”Ÿè¾ƒé«˜æ–¹å·®ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å±•ç¤ºäº†ä¸€ä¸ªå’ŒCDec-POMDPå…¼å®¹çš„ä¼°è®¡å€¼å‡½æ•°ï¼Œå®ƒèƒ½äº§ç”Ÿé«˜æ•ˆä¸”ä½æ–¹å·®çš„ç­–ç•¥æ¢¯åº¦æ›´æ–°ã€‚Peshkinå¾ˆæ—©ä¹‹å‰å°±ç ”ç©¶è¿‡äº†åº”ç”¨äºåˆ†å¸ƒå¼policyçš„å¼ºåŒ–å­¦ä¹ ï¼ŒGuestrinè¿˜æå‡ºä½¿ç”¨REINFORCEä»åè°ƒå›¾ä¸­è®­ç»ƒä¸€ä¸ªå› å­å€¼å‡½æ•°çš„softmaxç­–ç•¥ã€‚ç„¶è€Œï¼Œè¿™äº›ä»¥å‰çš„å·¥ä½œä¸­ï¼Œç­–ç•¥æ¢¯åº¦éƒ½æ˜¯ä»å…¨å±€çš„ç»éªŒå›æŠ¥è€Œä¸æ˜¯åˆ†è§£åçš„criticä¸­ä¼°è®¡çš„ã€‚æˆ‘ä»¬åœ¨ç¬¬å››ç« ä¸­å±•ç¤ºäº†ä¸€ä¸ªåˆ†è§£åciritcå’ŒåŸºäºè®­ç»ƒè¿™ä¸ªcriticå¾—åˆ°çš„ä¸€ä¸ªå•ä¸ªå€¼å‡½æ•°å¯¹äºé«˜æ•ˆçš„é‡‡æ ·å­¦ä¹ æ˜¯å¾ˆé‡è¦çš„ã€‚æˆ‘ä»¬çš„å®éªŒç»“æœè¡¨æ˜äº†æˆ‘ä»¬æå‡ºçš„criticè®­ç»ƒæ–¹å¼æ¯”ç”¨å…¨å±€ç»éªŒå›æŠ¥è®­ç»ƒæ”¶æ•›çš„è¿˜è¦å¿«ã€‚</p>
<h2 id="é›†ä¸­åˆ†å¸ƒå¼pomdpæ¨¡å‹">é›†ä¸­åˆ†å¸ƒå¼POMDPæ¨¡å‹</h2>
<p>æˆ‘ä»¬é¦–å…ˆä»‹ç»ä¸€ä¸‹Nguyenæå‡ºçš„CDec-POMDPæ¨¡å‹ã€‚ä¸€ä¸ªå¯¹åº”äºè¿™ä¸ªæ¨¡å‹çš„$T$æ­¥çš„åŠ¨æ€è´å¶æ–¯ç½‘ç»œå¦‚å›¾æ‰€ç¤ºã€‚å®ƒç”±ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ç»„æˆï¼š</p>
<ul>
<li>ä¸€ä¸ªæœ‰é™çš„è®¡åˆ’èŒƒå›´$H$</li>
<li>æ™ºèƒ½çš„æ•°é‡$M$ï¼Œä¸€ä¸ªæ™ºèƒ½ä½“må¯èƒ½å¤„åœ¨state space $S$ä¸­çš„ä»»æ„ä¸€ä¸ªçŠ¶æ€ï¼Œè”åˆstate spaceæ˜¯$\times_{m=1}^MS$ï¼Œæˆ‘ä»¬ç”¨$i\in S$è¡¨ç¤ºä¸€ä¸ªstateã€‚</li>
<li>æ¯ä¸€ä¸ªæ™ºèƒ½ä½“méƒ½æœ‰ä¸€ä¸ªaction spaceAï¼Œæˆ‘ä»¬ç”¨$j\in A$è¡¨ç¤ºä¸€ä¸ªactionã€‚</li>
<li>ç”¨$(s_{1:H},a_{1:H})<sup>m=(s_1</sup>m,a_1<sup>m,\cdots,s_H</sup>m,a_H<sup>m)$è¡¨ç¤ºä¸€ä¸ªæ™ºèƒ½ä½“må®Œæ•´çš„state-actionè½¨è¿¹ã€‚ç”¨éšæœºå˜é‡$s_t</sup>m,a_t^m$è¡¨ç¤ºæ™ºèƒ½ä½“$m$åœ¨$t$æ—¶åˆ»çš„stateå’Œactionã€‚ä¸åŒçš„æŒ‡ç¤ºå‡½æ•°$I_t(\cdot)$å¦‚è¡¨$1$æ‰€ç¤ºã€‚ç»™å®šæ¯ä¸€ä¸ªæ™ºèƒ½ä½“$m\in M$çš„è½¨è¿¹ï¼Œå®šä¹‰ä»¥ä¸‹çš„è®¡æ•°æ–¹å¼ï¼š<br>
$$n_t(i,j,iâ€™) = \sum_{m=1}^M I_t^m(i,j,iâ€™),\forall i,iâ€™\in S,j\in A.$$<br>
å¦‚è¡¨$1$æ‰€ç¤ºï¼Œè®¡æ•°å™¨$n_t(i,j,iâ€™)$è¡¨ç¤ºåœ¨$t$æ—¶åˆ»å¤„äºstate $i$ï¼Œé‡‡å–action $j$ï¼Œè½¬æ¢åˆ°state $iâ€™$çš„æ™ºèƒ½ä½“æ•°é‡ã€‚å…¶ä»–è®¡æ•°å™¨$n_t(i)$å’Œ$n_t(i,j)$çš„å®šä¹‰ç±»ä¼¼ã€‚ä½¿ç”¨è¿™äº›è®¡æ•°å™¨ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰$t$æ—¶åˆ»çš„è®¡æ•°è¡¨$\bf{n}<em>{s_t}$å’Œ$\bf{n}</em>{s_ta_t}$å¦‚è¡¨$1$æ‰€ç¤ºã€‚</li>
<li>æˆ‘ä»¬å‡è®¾ä¸€ä¸ªæ™®éçš„éƒ¨åˆ†è§‚æµ‹ç¯å¢ƒï¼Œå…¶ä¸­æ™ºèƒ½ä½“åŸºäºå…¶ä»–æ™ºèƒ½ä½“çš„æ€»ä½“å½±å“å¯ä»¥æœ‰ä¸åŒçš„ovservationã€‚ä¸€ä¸ªæ™ºèƒ½ä½“è§‚æµ‹åˆ°å®ƒçš„å±€éƒ¨state $s_t<sup>m$ã€‚æ­¤å¤–åœ¨$t$æ—¶åˆ»åŸºäºå®ƒçš„å±€éƒ¨çŠ¶æ€$s_t</sup>m$å’Œè®¡æ•°è¡¨$\bf{n}_{s_t}$è§‚æµ‹åˆ°$o_t^m$ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªæ™ºèƒ½ä½“måœ¨$t$æ—¶åˆ»å¤„äºstate $i$ï¼Œå¯ä»¥è§‚æµ‹åˆ°å…¶ä»–ä¹Ÿå¤„åœ¨state $i(=n_t(i))$çš„æ™ºèƒ½ä½“æˆ–è€…å…¶ä»–å¤„åœ¨state $i$ä¸´è¿‘çŠ¶æ€$j$çš„æ™ºèƒ½ä½“ï¼Œå³$n_t(j),\forall j\in Nb(i)$ã€‚</li>
<li>çŠ¶æ€è½¬æ¢å‡½æ•°æ˜¯$\Phi_t(s_{t+1}<sup>m=iâ€™|s_t</sup>m=i,a_t^m=j,\bf{N}<em>{s_t})$ã€‚æ‰€æœ‰æ™ºèƒ½ä½“çš„çŠ¶æ€è½¬æ¢å‡½æ•°æ˜¯ä¸€æ ·çš„ï¼Œæ³¨æ„å®ƒä¼šå—åˆ°$\bf{n}</em>{s_t}$çš„å½±å“ï¼Œè€Œ$\bf{n}_{s_t}$ä¾èµ–äºæ™ºèƒ½ä½“çš„å…±åŒè¡Œä¸ºã€‚</li>
<li>æ¯ä¸€ä¸ªæ™ºèƒ½ä½“mæœ‰ä¸€ä¸ªä¸å¹³ç¨³çš„policy $\pi_t<sup>m(j|i,o_t</sup>m(i,\bf{n}<em>{s_t}))$ï¼Œè¡¨ç¤ºåœ¨$t$æ—¶åˆ»ç»™å®šæ™ºèƒ½ä½“mçš„observation $(i,o_t^m(i,\bf{n}</em>{s_t})$ä¹‹åï¼Œæ™ºèƒ½ä½“é‡‡å–action $j$çš„æ¦‚ç‡ã€‚æˆ‘ä»¬ç”¨$\pi^m=(\pi_1,\cdots,\pi_H)$è¡¨ç¤ºæ™ºèƒ½ä½“mæ°´å¹³èŒƒå›´çš„policyã€‚</li>
<li>ä¸€ä¸ªæ™ºèƒ½ä½“æ¥æ”¶åˆ°çš„reward $r_t^m=r_t(i,j,\bf{n}<em>{s_t}$å–å†³äºå®ƒçš„å±€éƒ¨stateå’Œactionï¼Œä»¥åŠè®¡æ•°è¡¨$\bf{n}</em>{s_t}$ã€‚</li>
<li>åˆå§‹çš„stateåˆ†å¸ƒï¼Œ$b_o=(P(i)\forall i \in S)$ï¼Œå¯¹äºæ‰€æœ‰çš„æ™ºèƒ½ä½“éƒ½æ˜¯ç›¸åŒçš„ã€‚</li>
</ul>
<p>æˆ‘ä»¬åœ¨è¿™é‡Œå±•ç¤ºäº†æœ€ç®€å•çš„ç‰ˆæœ¬ï¼Œæ‰€æœ‰çš„æ™ºèƒ½ä½“çš„ç±»å‹éƒ½ç›¸åŒï¼Œå¹¶ä¸”æœ‰ç›¸ä¼¼çš„state transitionï¼Œobservationå’Œrewardæ¨¡å‹ã€‚æ¨¡å‹ä¹Ÿå¯ä»¥å¤„ç†å¤šç§ç±»å‹çš„æ™ºèƒ½ä½“ï¼Œä¸åŒç±»å‹çš„æ™ºèƒ½ä½“æœ‰ä¸åŒçš„å˜åŒ–ã€‚æˆ‘ä»¬è¿˜å¯ä»¥å¼•å…¥ä¸€ä¸ªä¸å—æ™ºèƒ½ä½“actionå½±å“çš„external stateï¼Œå¦‚äº¤é€šé¢†åŸŸçš„å‡ºç§Ÿè½¦éœ€æ±‚ã€‚æˆ‘ä»¬çš„ç»“æœä¹Ÿå¯ä»¥æ‰©å±•åˆ°è§£å†³ç±»ä¼¼çš„é—®é¢˜ã€‚<br>
åƒCDec-POMDPä¹‹ç±»çš„æ¨¡å‹å¯¹äºè§£å†³æ™ºèƒ½ä½“æ•°é‡å¾ˆå¤§æˆ–è€…æ™ºèƒ½ä½“çš„èº«ä»½ä¸å½±å“rewardæˆ–è€…transition functionä¹‹ç±»çš„é—®é¢˜æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚å…¶ä¸­ä¸€ä¸ªåº”ç”¨æ˜¯å‡ºç§Ÿè½¦è½¦é˜Ÿä¼˜åŒ–é—®é¢˜ï¼Œè¿™ä¸ªé—®é¢˜æ˜¯è®¡ç®—å‡ºå‡ºç§Ÿè½¦è°ƒåº¦çš„policyä½¿å¾—è½¦é˜Ÿçš„åˆ©æ¶¦æœ€å¤§åŒ–ã€‚ä¸€ä¸ªå‡ºç§Ÿè½¦çš„å†³ç­–è¿‡ç¨‹å¦‚ä¸‹ã€‚åœ¨æ—¶åˆ»$t$æ—¶ï¼Œæ¯ä¸ªå‡ºç§Ÿè½¦è§‚æµ‹åˆ°å®ƒå½“å‰çš„åŸå¸‚ç©ºé—´$z$ï¼Œä¸åŒçš„ç©ºé—´æ„æˆäº†state space $S$ï¼Œä»¥åŠå½“å‰ç©ºé—´å’Œå®ƒçš„ç›¸é‚»ç©ºé—´çš„å…¶ä»–å‡ºç§Ÿè½¦çš„è®¡æ•°å’Œå½“å‰å±€éƒ¨è¯·æ±‚çš„ä¸€ä¸ªä¼°è®¡ã€‚è¿™æ„æˆäº†å‡ºç§Ÿè½¦åŸºäºè®¡æ•°çš„observation $o(\cdot)$ã€‚åŸºäºè¿™ä¸ªobservationï¼Œå‡ºç§Ÿè½¦å¿…é¡»å†³å®šå¾…åœ¨å½“å‰ç©ºé—´$z$å¯»æ‰¾ä¹˜å®¢è¿˜æ˜¯ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªç©ºé—´ã€‚è¿™äº›å†³ç­–é€‰æ‹©å–å†³äºä¸åŒçš„å› å­ï¼Œå¦‚è¯·æ±‚æ¯”ç‡å’Œå½“å‰ç©ºé—´å…¶ä»–å‡ºç§Ÿè½¦çš„è®¡æ•°ã€‚ç±»ä¼¼çš„ï¼Œç¯å¢ƒæ˜¯éšæœºçš„ï¼Œåœ¨ä¸åŒæ—¶é—´å‡ºç§Ÿè½¦è¯·æ±‚æ˜¯å˜åŒ–çš„ã€‚ä½¿ç”¨å‡ºç§Ÿè½¦è½¦é˜Ÿçš„çš„GPSè®°å½•å¯ä»¥å¾—åˆ°è¿™äº›å†å²çš„è¯·æ±‚æ•°æ®ã€‚<br>
<strong>åŸºäºè®¡æ•°çš„ç»Ÿè®¡æ•°æ®ç”¨äºè§„åˆ’</strong> CDec-POMDPæ¨¡å‹çš„ä¸€ä¸ªå…³é”®å±æ€§æ˜¯æ¨¡å‹çš„å˜æ¢å–å†³äºæ™ºèƒ½ä½“çš„é›†ä¸­äº¤äº’è€Œä¸æ˜¯æ™ºèƒ½ä½“çš„èº«ä»½ã€‚åœ¨å‡ºç§Ÿè½¦è½¦é˜Ÿä¼˜åŒ–é—®é¢˜ä¸­ï¼Œæ™ºèƒ½ä½“æ•°é‡å¯ä»¥ç›¸å½“å¤§ï¼ˆå¤§çº¦æœ‰$8000$ä¸ªæ™ºèƒ½ä½“åœ¨ç°å®ä¸–ç•Œçš„å®éªŒä¸­ï¼‰ã€‚ç»™å‡ºè¿™ä¹ˆå¤§æ•°é‡çš„æ™ºèƒ½ä½“ä¸ªæ•°ï¼Œä¸ºæ¯ä¸€ä¸ªæ™ºèƒ½ä½“è®¡ç®—å‡ºç‹¬ä¸€æ— äºŒçš„policyæ˜¯ä¸å¯èƒ½çš„ã€‚å› æ­¤ï¼Œå’Œä¹‹å‰çš„å·¥ä½œç±»ä¼¼ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯å¯¹æ‰€æœ‰æ™ºèƒ½ä½“è®¡ç®—å‡ºä¸€ä¸ªç›¸åŒçš„policy $\pi$ã€‚å› ä¸ºpolicy $\pi$å–å†³äºè®¡æ•°ï¼Œå®ƒä»£è¡¨äº†ä¸€ç§å¯Œæœ‰è¡¨ç°åŠ›çš„policyã€‚<br>
å¯¹äºä¸€ä¸ªå›ºå®šçš„æ•°é‡Mæ¥è¯´ï¼Œç”¨${(s_{1:T},a_{1:T})^m\forall m}$è¡¨ç¤ºä»å›¾$1$çš„DBNç½‘ç»œä¸­é‡‡æ ·å¾—åˆ°çš„ä¸åŒæ™ºèƒ½ä½“çš„state-actionè½¨è¿¹ã€‚ç”¨$\mathbf{n}<em>{1:T}={(\mathbf{n}</em>{s_t},\mathbf{n}<em>{s_ta_t},\mathbf{n}</em>{s_ta_ts_{t+1}})\forall t=1:T}$è¡¨ç¤ºæ¯ä¸€ä¸ªæ—¶é—´æ­¥$t$çš„ç»“æœè®¡æ•°è¡¨çš„ç»„åˆå‘é‡ã€‚Nguyenç­‰äººå±•ç¤ºäº†è®¡æ•°å™¨$\mathbf{n}$ä¸­æ‹¥æœ‰è¶³å¤Ÿçš„ç»Ÿè®¡æ•°æ®ç”¨æ¥è§„åˆ’ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªpolicy $\pi$åœ¨æ°´å¹³èŒƒå›´Hå†…çš„è”åˆå€¼å‡½æ•°å¯ä»¥é€šè¿‡è®¡æ•°å™¨çš„æœŸæœ›è¿›è¡Œè®¡ç®—ï¼š<br>
$$V(\pi) = \sum_{m=1}<sup>M\sum_{T=1}</sup>H E[r_T^m] = \sum_{\mathbf{n}\in \Omega_{1:H}}P(\mathbf{n};\pi) \left[\sum_{T=1}^H\sum_{i\in S,j\in A} n_T(i,j)r_T(i,j,\mathbf{n}<em>T)\right]$$<br>
é›†åˆ$\Omega</em>{1:H}$æ˜¯æ‰€æœ‰å…è®¸çš„ä¸€è‡´è®¡æ•°è¡¨çš„é›†åˆï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š<br>
$$\sum_{i\in S}n_T(i) = M \forall T;$$<br>
$$\sum_{j\in A}n_T(i,j) = n_T(i) = \forall j \forall T;$$<br>
$$\sum_{iâ€™\in S}n_T(i,j,iâ€™) = n_T(i,j)\forall i\in S,\forall j \in A, \forall T;$$<br>
$P(\mathbf{n},\pi)$æ˜¯è®¡æ•°å™¨çš„åˆ†å¸ƒã€‚è¿™ä¸ªç»“æœçš„ä¸€ä¸ªå…³é”®å¥½å¤„æ˜¯æˆ‘ä»¬å¯ä»¥ç›´æ¥ä»åˆ†å¸ƒ$P(\mathbf{n})$ä¸­å¯¹è®¡æ•°å™¨$\mathbf{n}$é‡‡æ ·è€Œä¸æ˜¯å¯¹å•ä¸ªä¸åŒæ™ºèƒ½ä½“çš„è½¨è¿¹$(s_{1:H},a_{1:H})è¿›è¡Œé‡‡æ ·æ¥$è¯„ä¼°policy $\pi$ï¼Œè¿™æ˜¾è‘—èŠ‚çœäº†è®¡ç®—å¼€é”€ã€‚æˆ‘ä»¬çš„ç›®æ ‡æ˜¯è®¡ç®—æœ€ä¼˜çš„policy $\pi$æ¥æœ€å¤§åŒ–$V(\pi)$ã€‚æˆ‘ä»¬å‡è®¾ä¸€ä¸ªé›†ä¸­å¼å­¦ä¹ ï¼Œåˆ†å¸ƒå¼æ‰§è¡Œçš„å¼ºåŒ–å­¦ä¹ è®¾ç½®ã€‚æˆ‘ä»¬å‡è®¾æœ‰ä¸€ä¸ªæ¨¡æ‹Ÿå™¨å¯ä»¥ä»$P(\mathbf{n};\pi)$ä¸­æä¾›è®¡æ•°å™¨æ ·æœ¬ã€‚</p>
<h2 id="cdec-pomdpçš„ç­–ç•¥æ¢¯åº¦">CDec-POMDPçš„ç­–ç•¥æ¢¯åº¦</h2>
<p>ä¹‹å‰çš„å·¥ä½œæå‡ºäº†ä¸€ä¸ªåŸºäºé‡‡æ ·çš„EMç®—æ³•æ¥ä¼˜åŒ–policy $\pi$ã€‚è¿™ä¸ªpolicyè¢«è¡¨ç¤ºæˆè®¡æ•°å™¨$\mathbf{n}$ç©ºé—´ä¸­çš„ä¸€ä¸ªçº¿æ€§åˆ†æ®µè¡¨policyï¼Œå…¶ä¸­æ¯ä¸€ä¸ªçº¿æ€§ç‰‡æ®µæŒ‡å®šäº†ä¸‹ä¸€ä¸ªactionçš„åˆ†å¸ƒã€‚ç„¶è€Œï¼Œè¿™ç§è¡¨æ ¼å½¢å¼çš„è¡¨ç¤ºé™åˆ¶äº†å®ƒçš„è¡¨è¾¾èƒ½åŠ›ï¼Œå› ä¸ºç‰‡æ®µçš„æ•°é‡æ˜¯å›ºå®šçš„å…ˆéªŒï¼Œå¹¶ä¸”æ¯ä¸ªèŒƒå›´éƒ½å¿…é¡»æ‰‹åŠ¨å®šä¹‰ï¼Œè¿™å¯èƒ½ä¼šå¯¹æ€§èƒ½äº§ç”Ÿä¸åˆ©å½±å“ã€‚æ­¤å¤–ï¼Œå½“observation oæ˜¯å¤šç»´çš„æ—¶å€™ï¼Œå³ï¼Œä¸€ä¸ªæ™ºèƒ½ä½“è§‚æµ‹åˆ°å®ƒä½ç½®ç›¸é‚»åŒºåŸŸçš„è®¡æ•°å™¨æ—¶ï¼Œéœ€è¦æŒ‡æ•°å¤šä¸ªç‰‡æ®µã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯ä¼˜åŒ–å‡½æ•°å½¢å¼ï¼ˆå¦‚ç¥ç»ç½‘ç»œï¼‰çš„policyã€‚<br>
æˆ‘ä»¬é¦–å…ˆæ‰©å±•ç­–ç•¥æ¢¯åº¦ç†è®ºåˆ°CDec-POMDPä¸Šï¼Œç”¨$\theta$è¡¨ç¤ºpolicyå‚æ•°çš„å‘é‡ã€‚æˆ‘ä»¬æ¥ä¸‹æ¥å±•ç¤ºå¦‚ä½•è®¡ç®—$\Delta_\theta V(\pi)$ã€‚ç”¨$\mathbf{s}_t,\mathbf{a}<em>t$è¡¨ç¤º$t$æ—¶åˆ»æ‰€æœ‰æ™ºèƒ½ä½“çš„è”åˆstateå’Œè”åˆactionã€‚ç»™å®šä¸€ä¸ªpolicy $\pi$ï¼Œå€¼å‡½æ•°è¡¨ç¤ºå½¢å¼å¦‚ä¸‹ï¼š<br>
$$V_t(\pi)=\sum</em>{\mathbf{s}_t,\mathbf{a}<em>t}P<sup>{\pi}(\mathbf{s}_t,\mathbf{a}_t|b_o,\pi)Q_t</sup>{\pi}(\mathbf{s}<em>t,\mathbf{a}<em>T)$$<br>
å…¶ä¸­$P<sup>{\pi}(\mathbf{s}_t,\mathbf{a}_t|b_o)=\sum_{\mathbf{s}_{1:t-1},\mathbf{a}_{1:t-1}}P</sup>{\pi}(\mathbf{s}</em>{1:t},\mathbf{a}</em>{1:t}|b_o)$æ˜¯policy $\pi$ä¸‹è”åˆstate $\mathbf{s}<em>t$ï¼Œå’Œè”åˆaction $\mathbf{a}<em>t$çš„åˆ†å¸ƒã€‚å€¼å‡½æ•°$Q_t^{\pi}(\mathbf{s}<em>t,\mathbf{a}<em>t)$çš„è®¡ç®—è¿‡ç¨‹å¦‚ä¸‹ï¼š<br>
$$Q_t^{\pi}(\mathbf{s}<em>t,\mathbf{a}<em>t) = r_t(\mathbf{s}<em>t,\mathbf{a}<em>t)+\sum</em>{\mathbf{s}</em>{t+1},\mathbf{a}</em>{t+1})}P<sup>{\pi}(\mathbf{s}_{t+1},\mathbf{a}_{t+1}|\mathbf{s}_t,\mathbf{a}_t))Q_{t+1}</sup>{\pi}(\mathbf{s}</em>{t+1},\mathbf{a}</em>{t+1})$$<br>
æ¥ä¸‹æ¥ä»‹ç»ä»¥ä¸‹CDec-POMDPçš„ç­–ç•¥æ¢¯åº¦ç†è®ºï¼š<br>
<strong>å®šç†1.</strong> å¯¹äºä»»ä½•CDec-POMDPï¼Œç­–ç•¥æ¢¯åº¦è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š<br>
$$\Delta</em>{\theta}V_1(\pi)=\sum</em>{t=1}<sup>HE_{\mathbf{s}_t,\mathbf{a}_t)|b_o,\pi}\left[Q_t</sup>{\pi}(\mathbf{s}<em>t,\mathbf{a}<em>t)\sum</em>{i\in S,j\in A}n_t(i,j)\Delta</em>{\theta}log\pi</em>{t}(j|i,o(i,\mathbf{n}</em>{s_t}))\right]$$<br>
è¿™ä¸ªå®šç†çš„è¯æ˜å’Œå…¶ä»–åç»­ç»“æœåœ¨é™„å½•ä¸­ã€‚<br>
æ³¨æ„ç”±äºè®¸å¤šåŸå› åˆ©ç”¨ä¸Šè¿°ç»“æœè®¡ç®—ç­–ç•¥æ¢¯åº¦æ˜¯ä¸åˆ‡å®é™…çš„ã€‚è”åˆstate-action $\mathbf{a}_t,\mathbf{s}_t$ç©ºé—´æ˜¯ç»„åˆçš„ã€‚è€ƒè™‘åˆ°æ™ºèƒ½ä½“çš„ä¸ªæ•°å¯èƒ½æœ‰å¾ˆå¤šä¸ªï¼Œå¯¹æ¯ä¸€ä¸ªæ™ºèƒ½ä½“çš„è½¨è¿¹è¿›è¡Œé‡‡æ ·æ˜¯è®¡ç®—ä¸Šä¸å¯è¡Œçš„ã€‚ä¸ºäº†è¡¥æ•‘ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥ä¼šå±•ç¤ºç±»ä¼¼policyè¯„ä¼°ç›´æ¥å¯¹è®¡æ•°å™¨$\mathbf{n}~P(\mathbf{n};\pi)$è¿›è¡Œé‡‡æ ·è®¡ç®—æ¢¯åº¦ã€‚ç±»ä¼¼çš„ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ç»éªŒå›æŠ¥ä½œä¸ºåŠ¨ä½œå€¼å‡½æ•°$Q_t<sup>{\pi}(\mathbf{s}_t,\mathbf{a}_t)$çš„ä¸€ä¸ªè¿‘ä¼¼ä¼°è®¡ã€‚è¿™æ˜¯æ ‡å‡†çš„REINFORCEç®—æ³•åœ¨CDec-POMDPä¸Šçš„åº”ç”¨ã€‚ä¼—æ‰€å‘¨çŸ¥ï¼ŒREINFORCEå¯èƒ½æ¯”å…¶ä»–ä½¿ç”¨å­¦ä¹ çš„åŠ¨ä½œå€¼å‡½æ•°çš„æ–¹æ³•å­¦ä¹ çš„æ…¢ã€‚å› æ­¤ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ä¸ª$Q_t</sup>{\pi}$çš„è¿‘ä¼¼å‡½æ•°ï¼Œå±•ç¤ºäº†ç›´æ¥é‡‡æ ·è®¡æ•°å™¨$\mathbf{n}$æ¥è®¡ç®—ç­–ç•¥æ¢¯åº¦ã€‚</p>
<h3 id="ä½¿ç”¨ä¼°è®¡åŠ¨ä½œå€¼å‡½æ•°çš„ç­–ç•¥æ¢¯åº¦">ä½¿ç”¨ä¼°è®¡åŠ¨ä½œå€¼å‡½æ•°çš„ç­–ç•¥æ¢¯åº¦</h3>
<p>ä¼°è®¡åŠ¨ä½œå€¼å‡½æ•°$Q_t^{\pi}(\mathbf{s}<em>t,\mathbf{a}<em>t)$æœ‰å‡ ç§ä¸åŒçš„æ–¹å¼ã€‚æˆ‘ä»¬è€ƒè™‘ä¸‹åˆ—ç‰¹å¾å½¢å¼çš„è¿‘ä¼¼å€¼å‡½æ•°$f_w$ï¼š<br>
$$Q_t^{\pi}(\mathbf{s}<em>t,\mathbf{a}<em>t)\approx f_w(\mathbf{s}<em>t,\mathbf{a}<em>t)=\sum</em>{m=1}<sup>Mf_w</sup>m(s_t<sup>m,o(s_t</sup>m,\mathbf{n</em>{s_t}}),s_t^m)$$<br>
æ¯ä¸€ä¸ªæ™ºèƒ½ä½“méƒ½å®šä¹‰äº†ä¸€ä¸ª$f_w<sup>m$ï¼Œå®ƒçš„è¾“å…¥æ˜¯æ™ºèƒ½ä½“çš„å±€éƒ¨stateï¼Œactionå’Œobservationã€‚æ³¨æ„ä¸åŒçš„$f_w</sup>m$æ˜¯ç›¸å…³çš„ï¼Œå› ä¸ºå®ƒä»¬ä¾èµ–äºå…¬å…±çš„è®¡æ•°å™¨è¡¨$\mathbf{n}</em>{s_t}$ã€‚è¿™æ ·çš„ä¸€ç§åˆ†è§£æ–¹å¼æ˜¯å¾ˆæœ‰ç”¨çš„ï¼Œå› ä¸ºå®ƒäº§ç”Ÿäº†æœ‰æ•ˆçš„ç­–ç•¥æ¢¯åº¦è®¡ç®—æ–¹å¼ã€‚æ­¤å¤–ï¼ŒCDec-POMDPä¸­ä¸€ç±»å¾ˆé‡è¦çš„è¿™ç§å½¢å¼çš„ä¼°è®¡å€¼å‡½æ•°æ˜¯å…¼å®¹å€¼å‡½æ•°æœ€åä¼šäº§ç”Ÿä¸€ä¸ªæ— åçš„ç­–ç•¥æ¢¯åº¦ã€‚<br>
<strong>å‘½é¢˜1</strong> CDec-POMDPä¸­çš„å…¼å®¹å€¼å‡½æ•°å¯ä»¥åˆ†è§£æˆï¼š<br>
$$f_w(\mathbf{s}<em>t\mathbf{a}<em>t) = \sum_mf_w<sup>m(s_t</sup>m,o(s_t<sup>m,\mathbf{n}_{s_t}),a</sup>m)$$<br>
æˆ‘ä»¬å¯ä»¥ç›´æ¥ç”¨ä¼°è®¡å€¼å‡½æ•°$f_w$å–ä»£$Q^{\pi}(\cdot)$ã€‚ç»éªŒä¸Šæ¥è¯´ï¼Œæˆ‘ä»¬å‘ç°ä½¿ç”¨è¿™ä¸ªä¼°è®¡çš„æ–¹å·®å¾ˆå¤§ã€‚æˆ‘ä»¬åˆ©ç”¨$f_w$çš„ç»“æ„è¿›ä¸€æ­¥åˆ†è§£ç­–ç•¥æ¢¯åº¦ä¼šæœ‰æ›´å¥½çš„æ•ˆæœã€‚<br>
<strong>å®šç†2</strong> å¯¹äºä»»ä½•å…·æœ‰å¦‚ä¸‹çš„åˆ†è§£çš„å€¼å‡½æ•°ï¼š<br>
$$f_w(\mathbf{s}<em>t\mathbf{a}<em>t) = \sum_mf_w<sup>m(s_t</sup>m,o(s_t<sup>m,\mathbf{n}_{s_t}),a</sup>m)$$<br>
ç­–ç•¥æ¢¯åº¦å¯ä»¥å†™æˆï¼š<br>
$$\Delta</em>{\theta}V_1(\pi)=\sum</em>{t=1}<sup>HE_{\mathbf{s}_t,\mathbf{a}_t)|b_o,\pi}\left[\sum_m\Delta_{\theta}log\pi(a_t</sup>m|s_t<sup>m,o(s_t</sup>m,\mathbf{n}</em>{s_t}))f_w<sup>m(s_t</sup>m,o(s_t<sup>m,\mathbf{n}_{s_t}),a_t</sup>m)\right]$$<br>
ä¸Šè¿°ç»“æœå±•ç¤ºäº†å¦‚æœä¼°è®¡å€¼å‡½æ•°è¢«åˆ†è§£äº†ï¼Œé‚£ä¹ˆå¾—åˆ°çš„ç­–ç•¥æ¢¯åº¦ä¹Ÿæ˜¯åˆ†è§£çš„ã€‚ä¸Šè¿°ç»“æœä¹Ÿå¯ä»¥åº”ç”¨åˆ°å¤šç§ç±»å‹çš„æ™ºèƒ½ä½“ä¸Šï¼Œåªè¦æˆ‘ä»¬å‡è®¾ä¸åŒçš„æ™ºèƒ½ä½“æœ‰ä¸åŒçš„å‡½æ•°$f_t^m$ã€‚æœ€ç®€å•çš„æƒ…å†µä¸‹ï¼Œæ‰€æœ‰çš„æ™ºèƒ½ä½“éƒ½æ˜¯ç›¸åŒç±»å‹çš„ï¼Œæ¯ä¸€ä¸ªæ™ºèƒ½ä½“éƒ½æœ‰ç›¸åŒçš„å‡½æ•°$f_w$ï¼Œæ¨æ–­å‡ºä¸‹å¼ï¼š<br>
$$f_w(\mathbf{s}<em>t,\mathbf{a}<em>t) = \sum</em>{i,j}n_t(i,j)f_w(i,j,o(i,\mathbf{n}</em>{s_t}))$$<br>
ä½¿ç”¨ä¸Šå¼ï¼Œæˆ‘ä»¬å¯ä»¥å°†ç­–ç•¥æ¢¯åº¦ç®€åŒ–æˆï¼š<br>
$$\Delta</em>{\theta}V_1(\pi) = \sum_tE</em>{\mathbf{s}<em>t,\mathbf{a}<em>t}\left[\sum</em>{i,j}n_t(i,j)\Delta</em>{\theta}log\pi (j|i,o(i,\mathbf{n}</em>{s_t}))f_w(i,j,o(i,\mathbf{n}</em>{s_t}))\right]$$</p>
<h3 id="åŸºäºè®¡æ•°å™¨çš„ç­–ç•¥æ¢¯åº¦è®¡ç®—">åŸºäºè®¡æ•°å™¨çš„ç­–ç•¥æ¢¯åº¦è®¡ç®—</h3>
<p>æ³¨æ„åœ¨ä¸Šå¼ä¸­ï¼ŒæœŸæœ›ä»ç„¶å’Œè”åˆstateï¼Œactionï¼Œ$(\mathbf{s}<em>t,\mathbf{a}<em>t)$ç›¸å…³ï¼Œå½“æ™ºèƒ½ä½“çš„ä¸ªæ•°å¾ˆå¤§æ—¶æ•ˆç‡å¾ˆä½ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æ˜¯<br>
<strong>å®šç†3</strong> å¯¹äºä»»ä½•æ‹¥æœ‰å½¢å¼$f_w(\mathbf{s}<em>t,\mathbf{a}<em>t) = \sum</em>{i,j}n_t(i,j)f_w(i,j,o(i,\mathbf{n}</em>{s_t}))$çš„å€¼å‡½æ•°ï¼Œç­–ç•¥æ¢¯åº¦éƒ½å¯ä»¥ç”¨ä¸‹å¼è®¡ç®—ï¼š<br>
\begin{equation}<br>
E</em>{\mathbf{n}</em>{1:H}\in \Omega_{1:H}} \left[\sum_{t=1}^H\sum_{i\in S,j\in A}n_t(i,j) \Delta_{\theta}log\pi (j|i,o(i,\mathbf{n}_t)) f_w(i,j,o(i,\mathbf{n}<em>t))\right]<br>
\end{equation}<br>
ä¸Šè¿°ç»“æœå±•ç¤ºäº†ç­–ç•¥æ¢¯åº¦å¯ä»¥ç±»ä¼¼äºè®¡ç®—policyçš„å€¼å‡½æ•°ä¸€æ ·é€šè¿‡ä»åº•å±‚åˆ†å¸ƒ$P(\cdot)$ä¸­é‡‡æ ·è®¡æ•°è¡¨å‘é‡$\mathbf{n}</em>{1:H}$æ¥è®¡ç®—ç­–ç•¥æ¢¯åº¦ï¼Œåœ¨æ™ºèƒ½ä½“æ•°é‡å¾ˆå¤§çš„æƒ…å†µä¸‹ä¹Ÿæ˜¯å¯è¡Œçš„ã€‚</p>
<h2 id="è®­ç»ƒåŠ¨ä½œå€¼å‡½æ•°">è®­ç»ƒåŠ¨ä½œå€¼å‡½æ•°</h2>
<p>åœ¨æˆ‘ä»¬çš„æ–¹æ³•ä¸­ï¼Œåœ¨è®¡æ•°å™¨æ ·æœ¬$\mathbf{n}<em>{1:H}$ç”Ÿæˆç”¨æ¥è®¡ç®—ç­–ç•¥æ¢¯åº¦åï¼Œæˆ‘ä»¬è¿˜éœ€è¦è°ƒæ•´critic $f_w$çš„å‚æ•°ã€‚æ³¨æ„å¯¹äºæ¯ä¸€ä¸ªåŠ¨ä½œå€¼å‡½æ•°$f_w(\mathbf{s}<em>t,\mathbf{a}<em>t)$åªå–å†³äºè”åˆstateï¼Œaction $(\mathbf{s}<em>t,\mathbf{a}<em>t)$ç”Ÿæˆçš„è®¡æ•°å™¨ã€‚è®­ç»ƒ$f_w$å¯ä»¥é€šè¿‡ä¸€ä¸ªæ¢¯åº¦æ­¥æœ€ä¸‹åŒ–ä¸‹åˆ—losså‡½æ•°å®ç°ï¼š<br>
\begin{equation}<br>
min_w\sum</em>{\xi=1}<sup>K\sum_{t=1}</sup>H\left(f_w(\mathbf{n}<em>t<sup>{\xi})-R_t</sup>{\xi}\right)^2<br>
\end{equation}<br>
å…¶ä¸­$\mathbf{n}</em>{1:H}<sup>{\xi}$æ˜¯ä»åˆ†å¸ƒ$P(\mathbf{n};\pi)$ä¸­ç”Ÿæˆçš„ä¸€ä¸ªè®¡æ•°å™¨æ ·æœ¬ï¼›$f_w(\mathbf{n}_t</sup>{\xi})$æ˜¯åŠ¨ä½œå€¼å‡½æ•°ï¼Œ$R_t^{\xi}$æ˜¯ç”¨å¼å­$(1)$è®¡ç®—çš„$t$æ—¶åˆ»çš„æ‰€æœ‰ç»éªŒå›æŠ¥ï¼š<br>
\begin{equation}<br>
f_w(\mathbf{n}<em>t^{\xi}) = \sum</em>{i,j}n_t<sup>{\xi}(i,j)f_w(i,j,o(i,\mathbf{n}_t</sup>{\xi});R_t<sup>{\xi}=\sum_{T=t}</sup>H]\sum</em>{i\in S,j\in A}n_T{\xi}(i,j)r_T(i,j,\mathbf{n}<em>T^{\xi})<br>
\end{equation}<br>
ç„¶è€Œï¼Œæˆ‘ä»¬å‘ç°å…¬å¼$(11)$ä¸­çš„losså‡½æ•°åœ¨è®­ç»ƒè¾ƒå¤§é—®é¢˜çš„criticæ—¶è¡¨ç°å¹¶ä¸å¥½ã€‚éœ€è¦ä¸€å®šæ•°é‡çš„è®¡æ•°å™¨æ ·æœ¬å¯é çš„è®­ç»ƒ$f_w$ï¼Œè¿™å¯¹äºæ‹¥æœ‰è¾ƒå¤šæ•°é‡æ™ºèƒ½ä½“çš„å¤§é—®é¢˜çš„æ‰©å±•æœ‰ä¸åˆ©å½±å“ã€‚å·²çŸ¥åœ¨å¤šæ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ ä¸­å•ç‹¬åˆ©ç”¨å…¨å±€rewardä¿¡å·çš„ç®—æ³•è¦æ¯”åˆ©ç”¨å±€éƒ¨rewardä¿¡å·çš„æ–¹æ³•å¤šç”¨ä¸€äº›æ ·æœ¬ã€‚å—åˆ°è¿™äº›ç°è±¡çš„å¯å‘ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æå‡ºäº†ä¸€ä¸ªåŸºäºç­–ç•¥çš„å±€éƒ¨rewardä¿¡å·å»è®­ç»ƒcritic $f_w$ã€‚<br>
<strong>å•ä¸ªå€¼å‡½æ•°</strong> ç”¨$\mathbf{n}</em>{1:H}<sup>{\xi}$è¡¨ç¤ºä¸€ä¸ªè®¡æ•°å™¨æ ·æœ¬ã€‚ç»™å®šè®¡æ•°å™¨æ ·æœ¬$\mathbf{n}_{1:H}</sup>{\xi}$ï¼Œç”¨$V_t<sup>{\xi}(i,j)=E\left[\sum_{tâ€™=t}</sup>Hr</em>{tâ€™}<sup>m|s_t</sup>m=i,a_m<sup>t=j,n_{1:H}</sup>{\xi}\right]$è¡¨ç¤ºä¸€ä¸ªæ™ºèƒ½ä½“åœ¨æ—¶åˆ»$t$å¤„äºstate $i$ï¼Œé‡‡å–action $j$ï¼Œæ‰€èƒ½å¾—åˆ°çš„æ‰€æœ‰æœŸæœ›rewardã€‚è¿™ä¸ªå•ä¸ªçš„å€¼å‡½æ•°å¯ä»¥ç”¨åŠ¨æ€è§„åˆ’ç®—æ³•æ¥è®¡ç®—ã€‚åŸºäºè¿™ä¸ªå€¼å‡½æ•°ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥å±•ç¤ºäº†å¼å­$(12)$ä¸­å…¨å±€ç»éªŒrewardçš„é‡æ–°å‚æ•°åŒ–ï¼š<br>
<strong>å¼•ç†(Lemma)1</strong> ç»™å®šè®¡æ•°å™¨æ ·æœ¬$\mathbf{1:H}<sup>{\xi}$ï¼Œ$t$æ—¶åˆ»çš„ç»éªŒå›æŠ¥$R_t</sup>{\xi}$å¯ä»¥è¢«é‡æ–°å‚æ•°åŒ–ä¸ºï¼š<br>
$$R_t^{\xi} = \sum</em>{i\in S,j\in A}n_t<sup>{\xi}(i,j)V_t</sup>{\xi}(i,j).$$<br>
<strong>åŸºäºå•ä¸ªå€¼å‡½æ•°çš„loss</strong> ç»™å‡ºå¼•ç†$1$ï¼Œæˆ‘ä»¬æ¨å¯¼å‡ºå¼å­$11$ä¸­çœŸå®lossçš„ä¸Šç•Œï¼Œå®ƒæœ‰æ•ˆåˆ©ç”¨äº†å•ä¸ªå€¼å‡½æ•°ï¼š<br>
\begin{align*}<br>
&amp;\sum</em>{\xi}\sum_t\left(f_w(\mathbf{n}<sup>{\xi})-R_t</sup>{\xi}\right)^2 \<br>
= &amp;\sum_{\xi}\sum_t\left(\sum_{i,j}n_t<sup>{\xi}(i,j)f_w(i,j,o(i,\mathbf{n}_t</sup>{\xi}))-\sum_{i,j}n_t<sup>{\xi}(i,j)V_t</sup>{\xi}(i,h)\right)^2\<br>
= &amp;\sum_{\xi}\sum_t\left( \sum_{i,j}n_t<sup>{\xi}(i,j)(f_w(i,j,o(i,\mathbf{n}_t</sup>{\xi}))-V_t<sup>{\xi}(i,h))\right)</sup>2\<br>
\le &amp;M\sum_{\xi}\sum_{t,i,j}n_t(i,j)\left(f_w(i,j,o(i,\mathbf{n}_t<sup>{\xi}))-V_t</sup>{\xi}(i,j)\right)^2<br>
\end{align*}<br>
å…¶ä¸­æœ€åä¸€éƒ¨ç”¨äº†æŸ¯è¥¿æ–½ç“¦èŒ¨ä¸ç­‰å¼ã€‚æˆ‘ä»¬ç”¨å¼å­(14)ä¸­ä¿®æ”¹è¿‡çš„lossè®­ç»ƒcriticã€‚æŒ‰ç…§ç»éªŒæ¥è¯´ï¼Œå¯¹äºè¾ƒå¤§çš„é—®é¢˜ï¼Œå¼å­(14)ä¸­çš„æ–°lossæ¯”å¼å­(13)ä¸­çš„åŸå§‹lossè¦æ”¶æ•›çš„å¿«å¾ˆå¤šã€‚ç›´è§‚ä¸Šæ¥è¯´ï¼Œè¿™æ˜¯å› ä¸ºå¼å­(14)ä¸­çš„æ–°losså°è¯•è°ƒæ•´æ¯ä¸€ä¸ªcriticç»„ä»¶$f_w(i,j,o(i,\mathbf{n}_t<sup>{\xi}))$æ›´æ¥è¿‘å®ƒçš„ç»éªŒå›æŠ¥$V_t</sup>{\xi}(i,j)$ã€‚ç„¶è€Œï¼ŒåŸå§‹çš„å¼å­(13)ä¸­çš„lossç€é‡äºæœ€å°åŒ–å…¨å±€lossï¼Œè€Œä¸æ˜¯è°ƒæ•´æ¯ä¸€ä¸ªå•ä¸ªçš„criticå› å­$f_w(\cdot)$åˆ°ç›¸å¯¹åº”çš„æ¯ä¸€ä¸ªç»éªŒå›æŠ¥ã€‚<br>
ç®—æ³•$1$å±•ç¤ºäº†CDec-POMDPä¸­ACç®—æ³•çš„å¤§çº²ã€‚ç¬¬$7$è¡Œå’Œç¬¬$8$è¡Œå±•ç¤ºäº†ä¸¤ç§ä¸åŒçš„æ–¹å¼è®­ç»ƒcriticã€‚ç¬¬$7$è¡Œä»£è¡¨åŸºäºå±€éƒ¨å€¼å‡½æ•°çš„criticæ›´æ–°ï¼Œä¹Ÿå¯ä»¥ç§°ä¸ºfactored cirticæ›´æ–°(fC)ã€‚ç¬¬$8$è¡Œå±•ç¤ºäº†åŸºäºå…¨å±€rewardæˆ–è€…å…¨å±€criticçš„æ›´æ–°Â©ã€‚ç¬¬$10$è¡Œå±•ç¤ºäº†ä½¿ç”¨å®šç†$2$(fA)è®¡ç®—çš„ç­–ç•¥æ¢¯åº¦ã€‚ç¬¬$11$è¡Œå±•ç¤ºäº†ç›´æ¥ä½¿ç”¨$f_w$è®¡ç®—çš„æ¢¯åº¦ã€‚</p>
<h2 id="å®éªŒ">å®éªŒ</h2>
<p>è¿™ä¸€èŠ‚ä¸­æ¯”è¾ƒäº†æˆ‘ä»¬çš„ACç®—æ³•å’Œå¦å¤–ä¸¤ä¸ªè§£å†³CDec-POMDPé—®é¢˜çš„ç®—æ³•ï¼ŒSoft-Max based flow update(SMFU)ï¼Œå’ŒæœŸæœ›æœ€å¤§åŒ–æ–¹æ³•ã€‚SMFUåªèƒ½ä¼˜åŒ–æ™ºèƒ½ä½“çš„actionä¾èµ–äºå±€éƒ¨stateçš„policyï¼Œ$\pi(a_t<sup>m|s_t</sup>m)$ï¼Œå› ä¸ºå®ƒé€šè¿‡è®¡ç®—åœ¨è§„åˆ’é˜¶æ®µå•ä¸ªæœ€æœ‰å¯èƒ½çš„è®¡æ•°å™¨å‘é‡æ¥ä¼°è®¡è®¡æ•°å™¨$\mathbf{n}$çš„ä½œç”¨ã€‚EMæ–¹æ³•ä¼˜åŒ–åŸºäºè®¡æ•°å™¨çš„åˆ†æ®µçº¿æ€§policyï¼Œå…¶ä¸­$\pi(a_t<sup>m|s_t</sup>m,\cdot)$æ˜¯æ‰€æœ‰å¯èƒ½çš„è®¡æ•°å™¨observation $o_t$ç©ºé—´ä¸Šçš„ä¸€ä¸ªåˆ†æ®µå‡½æ•°ã€‚<br>
ç®—æ³•$1$å±•ç¤ºäº†æ›´æ–°criticçš„ä¸¤ç§æ–¹å¼ï¼ˆç¬¬$7$è¡Œå’Œç¬¬$8$è¡Œï¼‰å’Œæ›´æ–°actorçš„ä¸¤ç§æ–¹å¼ï¼ˆç¬¬$10$è¡Œå’Œç¬¬$11$è¡Œï¼‰ï¼Œæ‰€ä»¥å°±æœ‰å››ç§å¯èƒ½çš„ACæ–¹æ³•ï¼fAfC,AC,FfC,fACã€‚æˆ‘ä»¬ä¹Ÿç ”ç©¶äº†ä¸åŒactor-criticæ–¹æ³•çš„å±æ€§ã€‚åœ¨é™„å½•ä¸­æœ‰ç¥ç»ç½‘ç»œçš„ç»“æ„å’Œå…¶ä»–ä¸€äº›å®éªŒè®¾ç½®ã€‚<br>
ä¸ºäº†å’Œä¹‹å‰æ–¹æ³•å…¬å¹³çš„è¿›è¡Œæ¯”è¾ƒï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸‰ç§ä¸åŒçš„æ¨¡å‹ç”¨äºåŸºäºè®¡æ•°çš„observation $o_t$ã€‚åœ¨$o0$è®¾ç½®ä¸­ï¼Œpolicyåªå–å†³äºæ™ºèƒ½ä½“çš„å±€éƒ¨state $s_t^m$å¹¶ä¸éœ€è¦è®¡æ•°å™¨ã€‚åœ¨$o1$è®¾ç½®ä¸­ï¼Œpolicyå–å†³äºå±€éƒ¨state $s_t^m$å’Œå•ä¸ªè®¡æ•°å™¨observation $n_t(s_t<sup>m)$ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ™ºèƒ½ä½“åªèƒ½è§‚æµ‹åˆ°å…¶ä»–ä¹Ÿåœ¨å½“å‰çŠ¶æ€$s_t</sup>m$çš„æ™ºèƒ½ä½“çš„è®¡æ•°å™¨ã€‚åœ¨$oN$è®¾ç½®ä¸­ï¼Œæ™ºèƒ½ä½“èƒ½è§‚æµ‹åˆ°å®ƒçš„å±€éƒ¨state $s_t<sup>m$å’Œå½“å‰çŠ¶æ€$s_t</sup>m$çš„å±€éƒ¨ç›¸é‚»çŠ¶æ€å†…å…¶ä»–æ™ºèƒ½ä½“çš„è®¡æ•°å™¨ã€‚$oN$ observationæ¨¡å‹æä¾›ç»™æ™ºèƒ½ä½“æœ€å¤šçš„ä¿¡æ¯ã€‚ç„¶è€Œï¼Œå®ƒä¹Ÿæ˜¯æœ€éš¾ä¼˜åŒ–çš„å› ä¸ºpolicyæœ‰æ›´å¤šçš„å‚æ•°ã€‚SMFUæ–¹æ³•åªèƒ½åœ¨$o0$è®¾ç½®ä¸­èµ·ä½œç”¨ï¼ŒEMæ–¹æ³•å’Œæœ¬æ–‡ä¸­çš„ACæ–¹æ³•åœ¨æ‰€æœ‰è®¾ç½®ä¸­éƒ½èƒ½èµ·ä½œç”¨ã€‚</p>
<!--
**å‡ºç§Ÿè½¦è°ƒåº¦** æˆ‘ä»¬åœ¨ç¬¬äºŒèŠ‚ä¸­ä»‹ç»çš„ç°å®ä¸–ç•Œä¸­çš„åŸŸæµ‹è¯•äº†æœ¬æ–‡çš„æ–¹æ³•ã€‚åœ¨è¿™ä¸ªé—®é¢˜ä¸­ï¼Œç›®æ ‡æ˜¯è®¡ç®—å‡ºç§Ÿè½¦policyä¼˜åŒ–æ•´ä¸ªè½¦é˜Ÿçš„æ”¶å…¥ã€‚æ•°æ®åŒ…å«äºšæ´²ä¸€ä¸ªå¤§åŸå¸‚è¶…è¿‡ä¸€å¹´çš„å‡ºç§Ÿè½¦è½¨è¿¹æ•°æ®ã€‚æˆ‘ä»¬ä½¿ç”¨äº†ä»æ•°æ®é›†ä¸­æå–åˆ°çš„è½¦è¾†è¯·æ±‚ä¿¡æ¯ã€‚å¹³å‡æ¥è¯´ï¼Œæ¯å¤©å¤§æ¦‚æœ‰$8000$è¾†å‡ºç§Ÿè½¦ã€‚æ•´ä¸ªåŸå¸‚è¢«åˆ’åˆ†ä¸º$81$ä¸ªç©ºé—´ï¼Œæ—¶é—´èŒƒå›´æ˜¯$24$ä¸ªå°æ—¶åˆ’åˆ†ä¸º$48$ä¸ªåŠå°æ—¶çš„åŒºé—´ã€‚
å›¾$2(a)$ä¸­å±•ç¤ºäº†ä¸åŒæ–¹æ³•åœ¨ä¸åŒçš„è§‚æµ‹æ¨¡å‹ï¼ˆ$'o0','o1','oN'$)ä¸Šçš„é‡åŒ–æ¯”è¾ƒã€‚æˆ‘ä»¬æµ‹è¯•äº†$4000$å’Œ$8000$è¾†å‡ºç§Ÿè½¦æ¥éªŒè¯æ˜¯å¦å‡ºç§Ÿè½¦çš„æ•°é‡ä¼šå½±å“ä¸åŒæ–¹æ³•çš„æ€§èƒ½ã€‚$y$è½´å±•ç¤ºäº†æ•´ä¸ªè½¦é˜Ÿæ¯å¤©çš„åˆ©æ¶¦ã€‚åœ¨$'o0'$è®¾ç½®ä¸‹ï¼Œæ‰€æœ‰çš„æ–¹æ³•ï¼ˆfAfC-$o0$,SMFU,EM-$o0$ï¼‰ç»™å‡ºè´¨é‡å·®ä¸å¤šçš„è§£ï¼Œåœ¨$8000$ä¸ªå‡ºç§Ÿè½¦ä¸ŠfAfC-$o0$å’ŒEM-$o0$è¡¨ç°çš„æ¯”SMFUç¨å¾®å¥½ä¸€äº›ã€‚åœ¨$'o1'$è®¾ç½®ä¸‹ï¼Œ
-->

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mxxhcm.github.io/2019/01/21/expectatin_maximization/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="é©¬æ™“é‘«çˆ±é©¬èŸèŸ">
      <meta itemprop="description" content="è®°å½•ç¡•å£«ä¸‰å¹´è‡ªå·±çš„ç§¯ç´¯">
      <meta itemprop="image" content="/images/favicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mxxhcm's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/01/21/expectatin_maximization/" class="post-title-link" itemprop="http://mxxhcm.github.io/page/20/index.html">EM(Expectation Maximization)ç®—æ³•</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-01-21 10:22:45" itemprop="dateCreated datePublished" datetime="2019-01-21T10:22:45+08:00">2019-01-21</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">æ›´æ–°äº</span>
                
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2019-09-13 09:48:32" itemprop="dateModified" datetime="2019-09-13T09:48:32+08:00">2019-09-13</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/æœºå™¨å­¦ä¹ /" itemprop="url" rel="index"><span itemprop="name">æœºå™¨å­¦ä¹ </span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="å¼•è¨€-introduction">å¼•è¨€(Introduction)</h2>
<h3 id="ä»€ä¹ˆæ˜¯æœŸæœ›æœ€å¤§åŒ–ç®—æ³•">ä»€ä¹ˆæ˜¯æœŸæœ›æœ€å¤§åŒ–ç®—æ³•</h3>
<p>æœŸæœ›æœ€å¤§åŒ–ç®—æ³•(Expectation Maximization,EM)ï¼Œæ˜¯åˆ©ç”¨å‚æ•°ä¼°è®¡çš„è¿­ä»£æ³•æ±‚è§£æœ€å¤§ä¼¼ç„¶ä¼°è®¡çš„ä¸€ç§æ–¹æ³•ã€‚</p>
<h3 id="emå’Œmleå…³ç³»">EMå’ŒMLEå…³ç³»</h3>
<p>MLEçš„ç›®æ ‡æ˜¯æ±‚è§£å·²çŸ¥åˆ†å¸ƒç±»å‹çš„å•ä¸ªåˆ†å¸ƒçš„å‚æ•°ã€‚<br>
EMçš„ç›®æ ‡æ˜¯æ±‚è§£å·²çŸ¥åˆ†å¸ƒç±»å‹çš„å¤šä¸ªæ··åˆåˆ†å¸ƒçš„å‚æ•°ã€‚<br>
ä¸€èˆ¬æˆ‘ä»¬ç”¨åˆ°çš„æå¤§ä¼¼ç„¶ä¼°è®¡éƒ½æ˜¯æ±‚æŸç§å·²çŸ¥åˆ†å¸ƒç±»å‹çš„å•ä¸ªåˆ†å¸ƒçš„å‚æ•°ï¼Œå¦‚æ±‚é«˜æ–¯åˆ†å¸ƒçš„å‡å€¼å’Œæ–¹å·®ï¼›è€ŒEMç®—æ³•æ˜¯ç”¨æ¥æ±‚è§£å·²çŸ¥åˆ†å¸ƒç±»å‹ï¼Œå¤šä¸ªè¯¥å·²çŸ¥ç±»å‹åˆ†å¸ƒçš„æ··åˆåˆ†å¸ƒçš„å‚æ•°ï¼Œè¿™å¥è¯å¬èµ·æ¥å¯èƒ½æœ‰äº›æ‹—å£ï¼Œä¸¾ä¸ªæœ€å¸¸è§çš„ä¾‹å­ï¼Œé«˜æ–¯æ··åˆåˆ†å¸ƒå‚æ•°çš„æ±‚è§£ï¼Œè¿™ä¸ªæ··åˆåˆ†å¸ƒéƒ½æ˜¯é«˜æ–¯åˆ†å¸ƒï¼Œåªæ˜¯æ¯ä¸ªåˆ†å¸ƒçš„å‚æ•°ä¸åŒè€Œå·²ã€‚å¦‚æœä¸€ä¸ªé«˜æ–¯åˆ†å¸ƒï¼Œä¸€ä¸ªå¡æ–¹åˆ†å¸ƒæ˜¯æ²¡æœ‰åŠæ³•æ±‚è§£çš„ã€‚</p>
<h3 id="ä¸ºä»€ä¹ˆå«å®ƒemç®—æ³•">ä¸ºä»€ä¹ˆå«å®ƒEMç®—æ³•</h3>
<p>å› ä¸ºè¿™ä¸ªç®—æ³•æ€»å…±æœ‰ä¸¤ä¸ªè¿­ä»£æ­¥éª¤ï¼ŒEæ­¥å’ŒMæ­¥ã€‚ç¬¬ä¸€æ­¥æ˜¯å¯¹å¤šä¸ªåˆ†å¸ƒæ±‚æœŸæœ›ï¼Œå›ºå®šæ¯ä¸€ä¸ªåˆ†å¸ƒçš„å‚æ•°ï¼Œè®¡ç®—å‡ºæ··åˆåˆ†å¸ƒçš„å‚æ•°ï¼Œå³Eæ­¥ï¼Œç¬¬äºŒæ­¥æ˜¯å¯¹è¿™ä¸ªæ··åˆåˆ†å¸ƒåˆ©ç”¨æœ€å¤§ä¼¼ç„¶ä¼°è®¡æ–¹æ³•è¿›è¡Œå‚æ•°ä¼°è®¡ï¼Œå³Mæ­¥ã€‚</p>
<h2 id="æ¨ç†è¿‡ç¨‹">æ¨ç†è¿‡ç¨‹</h2>
<p>å‡è®¾æˆ‘ä»¬è¦æ±‚ä¸€ä¸ªæ··åˆåˆ†å¸ƒpçš„å‚æ•°$\theta$ï¼Œæ¯”å¦‚æ ¡å›­å†…ç”·ç”Ÿå’Œå¥³ç”Ÿçš„èº«é«˜å‚æ•°ï¼Œæ˜¾ç„¶ï¼Œç”·ç”Ÿå’Œå¥³ç”Ÿçš„èº«é«˜æœä»çš„åˆ†å¸ƒç±»å‹æ˜¯ç›¸åŒçš„ï¼Œä½†æ˜¯å‚æ•°æ˜¯ä¸ä¸€æ ·çš„ã€‚è¿™é‡Œé€šè¿‡å¼•å…¥ä¸€ä¸ªéšå˜é‡$z$ï¼Œæ±‚è§£å‡ºå¯¹åº”ä¸åŒ$z$å–å€¼çš„å‚æ•°$\theta$çš„å€¼ã€‚<br>
\begin{align*}<br>
p(x|\theta) &amp;= \sum_zp(x,z|\theta)\\<br>
&amp;=\sum_zp(z|\theta)p(x|\theta, z) \tag{0}<br>
\end{align*}<br>
å¦‚æœæˆ‘ä»¬å‡è®¾ç”·å¥³ç”Ÿçš„èº«é«˜åˆ†å¸ƒæ˜¯ä¸€ä¸ªé«˜æ–¯æ··åˆæ¨¡å‹ï¼Œç°åœ¨è¦æ±‚å®ƒçš„å‚æ•°$\theta$ã€‚æ··åˆæ¨¡å‹çš„è¡¨è¾¾å¼å¯ä»¥å†™ä¸ºï¼š<br>
\begin{align*}<br>
p(x|\theta) &amp;= \sum_zw(z)N(x|\mu_z,\sigma_z)\\<br>
&amp;=\sum_zp(z|\theta)p(x|\theta,z)<br>
\end{align*}<br>
å…¶ä¸­$\sum_zw(z) = 1,\theta={w, \mu, \sigma}$ï¼Œå¦‚æœç”¨æœ€å¤§ä¼¼ç„¶ä¼°è®¡æ¥è§£è¯¥é—®é¢˜çš„è¯ï¼Œlogå‡½æ•°å†…æœ‰å’Œå¼ï¼Œä¸å¥½ä¼˜åŒ–ï¼Œæ‰€ä»¥å°±è¦æ¢ç§æ–¹æ³•ã€‚<br>
è§‚æµ‹æ•°æ®ï¼š$x=(x_1,\cdots, x_N)$<br>
å¯¹åº”çš„éšå˜é‡ï¼š$z=(z_1,\cdots, z_N)$ï¼Œ$z_i$æœ‰$c$ç§å–å€¼ã€‚</p>
<p>\begin{align*}<br>
l(\theta;x) &amp;= log p(x|\theta) \tag{1}\\<br>
&amp;= log\prod_{i=1}^N\ p(x_i|\theta) \tag{2}\\<br>
&amp;= \sum_{i=1}^Nlog\ p(x_i|\theta) \tag{3}\\<br>
&amp;= \sum_{i=1}^Nlog\sum_zp(x_i,z|\theta) \tag{4}\\<br>
\end{align*}<br>
è¿™é‡Œå¼å­(4)ä¸­$\sum_zp(x,z|\theta)$è¯¥æ€ä¹ˆå˜å½¢ï¼Œå› ä¸ºç°åœ¨è§£ä¸å‡ºæ¥äº†ã€‚<br>
æœ€å¼€å§‹æˆ‘æƒ³çš„æ˜¯ä½¿ç”¨æ¡ä»¶æ¦‚ç‡è¿›è¡Œå±•å¼€ï¼Œå³ï¼š<br>
$$\sum_zp(x_i, z|\theta) = \sum_zp(x_i|z, \theta)p(z|\theta)$$<br>
ä½†æ˜¯å¦‚æœå±•å¼€æˆè¿™æ ·å­ï¼Œå°±å˜æˆäº†æ–‡ç« å¼€å¤´ç»™å‡ºçš„å¼å­(0)ï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆç”¨ï¼Œä¸èƒ½ç»§ç»­åŒ–ç®€äº†ã€‚<br>
æ‰€ä»¥å°±å¯¹å¼å­(4)åšä¸ªå˜å½¢<br>
\begin{align*}<br>
&amp;\ \ \ \ \sum_{i=1}^Nlog\sum_zp(x_i,z|\theta) \tag{4}\\<br>
&amp;= \sum_{i=1}^Nlog\sum_zq(z|x_i)\frac{p(x_i,z|\theta)}{q(z|x_i)}, \ \ s.t.\sum_zq(z|x_i)=1 \tag{5}\\<br>
&amp;\ge \sum_{i=1}^N \underbrace{\sum_zq(z|x_i)log\frac{p(x_i,z|\theta)}{q(z|x_i)}}_{L(q,\theta)},\ \ s.t. \sum_zq(z|x_i)=1 \tag{6}\\<br>
\end{align*}<br>
ç¬¬(4)æ­¥åˆ°ç¬¬(5)æ­¥å¼•å…¥äº†ä¸€ä¸ªåˆ†å¸ƒ$q(z|x)$ï¼Œå°±æ˜¯ç»™å®šä¸€ä¸ªè§‚æµ‹æ•°æ®$x$ï¼Œéšå˜é‡$z$å–å€¼çš„æ¦‚ç‡åˆ†å¸ƒã€‚æ³¨æ„ï¼Œ$q(z)$æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä½†æ˜¯ç»™å®š$x$ä¹‹åï¼Œ$q(z|x)$æ˜¯ä¸€ä¸ªå˜é‡ã€‚ç„¶åå› ä¸ºå˜å½¢ä¹‹åè¿˜æ˜¯æ²¡æœ‰æ±‚è§£ï¼Œå°±åˆ©ç”¨æ°æ£®ä¸ç­‰å¼åšäº†ç¼©æ”¾ï¼Œå°†$log(sum())$å˜æˆäº†$sum(log())$ï¼Œå°±å˜æˆäº†(6)å¼ã€‚<br>
è¿™é‡Œä½¿ç”¨Jensenä¸ç­‰å¼çš„ç›®çš„æ˜¯ä½¿å¾—ç¼©æ”¾åçš„å€¼è¿˜èƒ½å–å¾—å’ŒåŸå¼ç›¸ç­‰çš„å€¼ï¼Œé‡è¦çš„æ˜¯ç­‰å·èƒ½å¤Ÿå–åˆ°ã€‚</p>
<h3 id="jensenä¸ç­‰å¼">Jensenä¸ç­‰å¼</h3>
<p>å¯¹äºéšæœºå˜é‡çš„Jensenä¸ç­‰å¼ï¼Œå½“å‡½æ•°$f(x)$æ˜¯å‡¸å‡½æ•°çš„æ—¶å€™å¯ä»¥ç”¨ä¸‹å¼è¡¨ç¤ºï¼š<br>
$$f(E(x)) \le E(f(x))$$<br>
å½“$f(x)$æ˜¯å‡¹å‡½æ•°çš„æ—¶å€™ï¼Œæœ‰<br>
$$f(E(x)) \ge E(f(x))$$</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±è¦æ±‚è§£ä½¿å¾—å¼å­(6)ä¸­æ°æ£®ä¸ç­‰å¼ç­‰å·æˆç«‹çš„$q$åˆ†å¸ƒçš„å–å€¼ã€‚è¿™é‡Œæœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥æ±‚è§£ã€‚</p>
<h3 id="æ‹‰æ ¼æœ—æ—¥ä¹˜å­æ³•">æ‹‰æ ¼æœ—æ—¥ä¹˜å­æ³•</h3>
<p>ä»¤<br>
$$L(q,\theta) = \sum_z q(z|x_i)log{\frac{p(x_i,z|\theta)}{q(z|x_i)}}, s.t.\sum q(z|x_i) = 1 \tag{7}$$<br>
æ„å»ºæ‹‰æ ¼æœ—æ—¥ç›®æ ‡å‡½æ•°ï¼š<br>
\begin{align*}<br>
L &amp;= L(q, \theta) + \lambda(\sum_zq(z|x)- 1) \tag{8}\\<br>
&amp;= \sum_z q(z|x_i)log{\frac{p(x_i,z|\theta)}{q(z|x_i)}} + \lambda(\sum_z q(z|x_i) - 1)  \tag{9}<br>
\end{align*}</p>
<p>å¯¹$L$æ±‚å¯¼ï¼Œå¾—åˆ°ï¼š<br>
$$\frac{\partial L}{\partial q(z|x_i)} = log\frac{p(x_i, z|\theta)}{q(z|x_i)} + q(z|x_i)(-\frac{1}{q(z|x_i)}) + \lambda \tag{10}$$<br>
ä»¤$\frac{\partial L}{\partial q(z|x_i)}$ç­‰äº$0$ï¼Œå¾—åˆ°ï¼š$$log\frac{p(x_i, z|\theta)}{q(z|x_i)} = 1 - \lambda$$<br>
ä¸¤è¾¹åŒå–$e$çš„å¯¹æ•°ï¼š<br>
$$\frac{p(x_i, z|\theta)}{q(z|x_i)} = e^{1-\lambda} \tag{11}$$<br>
$$q(z|x_i) = e^{\lambda - 1}p(x_i, z|\theta) \tag{12}$$<br>
ä¸¤è¾¹åŒæ—¶æ±‚å’Œå¾—ï¼š<br>
$$1 = e^{\lambda - 1}\sum_z p(x_i, z|\theta) \tag{13}$$<br>
ç”¨$p$è¡¨ç¤º$e^{\lambda-1}$å¾—åˆ°ï¼š<br>
$$e^{\lambda-1} = \frac{1}{\sum_z p(x_i, z|\theta)}$$<br>
å°†å…¶ä»£å…¥å¼å­(12)å¾—ï¼š<br>
\begin{align*}<br>
q(z|x_i) &amp;= \frac{p(x_i, z|\theta)}{\sum_z p(x_i, z|\theta)}\\<br>
&amp;= \frac{p(z, x_i|\theta)}{p(x_i|\theta)}\\<br>
&amp;= p(z|x_i, \theta)  \tag{14}<br>
\end{align*}</p>
<p>æœ€åæ±‚å‡ºæ¥$q(z|x_i) = p(z|x_i, \theta)$ã€‚</p>
<h3 id="æ°æ£®ä¸ç­‰å¼æˆç«‹æ¡ä»¶">æ°æ£®ä¸ç­‰å¼æˆç«‹æ¡ä»¶</h3>
<p>æ°æ£®ä¸ç­‰å¼æˆç«‹æ¡ä»¶æ˜¯å¸¸æ•°ï¼Œå³ï¼š<br>
$$\frac{p(x_i, z|\theta)}{q(z|x_i)} = c,  s.t. \sum q(z|x_i)=1 \tag{15}$$<br>
åˆ™æœ‰:<br>
$$p(x, z_i|\theta) = cq(z_i|x) \tag{16}$$<br>
åŒæ—¶å¯¹å¼å­å·¦å³ä¸¤è¾¹æ±‚å’Œï¼Œå¾—åˆ°ï¼š<br>
$$\sum p(x_i, z|\theta) = \sum cq(z|x_i) = c \tag{17}$$<br>
å°†$c = \sum p(x_i, z|\theta)$ä»£å…¥å¼å­(14)å¾—ï¼š<br>
\begin{align*}<br>
q(z|x_i) &amp;= \frac{p(x_i, z|\theta)}{\sum p(x_i,z|\theta)}\\<br>
&amp;= \frac{p(x_i, z)|\theta}{p(x_i|\theta)}\\<br>
&amp;= p(z|x_i, \theta) \tag{18}<br>
\end{align*}</p>
<h3 id="ç­‰å·æˆç«‹è¯æ˜">ç­‰å·æˆç«‹è¯æ˜</h3>
<p>ä¸Šé¢ä¸¤ä¸ªæ–¹æ³•éƒ½ç®—å‡ºæ¥åœ¨$q(z|x_i) = p(z|x_i, \theta)$æ—¶$L$èƒ½å–å¾—æœ€å¤§å€¼ã€‚æ¥ä¸‹æ¥è¯æ˜è¿™ä¸ªè¿™ä¸ª$L$çš„æœ€å¤§å€¼å’Œ$l$ç›¸ç­‰ã€‚<br>
å°†$q = p(z|x_i, \theta)$ä»£å…¥$L(q, \theta)$å¾—ï¼š<br>
\begin{align*}<br>
L(q, \theta) &amp;= L(p(z|x_i, \theta^t), \theta^t)\\<br>
&amp;= \sum_z p(z|x_i, \theta^t) log\frac{p(z, x_i|\theta^t)}{p(z|x_i, \theta^t)} \\<br>
&amp;= \sum_z p(z|x_i, \theta^t) log p(x_i|\theta^t)\\<br>
&amp;= 1\cdot log p(x_i|\theta^t)\\<br>
&amp;= log p(x_i|\theta^t)\\<br>
&amp;= l(\theta^t; x_i)<br>
\end{align*}</p>
<h3 id="å¦ä¸€ç§ç­‰å·æˆç«‹æ¨å¯¼">å¦ä¸€ç§ç­‰å·æˆç«‹æ¨å¯¼</h3>
<p>\begin{align*}<br>
l(\theta; x) - L(q, \theta) &amp;= l(\theta; x_i) - \sum_z q(z|x_i) log{\frac{p(z, x_i|\theta)}{q(z|x_i)}}\\<br>
&amp;= \sum_z q(z|x_i) log p(x_i|\theta) - \sum_z q(z|x_i) log{\frac{p(z, x_i|\theta)}{q(z|x_i)}}\\<br>
&amp;= \sum_z q(z|x_i)log {\frac{p(x_i|\theta)q(z|x_i)}{p(z, x_i|\theta)}}\\<br>
&amp;= \sum_z q(z|x_i)log {\frac{q(z|x_i)}{p(z|x_i, \theta)}}\\<br>
&amp;= KL(q(z|x_i)||p(z|x_i,\theta))<br>
\end{align*}<br>
æœ€åç®—å‡ºæ¥ä¸¤ä¸ªå‡½æ•°ä¹‹å·®æ˜¯ä¸€ä¸ªKLæ•£åº¦ï¼Œæ˜¯ä»$p$åˆ°$q$çš„KLæ•£åº¦ã€‚å½“å‰ä»…å½“$p=q$æ—¶å–ç­‰ï¼Œå¦åˆ™å°±éè´Ÿã€‚</p>
<h3 id="mæ­¥">Mæ­¥</h3>
<p>\begin{align*}<br>
L(q, \theta) &amp; = \sum_z q(z|x_i) log\frac{p(z, x_i|\theta)}{q(z|x_i)} \\<br>
&amp; = \underbrace{\sum_z q(z|x_i)log{p(z, x_i|\theta)}}_{Expected\ complete\ log-likelyhood} - \underbrace{\sum_z q(z|x_i)l{q(z|x_i)}}_{Entropy}<br>
\end{align*}</p>
<h2 id="emæµç¨‹">EMæµç¨‹</h2>
<h3 id="è®¡ç®—æµç¨‹">è®¡ç®—æµç¨‹</h3>
<p>ï¼ˆï¼‘ï¼‰é¦–å…ˆéšæœºåˆå§‹åŒ–æ¨¡å‹çš„ä¸åŒéšå˜é‡å¯¹åº”çš„å‚æ•°ï¼Œ<br>
ï¼ˆï¼’ï¼‰å¯¹äºæ¯ä¸€ä¸ªè§‚æµ‹ï¼Œé¦–å…ˆåˆ¤æ–­å®ƒå¯¹åº”çš„éšå˜é‡çš„åˆ†å¸ƒã€‚<br>
ï¼ˆï¼“ï¼‰æ±‚æœŸæœ›<br>
ï¼ˆï¼”ï¼‰æœ€å¤§ä¼¼ç„¶ä¼°è®¡æ±‚å‚æ•°<br>
ç”¨å…¬å¼æ¥è¡¨ç¤ºå¦‚ä¸‹ï¼š<br>
Eæ­¥ï¼š$q^{t+1} = arg\ max_q L(q, \theta^t)$<br>
Mæ­¥ï¼š$\theta^{t+1} = arg max_{\theta}L(q^{t+1}, \theta)$<br>
Eæ­¥å°±æ˜¯æ ¹æ®$t$æ—¶åˆ»çš„$\theta^t$åˆ©ç”¨æ¦‚ç‡$q$æ±‚å‡º$L$çš„æœŸæœ›ï¼Œç„¶åMæ­¥ä½¿ç”¨æœ€å¤§ä¼¼ç„¶ä¼°è®¡è®¡ç®—å‡ºæ–°çš„$\theta$ï¼Œå°±è¿™æ ·è¿­ä»£ä¸‹å»ã€‚</p>
<h2 id="emæ”¶æ•›æ€§åˆ†æ">EMæ”¶æ•›æ€§åˆ†æ</h2>
<p>EMç®—æ³•çš„æ”¶æ•›æ€§å°±æ˜¯è¦è¯æ˜$L(q=p(z|x_i, \theta^t) , \theta)$çš„å€¼ä¸€ç›´åœ¨å¢å¤§ã€‚<br>
\begin{align*}<br>
L(p(z|x_i, \theta^{t+1}) , \theta^{t+1}) - L(p(z|x_i, \theta^{t}) , \theta^{t}) &amp;= log p(x_i|\theta^{t+1}) - log p(x_i|\theta^t)\\<br>
&amp; \ge 0<br>
\end{align*}</p>
<h2 id="ä¾‹å­">ä¾‹å­</h2>
<p>å‡å¦‚æœ‰ä¸¤ä¸ªç¡¬å¸Aå’ŒBï¼Œå‡è®¾éšæœºä»A,Bä¸­é€‰ä¸€ä¸ªç¡¬å¸ï¼Œæ·$10$æ¬¡ï¼Œé‡å¤$5$æ¬¡å®éªŒï¼Œåˆ†åˆ«æ±‚å‡ºä¸¤ä¸ªç¡¬å¸æ­£é¢å‘ä¸Šçš„æ¦‚ç‡ã€‚å‡è®¾ç¡¬å¸æœä»äºŒé¡¹åˆ†å¸ƒ<br>
$5$æ¬¡å®éªŒç»“æœå¦‚ä¸‹ï¼š<br>
5H5T<br>
9H1T<br>
8H2T<br>
4H6T<br>
7H3T</p>
<p>è¿™ä¸ªæ—¶å€™æœ‰ä¸¤ç§æƒ…å†µ</p>
<h3 id="çŸ¥é“æ¯æ¬¡é€‰çš„æ˜¯aè¿˜æ˜¯b">çŸ¥é“æ¯æ¬¡é€‰çš„æ˜¯Aè¿˜æ˜¯B</h3>
<p>è¿™ä¸ªæ—¶å€™å°±å˜æˆäº†æå¤§ä¼¼ç„¶ä¼°è®¡ã€‚</p>
<h3 id="ä¸çŸ¥é“æ¯æ¬¡é€‰çš„æ˜¯aè¿˜æ˜¯b">ä¸çŸ¥é“æ¯æ¬¡é€‰çš„æ˜¯Aè¿˜æ˜¯B</h3>
<p>è¿™ä¸ªæ—¶å€™å°±ç”¨EMç®—æ³•äº†ã€‚<br>
é¦–å…ˆéšæœºåˆå§‹åŒ–$\theta_A = 0.5, \theta_B = 0.5$ï¼Œ<br>
å¯¹äºæ¯ä¸€ä¸ªè§‚æµ‹ï¼Œé¦–å…ˆåˆ¤æ–­å®ƒå¯¹åº”çš„éšå˜é‡çš„åˆ†å¸ƒã€‚<br>
$i={1,2,3,4,5}$ï¼Œåˆ†åˆ«ä»£è¡¨$5$ä¸ªå®éªŒã€‚<br>
é¦–å…ˆæ±‚å‡º$\theta_A$çš„å‚æ•°ã€‚<br>
$$P(z = A|x_i, \theta_A, \theta_B) = \frac{P(z = A|x_i, \theta_A)}{P(z = A|x_i, \theta_A) + P(z = B|x_i, \theta_B)}$$<br>
$$P(z = B|x_i, \theta_A, \theta_B) = 1 - P(z = A|x_i,\theta_A,\theta_B)$$<br>
ç„¶åè®¡ç®—ä¸‹å¼ï¼š<br>
\begin{align*}<br>
L(q,\theta_A) &amp;= \sum_{i=1}^5 \sum_zp(z|x_i, \theta_A, \theta_B)log p(x_i|\theta)\\<br>
&amp;= \sum_{i=1}^5 (p(z=A|x_i, \theta_A)log p(x_i|\theta_A) + p(z=B|x_i, \theta_B)log p(x_i|\theta_B))<br>
\end{align*}<br>
ç„¶ååˆ©ç”¨æå¤§æ—¢ç„¶ä¼°è®¡è®¡ç®—$\theta_A$å’Œ$\theta_B$çš„å€¼ã€‚</p>
<h2 id="å‚è€ƒæ–‡çŒ®">å‚è€ƒæ–‡çŒ®</h2>
<p>1.<a href="https://www.zhihu.com/question/27976634/answer/153567695" target="_blank" rel="noopener">https://www.zhihu.com/question/27976634/answer/153567695</a><br>
2.<a href="https://en.wikipedia.org/wiki/Jensen%27s_inequality" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/Jensen's_inequality</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/19/"><i class="fa fa-angle-left" aria-label="ä¸Šä¸€é¡µ"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/19/">19</a><span class="page-number current">20</span><a class="page-number" href="/page/21/">21</a><span class="space">&hellip;</span><a class="page-number" href="/page/23/">23</a><a class="extend next" rel="next" href="/page/21/"><i class="fa fa-angle-right" aria-label="ä¸‹ä¸€é¡µ"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/favicon.jpg" alt="é©¬æ™“é‘«çˆ±é©¬èŸèŸ">
            
              <p class="site-author-name" itemprop="name">é©¬æ™“é‘«çˆ±é©¬èŸèŸ</p>
              <p class="site-description motion-element" itemprop="description">è®°å½•ç¡•å£«ä¸‰å¹´è‡ªå·±çš„ç§¯ç´¯</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">223</span>
                    <span class="site-state-item-name">æ—¥å¿—</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">20</span>
                    <span class="site-state-item-name">åˆ†ç±»</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">296</span>
                    <span class="site-state-item-name">æ ‡ç­¾</span>
                  </a>
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/mxxhcm" title="GitHub &rarr; https://github.com/mxxhcm" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="mailto:mxxhcm@gmail.com" title="E-Mail &rarr; mailto:mxxhcm@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            </div>
          

          

          
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">é©¬æ™“é‘«çˆ±é©¬èŸèŸ</span>

  

  
</div>


  <div class="powered-by">ç”± <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> å¼ºåŠ›é©±åŠ¨ v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">ä¸»é¢˜ â€“ <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v6.6.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script src="/js/src/utils.js?v=6.6.0"></script>

  <script src="/js/src/motion.js?v=6.6.0"></script>



  
  


  <script src="/js/src/affix.js?v=6.6.0"></script>

  <script src="/js/src/schemes/pisces.js?v=6.6.0"></script>



  

  


  <script src="/js/src/bootstrap.js?v=6.6.0"></script>



  



  






<!-- LOCAL: You can save these files to your site and update links -->
    
        
        <link rel="stylesheet" href="https://aimingoo.github.io/gitmint/style/default.css">
        <script src="https://aimingoo.github.io/gitmint/dist/gitmint.browser.js"></script>
    
<!-- END LOCAL -->

    

    







  





  

  

  

  

  
  

  
  
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
    
      
    
      
    
  

  
    
      <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      },
      TeX: {equationNumbers: { autoNumber: "AMS" }}
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>
<script src="//cdn.jsdelivr.net/npm/mathjax@2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

<style>
.MathJax_Display {
    overflow: auto hidden;
}
</style>

    
  


  
  

  

  

  

  

  

  

</body>
</html>
