<!DOCTYPE html>












  


<html class="theme-next pisces use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
































<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=6.6.0" rel="stylesheet" type="text/css">



  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.jpg?v=6.6.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.jpg?v=6.6.0">










<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '6.6.0',
    sidebar: {"position":"left","display":"always","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="记录硕士三年自己的积累">
<meta property="og:type" content="website">
<meta property="og:title" content="mxxhcm&#39;s blog">
<meta property="og:url" content="http://mxxhcm.github.io/page/6/index.html">
<meta property="og:site_name" content="mxxhcm&#39;s blog">
<meta property="og:description" content="记录硕士三年自己的积累">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="mxxhcm&#39;s blog">
<meta name="twitter:description" content="记录硕士三年自己的积累">



  <link rel="alternate" href="/atom.xml" title="mxxhcm's blog" type="application/atom+xml">




  <link rel="canonical" href="http://mxxhcm.github.io/page/6/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>mxxhcm's blog</title>
  












  <noscript>
  <style>
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion .logo-line-before i { left: initial; }
    .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">mxxhcm's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mxxhcm.github.io/2019/05/07/linux-file-system/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="马晓鑫爱马荟荟">
      <meta itemprop="description" content="记录硕士三年自己的积累">
      <meta itemprop="image" content="/images/favicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mxxhcm's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/05/07/linux-file-system/" class="post-title-link" itemprop="http://mxxhcm.github.io/page/6/index.html">linux file system</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-05-07 17:02:37 / 修改时间：17:03:00" itemprop="dateCreated datePublished" datetime="2019-05-07T17:02:37+08:00">2019-05-07</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>18.　碎片整理，文件写入的block太碎了，文件的读写性能太差，所以可以通过碎片整理将	一个文件的block回合在一起　FAT文件系统经常需要碎片整理,但是Ext2文件类型		是索引式文件系统，所以不太需要经常碎片整理的。</p>
<ol start="19">
<li>df 查询挂载的设备<br>
dumpe2fs [-bh]	查询每个区段以及superblock的信息<br>
	-b<br>
	-h 仅列出superblock的数据<br>
	ls -i 查看文件的inode编号<br>
	目录并不一定只占一个block，当目录内的文件数太多时，会增加该目录			的block</li>
</ol>
<pre><code>df [-haiT]　[dir/file]	显示文件系统的整体磁盘用量
	-a 列出所有的文件
	-h 显示文件系统的大写，自行显示格式
	-i 可用的inode
	-T 联通分区文件系统的名称

du [-ashkm] [dir/filename] 目录或者文件所占的容量
	默认显示的是目录的容量，不包含文件
	-s 该目录下所有文件的容量，不细列出来
	-a 显示所有的目录与文件的容量
	-h 以人们熟悉的大小方式显示出来
	-k 以kb列出容量
	-m 以mb列出容量:
</code></pre>
<ol start="20">
<li>ln [-s] 链接文件<br>
hard-link	硬链接，将某个目录下的block多写入一个数据,磁盘的inode与b			lock数量一般不会改变，磁盘容量也不会改变，而且删除一个文			件并不会响另一个文件的读写，但是其对于目录是没有作用的，			对于不同的文件系统也是没有用的。<br>
sybomlic</li>
</ol>
<p>21.磁盘分区　　格式化　检验与挂载</p>
<pre><code>df + 目录  查看某个目录挂载的磁盘位置
eg: df /

sudo fdisk [-l]　+ 设备　输出后面设备所有的分区内容　如不加设备名称，列					　出整个系统。

新增或者删除分区
sudo fdisk + 设备　　对设备进行操作  
partprobe


sudo mkfs [-t ext2/ext2/vfat] + 设备名　 将某个设备格式化为某种文件系统

sudo mke2fs [-b block_size] [-i inode_size]  [-L 卷标] [-cj -c 检查磁盘				错误　-j 加入日志文件] + 设备名

sudo fsck [-CAay] [-t filesystem] + 设备
	-C  使用直方图显示进度
	-A  依据/etc/fstab内容，扫描设备
	-a  自动修复检查到的有问题的扇区
	-y  与-a 类似
	ext2 ext3 支持额外参数　　[-fD] -f 强制进入设备进行检查
					-D 对文件系统下的目录进行优化配								置
sudo badblocks [-sv] + 设备  -s 在屏幕上列出进度 -v 在屏幕上看到进度
</code></pre>
<p>22.mount [-aoltnL] 挂载文件系统与磁盘 P227</p>
<pre><code>-a　按照/etc/fstab的配置信息将所有未挂载的磁盘挂载上来
-l　可增加label名称
-t　加上文件类型
-n　默认情况下会将挂载情况写入/etc/mtab，加入-n可以不写入
-L　可以利用卷标名来挂载
-o 加一些挂载时的额外参数　
	ro(只读)　rw(可写)
	async sync 此文件系统是否使用同步写入或者异步的内存机制
	auto noauto 允许此分区以mount -a自动挂载(auto)
	dev nodev 是否运行在此分区创建设备文件
	suid nosuid 
	exec noexec 是否可拥有可执行binary文件
	user,nouer 设置user参数可以让一般user能对此分区挂载
	defaults　默认为rw,suid,dev,exec,auto,nouser,async
	remount 重新挂载，在系统出错，或者重新更新参数时
mount 设备文件名　挂载点
	
用卷标名挂载设备
~#:mount -L mxx_logical /medic/mxx	

用磁盘设备名挂载
~#:mount /dev/sdb1 /mnt/usb

~#:mount -t iso9660 /dev/cdrom /media/cdrom

~#:mount -o remount,rw,auto /dir

~#:mount -o loop ~/my.iso/myfile.iso /mnt/iso
....
</code></pre>
<p>23.磁盘参数修改<br>
	设备用文件来代表	通过文件的major与minor数值来替代<br>
				Major 主设备代码	Minor　次设备代码<br>
				/dev/hd*  major = 3				<br>
				/dev/sd*  minor = 8	<br>
	mknod [bcp]<br>
		b	设置设备名称成为一个外部存储文件，如硬盘<br>
		c	设置设备名称成为一个外部输入文件，如鼠标/键盘<br>
		p	设置设备名称成为一个FIFO文件</p>
<pre><code>e2label /dev/sdb5 + 新的label名称

tune2fs [-jlL]
	-l  类似 dupme2fs -h 
	-j  将ext2转换为ext3
	-L  类似于　e2label 

hdparm -Tt /dev/sd*  测试SATA硬盘的读取性能
</code></pre>
<p>24.挂载.iso文件</p>
<pre><code>mount -o loop /home/mxx/ubuntu16.04 /mnt/ubuntu16.04

dd命令　创建一个大文件 
dd if=/dev/zero of=/home/mxx/filename bs=1M count=512
	if--input file	/dev/zero 一直输出0
	of--output file	将if中的内容加入到of接的文件名中
	bs--block size	
	count	共有多少个bs
</code></pre>
<p>25.构建swap空间</p>
<pre><code>例如将第二快硬盘的第五个分区改为swap分区
~#:sudo fdisk -l /dev/sdb
	p
	t 5
	82
	w
	partprobe
将/dev/sdb5更改为swap类型的文件系统

~#:mkswap /dev/sdb5

~#:free 查看memory以及swap分区的使用情况

~#:swapon /dev/sdb5 使用/deb/sdb5的swap分区	
~#:swapon -s 查看目前使用的swap设备有哪些
~#:swapoff /dev/sdb5
</code></pre>
<p>26.boost sector 与　superblock 的关系<br>
	1.superblock的大小为1024b<br>
	boost sector与superblock 各占一个block ,可以查看/boot的挂载目录<br>
		0号block给boost ，1号block给superblock<br>
	2.superblock的大小大于1024b,如为4096b<br>
	superblock在0号blok ,但是superblock 只有1024b,所以为了防止空间浪费，于是		在0号block内，superblock(1024-2047),boost sector(0-1023),2048后			面的空间保留。<br>
	实际情况中，由于在比较大的block中，我们能将引导装载程序安装到superblock			所在的0号block,但事实上还是安装到启动扇区的保留区域。<br>
	比较正确的说法是，安装到文件系统最前面的1024b内的区域，就是启动扇区</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mxxhcm.github.io/2019/05/07/linux-compress-uncompress/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="马晓鑫爱马荟荟">
      <meta itemprop="description" content="记录硕士三年自己的积累">
      <meta itemprop="image" content="/images/favicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mxxhcm's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/05/07/linux-compress-uncompress/" class="post-title-link" itemprop="http://mxxhcm.github.io/page/6/index.html">linux compress uncompress</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-05-07 17:01:24 / 修改时间：17:02:06" itemprop="dateCreated datePublished" datetime="2019-05-07T17:01:24+08:00">2019-05-07</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>29.gzip ,zcat ,bzip2,bzcat , gunzip ,bunzip2,7z,zip,rar</p>
<pre><code>gzip 和 bzip2　公用	
	-d 解压缩参数	
	-# #取1-9　压缩等级 -1最快
	-v 显示压缩比
	-k 保留原文件
	-z 压缩参数
	-c 将压缩过程中产生的数据输出到屏幕上(压缩后的数据)可以将其输出重定向
	-t 检验一个压缩文件的一致性

zip [-dmbrfFg]
	-d　从zip文件中移除一个文件
	-m  将特定文件移入zip文件，且删除特定文件
	-g　将文件压缩附加到zip文件中
	-r  包括子目录
	-f  以新文件取代旧文件
	-F　修复已经损毁的压缩文件
	-b　暂存文件的路径
	-v　显示详细信息
	-u　值更新改变过的文件
	-T　测试zip文件是否正常
	-x　不需要压缩的文件
~#:zip -r myfile.zip ./*
~#:zip -d myfile.zip myfile　 //删除压缩文件内的某个文件
~#:zip -g myfile.zip myfile   //向一个压缩文件内添加新文件
~#:zip -u myzip

unzip [-dnovj]
	-v  查看压缩文件目录，但是不解压
	-d  指定解压到的目录
	-n　不覆盖已有文件
	-o　覆盖已有文件
	-j  不重建文档的目录结构，把所有文件解压到同一目录下

7z
~#:apt-get install p7zip
7z [x|a] [-rotr]
	a　代表添加文件到压缩包
	x　代表解压缩文件
	-r 表示递归所有文件
	-t 制定压缩类型
	-o 指定解压到的目录
~#:7z a -t 7z -r myfile.7z  ~/myfile
~#:7z x myfile.7z -r -o ~/

rar
~#:apt-get install rar
~#:rar x myfile.rar
~#:rar a myfile.rar myfile	
</code></pre>
<p>30.tar命令</p>
<pre><code>-c  --create
-x  --extract
-t  --list
-v  --verbose
-f  --file
-j  --bzip2
-z  --gzip --gunzip 
-C  --directory DIR
       	change to directory DIR

-p  --preserve-permissions, --same-permissions
-P  --absolute-names

--exclude=file

~#:tar -cvj -f ~/my_bak/etc.newer.passwd.tar.bz2 --newer-mtime=&quot;2016/09/23&quot;			/etc/*

~#:tar -cvj -f ~/my_bak/etc.tar.gz   /etc
~#:tar -xvj -f ~/my_bak/etc.tar.gz -C /tmp
~#:tar -xvj -f ~/my_bak/etc.tar.gz |etc/shadow
~#:tar -tfj -f ~/my_bak/etc.tar.gz | grep 'shadow'

tarfiel tarball

磁带机/dev/st0
tar -cv -f /dev/st0 /home /root /etc
</code></pre>
<ol start="31">
<li>
<p>dump 与　restore</p>
<p>dump<br>
	-S	size<br>
	-u	update    recode the dump time to /var/lib/dumpdates<br>
		-u只能对level 0 操作<br>
	-j	add compress bz2(默认压缩等级为 2)<br>
	-v	verbose   详细的<br>
	-W	列出/etc/fstab中的具有dump设置的分区是否被备份过<br>
	-f	<br>
	-level	备份的等级(0-9) 对于文件系统有九个等级<br>
				对于单个目录只有0级</p>
<p>~#:dump -0u -f /root/etc.dump /etc</p>
</li>
</ol>
<pre><code>restore
	-t	list
	-C	compare
	-i	itera
	-r	r	

~#:restore -t -f /root/boot.dump
~#:restore -C -f /root/boot.dump
~#:mkdir test_restore
~#:sudo fdisk /dev/sdb
	new a /dev/sdb2
~#:cd test_restore	
~#:restore -r -f /root/boot.dump
~#:restore -i -f /root/etc.dump.bz2
	help
	ls
	add
	delete
	extract
	quit
</code></pre>
<p>32.mkisofs<br>
	-o +生成的镜像名<br>
	-r 记录更完整的文件信息，包括UID,GID与权限等<br>
	-v 显示构建iso的过程<br>
	-V 新建Volume<br>
	-m exclude 排除某文件<br>
	-graft-point</p>
<pre><code>~#:mkisofs -r -v -o ~/my.iso/system.iso -m /home/lost+found -graft-point/home=/home /root=/root /etc=/etc
</code></pre>
<p>33.dd<br>
	可以备份整块硬盘或者整块磁盘　　包括　superblocks以及boot sector 等等</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mxxhcm.github.io/2019/05/07/linux-vim/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="马晓鑫爱马荟荟">
      <meta itemprop="description" content="记录硕士三年自己的积累">
      <meta itemprop="image" content="/images/favicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mxxhcm's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/05/07/linux-vim/" class="post-title-link" itemprop="http://mxxhcm.github.io/page/6/index.html">linux vim</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-05-07 16:58:22" itemprop="dateCreated datePublished" datetime="2019-05-07T16:58:22+08:00">2019-05-07</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-05-19 12:01:31" itemprop="dateModified" datetime="2019-05-19T12:01:31+08:00">2019-05-19</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="vim-配置文件">vim 配置文件</h2>
<p>个人vim配置文件一般在~/.vimrc下，可以自定义各种配置。<br>
<a href>我的vimrc文件</a></p>
<h3 id="前缀符号">前缀符号</h3>
<p>为了缓解快捷键冲突问题，就引入了前缀键，跟参考文献[0]一样，设置;号为前缀键。<br>
let mapleader=&quot;;&quot;</p>
<h3 id="设置显示行号">设置显示行号</h3>
<p>set number</p>
<h3 id="底部显示文件路径">底部显示文件路径</h3>
<p>set laststatus=2 “设置底部状态栏可见<br>
set statusline=%F%m%r%h%w\ %=#%n\ [%{&amp;fileformat}:%{(&amp;fenc==”&quot;?&amp;enc:&amp;fenc)    .((exists(&quot;+bomb&quot;)\ &amp;&amp;\ &amp;bomb)?&quot;+B&quot;:&quot;&quot;).&quot;&quot;}:%{strlen(&amp;ft)?&amp;ft:’**’    }]\ [%L\%l,%c]\ %p%%    &quot;statusline显示的信息，来自参考文献[8]。<br>
&quot;其中%L是当前文件缓冲区的行数，%P是当前行占总行数的百分比。<br>
set ruler &quot;显示光标当前位置</p>
<h2 id="vim复制到系统寄存器">vim复制到系统寄存器</h2>
<h3 id="vim寄存器">vim寄存器</h3>
<p>vim有9种寄存器:</p>
<ol>
<li>&quot;是未命名寄存器，vim的默认寄存器，存放删除和复制的文本。</li>
<li>small delete寄存器 -，存放不超过一行的delete操作（不包括x操作）产生的文本。</li>
<li>编号为$0,1,2,\cdot, 9$的寄存器，</li>
<li>$a-za-z$的$26$个字母寄存器,</li>
<li>只读寄存器 : . % $</li>
<li>表达式寄存器 =</li>
<li>搜索寄存器 /</li>
<li>GUI选择寄存器$*,+$。</li>
<li>黑洞寄存器，向这个寄存器写入的话，什么都不会发生。</li>
</ol>
<p>详细介绍可见参考文献[4]。</p>
<h3 id="使用系统剪切板">使用系统剪切板</h3>
<p>*和+寄存器适合系统相关的，*和系统缓冲区关联，+和系统剪切板关联。<br>
使用+y复制当前行到系统剪切板。<br>
使用+ny复制n行到系统剪切板。<br>
使用+p粘贴系统剪切板到当前位置。<br>
但是有些vim发行版不支持系统剪切板，可以使用如下命令查看自己的系统是否支持系统剪切板。<br>
~\$:vim --version|grep clipboard<br>
在我的系统上，输出如下：</p>
<blockquote>
<p>-clipboard         +jumplist          +persistent_undo   +virtualedit<br>
-ebcdic            -mouseshape        +statusline        -xterm_clipboard</p>
</blockquote>
<p>说明当前vim不支持系统剪切板，所以就卸载安装支持的版本呗。<br>
~\$:sudo apt remove vim<br>
~\$:sudo apt install vim-gtk3<br>
然后再次查看<br>
~\$:vim --version|grep clipboard<br>
输出如下：</p>
<blockquote>
<p>+clipboard         +jumplist          +persistent_undo   +virtualedit<br>
-ebcdic            +mouseshape        +statusline        +xterm_clipboard</p>
</blockquote>
<p>说明已经支持系统剪切板，可以使用了。注意记得把之前打开的vim关闭后再试。<br>
使用以下命令进行操作：<br>
+nyy # 复制从当前行开始的n行到+寄存器<br>
+yy # 复制当前行行到+寄存器<br>
+p # 粘贴+寄存器中的内容到文本中。<br>
这个时候还有一个问题，就是一般的笔记本键盘的+和=号是在一起的，如果要打出=行，需要按一下shit +=，这个时候会向下移动一行，但是无伤大雅，为什么会这样，我还不知道。详细流程可参见参考文献[5]。<br>
但是后来我发现这个还不能用。然后就只能继续查找了。在知乎上找到一个回答，发现还要在这些命令前加上一个&quot;号，表示将默认&quot;寄存器中的内容复制到+寄存器中。也就是使用如下命令：<br>
&quot;+nyy # 复制从当前行开始的n行到+寄存器<br>
&quot;+yy # 复制当前行行到+寄存器<br>
&quot;+p # 粘贴+寄存器中的内容到文本中。</p>
<h3 id="将未命名寄存器和系统寄存器设为同一个">将未命名寄存器和系统寄存器设为同一个。</h3>
<p>修改vim配置文件<br>
~$:vim ~/.vimrc<br>
添加下面一句话，重新打开vim即可<br>
set clipboard=unnamed</p>
<h2 id="常用的vim命令">常用的vim命令</h2>
<h3 id="vim模式">vim模式</h3>
<ul>
<li>正常模式，用vim打开一个文件之后就处于正常模式</li>
<li>插入模式，在正常模式下输入i,a,o或者I,A,O之后，就进入了命令模式，可以修改文件，按Esc退出。</li>
<li>Visual模式，可以移动光标选中某些行，进行复制或者删除，在正常模式按v或者V进入Visual模式。</li>
<li>命令模式，在正常模式按:进入命令模式，可以在窗口底部输入命令。</li>
<li>替换模式，使用r替换当前字符，使用R从当前字符开始连续替换。</li>
</ul>
<h3 id="正常模式">正常模式</h3>
<h4 id="移动光标">移动光标</h4>
<p>0 移动到行首<br>
$ 移动到行尾<br>
h 向左移动一个character<br>
j 向下移动一行<br>
k 向上移动一行<br>
l 向右移动一个character<br>
nj nk nh nl 移动n次<br>
oO o在当前行的下一行插入，O在当前行的上一行插入<br>
iI i在当前光标处插入，I在行首插入<br>
aA a在当前光标后插入，A在行尾插入<br>
1G 跳到第一行<br>
gg 跳到首行<br>
G 跳到尾行<br>
nG 跳到尾行<br>
n-space 跳到光标后第n个character<br>
n-ENTER nG 跳到第n行<br>
wW w移动到下一个word的开头，W移动到隔了一个空白符的下一个word的开头<br>
bB b移动到前一个word的开头，B移动到隔了一个空白符的前一个word开头<br>
eE 移动到当前word的结尾，W移动到隔了一个空白符的word结尾。<br>
ctrl+f 跳到下一页<br>
ctrl+b 跳到上一页</p>
<h4 id="删除和复制">删除和复制</h4>
<p>x 删除一个character<br>
nx 删除n个characters<br>
dd 删除当前行<br>
ndd 删除n行<br>
yy 复制一行<br>
nyy 复制n行<br>
p 粘贴</p>
<h3 id="命令模式">命令模式</h3>
<h4 id="切屏">切屏</h4>
<p>:sp [filename]<br>
输入:进入命令模式，然后输入sp，空格，要打开的文件名。使用ctrl w在分开的屏幕之间进行切换。</p>
<h4 id="替换">替换</h4>
<p>:1,10s/word/word.rp/g©<br>
:1,$s/word/word.rp/g©</p>
<h4 id="查找">查找</h4>
<p>/word ?word<br>
n N</p>
<h4 id="其他">其他</h4>
<p>:w [filename]<br>
:r [filename]<br>
:n1,n2 w [filename]<br>
:set nu</p>
<h2 id="其他vim使用事项-290">其他vim使用事项(290)</h2>
<h3 id="编码">编码</h3>
<p>tty1-tty6默认不支持中文编码　　<br>
修改终端接口语系　<br>
LANG=zh_CN.big5</p>
<h3 id="dos和unix转换">dos和UNIX转换</h3>
<p>ubuntu  don’t have dos2UNIX or UNIX2dos  but is has tofrodos</p>
<p>frodos filename<br>
todos filename<br>
-b .bak<br>
-v ver</p>
<h3 id="语系编码转换">语系编码转换</h3>
<p>iconv -o保留原文件，-o加新文件名<br>
iconv -f big5 -t utf8 filename -o filename</p>
<h2 id="常用的vim命令模式命令">常用的vim命令模式命令</h2>
<p>主要利用的是正则表达式和vim的命令模式<br>
<a href="https://github.com/mxxhcm/code/tree/master/shell/vim_regex" target="_blank" rel="noopener">代码地址</a></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> 替换所有的^为\^</span><br><span class="line">:0,$s/\^/\\^/g</span><br><span class="line"><span class="meta">#</span> 替换所有的\*\*为##</span><br><span class="line">:0,$s/[0-9][0-9]\./## /g</span><br><span class="line"><span class="meta">#</span> 删除所有以tab开头的tab</span><br><span class="line">:0,$s/^\t//g</span><br><span class="line"><span class="meta">#</span> 删除所有以#开头的行</span><br><span class="line">:g/^#\.\*$/d</span><br><span class="line"><span class="meta">#</span> 删除所有空行</span><br><span class="line">:g/^\s\*$/d</span><br></pre></td></tr></table></figure>
<h3 id="在visual模式下操作">在Visual模式下操作</h3>
<p>见参考文献[9]。</p>
<h2 id="自定义快捷键">自定义快捷键</h2>
<ul>
<li>namp 正常模式下的递归映射</li>
<li>vmap Visual模式</li>
<li>imap 插入模式</li>
<li>cmap 命令模式</li>
<li>nnoremap 正常模式下的非递归映射</li>
<li>vnoremap Visual模式下的非递归映射</li>
<li>inoremap 插入模式下的非递归映射</li>
<li>cnoremap 命令模式下的非递归映射</li>
</ul>
<h2 id="参考文献">参考文献</h2>
<p>0.<a href="https://github.com/yangyangwithgnu/use_vim_as_ide" target="_blank" rel="noopener">https://github.com/yangyangwithgnu/use_vim_as_ide</a><br>
1.<a href="https://askubuntu.com/a/1027647" target="_blank" rel="noopener">https://askubuntu.com/a/1027647</a><br>
2.<a href="https://www.zhihu.com/question/19863631/answer/89354508" target="_blank" rel="noopener">https://www.zhihu.com/question/19863631/answer/89354508</a><br>
3.鸟哥的LINUX私房菜<br>
4.<a href="http://vimdoc.sourceforge.net/htmldoc/change.html#registers" target="_blank" rel="noopener">http://vimdoc.sourceforge.net/htmldoc/change.html#registers</a><br>
5.<a href="https://stackoverflow.com/a/11489440" target="_blank" rel="noopener">https://stackoverflow.com/a/11489440</a><br>
6.<a href="https://www.brianstorti.com/vim-registers/" target="_blank" rel="noopener">https://www.brianstorti.com/vim-registers/</a><br>
7.<a href="http://landcareweb.com/questions/3593/ru-he-zai-vimzhong-yong-jiu-xian-shi-dang-qian-wen-jian-de-lu-jing" target="_blank" rel="noopener">http://landcareweb.com/questions/3593/ru-he-zai-vimzhong-yong-jiu-xian-shi-dang-qian-wen-jian-de-lu-jing</a><br>
8.<a href="https://forum.ubuntu.org.cn/viewtopic.php?t=319408" target="_blank" rel="noopener">https://forum.ubuntu.org.cn/viewtopic.php?t=319408</a><br>
9.<a href="https://vim.fandom.com/wiki/Search_and_replace_in_a_visual_selection" target="_blank" rel="noopener">https://vim.fandom.com/wiki/Search_and_replace_in_a_visual_selection</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mxxhcm.github.io/2019/05/07/linux-git/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="马晓鑫爱马荟荟">
      <meta itemprop="description" content="记录硕士三年自己的积累">
      <meta itemprop="image" content="/images/favicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mxxhcm's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/05/07/linux-git/" class="post-title-link" itemprop="http://mxxhcm.github.io/page/6/index.html">linux git</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-05-07 16:56:44 / 修改时间：16:57:03" itemprop="dateCreated datePublished" datetime="2019-05-07T16:56:44+08:00">2019-05-07</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>27.how to use github in ubuntu</p>
<pre><code>安装github
sudo apt-get install git git-core git-gui
检查ssh
ssh -T git@gitgub.com
如果看到
Warning: Permanently added ‘github.com,204.232.175.90’ (RSA) to the list 		of known hosts. 
Permission denied (publickey).
则可以继续
~$:cd ~/.ssh
查看是否有ssh keys
并没有发现执行下一步	
~$:ssh-keygen -t rsa -C &quot;github 邮箱&quot;
在github上登陆自己的账号，找到Settings-&gt;SSH Keys -&gt; ADD SSH Key 将
	is_rsa.pub文件中的字符串复制进去，不含空格和回车。
~$:ssh -T git$github.com

git config  --gloabl user.name &quot;github用户名&quot;
git config  --gloabl user.email &quot;github邮箱&quot;

在github上新建repository 名为 testgit
~$:cd mkdir /home/mxx/github/testgit
~$:cd github/testgit
~$:git init
~$:touch Readme
~$:git add Readme
~$:git commit -m 'add readme file'
	版本回退
	~$:git reset --hard HEAD^ 回退到上个版本 
	~$:git reflog 查看提交的id
	~$:git reset --hard id
	管理修改
	 在工作区修改后回退　
	~$:vim file
	~$:git checkout -- file
	 加入缓存区后回退
	~$:git add file
	~$:git status
	~$:git reset HEAD file 清除了缓存去但是工作区还有修改
	~$:git status
	~$:git checkout -- file 清除工作区修改
	 加入版本库后回退
	~$:git commit -m &quot;add file&quot;
	~$:git reset --hard HEAD^ 但是在提交到远程库后不能撤销。。
	删除文件
	~$:rm test
	~$:git status 查看状态
	~$:git rm test
	~$:git commit -m &quot;delete file test&quot;
	如果误删了文件的话可以用(前提是已经提交到版本库，否则无法恢复)
	~$:git checkout -- file

远程库
~$:git remote add origin git@github.com:mxxhcm/testgit.git
~$:git remote add origin https://github.com/github用户名/github仓库.git
~$:git push -u origin master 把本地的master库和远程的master库连接起来，
			以后推送或者拉取就会简单
	输入github账号和密码
　推送
~$:git push origin master
　拉取
~$:git pull	

还可以直接克隆一个已有的仓库，
~$:git clone https://github.com/github用户名/github仓库.git


分支管理
~$:git branch dev 创建分支
~$:git checkout dev 切换分支
~$:git branch 查看当前分支
~$:git merge dev 将分支合并
~$:git brancd -d dev 删除分支
</code></pre>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mxxhcm.github.io/2019/05/07/linux-bash/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="马晓鑫爱马荟荟">
      <meta itemprop="description" content="记录硕士三年自己的积累">
      <meta itemprop="image" content="/images/favicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mxxhcm's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/05/07/linux-bash/" class="post-title-link" itemprop="http://mxxhcm.github.io/page/6/index.html">linux bash</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-05-07 16:55:17" itemprop="dateCreated datePublished" datetime="2019-05-07T16:55:17+08:00">2019-05-07</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-05-17 16:23:29" itemprop="dateModified" datetime="2019-05-17T16:23:29+08:00">2019-05-17</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="type-查看命令的来自于哪里-是bash还是外部命令还是别名">type 查看命令的来自于哪里　　是bash还是外部命令还是别名</h2>
<p>file外部命令<br>
alias别名<br>
builtin内置在bash内<br>
	-t -p -a</p>
<p>type -t ls<br>
~$:alias 以file builtin alias 列出该命令的类型<br>
type -a ls 列出所有的名为ls的命令</p>
<h2 id="echo-与-unset">echo 与 unset</h2>
<p>~$:echo $PATH<br>
~$:echo ${PATH}</p>
<p>&quot;&quot;内的特殊字符可以保持原有特性　var=“lang is $LANG” 那么 echo $var 输出			var=en_US.UTF-8<br>
’'内的特殊字符仅保存为一般文本</p>
<p>反单引号<code>可以获得其他命令的信息 version=</code>uname -r`  =$(uname -r)</p>
<h2 id="env以及export查看常见变量">env以及export查看常见变量</h2>
<p>/etc/profile<br>
/etc/bash.bashrc</p>
<p>RANDOM产生0~32767的随机数<br>
产生0-9的用declare -i number=$RANDOM*10/32767    echo $number</p>
<p>HOME<br>
SHELL<br>
HISTSIZE<br>
MAIL<br>
PATH	/etc/environment<br>
LANG<br>
RANDOM</p>
<p>set查所有变量</p>
<p>HISTFILE=~/.bash_history<br>
MAILCHECK<br>
PS1	提示符的设置<br>
$	关于本shell的PID<br>
?	上个变量的回传码，正确返回0，错误返回其他值，可以利用代码差错<br>
OSTYPE HOSTTYPE MACHTYPE	主机硬件与内核的等级</p>
<pre><code>export将自定义变量转换为环境变量

locale -a 文件的语系

read 赌球来自键盘输入的变量
</code></pre>
<p>-p	用户可以输入提示语<br>
-t	光标等待用户输入时间</p>
<p>~$:read -p “hello” -t 10 variable</p>
<pre><code>declare 声明变量的类型　　默认为字符串
</code></pre>
<p>-x	声明环境变量<br>
-i	将变量定义为整形<br>
-a	将变量定义为数组<br>
-r	将变量设置为readonly  若要删除该变量，必须退出该bash重进<br>
-p	单独列出变量的类型</p>
<pre><code>ulimit 与文件系统以及程序的限制关系
</code></pre>
<p>-a 后面不接任何参数,可以列出所有的限制额度<br>
-c 某些进程发生错误，系统可能会将该进程在内存中的信息写成文件，这种文件			就称为内核文件(core file)。此为限制每个内核文件的最大容量<br>
-f 此文件可以创建的最大文件容量,一般为2G:<br>
-d 进程可使用的最大断裂内存(segment)容量<br>
-l 可用于锁定(lock)的内存量<br>
-t 可使用的最大CPU时间<br>
-u 用户可使用的最大进程(process)数量</p>
<p>-H hard limit 严格的限制　　必须不能超过<br>
-S soft limit 警告的限制　　可以超过，但要有警告信息</p>
<h2 id="变量的使用">变量的使用</h2>
<p>变量内容的测试与内容替换<br>
echo ${variable#<em>}<br>
echo ${variable##</em>}</p>
<pre><code>echo ${variable%*}
echo ${variable%%*}

echo ${variable/bin/BIN}
echo ${variable//bin/BIN}

变量的测试与替换

new_var=${old_var-content}
用新的变量的值区替代旧的变量的值，新旧变量可为同一个，若old_var不存在，则将
</code></pre>
<p>content的值给new_var,而若old_var的值存在则将其赋给new_var;<br>
　　加上:的话，即使old_var为空的话，也会用content的值去赋给new_var</p>
<pre><code>username=&quot;&quot;
username=${username:-root}
echo $username

将-换成=是将原变量一同更改
</code></pre>
<p>将-换成?是当变量不存在时，可以发出错误信息</p>
<h2 id="命令别名设置功能">命令别名设置功能</h2>
<p>alias<br>
alias lm=‘ls -al’</p>
<p>unalias</p>
<h2 id="history命令与文件">history命令与文件</h2>
<p>history (n)列出最近的第(n)条命令</p>
<p>!number	执行history的第number条命令<br>
!command　由最近的命令开始搜寻开头为command的命令<br>
!!	执行上一个命令</p>
<h2 id="bash-shell的操作环境">Bash Shell的操作环境</h2>
<p>路径与命令查找顺序<br>
先由相对路径或者绝对路径寻找<br>
a.alias<br>
b.builtin<br>
c.$PATH这个变量的顺序找到的第一个命令<br>
　　　<br>
　　  bash的登陆界面以及欢迎信息<br>
/etc/issue  #<br>
/etc/issue.net  #提供telnet远程登陆，当使用telnet连接到主机时显示该内容<br>
/etc/motd(?)-&gt;/etc/update-motd.d/　<br>
/etc/issue	\d \l \m \n \o \r \t \s \v<br>
	\d 本地端时间的日期<br>
	\l 显示第几个终端机<br>
	\m 显示硬件等级<br>
	\n 显示主机的网络名称<br>
	\o 显示domain name<br>
	\r 操作系统的版本<br>
	\t 显示本地端时间的时间<br>
	\s 操作系统的名称<br>
	\v 操作系统的版本</p>
<pre><code>  bash的环境配置文件	
</code></pre>
<p>login shell 以及non-login shell<br>
/etc/profile系统整体的设置<br>
~/.profile用户个人设置</p>
<p>login shell<br>
/etc/profile<br>
	/etc/inputrc	/etc/profile.d/*sh<br>
~/.profile<br>
	~/.bashrc	/etc/bashrc<br>
开始操作bash</p>
<p>non-login shell<br>
	取得non-login shell 时，该bash配置文件仅会读取~/.bashrc</p>
<p>source 配置文件名<br>
如<br>
	source ~/.bashrc<br>
	. ~/.bashrc</p>
<p>/etc/manpath.config使用man时man page的路径到哪里去找<br>
用tarball的方式安装的时候,那么man page可能放置在/usr/local/softpackage/\	man里，需要以手动的方式将该路径加入到/etc/man.config里面</p>
<pre><code> 终端机的环境设置
</code></pre>
<p>stty　　setting tty(终端机的意思)<br>
	-a 将所有的stty参数列出来</p>
<pre><code>如何设置呢  比如将erase设置为ctrl+h来控制stty erase ^h
ctrl + c 终止目前的命令
</code></pre>
<p>ctrl + d 输入结束，例如邮件结束<br>
　　ctrl + m ENTER<br>
ctrl + u 在提示符下，将整行命令删除<br>
　　ctrl + z 暂停目前的命令</p>
<p>set<br>
　set $-　那个$-变量内容是set的所有设置<br>
uvxhHmBC</p>
<p>/etc/inputrc其他的按键设置功能</p>
<pre><code> 通配符与特殊符号
</code></pre>
<p>通配符* ? [] - ^<br>
特殊字符　# \ | ; ~ $ &amp; ! / &gt;,&gt;&gt; &lt;,&lt;&lt; ‘’ “” ``或者$() () {}</p>
<h2 id="数据流重定向">数据流重定向</h2>
<blockquote>
<blockquote>
<blockquote></blockquote>
</blockquote>
<p>输出重定向　<br>
	ls -ld /etc/ ~/directiry/etc_dir<br>
std output<br>
	find / -name ~/.bashrc &gt; find_result<br>
std error output<br>
	find / -name ~/.bashrc &gt;fing_right 2&gt; find_error !必须为2&gt;</p>
</blockquote>
<pre><code>find / -name ~/.bashrc &gt; find_result 2&gt;/dev/null

find / -name ~/.bashrc &gt;find_result 2&gt;&amp;1
</code></pre>
<blockquote>
<blockquote>
<p>追加到某个文件结尾</p>
</blockquote>
</blockquote>
<p>&lt; &lt;&lt;<br>
cat &gt; catfile</p>
<blockquote>
<p>ctrl + D<br>
从文件中读入数据<br>
cat &gt; catfile &lt; ~/.bashrc<br>
重定义输入结束符<br>
cat &gt; catfile &lt;&lt; “eof”</p>
</blockquote>
<p>&amp;&amp; || 命令从左到右依次执行　根据回传码$0的值，继续向右执行命令</p>
<h2 id="pipe">PIPE</h2>
<p>管道命令仅会处理stdout并不会处理stderrout<br>
管道命令必须要能接受前一个命令传回来的数据成为stdinput</p>
<p>cut -d ‘分隔字符’ -f (fields)fields为数字<br>
cut -c 字符范围</p>
<pre><code>cut -d ':' -f 2,3
echo $PATH | cut -d ':' -f 2,4

cut -c 20-30
export | cut -c 12-

不过cut 对于多个空格当做分隔字符的处理做的不够好

last最近登录的用户
</code></pre>
<p>grep [-aincv] [–color=auto] ‘关键字’ filename<br>
	-a 将binary文件以text的方式查找数据<br>
	-i 忽略大小写<br>
	-c 计算查找到的字符串的个数<br>
	-n 顺便输出行号<br>
	-v 反向选择<br>
dmesg | grep -n A3 B2 ‘eth’<br>
	A --after  B --before</p>
<p>last | grep ‘mxx’ | cut -d ‘’ -f 1</p>
<p>sort wc uniq</p>
<p>sort 	排序<br>
	[-fbMnrutk] [file]<br>
		-f 不区分大小写<br>
		-u uniq<br>
		-t 分隔符<br>
		-k 以第几个字段进行排序<br>
		-n 以数字进行排序(默认是以字母)<br>
		-m 反向排序<br>
	eg:<br>
	sort -t ‘:’ -k 3 -n /etc/passwd	<br>
	or<br>
	cat /etc/passwd | sort -t ‘:’ -k 3 -n</p>
<p>uniq 去重<br>
	[-il] [file]<br>
	-i 不区分大小写<br>
	-c 进行计数</p>
<pre><code>last | cut -d ' ' -f 1 | sort | uniq
首先需要排序　才能去重	
</code></pre>
<p>last | cut -d ’ ’ -f 1 | sort | uniq -c</p>
<p>tee双重重定向将一份数据可以同时传到文件内以及屏幕中<br>
	last | tee last.list | sort</p>
<p>tr 删除一段文字或者对文字内容进行替换(如删除dos中的换行符^M)<br>
	[-ds]<br>
	-d 删除信息中的某个字串<br>
	-s 替换重复字符</p>
<pre><code>last | tr '[a-z]'  '[A-Z]'
echo $PATH -d ':/'
cat /root/passwd | tr -d '\r' &gt; passwd.linux
</code></pre>
<p>col 简单处理<br>
	[-xb]<br>
	-x 将tab键换成空格键</p>
<pre><code>cat  manpath.config | col -x | cat -A | more
</code></pre>
<p>join 将两个文件中具有相同数据的一行相加<br>
	join [-ti12] file1 file2<br>
	-i 大小写忽视<br>
	join -t ‘:’ passwd shadow<br>
	join -t ‘:’ -1 4 passwd -2 3 group</p>
<p>paste直接将两行粘在一起，默认并以tab键分开<br>
	-d后面可以加分隔字符默认以tab分隔<br>
	-表示来自standard input的数据的意思<br>
	paste shadow passwd<br>
	cat shadow | paste passwd - | head -n 3</p>
<p>expand将tab键换成空格默认是8个空格<br>
	-t 参数可以自行设定空格数<br>
	nl file | expand -t 6 - | cat -A</p>
<p>split [-bl] file PREFIX<br>
	-b后面加文件欲切割成的文件大小<br>
	-l以行数来切割<br>
	split -b 1M /etc/termcap termcap<br>
	ls -l termcap*</p>
<pre><code>cat termcap* &gt;&gt; termcapback

ls -l / | spilt -l 10 -lsroot
wc -l lsroot
</code></pre>
<p>xargs产生某个命令的参数<br>
	[-pne0]<br>
	-p 执行每个命令询问用户<br>
	-e 是EOF的意思，后面可接一个字符，当xargs遇到这个字符，便会停止				操作	<br>
	-n 后面接次数，每次command命令执行时，要使用几个参数<br>
-用来代替stdout以及stdin<br>
tar -cvf - /home | tar xvf -</p>
<p>正则表达式</p>
<h2 id="dmesg-查看内核信息">dmesg 查看内核信息</h2>
<h2 id="grep-n-regular-express">grep -n  ‘^$’ regular_express</h2>
<p>grep ‘^the’ file<br>
grep ‘[<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>]’ file<br>
grep ‘.$’ file<br>
grep ‘<sup>[</sup>a-zA-Z]’ file<br>
grep ‘go{2,3}g’ file</p>
<p>对比<br>
ls -l /etc/a*<br>
grep -n ‘^a.*/’</p>
<p>nl 打印出文件并加上行号</p>
<h2 id="sed-工具">sed 工具</h2>
<p>[-in]<br>
-i	直接修改文件内容<br>
-n	静默<br>
-e 直接在shell下编辑<br>
-c replace<br>
-a append<br>
-p print</p>
<p>nl file | sed '2,3d’<br>
nl file | sed '$a add a test’<br>
nl file | sed -n '5,7p’<br>
nl file | sed '2,5c jkadfk<br>
&gt;fdasf<br>
&gt;asfddf '<br>
nl file | sed ‘s/s_place/s_replace/g’	<br>
nl file | sed ‘/^$/d’</p>
<h2 id="egrep-扩展正则表达式">egrep 扩展正则表达式</h2>
<p>egrep -n ‘<sup>$|</sup>#’ file<br>
egrep -n ‘go?d’ file　0个或者一个?之前的字符<br>
egrep -n ‘go+d’ file　一个及以上+之前的字符<br>
grep -n 'go<em>d’ file　0个或者0个以上</em>之前的字符</p>
<h2 id="printf-格式化打印">printf 格式化打印</h2>
<p>printf ‘%s\t %s\t %s\t \n’ $(cat file)<br>
printf ‘%10s %5i %5i \n’ $(cat file)</p>
<h2 id="awk">awk</h2>
<p>last | awk '{print $1 “\t” S3 “\t” $4 NF NR}'<br>
cat /etc/passwd | awk ‘BEGIN {FS=&quot;:&quot;} $3 &lt; 10 {print $1 “\t” $3 }’</p>
<p>cat /etc/passwd | awk ‘NR==1{printf &quot;%10s %10s %10s %10s “,$1,$2,$3,“tot		al”}<br>
	NR&gt;=2{total=$2+$3;<br>
		printf “%10s %10d %10d %## f”,$1,$2,$3,total”}’</p>
<h2 id="diff-文本比较-通常比较一个文件的不同版本">diff 文本比较，通常比较一个文件的不同版本</h2>
<p>diff [-bBi] file1 file2<br>
	-b　忽略一行中仅有多个空白的区别<br>
	-B  忽略空白行的区别<br>
	-i  忽略大小写<br>
diff test.old test.new<br>
diff -Naur test.olc test.new &gt; test.patch<br>
patch 补丁<br>
cat test.patch<br>
patch -pN test.patch 更新旧版<br>
patch -R -pN test.patch 恢复为旧版</p>
<p>学习shell script<br>
看一下自己写的/home/mxx/scripts/delete_dir</p>
<h2 id="echo-num1-operand-num2">echo $(($num1 operand $num2))</h2>
<p>进行运算</p>
<h2 id="source-file-sh-sh-file-sh-file-sh">source <a href="http://file.sh" target="_blank" rel="noopener">file.sh</a>   sh <a href="http://file.sh" target="_blank" rel="noopener">file.sh</a>   ./file.sh</h2>
<p>source 是将该shell拿到父进程中来执行，所以各项操作都会在该bash内执行<br>
sh和./是开启一个新的shell来执行</p>
<h2 id="test">test</h2>
<p>test [-rwxfd]<br>
	[-nt -ot -ef ]<br>
	[-eq -nq -gt -lt -ge -le]<br>
	[-z ]<br>
	[-a -o]</p>
<p>test -r filename<br>
test “$filename” == “content”</p>
<p>[ “$filename” == “$varible” ]</p>
<h2 id="none">$# $@ $*</h2>
<p>$#:变量个数<br>
$@:变量内容<br>
$*:</p>
<h2 id="netstat-tuln-列出本机上的网络服务">netstat -tuln 列出本机上的网络服务</h2>
<h2 id="if-case-function">if,case,function,</h2>
<pre><code> if
</code></pre>
<p>if [ “$filename” == “mxx” ];<br>
then<br>
	…<br>
elif [ … ];<br>
then<br>
	…<br>
else<br>
	…<br>
fi<br>
case<br>
case $variable in<br>
	“first”)<br>
	…<br>
	;;<br>
	“second”)<br>
	…<br>
	;;	<br>
function<br>
function printfinfo()<br>
{<br>
	echo “This is a file”<br>
}</p>
<h2 id="循环-while-until-for">循环 while, until , for</h2>
<pre><code>  while	
</code></pre>
<p>while [ “$i” -lt “$n” ]<br>
do<br>
	…<br>
done<br>
until<br>
until [ “$i” -ge “$n” ]<br>
do<br>
	…<br>
done</p>
<pre><code>  for
</code></pre>
<p>for var in f1 f2 f3…<br>
do<br>
	…<br>
done</p>
<pre><code>  for ((初始化值;控制值;执行步长))
</code></pre>
<h2 id="seq-产生一系列数">seq 产生一系列数</h2>
<p>seq [-s]</p>
<p>~$:seq -s &quot; &quot; 3 10<br>
3 4 5 6 7 8 9 10</p>
<h2 id="sh-vxn-my-sh">sh [-vxn] <a href="http://my.sh" target="_blank" rel="noopener">my.sh</a></h2>
<p>sh -x	执行过程<br>
sh -n	查询语法问题</p>
<h2 id="联想y400-y400-y500-y500拆机教程">联想Y400/y400/Y500/y500拆机教程</h2>
<p><a href="http://v.youku.com/v_show/id_XNTA4MDI1NDky.html?from=s1.8-1-1.2" target="_blank" rel="noopener">http://v.youku.com/v_show/id_XNTA4MDI1NDky.html?from=s1.8-1-1.2</a><br>
换屏幕视频<br>
<a href="http://v.youku.com/v_show/id_XODAzOTM2OTAw.html?from=s1.8-1-1.2" target="_blank" rel="noopener">http://v.youku.com/v_show/id_XODAzOTM2OTAw.html?from=s1.8-1-1.2</a></p>
<h2 id="id和finger">id和finger</h2>
<p>id 用来显示某个用户的id信息<br>
finger 用来分析某个用户信息</p>
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p>:lower: <a href="#fnref1" class="footnote-backref">↩</a></p>
</li>
</ol>
</section>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mxxhcm.github.io/2019/05/07/linux-account/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="马晓鑫爱马荟荟">
      <meta itemprop="description" content="记录硕士三年自己的积累">
      <meta itemprop="image" content="/images/favicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mxxhcm's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/05/07/linux-account/" class="post-title-link" itemprop="http://mxxhcm.github.io/page/6/index.html">linux account</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-05-07 16:54:11" itemprop="dateCreated datePublished" datetime="2019-05-07T16:54:11+08:00">2019-05-07</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-05-10 19:37:24" itemprop="dateModified" datetime="2019-05-10T19:37:24+08:00">2019-05-10</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="账户配置文件">账户配置文件</h2>
<p>/etc/passwd /etc/shadow /etc/group /etc/gshadow<br>
	/etc/passwd<br>
	mxx❌1000:1000:mxx,:/home/mxx:/bin/bash<br>
	账号名称,密码，UID,GID,用户信息说明列，主文件夹，shell<br>
	/etc/shadow<br>
	mxx:…:17034:0:99999:7:::<br>
	账号名称，密码，最近密码更改日期，密码更改多久后才能重新更改，密码多长时间需要重新修改，密码需要修改前多少天发送警告，密码过期后宽限时间，账号失效日期，(形式和密码更改日期一样)，保留字段<br>
	/etc/group</p>
<pre><code>用户组名称，用户组密码,GID,此用户组支持的账号名称

/etc/gshawod
用户组名，
密码列，开头为!表示无合法密码
用户组管理员的账号
该用户组的所属账号

UID 0系统管理员
	1-99系统账户
	100-499用户创建的系统账号
	500-65535一般用户
</code></pre>
<h2 id="修改密码">修改密码</h2>
<pre><code>一般账户:passwd
root账户:
重启后进入单用户维护模式
忘记密码后，以各种方式清空/etc/shadow中root的密码字段。登陆后再用passwd修改密码	
</code></pre>
<h2 id="账号管理">账号管理</h2>
<pre><code>usermod -G group user将一个用户加入其他用户组
初始用户组用户的/etc/passwd的第四个字段即为该用户的初始用户组的GID
groups查看当前登陆用户的用户组。第一个为有效用户组
newgrp更改用户的有效用户组，但是用户组必须当前用户支持的用户组

UID/GID密码参数的设置在 /etc/login.defs

useradd [-ugGmMcdrsef]　　调用/etc/default/useradd的数据
	-u UID 			/etc/skel用户主文件加参考基准目录
	-g initial group  
	-G 这个账户可以加入的其他用户组
	-m 创建用户主文件　
	-M 不创建用户主文件
	-s 接一个默认shell
	-r 创建一个系统账户
	-c /etc/passwd的第五列说明
	-d 制定某个目录成为主文件夹
	-e 后面跟一个日期YYYYMMDD写入shadow的第八字段，账号的失效日期从1970年来总日数，若账号失效，无论密码是否正确，都无法登陆
	-f 后面接shadow的第七字段,判定密码是否会失效,0为立即失效,-1为永不失效(密码只会过期强制登陆时重新设置),大于0的表示如n，如果在n天后，没有登陆修改密码，那么在n天后密码会失效，再也无法登陆，但是在如果在n天内登陆并修改密码，就可以继续使用。
</code></pre>
<p>例子<br>
~#:useradd -d /home/mxxhcm -k /etc/skel/ -m mxxhcm -s /bin/bash</p>
<pre><code>	-D useradd的默认值	

修改密码
passwd [账号]　[--stdin]
~#:passwd　后面没有接密码，就是修改当前用户的密码
passwd -l -u -S -n -x -w -i
-l lock
-u unlock
-S 密码相关参数
-n next　多长时间不能修改第四个字段
-x 多少天必须修改　第五个字段
-w warn第六个字段
-i 失效日期　第七个字段

echo &quot;passwd&quot; | passwd --stdin user

chage [-ldEImMW] 账号名
	-l　列出详细参数
	-d　第三字段
	-E　第八字段　账号失效　
	-I　第七字段　密码失效
	-m　第四字段
	-M　第五字段
	-W　第六字段

chage -d 0 user

usermod [-;cdefgGasuLU]
	-l 修改账户名称
	-L lock
	-U unlock
	修改/etc/shadow
	-f 第七字段
	-e 第六字段
	-c /etc/passwd 第五字段
	-d /etc/passwd 主文件夹第六字段
	-g /etc/passwd 第四个字段GID
	-G 后面接次要用户组，修改这个用户能支持的用户组，修改/etc/group
	-a 与-G连用，增加次要用户组的支持而非设置
	-u UID /etc/passwd的第三个字段,UID
	-s 接shell的实际文件

sudo usermod -l 'my_usename' username


userdel 
	userdel -r username　删除主文件夹
	find / -user username
	userdel username
</code></pre>
<p>66.finger查看用户的数据<br>
	finger 查看当前用户的数据<br>
	finger username 查看某用户的信息</p>
<pre><code>chfn 就是相当于-c参数,修改当前用户/etc/passwd的第五个字段值
	

chsh -s　修改当前用户的shell

chsh -s /bin/bash

id [username]
列出当前用户或者username的所有id
</code></pre>
<p>67.group的增加与修改<br>
	groupadd [-gr]<br>
		-g　指定GID<br>
		-r　新建系统用户组<br>
	groupmod [-gn]<br>
		-n　修改组名<br>
	groupdel [groupname]</p>
<pre><code>尽量少修改GID否则会造成系统资源的混乱
当用户组为某个用户的初始用户组时，就无法删除该用户组

gpasswd　[-AMrR] groupname
	-A 将groupname的控制权交给后面用户
		gpasswd -A mxx groupname
	-M 将某些账号加入到这个用户组中
	-r 将groupname的密码删除
	-R 将groupname的密码失效

gpasswd groupname 设置groupname管理密码
gpasswd groupname 
-A 增加groupname的管理员
-r让密码删除

gpasswd -ad username groupname
	-a增加
	-d删除
</code></pre>
<p>68.ACL  Acess Control List<br>
	针对单一用户或者目录来进行rwx的权限设置<br>
	setfacl　[-m|-x]	-m设置acl参数	-x删除后续acl参数<br>
		[-bkRd]<br>
		-b删除所有的acl参数;-k删除默认的acl参数;-R递归设置acl;-d设置默认的acl，只对目录有效<br>
	setfacl [-m|-x] [bkRd]<br>
		-b　删除所有ACL参数<br>
		-k　删除默认ACL参数<br>
		-R　递归设置ACL参数，包括子目录<br>
		-d  设置默认ACL参数，只对目录有效</p>
<pre><code>	-x　删除后续的ACL参数
	-m  设置后续的ACL参数

	-m u:mxx:rw my_file
		
getfacl my_file

针对有效权限mask的设置
setfacl -m m:rwx my_file
mask在此可以来规定最大允许的权限。取得是mask和用户以及用户组的权限交集。		若用户mxx的权限为rwx 但是mask为r--，那么mxx的权限只能为r--.

~#:setfacl -m d:u:mxx:rwx file　递归设置目录的acl
~#:setfacl -m m:rw acl_test
~#:setfacl -m g:mxx:rwx acl_test
~#:getfacl acl_test
~#:setfacl -b file 删除acl
</code></pre>
<p>69.切换用户，切换账号<br>
	su[- -l -m -c]<br>
	su - 切换到root用户以login shell变量的读取方式<br>
	su 切换到root用户，以nologin shell变量的读取方式登陆系统<br>
｀｀	su -l 加想要切换的账号login shell	<br>
	su -c 只提升一次到root权限<br>
	su -m 使用目前用户的环境变量，不读取新用户的配置文件</p>
<pre><code>su - -c cat /etc/shadow

sudo -u mxx ...提升到mxx权限
</code></pre>
<p>70.visudo的设置<br>
	1.<br>
	visudo 修改/etc/sudoers<br>
	其他用户使用root身份<br>
	root ALL=(ALL) ALL<br>
	用户账号<br>
	登陆者的来源主机名，<br>
	可切换的身份<br>
	可执行的命令<br>
	2.<br>
	最左边加一个%表示用户组<br>
	利用用户组以及免密码<br>
	%wheel ALL=(ALL) ALL<br>
	usermod -a -G wheel user</p>
<pre><code>免密
%wheel ALL=(ALL) NOPASSWD: ALL
3.
mxx ALL=(root) /usr/bin/passwd
mxx可以切换到root的身份使用passwd命令

mxx ALL=(root) !/usr/bin/passwd, /usr/bin/passwd [A-Za-z]*,\
		!/usr/bin/passwd root
4.别名设置
User_Alias MYUSER=mxx,mahuihui
Cmnd_Alias MYCOMMAND=!/usr/bin/passwd, /usr/bin/passwd [A-Za-z]*,\
		!/usr/bin/passwd root
MYUSER all=(root) MYCOMMAND

5.用自己的密码切换成root

sudo su -
</code></pre>
<p>71.PAM模块介绍<br>
	P434</p>
<p>72.用户信息传递</p>
<pre><code>查询用户
w	who	last	lastlog

用户对谈

mesg y
mesg n

write	
write mxx tty1

wall &quot;hello&quot;　每个人都会收到

mail mahuihui -s &quot;Hi,mahuihui,nihaoa&quot;
...
...
ctrl+d

mail 收信
?查看命令

q离开,离开后，会将该信件移动到~/home/mbox，收信箱
读取
mail -f /home/mxx/mbox	
</code></pre>
<p>73.手工添加账号</p>
<pre><code>pwck

pwconv将/etc/passwd相关信息移动到/etc/shadow,把在/etc/passwd中存在的账号			但是在/etc/shadow没有对应密码的列新增密码

grpconv

pwunconv	
	
chpasswd	修改密码
echo &quot;mxx:mypaswd&quot; | chpasswd -m
</code></pre>
<p>新建账号<br>
	vim /etc/group<br>
	mygroup❌1020:<br>
	grpconv</p>
<pre><code>vim /etc/passwd
myuser:x:1200:1020::/home/myuser:/bin/bash
pwconv

passwd myuser

cp -a /etc/skel /home/myuser
chmod -R myuser:mygroup /home/myuser
chmod 700 /home/myuser	
</code></pre>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mxxhcm.github.io/2019/05/07/linux-quota/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="马晓鑫爱马荟荟">
      <meta itemprop="description" content="记录硕士三年自己的积累">
      <meta itemprop="image" content="/images/favicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mxxhcm's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/05/07/linux-quota/" class="post-title-link" itemprop="http://mxxhcm.github.io/page/6/index.html">linux quota</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-05-07 16:53:04" itemprop="dateCreated datePublished" datetime="2019-05-07T16:53:04+08:00">2019-05-07</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-05-18 17:40:22" itemprop="dateModified" datetime="2019-05-18T17:40:22+08:00">2019-05-18</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="quota">quota</h2>
<p>该命令显示磁盘使用情况和限额</p>
<h2 id="quota示范">quota示范</h2>
<p>文件系统开启quota<br>
df -h /home<br>
mount -o remount,usrquota,grpquota /home<br>
mount | grep 'home’<br>
cat /etc/mtab<br>
/etc/mtab会被写入这些操作</p>
<p>或者写入/etc/fstab<br>
vim /etc/fstab<br>
LABEL=/home /home ext4 defaults,usrquota,groquota</p>
<p>umount /home<br>
mount -a<br>
mount | grep 'home’<br>
新建quota配置文件<br>
sudo apt-get install quota<br>
quotacheck [-avugmf]<br>
	-c 创建磁盘配额数据文件<br>
	-a 创建在/etc/mtab所有磁盘的配额数据库文件，使用此参数，后无需加			挂载点<br>
	-u 创建用户的磁盘配额数据库文件<br>
	-g 用户组的<br>
	-m 把一起的磁盘配额信息清除，对/分区创建时，必须用此参数<br>
	-v 显示创建的过程<br>
启动quota<br>
quotaon [-avug]　[挂载点]<br>
	-a 根据/etc/fstab的设置来启动有关的quota<br>
	-v<br>
关闭quota<br>
quotaoff [-aug] [mount-point]</p>
<p>编辑quota<br>
edquota [-ugtp]<br>
	-t 修改宽限时间<br>
	-p 复制范本，，模板账号为已存在并设置好quota的账号<br>
		edquota -p 范本账号 -u 新账号<br>
	edquota -u myquota<br>
	edquota -g myquotagrp<br>
		edquota -t<br>
	edquota -p quotagrp -u myquota</p>
<p>quota的报表表<br>
单一用户<br>
quota [-ugvs]<br>
	-s 以1024的整数倍显示</p>
<p>repquota [-a] [-uvgs]<br>
	/dev/sda[012]</p>
<p>warnquota	root给用户以及root发邮件　P461</p>
<p>在 /etc/warnquota.conf 中设置邮件内容</p>
<p>setquota [-u|-g] name block(soft) block(hard) inode(soft) inode(hard) 文件系统		<br>
setquota -u myquota5 2000 3000 0 0 /home<br>
quota-uv myquota5</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mxxhcm.github.io/2019/05/07/linux-raid-lvm/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="马晓鑫爱马荟荟">
      <meta itemprop="description" content="记录硕士三年自己的积累">
      <meta itemprop="image" content="/images/favicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mxxhcm's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/05/07/linux-raid-lvm/" class="post-title-link" itemprop="http://mxxhcm.github.io/page/6/index.html">linux raid lvm</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-05-07 16:52:12 / 修改时间：16:52:39" itemprop="dateCreated datePublished" datetime="2019-05-07T16:52:12+08:00">2019-05-07</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>75.磁盘阵列</p>
<p>新建raid<br>
	mdadm --detail	后面接的那个磁盘阵列设备的具体信息<br>
	madam --create 为新建raid的参数<br>
		--auto=yes /dev/md[01…]<br>
		--raid-device=N	使用几个raid作为磁盘阵列的设备<br>
		--spare-device=N　使用几个磁盘作为备用<br>
		--level=[0125]	这组磁盘阵列的等级是0,1还是5之类的</p>
<pre><code>~#:mdadm --create --auto=yes /dev/md0 --level=5 --raid-device=3 --spare-device=1 /dev/sdb{5,6,7,8}
创建raid需要时间
创建好之后
~#:mdadm --detail /dev/md0 
查看建好的RAID
~#:cat /proc/mdstat
~#:mkfs -t ext4 /dev/md0
~#:mkdir /mnt/raid
~#:mount /dev/md0 /mnt/raid
~#:df
</code></pre>
<p>管理raid<br>
	mdadm --manage /dev/md[0-9] [–add 设备] [–remove 设备] [–fail 设备]<br>
		~#:mdadm --manage /dev/md0 --fail /dev/sdb6<br>
		~#:mdadm --detail /dev/md0<br>
		~#:cat /proc/mdstat<br>
		过一段时间在执行会发现以及将坏的设备更新了<br>
		~#:mdadm --detail /dev/md0<br>
		~#:mdadm --manage /dev/md0 --add /dev/sdb9 --remove /dev/sdb10</p>
<p>开机自动加载raid<br>
	~#mdadm --detail /dev/md0 | grep -i ‘uuid’<br>
	~#:vim /etc/mdadm/mdadm.conf<br>
		ARRAY /dev/md0 UUID=…<br>
	~#:vim /etc/fstab<br>
		/dev/md0 /mnt/raid ext4 defaults 1 2<br>
	~#:umount /dev/md0<br>
	~#:mount -a<br>
	~#:df</p>
<p>关闭raid<br>
	~#:vim /etc/fstab<br>
		# /dev/md0 …<br>
	~#:mdadm --stop /dev/md0<br>
	~#:cat /proc/mdstat<br>
	~#:vim /etc/mdadm/mdadm.conf</p>
<p>76.LVM的制作<br>
	LVM Logical Volume Manager<br>
	PV physical volume<br>
	VG volume group<br>
	PE physical extend<br>
	LV logical volume</p>
<pre><code>LV的写入机制
线性机制
	若有两个设备/dev/sda1,/dev/sdb1,他们都在一个VG中，并且只有一个LV
	线性机制就是在一个设备完全写满之后，再向另一个设备写入
交错模式
	。。。
</code></pre>
<p>a.新建分区<br>
	~#:sudo fdisk /dev/sdb<br>
		new /dev/sdb{5,6,7,8,9,10}<br>
		t 8e(Linux LVM)<br>
		w<br>
	~#:partprobe<br>
b.安装应用<br>
	sudo apt-get install lvm2<br>
c.PV物理卷的新建<br>
	pvcreate 将物理分区新建为PV分区<br>
	pvscan 查询目前系统里具有PV的磁盘<br>
	pvdisplay 显示目前系统上面的PV状态<br>
	pvremove 将PV属性删除</p>
<pre><code>pvmove 将某个设备内的pe给移动到另一个设备
	pvmove /dev/sdb5 /dev/sdb9

~#:pvscan
~#:pvcreate /dev/sdb{5,6,7,8}
~#:pvscan 
~#:pvdisplay
</code></pre>
<p>d.VG卷用户组的新建<br>
	vgcreate 新建VG<br>
	vgscan 查找目前系统上的VG<br>
	vgdisplay 显示目前系统上的VG状态<br>
	vgextend 在VG内新增额外的VG<br>
	vgreduce 在VG内删除PV<br>
	vgchange 设置VG是否启动<br>
	vgremove 删除一个VG<br>
	VG名称是自己定义的。而PV名称实际上是分区的设备文件名</p>
<pre><code>vgcreate [-s] VG名称 PV名称
	-s　后面接PE的大写,单位可以是m,g,t (支持大小写)
~#:vgcreate -s 16M mxxvg /dev/sdb{5,6,7}
~#:vgscan
~#:pvscan
~#:vgdisplay
vgextend VG名称　PV名称
~#:vgextend mxxvg /dev/sdb8
~#:vgdisplay
</code></pre>
<p>e.LV逻辑卷的新建<br>
	lvcreate 新建lv<br>
	lvscan 查询系统上的lv<br>
	lvdisplay 展示系统上的lv<br>
	lvextend 在lv里增加容量<br>
	lvreduce 在lv里减少容量<br>
	lvremove 删除一个lv<br>
	lvresise 对lv的大小进行重新调整</p>
<pre><code>lvcreate [-lLs] [-n lv名称]　vg名称
	-l 后接的是PE的个数
	-L 后接的是vg的容量
	-n 后接lv的名称
	-s snapshot 快照
~#:lvcreate -l 252 -n mxxlv mxxvg
~#:ls -l /dev/mxxvg/mxxlv
~#:lvscan
~#:lvdisplay
</code></pre>
<p>f.文件系统新建<br>
	~#:mkfs -t ext4 /dev/mxxvg/mxxlv<br>
	~#:mkdir /mnt/lvm<br>
	~#:mount /dev/mxxvg/mxxlv /mnt/lvm<br>
	~#:df -h .</p>
<p>g.增加lv容量<br>
	~#:sudo fdisk /dev/sdb<br>
		new /dev/sdb9<br>
	~#:pvcreate /dev/sdb9<br>
	~#:pvscan<br>
	~#:vgextend mxxvg /dev/sdb9<br>
	~#:vgdisplay<br>
	增加lv的容量<br>
	~#:lvresize -l +63 /dev/mxxvg/mxxlv	<br>
	~#:lvdisplay<br>
	~#:df -h /mnt/lvm</p>
<pre><code>此时虽然lv显示的容量增大，但是对应的/dev/mxxvg/mxxlv文件系统还没有改变
~#:dumpe2fs /dev/mxxvg/mxxlv
重新计算文件系统
resizefs [-f] [device] [size]
	-f 强制进行resize
	device 后接的文件系统或者是设备名
	size 如果没有size默认为整个文件系统，如果有size的话，必须给一个				单位
~#:resize2fs /dev/mxxvg/mxxlv   //可在线进行resize
</code></pre>
<p>h.缩小lv容量<br>
　　　先计算需要缩小多少<br>
	~#:pvscan<br>
	~#:pvdisplay<br>
　　　缩小文件系统容量<br>
	放大可以直接进行，但是缩小需要先卸载<br>
	~#:umount /dev/mxxvg/mxxlv<br>
	~#:resize2fs /dev/mxxvg/mxxlv 3900M<br>
	报错需要用e2fsck<br>
	~#:e2fsckk -f /dev/mxxvg/mxxlv<br>
	~#:resize2fs /dev/mxxvg/mxxlv 3900M<br>
	~#:mount /dev/mxxvg/mxxlv /mnt/lvm<br>
	~#:df -h /mnt/lvm<br>
　　　降低lv容量<br>
	~#:lvresize -l -63 /dev/mxxvg/mxxlv<br>
	~#:lvdisplay<br>
转移pv<br>
	~#:pvdisplay<br>
	~#:pvmove /dev/sdb5 /dev/sdb9<br>
　　　删除vg<br>
	~#:vgreduce mxxvg /dev/sdb5<br>
删除pv	<br>
	~#:pvscan<br>
	~#:pvremove /dev/sdb5</p>
<p>77.LVM的快照<br>
	需要有未使用的PE块<br>
	所以需要新加入一个PV块</p>
<pre><code>~#:vgdisplay
~#:pvcreate /dev/sdb5
~#:vgextend mxxvg /dev/sdb5
~#:vgdisplay
~#:lvcreate -l 40 -s -n mxxlv_ss /dev/mxxvg/mxxlv
	-s snapshot
~#:lvdisplay
复原的数据是不能比快照区的大小大的，此处不能大于40个PE

接下来改变LVM中的数据，会发现lvm与快照区是不同的
~#:cd /mnt/lvm
~#:cp -a /home/mxx/my.iso /mnt/lvm
~#:lvdisplay 会发现lv的快照区已经被使用了
~#:df 会发现原始文件与快照区文件系统也是不同的
</code></pre>
<p>利用快照区进行备份<br>
	~#:tar -cvj -f /home/mxx/my.bak/lvm.bak.tar.bz2 *<br>
	~#:umount /mnt/snapshot</p>
<pre><code>将快照区进行删除，因为已经被备份
~#:lvremove /dev/mxxvg/mxxlv_ss 

~#:umount /mnt/lvm
~#:mkfs -t ext4 /mnt/lvm
~#:mount /dev/mxxvg/mxxlv /mnt/lvm

将备份的数据还原，那么这个文件系统就会和原来一样了
~#:tar -xvj -f /home/mxx/my.bak/lvm.bak.tar.bz2 /mnt/lvm
~#:ls -l /mnt/lvm
</code></pre>
<p>LVM的关闭<br>
	先卸载lvm系统，包括快照与原系统<br>
	再使用lvremove删除LV<br>
	使用vgchange -a n VG 名称 让其不再为active<br>
	使用vgremove删除VG<br>
	使用pvremove删除PV<br>
	最后使用sudo fdisk 修改System ID</p>
<pre><code>~#:umount /mnt/lvm
~#:lvremove /dev/mxxvg/mxxlv
~#:vgchage -a n mxxvg
~#:vgremove mxxvg
~#:pvremover /dev/sdb{5,6,7,8}
~#:sudo fdisk -l 
</code></pre>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mxxhcm.github.io/2019/05/07/linux-at-cron-anacron/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="马晓鑫爱马荟荟">
      <meta itemprop="description" content="记录硕士三年自己的积累">
      <meta itemprop="image" content="/images/favicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mxxhcm's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/05/07/linux-at-cron-anacron/" class="post-title-link" itemprop="http://mxxhcm.github.io/page/6/index.html">linux at cron anacron</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-05-07 16:50:33" itemprop="dateCreated datePublished" datetime="2019-05-07T16:50:33+08:00">2019-05-07</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-05-12 12:22:27" itemprop="dateModified" datetime="2019-05-12T12:22:27+08:00">2019-05-12</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>例行性工作<br>
78.at仅执行一次的工作调度<br>
	/etc/at.allow<br>
	/etc/at.deny<br>
	at [-lmdvc] TIME<br>
		-m 当at完成时，即使没有输出信息，以mail通知用户<br>
		-v 可以使用较明显的时间格式列出at调度中的工作<br>
		-c 可以列出后面接的该项工作的实际命令内容<br>
		-d 相当于atrm，可以取消一个at工作<br>
		-l 相当于atq，列出目前系统上所有该用户的at调度<br>
	TIME<br>
	  HH:MM	<br>
		04:00<br>
	  HH:MM YYYY-MM-DD<br>
	  	05:00 2016-10-05<br>
	  HH:MM[pm|am] [Month] [Date]<br>
		04 January 10<br>
	  HH:MM [am|pm] + number [minutes|hours|days|weeks]<br>
		now + 5 minutes<br>
		05pm + 3days<br>
	at 04pm + 10 days<br>
	at -c number<br>
	at -l//atq</p>
<pre><code>batch //当空闲时刻再执行
</code></pre>
<p>79.例行性工作调度<br>
	cron<br>
	ubuntu中没有下面两个配置项<br>
	/etc/cron.allow<br>
	/etc/cron.deny<br>
	默认为所有用户都可以使用crontab<br>
	crontab [-u user] [-ler]<br>
		-u　只有root能设置这个参数<br>
		-l　列出所有的crontab工作内容<br>
		-e  编辑crontab的内容<br>
		-r　删除所有crontab的内容</p>
<pre><code>新建crontab
！！！！周与月日不可共存
~#:crontab -e
* * * * * cmd
分钟　小时　日期　月份　星期
* 任何时刻
- 时间范围 0-59
, 分隔 3,6,9
/n */5每过五个单位(分钟，小时，天)
!!!crontab -r
~#:crontab -r # 会把所有的crontab都删处理
要删除一个，请用crontab -e
</code></pre>
<p>开启/var/log/cron.log<br>
	~#:vim /etc/rsyslog.d/50-default.conf<br>
	将rsylog文件中的#cron.*前的#去掉<br>
	~#:service rsyslog restart<br>
	~#:service cron restart<br>
	~#:vim /var/log/cron.log</p>
<pre><code>/var/spool/cron/crontabs/
该目录下为不同账号的crontab内容

/etc/crontab 为系统的例行性任务
run-parts
/etc/cron.daily
/etc/cron.hourly
/etc/cron.monthly
/etc/cron.weekly

自己可以新建run-parts，周期性执行
*/2 * * * * run-parts /etc/cron.minutely
*/5 * * * * run-parts /root/runcron
或者直接执行命令
* * * * * mxx /home/mxx/outputtime_fiveminutes.sh
</code></pre>
<p>80.anacron 处理非24小时开机的系统</p>
<pre><code>anacron [-usfn] [job]
	-u 更新记录文件的时间戳
	-s 开始连续执行各项job，依据记录文件的时间戳判断是否进行
	-f 强制执行，不管时间戳
	-n 立即进行未进行的任务，而不延迟

/etc/cron*/*ana*
/etc/cron.daily/0anacron
0表示最先被执行，让时间戳先被更新，避免anacron误判

/etc/anacron	anacron的设置
</code></pre>
<p>/var/spool/anacron/*	<br>
	记录最近一次执行anacron的时间戳</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mxxhcm.github.io/2019/05/07/linux-service/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="马晓鑫爱马荟荟">
      <meta itemprop="description" content="记录硕士三年自己的积累">
      <meta itemprop="image" content="/images/favicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mxxhcm's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/05/07/linux-service/" class="post-title-link" itemprop="http://mxxhcm.github.io/page/6/index.html">linux service</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-05-07 16:47:38" itemprop="dateCreated datePublished" datetime="2019-05-07T16:47:38+08:00">2019-05-07</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-05-18 17:41:54" itemprop="dateModified" datetime="2019-05-18T17:41:54+08:00">2019-05-18</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>服务(service):系统为了某些功能提供的一些服务(包括系统本身以及网络服务)<br>
daemon:实现service的程序叫做daemon</p>
<p>99.daemon的分类<br>
	a.stand_alone daemon<br>
		自行独立启动，不用通过其他机制，启动并加载到内存后就一直占用内存与系统资源。因此对于客户端的请求响应特别快。<br>
		WWW的daemon(httpd)，FTP的daemon(vsftpd)</p>
<pre><code>b.super daemon
	由一个统一的daemon来唤起服务，这个特殊的daemon叫做super daemon早期是inetd,后来被xinetd替代了。没有客户端请求时，服务被关闭，收到客户端请求时，super daemon唤醒相应的服务，请求结束后，这个服务就会关闭，服务反应时间会比较慢。常见的有telnet服务

signal-control和interval-control
信号管理的daemon以及每隔一段时间主动执行某项工作的daemon
每一个服务程序文件名都会加上d，d代表daemon
</code></pre>
<p>300./etc/services服务端口的对应<br>
	查询service的端口号<br>
	服务以及端口号<br>
	~#:grep ‘time’ /etc/services</p>
<p>101.daemon的启动方式以及启动脚本</p>
<p>a.一些配置文件<br>
	/etc/init.d/*　 #基本上所有的服务启动脚本都被放置在该目录<br>
	/etc/default	#一些配置文件<br>
	/etc/*	#各服务各自的配置文件</p>
<pre><code>!!!!xinted默认在ubuntu中是不存在的,
~$:sudo apt-get install xinetd
/etc/xinetd.conf   #super daemon配置文件
/etc/xinetd.d/*	   #它所管理的进程

/var/lib/*	各服务产生的数据库
/var/run/*	各服务的程序的pid记录处

b.stand alone的启动
用/etc/init.d/*启动
~#:/etc/init.d/cron start|stop|status|restart|reload|force-reload

用service [service-name] (start|...)启动

service-name必须与/etc/init.d/相照应
--status-all 将所有的stand_alone服务列出来

~#:service --status-all
~#:service cron

grep -i 'disable' /etc/xined.d/*
</code></pre>
<p>c.super daemon的启动方式<br>
	super daemon本身也是一个stand　alone的服务，但是它所管理的其他文件就不是这样了</p>
<pre><code>查看某个服务是否可用。
~#:grep -i 'disable' /etc/xinted.d/*
disable表示取消，若为yes，表示该服务未开启，no表示开启

若要开启time服务
~#:vim /etc/xinted.d/time
将disable改为no
重新启动xinted服务
~#:service xinted restart
!!!!!注意是重启xinted服务

查看该服务的信息
~#:grep -i 'time' /etc/services
~#:netstat -nltp | grep 'time port'
</code></pre>
<p>d.默认值配置文件以及一些参数的值<br>
	/etc/xinetd.conf<br>
	log_type	SYSLOG daemon info 日志文件的记录服务类型<br>
	log_on_failure	发生错误时需要记录的信息<br>
	log_on_success	成功启动时的记录信息<br>
	cps	同一秒内的最大连接个数，若超过则暂停<br>
	instance	同一服务的最大连接数<br>
	per_source	同一来源的客户端的最大连接数<br>
	v6only	是否运行ipv6<br>
	groups	<br>
	umask</p>
<pre><code>service &lt;service name&gt;
{
	
}

disable	启动与否
id	服务识别
server	程序文件名	这个服务的启动程序
server_args	程序参数	设置server_args=--daemon
user	服务所属id
group	用户组	
socket_type	数据包类型	stream|dgram|raw stream使用tcp,   udp使用dgram,raw代表erver需要与ip直接交互。
protocol	数据包类型	tcp|udp与socket_type重复，
wait	连接机制	yes(single) no(multi) 一般udp为yes，tcp为no
instances	最大连接数
per_source	单用户来源	(一个数字或者NULIMTED)
cps	新连接限制
log_type	日志文件类型	以什么日志选项记载和需要记载的等级(默认为info)
log_on_success,log_on_failure,设置值,[PID,HOST,USERID,EXIT,DURATION]
	PID为服务启动时的pid,host为远程主机的ip，userid为登陆者的账号，EXIT为离开时记录的项目，DURATION为该用户使用此服务多久。
env	额外环境变量设置	设置环境变量
port	非正规端口号	设置不同的服务与对应的端口号，port与服务名必须与/etc/services的值相同
redirect	服务转址	[IP port] 将客户端的请求转到另一台主机
includedir	调用外部设置	表示将某个目录所有文件都放入xinetd.conf中，
bind	服务端口锁定	运行此服务的适配卡
interface	与bind相同
only_from	[0.0.0.0,192.168.1.0/24,hostname,domainname]设置为这里面的ip或者主机名才能访问，0.0.0.0表示所有主机皆能访问，如果是192.168.1.0/24则表示为C　class的域，即由(192.168.1.1~192.168.1.255)皆可登录。另外，也可选择域名，如bit.edu.cn表示运行北理工的ip登录你的主机
no_acess	表示的是不可登录的主机
acess_time	时间控制	[00:00-24:00,HH:MM-HH:MM]
umask	设置用户新建目录或者文件时候的属性

e.端口号小于1024启动者身份一定要是root

f.实际动手设置一个/etc/xinted.d/下的服务
</code></pre>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/5/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><span class="space">&hellip;</span><a class="page-number" href="/page/14/">14</a><a class="extend next" rel="next" href="/page/7/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/favicon.jpg" alt="马晓鑫爱马荟荟">
            
              <p class="site-author-name" itemprop="name">马晓鑫爱马荟荟</p>
              <p class="site-description motion-element" itemprop="description">记录硕士三年自己的积累</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">135</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">12</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">117</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/mxxhcm" title="GitHub &rarr; https://github.com/mxxhcm" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="mailto:mxxhcm@gmail.com" title="E-Mail &rarr; mailto:mxxhcm@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            </div>
          

          

          
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">马晓鑫爱马荟荟</span>

  

  
</div>


  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v6.6.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script src="/js/src/utils.js?v=6.6.0"></script>

  <script src="/js/src/motion.js?v=6.6.0"></script>



  
  


  <script src="/js/src/affix.js?v=6.6.0"></script>

  <script src="/js/src/schemes/pisces.js?v=6.6.0"></script>



  

  


  <script src="/js/src/bootstrap.js?v=6.6.0"></script>



  



  






<!-- LOCAL: You can save these files to your site and update links -->
    
        
        <link rel="stylesheet" href="https://aimingoo.github.io/gitmint/style/default.css">
        <script src="https://aimingoo.github.io/gitmint/dist/gitmint.browser.js"></script>
    
<!-- END LOCAL -->

    

    







  





  

  

  

  

  
  

  
  
    
      
    
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
  

  
    
      <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      },
      TeX: {equationNumbers: { autoNumber: "AMS" }}
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>
<script src="//cdn.jsdelivr.net/npm/mathjax@2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

<style>
.MathJax_Display {
    overflow: auto hidden;
}
</style>

    
  


  
  

  

  

  

  

  

  

</body>
</html>
