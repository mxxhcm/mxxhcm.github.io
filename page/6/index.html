<!DOCTYPE html>












  


<html class="theme-next pisces use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
































<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=6.6.0" rel="stylesheet" type="text/css">



  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.jpg?v=6.6.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.jpg?v=6.6.0">










<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '6.6.0',
    sidebar: {"position":"left","display":"always","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="记录硕士三年自己的积累">
<meta property="og:type" content="website">
<meta property="og:title" content="mxxhcm&#39;s blog">
<meta property="og:url" content="http://mxxhcm.github.io/page/6/index.html">
<meta property="og:site_name" content="mxxhcm&#39;s blog">
<meta property="og:description" content="记录硕士三年自己的积累">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="mxxhcm&#39;s blog">
<meta name="twitter:description" content="记录硕士三年自己的积累">



  <link rel="alternate" href="/atom.xml" title="mxxhcm's blog" type="application/atom+xml">




  <link rel="canonical" href="http://mxxhcm.github.io/page/6/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>mxxhcm's blog</title>
  












  <noscript>
  <style>
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion .logo-line-before i { left: initial; }
    .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">mxxhcm's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mxxhcm.github.io/2019/12/10/C-problems/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="马晓鑫爱马荟荟">
      <meta itemprop="description" content="记录硕士三年自己的积累">
      <meta itemprop="image" content="/images/favicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mxxhcm's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/12/10/C-problems/" class="post-title-link" itemprop="http://mxxhcm.github.io/page/6/index.html">C/C++ problems</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-12-10 19:09:03" itemprop="dateCreated datePublished" datetime="2019-12-10T19:09:03+08:00">2019-12-10</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2020-01-01 14:10:09" itemprop="dateModified" datetime="2020-01-01T14:10:09+08:00">2020-01-01</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/C-C/" itemprop="url" rel="index"><span itemprop="name">C/C++</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="问题0-c和c-的命名规则">问题0-C和C++ 的命名规则</h2>
<p>STL中的东西都放在了std命名空间中，并且使用了大小写字母等，为什么还需要使用leading underscore(single and double)前置的下划线？是标准，还是仅仅是习惯？<br>
宏不遵守namespaces和其他上下文，为了避免冲突，就只能使用这种命名方式了，这不是一种编码标准，只是一种防止冲突的方式。具体示例可以看问题0的参考文献[1]。</p>
<p>那么C++ 的命名规则是什么呢？参见问题0的参考文献[2]。</p>
<ol>
<li>Reserved in any scope(在任何scope都保留的命名规则)，包括宏的实现：
<ul>
<li>下划线后紧跟大写字母的声明符。</li>
<li>包含两个下划线的声明符。</li>
</ul>
</li>
<li>Reserved in the global namespace(在全局的namespace中保留的命名规则）：
<ul>
<li>使用一个下划线开头的声明符</li>
</ul>
</li>
<li>在<code>std</code> namespace中的所有东西都是保留的。</li>
</ol>
<p>C通常会使用缩写，而C++ 中通常使用单下划线分隔单词，C/C++ 通常不使用驼峰命名法，除了STL模板类型。</p>
<h2 id="问题1-c中为什么const-int不能当做array-size">问题1-C中为什么<code>const int</code>不能当做array size</h2>
<blockquote>
<p>The const qualifier really means ``read-only’’; an object so qualified is a run-time object which cannot (normally) be assigned to. The value of a const-qualified object is therefore not a constant expression in the full sense of the term, and cannot be used for array dimensions, case labels, and the like. (C is unlike C++ in this regard.) When you need a true compile-time constant, use a preprocessor #define (or perhaps an enum).</p>
</blockquote>
<p>在C语言中，<code>const</code>修饰只代表只读，被<code>const</code>修饰的对象是一个运行时对象，通常不能被赋值。因此它不是一个常量表达式，这点和C++ 不一样。可以使用<code>#define</code>或者<code>enum</code>。<br>
什么是常量表达式，在编译时就能获得它的值，而不是运行时。</p>
<blockquote>
<p>A constant expression can be evaluated during translation rather than runtime, and accordingly may be used in any place that a constant may be.[ISO C11 Sec 6[ISO C11 Sec 6.6]</p>
</blockquote>
<h2 id="问题2-cc1和gcc的关系">问题2-cc1和gcc的关系</h2>
<p>C语言程序从ASCII转换到可执行目标文件分别经历了预处理器cpp，编译器cc1，汇编器as，以及链接器ld的处理，一个编译器驱动程序包含所有这几个部分，gcc是GNU编译系统上的编译驱动程序。<br>
我在ubuntu 18.04上没有找到cc1，我的做法：<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">which gcc       # 查看gcc存放位置</span><br><span class="line"><span class="meta">#</span>我的输出是: </span><br><span class="line"><span class="meta">#</span>/usr/bin/gcc</span><br><span class="line">gcc --version # 查看当前gcc 版本</span><br><span class="line"><span class="meta">#</span>我的输出是: </span><br><span class="line"><span class="meta">#</span>gcc (Ubuntu 7.4.0-1ubuntu1~18.04.1) 7.4.0,,,</span><br><span class="line">cd /usr</span><br><span class="line">sudo find . -name "cc1"</span><br><span class="line"><span class="meta">#</span>我的输出是：</span><br><span class="line"><span class="meta">#</span>./lib/gcc/x86_64-linux-gnu/7/cc1</span><br><span class="line"><span class="meta">#</span>./lib/gcc/x86_64-linux-gnu/6/cc1</span><br><span class="line"><span class="meta">#</span>然后根据gcc版本7.4，进入第一个目录</span><br><span class="line"></span><br><span class="line">cp cc1 /usr/bin # 将它拷贝到和gcc相同的目录</span><br></pre></td></tr></table></figure></p>
<h2 id="参考文献">参考文献</h2>
<p>问题0<br>
1.<a href="https://stackoverflow.com/questions/22319950/why-does-the-naming-convention-of-stl-use-so-many-leading-underscore" target="_blank" rel="noopener">https://stackoverflow.com/questions/22319950/why-does-the-naming-convention-of-stl-use-so-many-leading-underscore</a><br>
2.<a href="https://stackoverflow.com/questions/228783/what-are-the-rules-about-using-an-underscore-in-a-c-identifier" target="_blank" rel="noopener">https://stackoverflow.com/questions/228783/what-are-the-rules-about-using-an-underscore-in-a-c-identifier</a><br>
3.<a href="https://stackoverflow.com/questions/1734277/name-of-c-c-stdlib-naming-convention" target="_blank" rel="noopener">https://stackoverflow.com/questions/1734277/name-of-c-c-stdlib-naming-convention</a><br>
4.<a href="https://www.gnu.org/savannah-checkouts/gnu/libc/manual/html_node/Reserved-Names.html" target="_blank" rel="noopener">https://www.gnu.org/savannah-checkouts/gnu/libc/manual/html_node/Reserved-Names.html</a><br>
5.<a href="https://isocpp.org/wiki/faq/coding-standards" target="_blank" rel="noopener">https://isocpp.org/wiki/faq/coding-standards</a><br>
问题1<br>
1.<a href="https://stackoverflow.com/a/44268465/8939281" target="_blank" rel="noopener">https://stackoverflow.com/a/44268465/8939281</a><br>
2.<a href="https://stackoverflow.com/a/18848583/8939281" target="_blank" rel="noopener">https://stackoverflow.com/a/18848583/8939281</a><br>
3.<a href="http://c-faq.com/ansi/constasconst.html" target="_blank" rel="noopener">http://c-faq.com/ansi/constasconst.html</a><br>
问题2<br>
1.<a href="https://unix.stackexchange.com/questions/77779/relationship-between-cc1-and-gcc" target="_blank" rel="noopener">https://unix.stackexchange.com/questions/77779/relationship-between-cc1-and-gcc</a><br>
2.<a href="https://stackoverflow.com/a/51218063/8939281" target="_blank" rel="noopener">https://stackoverflow.com/a/51218063/8939281</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mxxhcm.github.io/2019/12/08/C-calss-friend/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="马晓鑫爱马荟荟">
      <meta itemprop="description" content="记录硕士三年自己的积累">
      <meta itemprop="image" content="/images/favicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mxxhcm's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/12/08/C-calss-friend/" class="post-title-link" itemprop="http://mxxhcm.github.io/page/6/index.html">C++ calss friend</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-12-08 16:57:44" itemprop="dateCreated datePublished" datetime="2019-12-08T16:57:44+08:00">2019-12-08</time>
            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mxxhcm.github.io/2019/12/08/C-class-constructor-and-destructor/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="马晓鑫爱马荟荟">
      <meta itemprop="description" content="记录硕士三年自己的积累">
      <meta itemprop="image" content="/images/favicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mxxhcm's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/12/08/C-class-constructor-and-destructor/" class="post-title-link" itemprop="http://mxxhcm.github.io/page/6/index.html">C++ class constructor and destructor</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-12-08 16:56:52" itemprop="dateCreated datePublished" datetime="2019-12-08T16:56:52+08:00">2019-12-08</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2020-03-03 15:10:52" itemprop="dateModified" datetime="2020-03-03T15:10:52+08:00">2020-03-03</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/C-C/" itemprop="url" rel="index"><span itemprop="name">C/C++</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="构造函数">构造函数</h2>
<p>每个类都会定义它的对象被初始化的方式，类通过一个或者几个特殊的成员函数控制每个类的初始化过程,这些函数叫做构造函数。<br>
构造函数的几个特征:</p>
<ol>
<li>构造函数的任务是初始化类对象的数据成员，无论何时只要类的对象被创建，就会执行构造函数。</li>
<li>构造函数名字和类名相同。</li>
<li>构造函数没有返回类型。</li>
<li>构造函数可以有多个，和重载函数差不多。</li>
<li>构造函数不能声明为<code>const</code>。当我们要创建一个const对象时,一直到构造函数完成初始化过程，对象才能获得常量属性。因此,构造函数在const对象的构造过程中可以向其写入。或者说，构造函数要更改对象，如果声明为<code>const</code>的话，就无法更改了。</li>
</ol>
<h2 id="默认构造函数">默认构造函数</h2>
<p>当类没有声明任何构造函数时，编译器提供一个特殊的构造函数，称为默认构造函数，<strong>默认构造函数不需要任何实参</strong>。默认构造函数的初始化规则为：如果存在类内初始值，用它初始化成员，否则使用默认初始化。<br>
对于非常简单的类,可以使用默认构造函数,但是对于特别复杂的类,必须定义它自己的默认构造函数,有三个原因:</p>
<ol>
<li>编译器只有在发现类中不包含任何构造函数的情况下才会生成一个默认的构造函数.如果我们定义了一些其他的构造函数,那么编译器就不会提供默认构造函数了,如果需要默认构造函数需要程序员自己定义.</li>
<li>编译器提供的默认构造函数可能指定错误的操作,因为执行默认初始化时,块中的内置类型或者复合类型的对象都是随机值,所以需要自己自己定义一个默认构造函数.</li>
<li>编译器不能为某些类生成一个默认构造函数,如果类中包含一个其他类类型的成员,并且这个成员没有默认构造函数,那么编译器无法初始化该成员.这样的类,必须由程序员自己定义默认构造函数,否则没有可用的默认构造函数.</li>
</ol>
<h3 id="默认构造函数的作用">默认构造函数的作用</h3>
<h2 id="编译器生成的默认构造函数-是编译器需要">编译器生成的默认构造函数（是编译器需要）</h2>
<p>Nontrivial default construct是编译器需要的那种构造函数，必要的话由编译器合成，它不会负责对data member进行初始化，这是程序员的责任。总共有四种nontrivial default construct：</p>
<ol>
<li>带有default constructor的member class object；</li>
<li>带有default constructor的base class；</li>
<li>带有virtual function的class；</li>
<li>带有virtual base class的class。</li>
</ol>
<h2 id="拷贝构造函数的构建操作">拷贝构造函数的构建操作</h2>
<p>有三种情况，会把一个object的内容当做另一个object的初值，即调用拷贝构造函数：</p>
<ol>
<li>用=号初始化一个对象。</li>
<li>值传参。</li>
<li>函数返回值。</li>
</ol>
<h3 id="默认memberwise的初始化">默认memberwise的初始化</h3>
<p>如果类没有提供explicit copy constructor，当使用类对象初始化另一个类对象时，其实是使用默认memberwise初始化完成的。<br>
copy constructor只有在必要的时候通过编译器产生出来。</p>
<h3 id="bitwise-copy-semantics">Bitwise Copy Semantics</h3>
<h2 id="定义构造函数">定义构造函数</h2>
<p>构造函数是可以重载的，一个类可以有多个构造函数。</p>
<h3 id="default的含义"><code>=default</code>的含义</h3>
<p><code>=default</code>是C++ 11标准的新用法,如果需要编译器提供的默认构造函数,在参数列表最后加上<code>=default</code>即可.其中,<code>=default</code>可以和声明一起出现在类的内部,也可以作为定义出现在类的外部.如果<code>=default</code>在类的内部,那么默认构造函数是内联函数,如果它在类的外部,该成员默认情况下不是内联的.</p>
<h3 id="初始值列表">初始值列表</h3>
<h4 id="什么是初始值列表">什么是初始值列表</h4>
<p>在参数列表之后和花括号之前,加上冒号和一个特殊的列表,这个特殊的列表叫做构造函数初始值列表.这个列表由多个 成员变量的名字,括号括起来的成员变量初始值构成,不同成员变量的初始化通过逗号分隔开来.<br>
<strong>如果初始值列表没有对部分或者全部数据成员变量进行初始化,那么这些的数据成员变量将根据类内初始值进行初始化,如果没有类内初始化值,执行默认初始化.</strong></p>
<h4 id="为什么要使用初始值列表？？？">为什么要使用初始值列表？？？</h4>
<p>初始值列表进行的是初始化，而在构造函数体内进行初始化执行的是赋值。对于引用和const对象来说，只能使用初始化，而不能使用赋值。</p>
<h4 id="成员初始化的顺序">成员初始化的顺序</h4>
<p>初始值列表只说明用于初始化的值，而不能限制初始化的具体顺序。<strong>成员初始化的顺序和他们在类定义中出现的顺序一致。</strong></p>
<h2 id="拷贝构造函数-拷贝赋值函数以及析构函数">拷贝构造函数，拷贝赋值函数以及析构函数</h2>
<p>这三个函数很重要，通常在含有指针成员的类中，需要定义拷贝构造函数和拷贝赋值函数。<br>
在使用等号进行初始化，即拷贝初始化的时候，使用的是拷贝构造函数，先创建一个对象，然后调用拷贝构造函数复制这个对象到新创建的对象。<br>
而不使用等号的初始化，也就是直接初始化时，使用的是函数匹配，即选择最合适的构造函数进行初始化。</p>
<h2 id="委托构造函数">委托构造函数</h2>
<p>一个委托构造函数使用他所属的类中的其他构造函数执行它自己的初始化过程，或者说它把子集的一些或者全部工作委托给了其他构造函数。</p>
<h2 id="explict构造函数"><code>explict</code>构造函数</h2>
<p>转换构造函数和重载函数调用运算符能够把一个类类型转换为另外一种类类型。<br>
在需要使用某个类的对象的时候，有时候可以仅仅传递实参进入，如果该类有相应的构造函数可以创建该类对象的时候，编译器会自动的构造一个类对象参与运算。<br>
可以通过在构造函数前面加上<code>explict</code>，阻止编译器隐式的调用构造函数进行转换，只有显式的调用构造函数时才可以。</p>
<p><code>explicit</code>构造函数的性质：</p>
<ol>
<li><code>explicit</code>只能出现在类内部。</li>
<li><code>explicit</code>只能用于直接初始化，不能用于拷贝初始化。</li>
<li><code>static_cast</code>可以使用<code>explicit</code>构造函数。</li>
<li>标准库中含有显示构造函数的类，接收一个容量参数的vector构造函数是<code>explicit</code>的。</li>
</ol>
<h2 id="聚合类">聚合类</h2>
<p>满足下列要求的类称为聚合类：</p>
<ol>
<li>所有成员都是public的；</li>
<li>没有定义任何构造函数，可以定义其他函数（需要满足下面的条件）；</li>
<li>没有指定类内初始值；</li>
<li>没有基类，也没有virtual function。</li>
</ol>
<p>使用初始值列表进行初始化。它的缺点：</p>
<ol>
<li>所有成员都是public</li>
<li>让类的用户进行初始化，而不是让类的作者。</li>
<li>添加或者删除一个成员后，所有的初始化语句都要改变。</li>
</ol>
<h2 id="字面值常量类">字面值常量类</h2>
<h2 id="参考文献">参考文献</h2>
<p>1.《C++ Primer》第五版中文版</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mxxhcm.github.io/2019/12/08/UNIX-time-s/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="马晓鑫爱马荟荟">
      <meta itemprop="description" content="记录硕士三年自己的积累">
      <meta itemprop="image" content="/images/favicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mxxhcm's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/12/08/UNIX-time-s/" class="post-title-link" itemprop="http://mxxhcm.github.io/page/6/index.html">UNIX time(s)</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-12-08 14:02:07" itemprop="dateCreated datePublished" datetime="2019-12-08T14:02:07+08:00">2019-12-08</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2020-02-11 17:38:36" itemprop="dateModified" datetime="2020-02-11T17:38:36+08:00">2020-02-11</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/UNIX/" itemprop="url" rel="index"><span itemprop="name">UNIX</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="时间">时间</h2>
<h3 id="获得时钟时间">获得时钟时间</h3>
<h4 id="linux的时间函数">linux的时间函数</h4>
<p>三种获取时间的方式</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获得time_t或者,struct timespec或者struct timeval</span></span><br><span class="line"><span class="comment">// 1. 返回从1970年1月1日（UTC）开始的秒数。</span></span><br><span class="line"><span class="keyword">time_t</span> time(<span class="keyword">time_t</span> *tloc);</span><br><span class="line"><span class="comment">// 2.1</span></span><br><span class="line"><span class="comment">// timespec -&gt; tv_sec</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">clock_gettime</span><span class="params">(<span class="keyword">clockid_t</span> clk_id, struct timpespec *tp)</span></span>;</span><br><span class="line"><span class="comment">// 2.2</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">clock_getres</span><span class="params">(<span class="keyword">clockid_t</span> clk_id, struct timespec *res)</span></span>;</span><br><span class="line"><span class="comment">// 3.</span></span><br><span class="line"><span class="comment">// timeval -&gt; tv_sec</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">gettimeofday</span><span class="params">(struct timeval *tv, struct timezone *tz)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//将time_t结构化成struct tm</span></span><br><span class="line"><span class="comment">// 1.1</span></span><br><span class="line"><span class="comment">// 本地时间</span></span><br><span class="line"><span class="function">struct tm *<span class="title">localtime</span><span class="params">(<span class="keyword">const</span> <span class="keyword">time_t</span> *timep)</span></span>;</span><br><span class="line"><span class="comment">// 1.2</span></span><br><span class="line"><span class="comment">// 协调世界时</span></span><br><span class="line"><span class="function">struct tm *<span class="title">gmtime</span><span class="params">(<span class="keyword">const</span> <span class="keyword">time_t</span> *timep)</span></span>;</span><br><span class="line"><span class="comment">// 2.</span></span><br><span class="line"><span class="comment">// 将结构化时间转换成time_t</span></span><br><span class="line"><span class="keyword">time_t</span> mktime(struct tm *tm);</span><br></pre></td></tr></table></figure>
<h4 id="c的时间函数">C的时间函数</h4>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.格式化日期和时间</span></span><br><span class="line"><span class="keyword">size_t</span> strftime(<span class="keyword">char</span> *s, <span class="keyword">size_t</span> max, <span class="keyword">const</span> <span class="keyword">char</span> *format, <span class="keyword">const</span> struct tm *tm);</span><br><span class="line"><span class="comment">// 2.</span></span><br><span class="line"><span class="function"><span class="keyword">char</span> *<span class="title">strptime</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *s, <span class="keyword">const</span> <span class="keyword">char</span> *format, struct tm *tm)</span></span>;</span><br></pre></td></tr></table></figure>
<h3 id="获得进程时间">获得进程时间</h3>
<h4 id="linux进程时间">linux进程时间</h4>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">clock_t</span> clock(<span class="keyword">void</span>);</span><br></pre></td></tr></table></figure>
<h4 id="c的进程时间">C的进程时间</h4>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">clock_t</span> times(struct tms *buf);</span><br></pre></td></tr></table></figure>
<h2 id="数据结构">数据结构</h2>
<ul>
<li><code>struct timespec</code></li>
<li><code>struct timeval</code></li>
<li><code>struct tm</code></li>
<li><code>struct tms</code></li>
<li><code>struct timezone</code></li>
</ul>
<h3 id="struct-timespec"><code>struct timespec</code></h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">timespec</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">time_t</span> tv_sec;</span><br><span class="line">    <span class="keyword">long</span> tv_nsec;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="struct-timeval"><code>struct timeval</code></h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">timeval</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">time_t</span> tv_sec;</span><br><span class="line">    <span class="keyword">suseconds_t</span> tv_usec;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="struct-tm"><code>struct tm</code></h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">tm</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> tm_sec;    <span class="comment">/* Seconds (0-60) */</span></span><br><span class="line">    <span class="keyword">int</span> tm_min;    <span class="comment">/* Minutes (0-59) */</span></span><br><span class="line">    <span class="keyword">int</span> tm_hour;   <span class="comment">/* Hours (0-23) */</span></span><br><span class="line">    <span class="keyword">int</span> tm_mday;   <span class="comment">/* Day of the month (1-31) */</span></span><br><span class="line">    <span class="keyword">int</span> tm_mon;    <span class="comment">/* Month (0-11) */</span></span><br><span class="line">    <span class="keyword">int</span> tm_year;   <span class="comment">/* Year - 1900 */</span></span><br><span class="line">    <span class="keyword">int</span> tm_wday;   <span class="comment">/* Day of the week (0-6, Sunday = 0) */</span></span><br><span class="line">    <span class="keyword">int</span> tm_yday;   <span class="comment">/* Day in the year (0-365, 1 Jan = 0) */</span></span><br><span class="line">    <span class="keyword">int</span> tm_isdst;  <span class="comment">/* Daylight saving time */</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="struct-tms"><code>struct tms</code></h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">tms</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">clock_t</span> tms_utime;</span><br><span class="line">    <span class="keyword">clock_t</span> tms_stime;</span><br><span class="line">    <span class="keyword">clock_t</span> tms_cutime;</span><br><span class="line">    <span class="keyword">clock_t</span> tms_cstime;</span><br><span class="line">    </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="struct-timezone"><code>struct timezone</code></h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">timezone</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> tz_minuteswest;</span><br><span class="line">    <span class="keyword">int</span> tz_dsttime;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="参考文献">参考文献</h2>
<p>1.《APUE》第三版<br>
2.<a href="https://en.cppreference.com/w/c/chrono/timespec" target="_blank" rel="noopener">https://en.cppreference.com/w/c/chrono/timespec</a><br>
3.<a href="https://www.gnu.org/software/libc/manual/html_node/Elapsed-Time.html" target="_blank" rel="noopener">https://www.gnu.org/software/libc/manual/html_node/Elapsed-Time.html</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mxxhcm.github.io/2019/12/07/C-preprocessor/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="马晓鑫爱马荟荟">
      <meta itemprop="description" content="记录硕士三年自己的积累">
      <meta itemprop="image" content="/images/favicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mxxhcm's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/12/07/C-preprocessor/" class="post-title-link" itemprop="http://mxxhcm.github.io/page/6/index.html">C/C++ preprocessor</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-12-07 22:15:37 / 修改时间：22:32:03" itemprop="dateCreated datePublished" datetime="2019-12-07T22:15:37+08:00">2019-12-07</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/C-C/" itemprop="url" rel="index"><span itemprop="name">C/C++</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="预处理器">预处理器</h2>
<p>预处理器是在编译之前执行的一段程序，可以部分的改变我们的程序。</p>
<h2 id="include"><code>include</code></h2>
<p>当预处理看到<code>#include</code>时会用指定的头文件代替<code>#include</code>。</p>
<h2 id="头文件保护符">头文件保护符</h2>
<p>头文件保护符依赖于预处理变量。预处理变量有两种状态：已定义和未定义。<br>
<code>#define</code>定义一个预处理变量。<br>
<code>#ifdef</code>当且仅当变量已定义为真。<br>
<code>#ifndef</code>当且仅当变量未定义为真。<br>
<code>#ifdef</code>或<code>#ifndef</code>为真之后，后续操作遇到<code>#endif</code>结束。</p>
<h2 id="assert预处理宏"><code>assert</code>预处理宏</h2>
<p>预处理宏其实是一个预处理器变量。<code>assert</code>就是一个预处理宏，<code>assert</code>定义在<code>&lt;cassert&gt;</code>头文件中。它使用一个表达式作为它的条件：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">assert(expr);</span><br></pre></td></tr></table></figure></p>
<p>对<code>expr</code>求值，如果为真，什么也不做，否则输出信息，终止程序执行。它用来检查某种错误条件，即当<code>expr</code>满足条件时什么也不做，当它出错时，就结束。</p>
<h2 id="ndebug预处理变量"><code>NDEBUG</code>预处理变量</h2>
<p><code>assert</code>的行为依赖于一个名为<code>NDEBUG</code>的预处理器变量的状态。如果定义了<code>NDEBUG</code>，那么<code>assert</code>什么也不做。默认情况下没有定义<code>NDEBUG</code>，<code>assert</code>执行检查。</p>
<h2 id="其他函数预处理变量">其他函数预处理变量</h2>
<p>C++预处理器定义了四个对于程序调试很有用的名字：<br>
<code>__FILE__</code><br>
<code>__LINE__</code><br>
<code>__TIME__</code><br>
<code>__DATA__</code></p>
<p>注意：C++编译器提供了<code>__func__</code>变量存放函数名字。</p>
<h2 id="参考文献">参考文献</h2>
<p>1.《C++ Primer》第五版</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mxxhcm.github.io/2019/12/07/C-function-special-characterics/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="马晓鑫爱马荟荟">
      <meta itemprop="description" content="记录硕士三年自己的积累">
      <meta itemprop="image" content="/images/favicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mxxhcm's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/12/07/C-function-special-characterics/" class="post-title-link" itemprop="http://mxxhcm.github.io/page/6/index.html">C++ function special characterics</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-12-07 15:53:38" itemprop="dateCreated datePublished" datetime="2019-12-07T15:53:38+08:00">2019-12-07</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-12-15 22:59:18" itemprop="dateModified" datetime="2019-12-15T22:59:18+08:00">2019-12-15</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/C-C/" itemprop="url" rel="index"><span itemprop="name">C/C++</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="特殊语言特性">特殊语言特性</h2>
<p>这一节介绍三种函数相关的语言特性，它们分别是默认实参，内联函数和<code>constexpr</code>函数，以及程序调用过程中的一些常用功能。</p>
<h2 id="默认实参">默认实参</h2>
<h3 id="默认实参是什么">默认实参是什么</h3>
<p>默认实参是函数声明时就指定形参的值。一般某个形参被赋予了默认值，它后面的所有形参都必须要有默认值。<br>
尽量让不怎么使用默认值的形参出现在前面，让那些经常使用默认值的形参出现在后面。</p>
<h3 id="默认实参的声明">默认实参的声明</h3>
<p>一般情况下，一个函数只声明一次，但是声明多次也是可以的。但是在一个定的作用域内，每一个形参只能被赋予一次默认实参。<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="built_in">string</span>::size_type sz;</span><br><span class="line"><span class="function"><span class="built_in">string</span> <span class="title">screen</span><span class="params">(sz , sz w, <span class="keyword">char</span>=<span class="string">'*'</span>)</span></span>; <span class="comment">//指定形参char的默认实参</span></span><br><span class="line"><span class="function"><span class="built_in">string</span> <span class="title">screen</span><span class="params">(sz h=<span class="number">80</span>, sz w=<span class="number">80</span>, <span class="keyword">char</span>)</span></span>; <span class="comment">//指定形参h, w的默认实参。</span></span><br></pre></td></tr></table></figure></p>
<h3 id="默认实参初始值">默认实参初始值</h3>
<p>局部变量不能当做实参的初始值，除此之外，只要表达式的类型都够转换为形参的类型，这个表达式就可以当做默认实参。</p>
<h2 id="内联函数">内联函数</h2>
<p>函数调用的代价要比表达式的代价高。一次函数调用（生成一个新的函数栈帧）包含一系列寄存器的保存和恢复，以及可能的实参拷贝，程序跳转到一个新的位置执行等等。<br>
但是函数调用要比表达式有一些好处：</p>
<ol>
<li>阅读和理解函数调用要比等价的表达式容易</li>
<li>函数可以重复利用，不用重复编写，使用函数可以确保行为的统一，修改也比较方便（不用找到所有等价表达式出现的地方进行替换）。</li>
</ol>
<p>所以就有了内联函数，在函数名字前加上<code>inline</code>关键字就可以声明一个内联函数。内联函数可以避免函数调用的开销还有了函数的优势，通常就是将它在每个调用点上展开，相当于直接用内联函数的定义替换这个函数的名字。</p>
<h2 id="constexpr函数"><code>constexpr</code>函数</h2>
<p><code>constexpr</code>函数是指能用于常量表达式的函数。<strong>定义<code>constexpr</code>函数的方法和其他函数一样，但是函数的返回值以及所有形参的类型都必须是字面值类型，而且函数中必须有且只有一条<code>return</code>语句。</strong><br>
<code>constexpr</code>函数的返回值不一定是常量表达式。如果把它的返回值用在需要常量表达式的地方，编译器会进行检查。比如：<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">```的</span><br><span class="line"></span><br><span class="line">**通常将内联函数和`<span class="keyword">constexpr</span>`函数定义在头文件中。**</span><br><span class="line">内联函数允许多次定义，但是每次的定义必须一致，为什么？什么是内联函数，在每个调用点上将函数内联的展开。如果有两个文件foo.cpp和bar.cpp都需要调用一个相同的内联函数myinline，在编译这两个头文件的时候，需要将函数myinline进行展开，所以它们都需要定义myinline，但是在生成目标文件的时候，因为函数是强类型，就会出错，所以内联函数允许多次一致的定义。而最简单的方法就是将内联函数定义在头文件中，然后使用它的源文件包含它即可。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## `assert`预处理宏</span><br><span class="line">`assert`定义在`&lt;cassert&gt;`头文件中。它使用一个表达式作为它的条件：</span><br></pre></td></tr></table></figure></p>
<p>assert(expr);</p>
<pre><code>对`expr`求值，如果为真，什么也不做，否则输出信息，终止程序执行。它用来检查某种错误条件，即当`expr`满足条件时什么也不做，当它出错时，就结束。

## NODEBUG预处理变量
`assert`的行为依赖于一个名为`NDEBUG`的预处理器变量的状态。如果定义了`NDEBUG`，那么`assert`什么也不做。默认情况下没有定义`NDEBUG`，`assert`执行检查。

## 参考文献
1.《C++ Primer》第五版
</code></pre>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mxxhcm.github.io/2019/12/06/C-function-pointer/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="马晓鑫爱马荟荟">
      <meta itemprop="description" content="记录硕士三年自己的积累">
      <meta itemprop="image" content="/images/favicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mxxhcm's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/12/06/C-function-pointer/" class="post-title-link" itemprop="http://mxxhcm.github.io/page/6/index.html">C/C++ function pointer</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-12-06 15:34:54" itemprop="dateCreated datePublished" datetime="2019-12-06T15:34:54+08:00">2019-12-06</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2020-02-06 12:31:00" itemprop="dateModified" datetime="2020-02-06T12:31:00+08:00">2020-02-06</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/C-C/" itemprop="url" rel="index"><span itemprop="name">C/C++</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="函数指针">函数指针</h2>
<p>函数指针指向的是函数而不是对象。和其他指针一样，函数指针指向某种特定类型。函数的类型由它的返回值和形参共同决定，和函数名无关。例如：<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">lengthCompare</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span> &amp;, <span class="keyword">const</span> <span class="built_in">string</span> &amp;)</span></span>;</span><br></pre></td></tr></table></figure></p>
<p>这个函数的类型是<code>bool(const string &amp;, const string &amp;)</code>，要想声明一个指向该函数的指针，只需要使用指针代替函数名字即可：<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">bool</span> (*pf)(<span class="keyword">const</span> <span class="built_in">string</span> &amp;, <span class="keyword">const</span> <span class="built_in">string</span> &amp;);</span><br></pre></td></tr></table></figure></p>
<p>从声明符中的变量名字开始，<code>pf</code>前面有个<code>*</code>，所以<code>pf</code>是个指针，右侧是形参列表，左侧是函数的返回值类型。因此，<code>pf</code>是一个指向函数的指针，函数的参数是两个<code>const string</code>的引用，返回值是<code>bool</code>类型，指针类型是<code>boo(*)(const string &amp;, const string &amp;)</code></p>
<h2 id="使用函数指针">使用函数指针</h2>
<p>**当我们把函数名作为一个值使用时，这个函数自动的转换成指针。**如下所示的两个语句是等价的：<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pf = lengthCompare;</span><br><span class="line">pf = &amp;lengthCompare;</span><br></pre></td></tr></table></figure></p>
<p>同时，可以直接使用指向函数的指针调用函数，而不需要进行解引用运算。下面的三个语句是等价的：<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">bool</span> b1 = pf(<span class="string">"hello"</span>, <span class="string">"world"</span>);</span><br><span class="line"><span class="keyword">bool</span> b2 = (*pf)(<span class="string">"hello"</span>, <span class="string">"world"</span>);</span><br><span class="line"><span class="keyword">bool</span> b3 = lengthCompare(<span class="string">"hello"</span>, <span class="string">"world"</span>);</span><br></pre></td></tr></table></figure></p>
<p>指向不同函数类型之间的指针不存在转换规则，但是可以为函数指针赋值<code>nullptr</code>或者0，表示它不指向任何函数。</p>
<h2 id="重载函数的指针">重载函数的指针</h2>
<p>当函数重载之后，上下文必须能够告诉编译器到底选择哪个函数，指针必须和重载函数中的某一个精确匹配。</p>
<h2 id="函数指针形参">函数指针形参</h2>
<p>和数组类似，虽然不能定义函数类型的形参，但是形参可以是指向函数的指针。这个时候，形参看起来是函数类型，实际上是当成指针使用。<br>
可以直接把函数作为实参使用，这个时候它会自动的转换成指针：<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//第三个参数是函数类型，它会自动的转换成指向函数的指针</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">useBigger</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span> &amp;s1, <span class="keyword">const</span> <span class="built_in">string</span> &amp;s2, <span class="keyword">bool</span> pf(<span class="keyword">const</span> <span class="built_in">string</span> &amp;, <span class="keyword">const</span> <span class="built_in">string</span> &amp;))</span></span>;</span><br><span class="line"><span class="comment">//第三个参数是显式声明的指向函数的指针</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">useBigger</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span> &amp;s1, <span class="keyword">const</span> <span class="built_in">string</span> &amp;s2, <span class="keyword">bool</span> (*pf)(<span class="keyword">const</span> <span class="built_in">string</span> &amp;, <span class="keyword">const</span> <span class="built_in">string</span> &amp;))</span></span>;</span><br><span class="line"><span class="comment">// 函数lengthCompare会被自动的转换成函数指针</span></span><br><span class="line">useBigger(s1, s2, lengthCompare);</span><br></pre></td></tr></table></figure></p>
<h3 id="使用typedef和delctype简化函数指针">使用<code>typedef</code>和<code>delctype</code>简化函数指针</h3>
<p>可以使用下列语句定义函数指针：<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//下面两个是函数类型：</span></span><br><span class="line"><span class="function"><span class="keyword">typedef</span> <span class="keyword">bool</span> <span class="title">Func</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span>&amp;, <span class="keyword">const</span> <span class="built_in">string</span>&amp;)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">typedef</span> <span class="title">delctype</span><span class="params">(lengthCompare)</span> Func2</span>; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//下面两个是函数指针类型：</span></span><br><span class="line"><span class="function"><span class="keyword">typedef</span> <span class="title">bool</span> <span class="params">(*FuncP)</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span>&amp;, <span class="keyword">const</span> <span class="built_in">string</span>&amp;)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">typedef</span> <span class="title">delctype</span><span class="params">(lengthCompare)</span> *FuncP2</span>;</span><br></pre></td></tr></table></figure></p>
<p>需要注意的是，<code>decltype</code>返回函数类型，不会将函数自动转换成指针类型，只有在前面加上<code>*</code>才能得到指针。</p>
<h2 id="返回指向函数的指针">返回指向函数的指针</h2>
<p>和数组类似，虽然不能返回一个函数，但是可以返回指向函数类型的指针。**然后，我们必须把返回类型手动写成指针，编译器不会自动的将函数返回类型当成对应的指针类型处理。**最好的办法是使用类型别名：<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> F = <span class="keyword">int</span>(<span class="keyword">int</span>*, <span class="keyword">int</span>);   <span class="comment">//F是函数，不是指针</span></span><br><span class="line"><span class="keyword">using</span> PF = <span class="keyword">int</span>(*)(<span class="keyword">int</span>*, <span class="keyword">int</span>);   <span class="comment">//PF是指针类型</span></span><br></pre></td></tr></table></figure></p>
<p>必须注意的是，和函数类型的形参不一样，返回类型不会自动的转换成指针，我们必须显式的将返回类型指定为指针。</p>
<h2 id="auto和decltype作用于函数指针"><code>auto</code>和<code>decltype</code>作用于函数指针</h2>
<p>将<code>decltype</code>作用于某个函数时，它返回函数类型而非指针类型，需要我们显式的加上<code>*</code>表示我们需要返回指针，而非函数本身。当<code>decltype</code>作用于函数指针时，它返回的是函数指针类型。</p>
<h2 id="参考文献">参考文献</h2>
<p>1.《C++ Primer》第五版</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mxxhcm.github.io/2019/12/06/C-function-overload/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="马晓鑫爱马荟荟">
      <meta itemprop="description" content="记录硕士三年自己的积累">
      <meta itemprop="image" content="/images/favicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mxxhcm's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/12/06/C-function-overload/" class="post-title-link" itemprop="http://mxxhcm.github.io/page/6/index.html">C++ function overload</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-12-06 15:34:29" itemprop="dateCreated datePublished" datetime="2019-12-06T15:34:29+08:00">2019-12-06</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-12-07 22:57:09" itemprop="dateModified" datetime="2019-12-07T22:57:09+08:00">2019-12-07</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/C-C/" itemprop="url" rel="index"><span itemprop="name">C/C++</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="函数重载">函数重载</h2>
<p>如果同一个作用域内的几个函数名字相同但是形参列表不同，被称为重载函数。<code>main</code>函数不能被重载。</p>
<h2 id="定义重载函数">定义重载函数</h2>
<p>如下示例，定义了几个重载函数。重载函数的区别在于形参的类型和个数不同。形参可以有名字可以没有名字，也可以有不同的名字，但只要类型和个数相同，就是同一个函数。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">const</span> <span class="keyword">int</span> i)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span> &amp;s)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; &amp;vs)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">const</span> <span class="built_in">set</span>&lt;<span class="keyword">int</span>&gt; &amp;si)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">const</span> <span class="built_in">map</span>&lt;<span class="built_in">string</span>, <span class="keyword">int</span>&gt; &amp;msi)</span></span>;</span><br></pre></td></tr></table></figure>
<h2 id="重载和const形参">重载和<code>const</code>形参</h2>
<p>顶层<code>const</code>不影响传入函数的对象</p>
<ol>
<li>一个拥有顶层<code>const</code>的形参无法和另一个没有顶层<code>const</code>的形参区分开来。</li>
<li>如果形参是某种类型的指针或引用，即形参是底层<code>const</code>，区分其指向的是常量对象还是非常量对象可以实现函数重载。</li>
</ol>
<h2 id="const-cast和重载"><code>const_cast</code>和重载</h2>
<p><code>const_cast</code>在重载函数的情景中有最有用。如下函数：<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">const</span> <span class="built_in">string</span>&amp; <span class="title">stringCompare</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span> &amp;s1, <span class="keyword">const</span> <span class="built_in">string</span> &amp;s2)</span></span>;</span><br></pre></td></tr></table></figure></p>
<p>函数的形参是底层<code>const</code>，可以接收常量或者非常量的实参。但是返回的都是<code>const string</code>的引用，如果输入是两个<code>string</code>的引用，返回一个<code>const string</code>的引用显然是不合理的，这时候就可以使用<code>const_cast</code>了。对上述代码做一个改进：<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="built_in">string</span>&amp; <span class="title">stringCompare</span><span class="params">(<span class="built_in">string</span> &amp;s1, <span class="built_in">string</span> &amp;s2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> &amp;r = stringCompare(<span class="keyword">static_cast</span>&lt;<span class="keyword">const</span> <span class="built_in">string</span> &amp;&gt;(s1), <span class="keyword">static_cast</span>&lt;<span class="keyword">const</span> <span class="built_in">string</span> &amp;&gt;(s2)a);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">static_cast</span>&lt;<span class="built_in">string</span> &amp;&gt;(r);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="调用重载函数">调用重载函数</h2>
<p>函数匹配是指将函数调用功能和重载函数中的某一个关联起来。编译器根据调用的实参和重载集合中每个函数的形参作比较。调用功能重载函数有三种可能结果：</p>
<ol>
<li>找到一个与实参完全匹配的函数，生成调用功能该函数的代码。（包括了类型转换）。为了确定最佳匹配，编译器将实参类型到形参类型的转换划分为了几个等级：
<ol>
<li>精确匹配。包括实参和形参类型完全相同；实参从数组类型或者函数类型转化成相应的指针类型；向实参条件顶层<code>const</code>或者从实参中删除顶层<code>const</code>。</li>
<li>通过<code>const_cast</code>转换实现的匹配。</li>
<li>通过类型提升实现的匹配。</li>
<li>通过算术类型转换实现的匹配。</li>
<li>通过类类型实现的匹配。</li>
</ol>
</li>
<li>找不到任何一个函数和调用的实参匹配，这个时候编译器发出无匹配的错误</li>
<li>多于一个函数可以匹配，但是每一个都不是最佳选择，这种错误叫做二义性调用。</li>
</ol>
<h2 id="重载和作用域">重载和作用域</h2>
<p>正常来说，将函数声明放在局部作用域内是一个不明智的选择。如果真的这么做了，编译器会首先在内层作用域寻找函数的声明，如果找到了，它会隐藏外部作用域的所有同名声明。</p>
<h2 id="参考文献">参考文献</h2>
<p>1.《C++ Primer》第五版</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mxxhcm.github.io/2019/12/06/C-return/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="马晓鑫爱马荟荟">
      <meta itemprop="description" content="记录硕士三年自己的积累">
      <meta itemprop="image" content="/images/favicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mxxhcm's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/12/06/C-return/" class="post-title-link" itemprop="http://mxxhcm.github.io/page/6/index.html">C/C++ return</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-12-06 15:31:03" itemprop="dateCreated datePublished" datetime="2019-12-06T15:31:03+08:00">2019-12-06</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-12-07 15:58:42" itemprop="dateModified" datetime="2019-12-07T15:58:42+08:00">2019-12-07</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/C-C/" itemprop="url" rel="index"><span itemprop="name">C/C++</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="return和返回值类型"><code>return</code>和返回值类型</h2>
<p><code>return</code>语句结束当前正在执行的函数并将控制权返回到函数调用的地方。<br>
<code>return</code>语句有两种形式：<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> ;</span><br><span class="line"><span class="keyword">return</span> expression ;</span><br></pre></td></tr></table></figure></p>
<h2 id="无返回值函数">无返回值函数</h2>
<p>没有返回值的语句只能出现在返回值类型是<code>void</code>的函数中。返回<code>void</code>类型的函数不一定非得有<code>return</code>语句，因为这类函数的最后一句会隐式的执行<code>return</code>。</p>
<h2 id="有返回值函数">有返回值函数</h2>
<p>只要函数的返回值不是<code>return</code>，就一定得有返回值。<code>return</code>语句返回值的类型必须和函数的返回类型相同，或者能隐式的转换成函数的返回类型。</p>
<h3 id="值是如何返回到的">值是如何返回到的</h3>
<p>返回一个值的方式和初始化一个变量或者一个形参的方式完全一样：返回的值用于初始化调用点的一个变量，这个临时变量就是函数调用的结果。<br>
如果函数返回引用，那么这个引用仅仅是它所引用对象的一个别名。</p>
<h3 id="不要返回局部对象的引用或者指针">不要返回局部对象的引用或者指针</h3>
<p>函数完成后，它所占用的存储空间也被释放掉了（函数的栈帧被释放了）。因此，函数终止意味着局部变量的引用将指向不再有效的内存空间，同样的，返回局部对象的指针也是错误的，函数一旦完成，局部对象被释放，指针将指向一个不存在的对象。</p>
<h3 id="返回类类型的的函数和调用运算符">返回类类型的的函数和调用运算符</h3>
<p>函数的返回值可以是应用，指针，类等对象，可以使用函数调用的结果访问结果对象的成员。</p>
<h3 id="引用返回左值">引用返回左值</h3>
<p>函数的返回值类型决定函数调用是否是左值。调用一个返回引用的函数得到左值，其他返回类型得到右值。</p>
<h3 id="列表初始化返回值">列表初始化返回值</h3>
<p>函数可以返回花括号包围的值的列表。这个列表也用来对表示函数返回的临时量进行初始化。如果列表为空，临时量进行值初始化。否则，返回的值由函数的返回类型决定。<br>
如果函数返回的是内置类型，则花括号包围的列表最多包含一个值，而且这个值所占空间不应该大于目标类型的空间。如果函数返回的是类类型，由类本身定义初始值如何使用。</p>
<h3 id="main函数的返回值"><code>main</code>函数的返回值</h3>
<p>对于<code>main</code>来说，允许它没有<code>return</code>语句直接结束，如果控制流到了<code>main</code>函数的结尾处而没有<code>return</code>语句，编译器将隐式的插入一条返回0的<code>return</code>语句。</p>
<h3 id="递归">递归</h3>
<p>如果一个函数调用了它自身，不管这种调用是直接的还是间接的，都称该函数为递归函数。</p>
<h2 id="返回数组指针">返回数组指针</h2>
<p>因为数组不能被拷贝，所以函数不能返回数组。不过可以返回数组的指针或者引用。</p>
<h3 id="声明一个返回数组指针的函数">声明一个返回数组指针的函数</h3>
<p>返回数组指针的函数形式如下所示：<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Type (*function(parameter_list)) [dimension]</span><br></pre></td></tr></table></figure></p>
<p>类似于其他数组的声明，Type表示元素的类型，dimension表示数组的大小，<code>(*function(parameter_list))</code>两端的括号必须在，否则函数的返回类型就是指针的数组。如下示例:<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> (*func(<span class="keyword">int</span> i))[<span class="number">10</span>];</span><br></pre></td></tr></table></figure></p>
<p><code>func</code>带有参数，说明它是一个函数，前面带有解引用操作，说明可以对函数调用的结果执行解引用操作，括号右面说明这是一个维度为10的数组，括号左面是数组类型。</p>
<h3 id="使用尾置返回类型">使用尾置返回类型</h3>
<p>可以使用尾置返回类型，任何函数的定义都能使用尾置返回，但是这种形式一般用于比较复杂的返回类型，比如数组的指针或者数组的引用。形式如下：<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">auto func() -&gt; int (*)[10];</span><br></pre></td></tr></table></figure></p>
<h3 id="使用decltype">使用<code>decltype</code></h3>
<p>可以使用<code>decltype</code>声明返回值类型。比如返回一个指针时，<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> odd[] = &#123;<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>&#125;;</span><br><span class="line"><span class="keyword">int</span> even[] = &#123;<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">10</span>&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">decltype</span>(odd) *func(<span class="keyword">int</span> i)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> (i%<span class="number">2</span>)? &amp;odd: &amp;even;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="返回指向函数的指针">返回指向函数的指针</h2>
<p>和数组类似，虽然不能返回一个函数，但是可以返回指向函数类型的指针。**然后，我们必须把返回类型手动写成指针，编译器不会自动的将函数返回类型当成对应的指针类型处理。**最好的办法是使用类型别名：<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> F = <span class="keyword">int</span>(<span class="keyword">int</span>*, <span class="keyword">int</span>);   <span class="comment">//F是函数，不是指针</span></span><br><span class="line"><span class="keyword">using</span> PF = <span class="keyword">int</span>(*)(<span class="keyword">int</span>*, <span class="keyword">int</span>);   <span class="comment">//PF是指针类型</span></span><br></pre></td></tr></table></figure></p>
<p>必须注意的是，和函数类型的形参不一样，返回类型不会自动的转换成指针，我们必须显式的将返回类型指定为指针。</p>
<h3 id="auto和decltype作用于函数指针"><code>auto</code>和<code>decltype</code>作用于函数指针</h3>
<p>将<code>decltype</code>作用于某个函数时，它返回函数类型而非指针类型，需要我们显式的加上<code>*</code>表示我们需要返回指针，而非函数本身。当<code>decltyp</code>作用于函数指针时，它返回的是函数指针类型。</p>
<h2 id="参考文献">参考文献</h2>
<p>1.《C++ Primer》第五版</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mxxhcm.github.io/2019/12/05/UNIX-Signals/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="马晓鑫爱马荟荟">
      <meta itemprop="description" content="记录硕士三年自己的积累">
      <meta itemprop="image" content="/images/favicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mxxhcm's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/12/05/UNIX-Signals/" class="post-title-link" itemprop="http://mxxhcm.github.io/page/6/index.html">UNIX Signals</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-12-05 10:20:16" itemprop="dateCreated datePublished" datetime="2019-12-05T10:20:16+08:00">2019-12-05</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2020-02-24 18:50:58" itemprop="dateModified" datetime="2020-02-24T18:50:58+08:00">2020-02-24</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/UNIX/" itemprop="url" rel="index"><span itemprop="name">UNIX</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="program-error-signals">Program Error Signals</h2>
<p>当操作系统或者计算机本身检测到一个严重的程序错误时，它就会产生program error signals。一般来说，这些signals都表示你的程序出现了很严重的问题，没有办法继续进行计算了。<br>
一些程序为了在进程终止前进行清理，会建立handle program。这个handler结束的时候应该指定该signal的默认动作或者重新raise这个signal，这样子和原来没有建立signal处理程序的时候相比，仅仅多了清理的一部分，其他还和原来一样。一般来说，这些signal的默认动作都是终止进程。如果不是<code>raise</code>或者<code>kill</code>发出的这些signals，选择block或者忽略这些singals或者建立handlers让它们正常返回，程序可能会崩溃。<br>
当某一个program error signals终止一个进程的时候，它会写一个core dump文件记录进程终止状态。这个core dump文件的名字叫做core，保存在进程终止时所在目录。（在ubuntu中，没有保存文件，而是直接输出了出来[3]）</p>
<h3 id="sigfpe"><code>SIGFPE</code></h3>
<h3 id="sigill"><code>SIGILL</code></h3>
<h3 id="sigbus"><code>SIGBUS</code></h3>
<h3 id="sigsegv"><code>SIGSEGV</code></h3>
<h3 id="sigabrt"><code>SIGABRT</code></h3>
<h3 id="sigtrap"><code>SIGTRAP</code></h3>
<h3 id="sigemt"><code>SIGEMT</code></h3>
<h2 id="terminal-signals">Terminal Signals</h2>
<p>这一小节介绍的signal都是由于terminate一个进程的。它们之间的区别在于使用目的不同，并且程序可能对不同的signals有不同的处理方法。<br>
处理这些signals的目的是让进程在terminate之前能够进行合适的清理。比如，删除临时文件等等。</p>
<h3 id="sigint-程度最轻"><code>SIGINT</code>（程度最轻）</h3>
<p><code>SIGINT</code>是程序中断singal，当用户输入INTR字符（通常是C-c）时中断，发送到前台进程组的所有进程。</p>
<h3 id="sigtem-正常的kill"><code>SIGTEM</code>（正常的kill）</h3>
<p>这个signal可以被blocked, handled和忽略，shell命令的<code>kill(1)</code>默认会产生<code>SIGTERM</code> signal。</p>
<blockquote>
<p>It is the normal way to politely ask a program to terminate.</p>
</blockquote>
<h3 id="sigquit-可以忽略的最harvest信号"><code>SIGQUIT</code>（可以忽略的最harvest信号）</h3>
<p><code>SIGQUIT</code>和<code>SIGINT</code>很像，会中断一个进程，但是它被QUIT（通常是C-\）控制，发送给前台进程组的所有进程。并且当它terminate一个进程时，它会产生一个core dump，就像一个程序出错信号一样。<br>
在处理<code>SIGQUIT</code>的时候，最好不进行某些cleanups。比如，如果程序创建临时文件，处理其他termination时，最好把临时文件给删除了，但是对于<code>SIGQUIT</code>来说，最好不把它们给删了，因为用户可以用它们查找原因。</p>
<h3 id="sigkill-不能被捕捉或者忽略"><code>SIGKILL</code>（不能被捕捉或者忽略）</h3>
<p><code>SIGKILL</code> signal用于立刻终止程序。这是两个不能被捕捉或者忽略的信号之一（另一个是作业控制信号SIGSTOP）。它向系统管理员提供了一种可以杀死任一进程的可靠方法。<br>
这个singal通常是显式请求。因为他不能被handled，所以一般把它作为最后一个选择，在尝试了C-c或者<code>SIGTERM</code>不起作用之后，最后再使用<code>SIGKILL</code>。</p>
<h3 id="sighup"><code>SIGHUP</code></h3>
<p>如果终端接口检测到一个连接断开（可能因为网络或者电话连接断了），就将这个signal报告和这个终端相关的控制进程（会话首进程），会话首进程可能在后台，而上述几个SIGNAL都是发送给前台进程（除了SIGKILL)。</p>
<h3 id="其他">其他</h3>
<blockquote>
<p>The default behavior of SIGINT, SIGTERM, SIGQUIT and SIGHUP is to kill the program. However applications are allowed to install a handler for these signals. So the actual behavior of applications when they receive these signals is a matter of convention (which each application may or may not follow), not of system design.<br>
SIGINT is the “weakest” of the lot. Its conventional meaning is “stop what you’re doing right now and wait for further user input”. It’s the signal generated by Ctrl+C in a terminal. Non-interactive programs generally treat it like SIGTERM.<br>
SIGTERM is the “normal” kill signal. It tells the application to exit cleanly. The application might take time to save its state, to free resources such as temporary files that would otherwise stay behind, etc. An application that doesn’t want to be interrupted during a critical application might ignore SIGTERM for a while.<br>
SIGQUIT is the harshest of the ignorable signals. It’s meant to be used when an application is misbehaving and needs to be killed now, and by default it traditionally left a core dump file (modern systems where most users wouldn’t know what a core file is tend to not produce them by default). Applications can set a handler but should do very little (in particular not save any state) because the intent of SIGQUIT is to be used when something is seriously wrong.<br>
SIGKILL never fails to kill a running process, that’s the point. Other signals exist to give the application a chance to react.<br>
SIGHUP is about the same as SIGTERM in terms of harshness, but it has a specific role because it’s automatically sent to applications running in a terminal when the user disconnects from that terminal (etymologically, because the user was connecting via a telephone line and the modem hung up). SIGHUP is often involuntary, unlike SIGTERM which has to be sent explicitly, so applications should try to save their state on a SIGHUP. SIGHUP also has a completely different conventional meaning for non-user-facing applications (daemons), which is to reload their configuration file.</p>
</blockquote>
<h2 id="job-control-signals">Job Control Signals</h2>
<h3 id="sigcld"><code>SIGCLD</code></h3>
<h3 id="sigcont"><code>SIGCONT</code></h3>
<h3 id="sigstop"><code>SIGSTOP</code></h3>
<h3 id="sigstp"><code>SIGSTP</code></h3>
<p>交互停止信号，当用户在终端上按下(C-z)时，终端驱动程序产生这个信号，发送到前台进程组的所有进程。</p>
<h3 id="sigttin"><code>SIGTTIN</code></h3>
<h3 id="sigttou"><code>SIGTTOU</code></h3>
<h2 id="参考文献">参考文献</h2>
<p>1.<a href="https://unix.stackexchange.com/questions/251195/difference-between-less-violent-kill-signal-hup-1-int-2-and-term-15" target="_blank" rel="noopener">https://unix.stackexchange.com/questions/251195/difference-between-less-violent-kill-signal-hup-1-int-2-and-term-15</a><br>
2.<a href="https://www.gnu.org/software/libc/manual/html_node/Termination-Signals.html#Termination-Signals" target="_blank" rel="noopener">https://www.gnu.org/software/libc/manual/html_node/Termination-Signals.html#Termination-Signals</a><br>
3.<a href="https://stackoverflow.com/questions/2065912/core-dumped-but-core-file-is-not-in-the-current-directory" target="_blank" rel="noopener">https://stackoverflow.com/questions/2065912/core-dumped-but-core-file-is-not-in-the-current-directory</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/5/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><span class="space">&hellip;</span><a class="page-number" href="/page/34/">34</a><a class="extend next" rel="next" href="/page/7/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/favicon.jpg" alt="马晓鑫爱马荟荟">
            
              <p class="site-author-name" itemprop="name">马晓鑫爱马荟荟</p>
              <p class="site-description motion-element" itemprop="description">记录硕士三年自己的积累</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">334</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">25</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">75</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/mxxhcm" title="GitHub &rarr; https://github.com/mxxhcm" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="mailto:mxxhcm@gmail.com" title="E-Mail &rarr; mailto:mxxhcm@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            </div>
          

          

          
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">马晓鑫爱马荟荟</span>

  

  
</div>


  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v6.6.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script src="/js/src/utils.js?v=6.6.0"></script>

  <script src="/js/src/motion.js?v=6.6.0"></script>



  
  


  <script src="/js/src/affix.js?v=6.6.0"></script>

  <script src="/js/src/schemes/pisces.js?v=6.6.0"></script>



  

  


  <script src="/js/src/bootstrap.js?v=6.6.0"></script>



  



  






<!-- LOCAL: You can save these files to your site and update links -->
    
        
        <link rel="stylesheet" href="https://aimingoo.github.io/gitmint/style/default.css">
        <script src="https://aimingoo.github.io/gitmint/dist/gitmint.browser.js"></script>
    
<!-- END LOCAL -->

    

    







  





  

  

  

  

  
  

  
  
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
  

  


  
  

  

  

  

  

  

  

</body>
</html>
