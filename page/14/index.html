<!DOCTYPE html>












  


<html class="theme-next pisces use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
































<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=6.6.0" rel="stylesheet" type="text/css">



  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.jpg?v=6.6.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.jpg?v=6.6.0">










<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '6.6.0',
    sidebar: {"position":"left","display":"always","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="记录硕士三年自己的积累">
<meta property="og:type" content="website">
<meta property="og:title" content="mxxhcm&#39;s blog">
<meta property="og:url" content="http://mxxhcm.github.io/page/14/index.html">
<meta property="og:site_name" content="mxxhcm&#39;s blog">
<meta property="og:description" content="记录硕士三年自己的积累">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="mxxhcm&#39;s blog">
<meta name="twitter:description" content="记录硕士三年自己的积累">



  <link rel="alternate" href="/atom.xml" title="mxxhcm's blog" type="application/atom+xml">




  <link rel="canonical" href="http://mxxhcm.github.io/page/14/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>mxxhcm's blog</title>
  












  <noscript>
  <style>
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion .logo-line-before i { left: initial; }
    .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">mxxhcm's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mxxhcm.github.io/2018/12/22/convex-optimization-chapter-1-Introduction/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="马晓鑫爱马荟荟">
      <meta itemprop="description" content="记录硕士三年自己的积累">
      <meta itemprop="image" content="/images/favicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mxxhcm's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/12/22/convex-optimization-chapter-1-Introduction/" class="post-title-link" itemprop="http://mxxhcm.github.io/page/14/index.html">convex optimization chapter 1 Introduction</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-12-22 13:44:11" itemprop="dateCreated datePublished" datetime="2018-12-22T13:44:11+08:00">2018-12-22</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-05-07 00:22:27" itemprop="dateModified" datetime="2019-05-07T00:22:27+08:00">2019-05-07</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/凸优化笔记/" itemprop="url" rel="index"><span itemprop="name">凸优化笔记</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="数学优化-mathematical-optimization">数学优化(mathematical optimization)</h2>
<h3 id="定义">定义</h3>
<p>一个数学优化问题（或者称为优化问题）通常有如下的形式：<br>
\begin{align*}<br>
&amp;minimize \quad f_0(x)\<br>
&amp;subject \ to \quad f_i(x) \le b_i, i = 1,\cdots,m.<br>
\end{align*}<br>
其中$x = (x_1, \cdots, x_m)$被称为优化变量(optimization variables), 或者决策变量(decision variables)。 $f_0(x):R^n\rightarrow R$是目标函数(object function), $f_i(x):R^n\rightarrow R,i =1,\cdots,m$是约束函数(constraint functions)。 常量(constraints) $b_1,\cdots,b_m$是约束的限界(limits)或者边界(bounds), $b_i$可以为0，这个可以通过移项构造出新的$f_i(x)$实现。如果向量$x$使得目标函数取得最小的值，并且满足所有的约束条件，那么这个向量被称为最优解$x^*$。</p>
<h4 id="线性优化-linear-program">线性优化(linear program)</h4>
<p>目标函数和约束函数$f_0,\cdots,f_m$是线性的, 它们满足不等式：<br>
$$f_i(\alpha x+\beta y) = \alpha f_i(x) + \beta f_i(y)$$<br>
对于所有的$x,y \epsilon R^n$和所有的$\alpha, \beta \epsilon R$。<br>
线性优化是凸优化的一个特殊形式, 它的目标函数和约束函数都是线性的等式或者不等式。</p>
<h4 id="非线性问题-non-linear-problem">非线性问题(non-linear problem)</h4>
<p>如果优化问题不是线性的，就是非线性问题。只要目标函数或者约束函数至少有一个不是线性的，那么这个优化问题就是非线性优化问题。</p>
<h4 id="凸问题-convex-problem">凸问题(convex problem)</h4>
<p>凸问题是目标函数和约束函数都是凸的的优化问题，它们满足：<br>
$$f_i(\alpha x + \beta y) \le \alpha f_i(x) + \beta f_i(y)$$<br>
对于所有的$x,y \epsilon R^n$和所有的$\alpha, \beta  \epsilon R$且$\alpha + \beta = 1, \alpha \ge 0, \beta \ge 0$。<br>
凸性比线性的范围更广，不等式取代了更加严格的等式，不等式只有在$\alpha$和$\beta$取一些特定值时才成立。凸优化和线性问题以及非线性问题都有交集，它是线性问题的超集(superset)，是非线性问题的子集(subset)。技术上来说，nonlinear problem包括convex optimization(除了linear programming), 可以用来描述不确定是非凸的问题。<br>
Nonlinear program &gt; convex problem &gt; linear problem</p>
<h3 id="示例">示例</h3>
<h4 id="组合优化-portfolio-optimization">组合优化(portfolio optimization)</h4>
<p>变量：不同资产的投资数量<br>
约束：预算，每个资产最大/最小投资数量，至少要得到的回报<br>
目标：所有的风险，获利的变化</p>
<h4 id="电子设备的元件大小-device-sizing-in-electronic-circuits">电子设备的元件大小(device sizing in electronic circuits)</h4>
<p>变量：元件的宽度和长度<br>
约束：生产工艺的炼制，时间要求，面积等<br>
目标：节约能耗</p>
<h4 id="数据拟合-data-fitting">数据拟合(data fitting)</h4>
<p>变量：模型参数<br>
约束：先验知识，参数约束条件<br>
目标：错误率</p>
<h3 id="优化问题求解-solving-optimization-problems">优化问题求解(solving optimization problems)</h3>
<p>所有的问题都是优化问题。<br>
绝大部分优化问题我们解不出来。</p>
<h4 id="一般的优化问题-general-optimization-problem">一般的优化问题(general optimization problem)</h4>
<ul>
<li>很难解出来。</li>
<li>做一些compromise，比如要很长时间才能解出来，或者并不总能找到解。</li>
</ul>
<h4 id="一些例外-some-exceptions">一些例外(some exceptions)</h4>
<ul>
<li>最小二乘问题(least-squares problems)</li>
<li>线性规划问题(linear programming problems)</li>
<li>凸优化问题(convex optimization problems)</li>
</ul>
<h2 id="最小二乘-least-squares-和线性规划-linear-programming">最小二乘(least-squares)和线性规划(linear programming)</h2>
<p>least-squares和linear programming是凸优化问题中最有名的两个子问题。</p>
<h3 id="最小二乘问题-least-squares-problems">最小二乘问题(least-squares problems)</h3>
<p>最小二乘问题是一个无约束的优化问题，它的目标函数是项$a_i^Tx-b_i$的平方和。<br>
\begin{align*}<br>
minimize \quad f_0(x) &amp;= {||Ax-b||}^2_2\<br>
&amp;=\sum_{i=1}<sup>k(a_i</sup>Tx-b_i)^2<br>
\end{align*}</p>
<h4 id="求解-solving-least-squares-problems">求解(solving least-squares problems)</h4>
<ul>
<li>最小二乘问题的解可以转换为求线性方程组$(A^TA)x = A<sup>Tb$的解。线性代数上我们学过该方程组的解析解为$x=(A</sup>TA)<sup>{-1}A</sup>Tb$。</li>
<li>时间复杂度是$n^2k = n*k*n+n*k+n*n*n, (k &gt; n)$(转置，求逆，矩阵乘法)。</li>
<li>该问题具有可靠且高效的求解算法。</li>
<li>是一个很成熟的算法</li>
</ul>
<h4 id="应用-using-least-squares">应用(using least-squares)</h4>
<p>很容易就可以看出来一个问题是最小二乘问题，我们只需要验证目标函数是不是二次函数，以及对应的二次型是不是正定的即可。</p>
<h5 id="加权最小二乘-weighted-least-squares">加权最小二乘(weighted least-squares)</h5>
<p>加权最小二乘形式如下:<br>
$$\sum_{i=1}^k \omega_i(a_i<sup>Tx-b_i)</sup>2,$$<br>
其中$\omega_1,\cdots,\omega_k$是正的，被最小化。 这里选出权重$\omega$来体现不同项$a_i^Tx-b_i$的比重, 或者仅仅用来影响结果。</p>
<h5 id="正则化-regularization">正则化(regularization)</h5>
<p>目标函数中被加入了额外项, 形式如下：<br>
$$\sum_{i=1}<sup>k(a_i</sup>Tx-b_i)^2 + \rho \sum_{i=1}^n x_i^2,$$<br>
正则项是用来惩罚大的$x$, 求出一个仅仅最小化第一个求和项的不出来的好结果。合理的选择参数$\rho$在原始的目标函数和正则化项之间做一个trade-off, 使得$\sum_{k=1}<sup>i(a_i</sup>T - b_i)^2$和$\rho \sum_{k=1}^n x_i^2$都很小。<br>
正则化项和加权最小二乘会在第六章中讲到，它们的统计解释在第七章给出。</p>
<h3 id="线性规划-linear-programming">线性规划(linear programming)</h3>
<p>线性规划问题装目标函数和约束函数都是线性的：<br>
\begin{align*}<br>
&amp;minimize \quad c^Tx\<br>
&amp;subject \ to \quad a_i^T \le b_i, i = 1, \cdots, m.<br>
\end{align*}<br>
其中向量$c,a_1,\cdots,a_m \epsilon R^n$, 和标量$b_1,\cdots, b_m \epsilon R$是指定目标函数和约束函数条件的参数。</p>
<h4 id="求解线性规划-solving-linear-programs">求解线性规划(solving linear programs)</h4>
<ul>
<li>除了一个特例，没有解析解公式(和least-squares不同)；</li>
<li>有可靠且高效的算法实现；</li>
<li>时间复杂度是$O(n^2m)$, m是约束条件的个数, m是维度$；</li>
<li>是一个成熟的方法。</li>
</ul>
<h4 id="应用-using-linear-programs">应用(using linear programs)</h4>
<p>一些应用直接使用线性规划的标准形式,或者其中一个标准形式。在很多时候，原始的优化问题没有一个标准的线性规划形式，但是可以被转化为等价的线性规划形式。比如切米雪夫近似问题(Chebyshev approximation problem)。它的形式如下：<br>
$$minimize \quad max_{i=1,\cdots,k}|a_i^Tx-b_i|$$<br>
其中$x\epsilon R^n$是变量，$a_1,\cdots,a_k \epsilon R^n, b_1,\cdots,b_k \epsilon R$是实例化的问题参数,和least-squares相似的是，它们的目标函数都是项$a^T_ix-b_i$。不同之处在于，least-squares用的是该项的平方和作为目标函数，而Chebyshev approximation中用的是绝对值的最大值。Chebyshev approximation problem的目标函数是不可导的(max operation), least-squares problem的目标函数是二次的(quadratic), 因此可导的(differentiable)。</p>
<h2 id="凸优化-convex-optimization">凸优化(Convex optimization)</h2>
<p>凸优化问题是优化问题的一种,它的目标函数和优化函数都是凸的。<br>
具有以下形式的问题是一种凸优化问题：<br>
\begin{align*}<br>
&amp;minimize \quad f_0(x)\<br>
&amp;subject \ to \quad f_i(x) \le b_i, i = 1,\cdots,m.<br>
\end{align*}<br>
其中函数$f_0,\cdots,f_m:R^n \rightarrow R$是凸的(convex), 如满足<br>
$$f_i(\alpha x+ \beta y) \le \alpha f_i(x) + \beta f_i(y)$$<br>
对于所有的$x,y \epsilon R^n$和所有的$\alpha, \beta \epsilon R$且$\alpha + \beta = 1, \alpha \ge 0, \beta \ge 0$。<br>
或者：<br>
$$f_i(\theta x+ (1-\theta) y) \le \theta f_i(x) + (1 - \theta) f_i(y)$$<br>
其中$\theta \epsilon [0,1]$。<br>
课上有人问这里为$\theta$是0和1, 有没有什么物理意义，Stephen Boyd回答说这是定义，就是这么定义的。<br>
The least-squares和linear programming problem都是convex optimization problem的特殊形式。线性函数(linear functions)也是convex，它们正处在边界上，它们的曲率(curvature)为0。一种方式是用正曲率去描述凸性。</p>
<h3 id="凸优化求解-solving-convex-optimization-problems">凸优化求解(solving convex optimization problems)</h3>
<ul>
<li>没有解析解；</li>
<li>有可靠且有效的算法；</li>
<li>时间复杂度正比于$max{n^3, n^2m,F},$F$是评估$f$和计算一阶导数和二阶导数的时间；</li>
<li>有成熟的方法，如interior-point methods。</li>
</ul>
<h3 id="凸优化的应用-using-convex-optimization">凸优化的应用(using convex optimization)</h3>
<p>将实际问题形式化称凸优化问题。</p>
<h2 id="非线性优化-nonlinear-optimization">非线性优化(Nonlinear optimization)</h2>
<h3 id="非线性优化">非线性优化</h3>
<p>非线性优化用来描述目标函数和约束函数都是非线性函数(但不是凸的)优化问题。因为凸优化问题包括least-squares和linear programming, 它们是线性的。刚开始给出的优化问题就是非线性优化问题，目前没有有效的方法解该问题。目前有一些方法来解决一般的非线性问题，但是都做了一些compromise。</p>
<h4 id="局部优化-local-optimization">局部优化(local optimization)</h4>
<p>局部优化是非线性优化的一种解法，compromise是寻找局部最优点，而不是全局最优点，在可行解附近最小化目标函数，不保证能得到一个最小的目标值。<br>
局部优化需要随机初始化一个初值，这个初值很关键，很大程度的影响了局部解得到的目标值, 也就是说是一个初值敏感的算法。关于初始值和全局最优值距离有多远并没有很多有用的信息。局部优化对于算法的参数值很敏感，需要根据具体问题去具体调整。<br>
使用局部优化的方法比解least-squares problems, linear program, convex optimization problem更有技巧性，因为它牵扯到算法的选择，算法参数的选择，以及初值的选取。</p>
<h4 id="全局优化-global-optimization">全局优化(global optimization)</h4>
<p>全局优化也是非线性优化的一种解法, 在全局优化中，优化目标的全局最优解被找到， compromise是效率。</p>
<h4 id="凸优化问题在非凸优化问题中的应用-role-of-convex-optimization-in-nonconvex-problems">凸优化问题在非凸优化问题中的应用(role of convex optimization in nonconvex problems)</h4>
<h5 id="初始化局部优化-initialization-for-local-optimization">初始化局部优化(initialization for local optimization)</h5>
<h5 id="用于非凸优化的凸的启发式搜索-convex-heuristics-for-nonconvex-optimization">用于非凸优化的凸的启发式搜索(convex heuristics for nonconvex optimization)</h5>
<h5 id="全局最优的边界-bounds-for-global-optimization">全局最优的边界(bounds for global optimization)</h5>
<h2 id="大纲-outline">大纲(outline)</h2>
<h3 id="理论-part-one-theory">理论(part one: Theory)</h3>
<p>第一部分是理论，给出一些概念和定义，第一章是Introduction, 第二章和第三章分别介绍凸集(convex set)和凸函数(convex function), 第四章介绍凸优化问题， 第五章引入拉格朗日对偶性。</p>
<h3 id="应用-part-two-applications">应用(part two: Applications)</h3>
<p>第二部分主要给出凸优化在一些领域的应用，如概率论与数理统计，经济学，计算几何以及数据拟合等领域。<br>
凸优化如何应用在实践中。</p>
<h3 id="算法-part-three-algorithms">算法(part three: Algorithms)</h3>
<p>第三部分给出了凸优化的数值解法，如牛顿法(Newton’s algorithm)和内点法(interior-point)。<br>
第三部分有三章，分别包含了无约束优化，等式约束优化和不等式约束优化。章节之间是递进的，解一个问题被分解为解一系列简单问题。二次优化问题(包括，如least-squares)是最底层的基石，它可以通过线性方程组精确求解。牛顿法，在第十章和第十一章介绍到，是下个层次，无约束问题或者等式约束问题被转化成一系列二次优化问题的求解。第十一章介绍了内点法，是最顶层, 这些方法将不等式约束问题转化为一系列无约束或者等式约束的问题。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mxxhcm.github.io/2018/12/22/latex笔记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="马晓鑫爱马荟荟">
      <meta itemprop="description" content="记录硕士三年自己的积累">
      <meta itemprop="image" content="/images/favicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mxxhcm's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/12/22/latex笔记/" class="post-title-link" itemprop="http://mxxhcm.github.io/page/14/index.html">latex笔记</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-12-22 10:08:26" itemprop="dateCreated datePublished" datetime="2018-12-22T10:08:26+08:00">2018-12-22</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-06-01 16:03:44" itemprop="dateModified" datetime="2019-06-01T16:03:44+08:00">2019-06-01</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/工具/" itemprop="url" rel="index"><span itemprop="name">工具</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="命令重命名">命令重命名</h2>
<p>在写博客时也能用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">\newcommand&#123;\mmm&#125;&#123;\mathbf&#125;</span><br><span class="line">\mmm&#123;x&#125;</span><br><span class="line">\bf&#123;x&#125;</span><br></pre></td></tr></table></figure>
<p>$\newcommand{\mmm}{\mathbf}$<br>
$\mmm{x}$<br>
$\bf{x}$</p>
<h2 id="常用latex符号">常用Latex符号</h2>
<h3 id="各种乘法">各种乘法</h3>
<p>$\times$ \times<br>
$*$ *<br>
$\cdot$ \cdot<br>
$\bullet$ \bullet<br>
$\otimes$ \otimes<br>
$\circ$ \circ<br>
$\odot$ \odot</p>
<h3 id="上下花括号">上下花括号</h3>
<p>$\overbrace{x+y}^{1+2}=\underbrace{z}_3$ \overbrace{x+y}^{1+2}=\underbrace{z}_3</p>
<h3 id="括号">括号</h3>
<p>\left(\frac{1}{2}\right)    $\left(\frac{1}{2} \right)$<br>
\left[\frac{1}{2} \right]    $\left[\frac{1}{2} \right]$<br>
\left\{\frac{1}{2} \right\}    $\left\{\frac{1}{2} \right\}$</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\begin&#123;cases&#125;x=1\\\\y=x\end&#123;cases&#125;</span><br></pre></td></tr></table></figure>
<p>$$\begin{cases}x=1\\y=x\end{cases}$$</p>
<h3 id="矩阵">矩阵</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\begin&#123;matrix&#125;1&amp;2\\\\3&amp;4\end&#123;matrix&#125;</span><br></pre></td></tr></table></figure>
<p>$$\begin{matrix}1&amp;2\\3&amp;4\end{matrix}$$</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\begin&#123;pmatrix&#125;1&amp;2\\\\3&amp;4\end&#123;pmatrix&#125;</span><br></pre></td></tr></table></figure>
<p>$$\begin{pmatrix}1&amp;2\\3&amp;4\end{pmatrix}$$</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\begin&#123;bmatrix&#125;1&amp;2\\\\3&amp;4\end&#123;bmatrix&#125;</span><br></pre></td></tr></table></figure>
<p>$$\begin{bmatrix}1&amp;2\\3&amp;4\end{bmatrix}$$</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\begin&#123;Bmatrix&#125;1&amp;2\\\\3&amp;4\end&#123;Bmatrix&#125;</span><br></pre></td></tr></table></figure>
<p>$$\begin{Bmatrix}1&amp;2\\3&amp;4\end{Bmatrix}$$</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\begin&#123;vmatrix&#125;1&amp;2\\\\3&amp;4\end&#123;vmatrix&#125;</span><br></pre></td></tr></table></figure>
<p>$$\begin{vmatrix}1&amp;2\\3&amp;4\end{vmatrix}$$</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\begin&#123;Vmatrix&#125;1&amp;2\\\\3&amp;4\end&#123;Vmatrix&#125;</span><br></pre></td></tr></table></figure>
<p>$$\begin{Vmatrix}1&amp;2\\3&amp;4\end{Vmatrix}$$</p>
<h3 id="希腊字母">希腊字母</h3>
<p>$\eta$ \eta<br>
$\gamma$ \gamma<br>
$\epsilon$ \epsilon<br>
$\varepsilon$ \varepsilon<br>
$\lambda$ \lambda<br>
$\Lambda$ \Lambda<br>
$\sigma$ \sigma<br>
$\Sigma$ \Sigma<br>
$\phi$ \phi<br>
$\varphi$ \varphi<br>
$\Phi$ \Phi<br>
$\Delta$ \Delta<br>
$\delta$ \delta<br>
$\nabla$ \nabla<br>
$\zeta$ \zeta<br>
$\xi$ \xi</p>
<h3 id="字体">字体</h3>
<p>$\mathbf{A}$ \mathbf{A}<br>
$\boldsymbol{A}$ \boldsymbol{A}<br>
$\mathit{A}$ \mathit{A}<br>
$\mathrm{A}$ \mathrm{A}<br>
$\mathcal{A}$ \mathcal{A}</p>
<h3 id="数学运算">数学运算</h3>
<p>求积$\prod$ \prod<br>
求和$\sum$ \sum<br>
积分$\int$ \int<br>
根号$\sqrt{x}$ \sqrt{x}<br>
根号$\sqrt[4]{y}$ \sqrt[4]{y}<br>
分数$(\frac{1}{2})$ (\frac{1}{2})<br>
分数$\left(\frac{1}{2}\right)$ \left(\frac{1}{2}\right)<br>
无穷$\infty$ \infty<br>
期望$\mathbb{E}$ \mathbb{E}<br>
范数$\Vert$ \Vert<br>
$\mathbb{\pi}$ \mathbb{\pi} # 可以看出来，没有起作用，因为mathbb没有只支持大写字母。<br>
$\pm$ \pm<br>
$\mp$ \mp</p>
<h3 id="集合">集合</h3>
<p>真含于$\subset$ \subset<br>
含于$\subsetneqq$ \subsetneqq<br>
真包含$\supset$ \supset<br>
包含$\supsetneqq$ \supsetneqq<br>
交$\cap$ \cap<br>
并$\cup$ \cup<br>
属于$\in$ \in<br>
$\succ$ \succ<br>
$\succeq$ \succeq<br>
$\prec$ \prec<br>
$\preceq$ \preceq<br>
空集$\emptyset$ \emptyset</p>
<h3 id="谓词逻辑">谓词逻辑</h3>
<p>否定$\neg$ \neg<br>
任意$\forall$ \forall<br>
存在$\exists$ \exists<br>
合取$\wedge$ \wedge<br>
析取$\vee$ \vee</p>
<h3 id="空格">空格</h3>
<p>$a\qquad b$ a\qquad b<br>
$a\quad b$ a\quad b<br>
$a\ b$ a\ b<br>
$a;b$ a;b<br>
$a,b$ a,b<br>
$ab$ ab<br>
$a!b$ a!b</p>
<h3 id="其他">其他</h3>
<p>长竖线$\big|$ \big|<br>
长竖线$\Big|$ \Big|<br>
长竖线$\bigg|$ \bigg|<br>
长竖线$\Bigg|$ \Bigg|<br>
双箭头$\Leftrightarrow$ \Leftrightarrow<br>
左箭头$\leftarrow$ \leftarrow<br>
右箭头$\rightarrow$ \rightarrow<br>
上划线$\overline{A}$ \overline{A}<br>
下划线$\underline{A}$ \underline{A}<br>
$\backslash$ \backslash<br>
$\sim$ \sim</p>
<h2 id="列表">列表</h2>
<h3 id="有序列表">有序列表</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">\begin&#123;enumerate&#125;</span><br><span class="line"> \item First.</span><br><span class="line"> \item Second.</span><br><span class="line"> \item Third.</span><br><span class="line">\end&#123;enumerate&#125;</span><br></pre></td></tr></table></figure>
<p>效果如下：</p>
<ol>
<li>First.</li>
<li>Second.</li>
<li>Third.</li>
</ol>
<h3 id="无序列表">无序列表</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">\begin&#123;itemize&#125;</span><br><span class="line"> \item &#123;First.&#125;</span><br><span class="line"> \item &#123;Second.&#125;</span><br><span class="line"> \item &#123;Third.&#125;</span><br><span class="line">\end&#123;itemize&#125;</span><br></pre></td></tr></table></figure>
<p>效果如下：</p>
<ul>
<li>First.</li>
<li>Second.</li>
<li>Third.</li>
</ul>
<h2 id="跨多行公式对齐">跨多行公式对齐</h2>
<p><strong>注意：不要忘了每行后面的两个\</strong></p>
<h3 id="示例1">示例1</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">\begin&#123;align*&#125;</span><br><span class="line">f(x) &amp;= (3 + 4)\^2 + 4\\</span><br><span class="line">&amp;= 7\^2 + 4\\</span><br><span class="line">&amp;= 49 + 4\\</span><br><span class="line">&amp;= 53</span><br><span class="line">\end&#123;align*&#125;</span><br></pre></td></tr></table></figure>
<p>效果如下：<br>
\begin{align*}<br>
f(x) &amp;= (3 + 4)^2 + 4\\<br>
&amp;= 7^2 + 4\\<br>
&amp;= 49 + 4\\<br>
&amp;= 53<br>
\end{align*}</p>
<h3 id="示例2">示例2</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">\begin&#123;align*&#125;</span><br><span class="line">v &amp;= R + \gamma Pv\\</span><br><span class="line">(1-\gamma P) &amp;= R\\</span><br><span class="line">v &amp;= (1 - \gamma P)\^&#123;-1&#125; R</span><br><span class="line">\end&#123;align*&#125;</span><br></pre></td></tr></table></figure>
<p>\begin{align*}<br>
v &amp;= R + \gamma Pv\\<br>
(1-\gamma P) &amp;= R\\<br>
v &amp;= (1 - \gamma P)^{-1} R<br>
\end{align*}</p>
<h2 id="参考文献">参考文献</h2>
<p>1.<a href="http://blog.huangyuanlove.com/2018/02/27/LaTeX%E7%AC%94%E8%AE%B0-%E5%85%AD/" target="_blank" rel="noopener">http://blog.huangyuanlove.com/2018/02/27/LaTeX笔记-六/</a><br>
2.<a href="https://blog.csdn.net/xxzhangx/article/details/52778539" target="_blank" rel="noopener">https://blog.csdn.net/xxzhangx/article/details/52778539</a><br>
3.<a href="https://blog.csdn.net/hunauchenym/article/details/7330828" target="_blank" rel="noopener">https://blog.csdn.net/hunauchenym/article/details/7330828</a><br>
4.<a href="http://geowu.blogspot.com/2012/10/latex_25.html" target="_blank" rel="noopener">http://geowu.blogspot.com/2012/10/latex_25.html</a><br>
5.<a href="https://math.stackexchange.com/questions/20412/element-wise-or-pointwise-operations-notation" target="_blank" rel="noopener">https://math.stackexchange.com/questions/20412/element-wise-or-pointwise-operations-notation</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mxxhcm.github.io/2018/12/21/reinforcement-learning-an-introduction-第3章笔记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="马晓鑫爱马荟荟">
      <meta itemprop="description" content="记录硕士三年自己的积累">
      <meta itemprop="image" content="/images/favicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mxxhcm's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/12/21/reinforcement-learning-an-introduction-第3章笔记/" class="post-title-link" itemprop="http://mxxhcm.github.io/page/14/index.html">reinforcement learning an introduction 第3章笔记</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-12-21 15:13:38" itemprop="dateCreated datePublished" datetime="2018-12-21T15:13:38+08:00">2018-12-21</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-05-07 00:22:27" itemprop="dateModified" datetime="2019-05-07T00:22:27+08:00">2019-05-07</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/强化学习/" itemprop="url" rel="index"><span itemprop="name">强化学习</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="马尔科夫过程-markov-process-马尔科夫链-markov-chain">马尔科夫过程(markov process)、马尔科夫链(markov chain)</h2>
<p>马尔科夫过程或者马尔科夫链(markov chain)是一个tuple $\lt S,P\gt$,其中S是一个有限(或者无限)的状态集合,P是状态转移矩阵(transition probability matrix)或马尔科夫矩阵(markov matrix),$P_{ss’}= P[S_{t+1} = s’|S_t = s]$.</p>
<h2 id="马尔科夫奖励过程-markov-reward-process">马尔科夫奖励过程(markov reward process)</h2>
<p>马尔科夫奖励过程是一个tuple $\lt S,P,R,\gamma\gt$,和马尔科夫过程相比，它多了一个奖励R，R和某个具体的状态相关，MRP中的reward只和state有关,和action无关。<br>
S是一个(有限)状态的集合。<br>
P是一个状态转移概率矩阵。<br>
R是一个奖励函数$R = \mathbb{E}[R_{t+1}|S_t = s]$, <strong>这里为什么是t+1时刻的reward?这仅仅是一个约定，为了描述RL问题中涉及到的observation，action，reward比较方便。这里可以理解为离开这个状态才能获得奖励而不是进入这个状态即获得奖励。如果改成$R_t$也是可以的，这时可以理解为进入这个状态获得的奖励。</strong><br>
$\gamma$称为折扣因子(discount factor), $\gamma \epsilon [0,1]$.<strong>为什么引入$\gamma$，David Silver的公开课中提到了四个原因:(1)数学上便于计算回报(return)；(2)避免陷入无限循环；(3)长远利益具有一定的不确定性；(4)符合人类对眼前利益的追求。</strong></p>
<h3 id="奖励-reward">奖励(reward)</h3>
<p>每个状态s在一个时刻t立即可得到一个reward,reward的值需要由环境给出,这个值可正可负。目前的强化学习算法中reward都是人为设置的。</p>
<h3 id="回报-return">回报(return)</h3>
<p>回报是累积的未来的reward,其计算公式如下:<br>
$$G_t = R_{t+1} + R_{t+2} + … = \sum_{k=0}<sup>{\infty}{\gamma</sup>k R_{t+k+1}} \tag{1}$$<br>
它是一个马尔科夫链上从t时刻开始往后所有奖励的有衰减(带折扣因子)的总和。</p>
<h3 id="值函数-value-function">值函数(value function)</h3>
<p>值函数是回报(return)的期望(expected return), 一个MRP过程中某一状态的value function为从该状态开始的markov charin return的期望，即$v(s) = \mathbb{E}[G_t|S_t=s]$.<br>
MRP的value function和MDP的value function是不同的, MRP的value function是对于state而言的，而MDP的value function是针对tuple $\lt$state, action$\gt$的。<br>
这里为什么要取期望,因为policy是stotastic的情况时，在每个state时，采取每个action都是可能的，都有一定的概率，next state也是不确定的了，所以value funciton是一个随机变量，因此就引入期望来刻画随机变量的性质。<br>
为什么在当前state就知道下一时刻的state了?对于有界的RL问题来说，return是在一个回合结束时候计算的；对于无界的RL问题来说，由于有衰减系数，只要reward有界，return就可以计算出来。</p>
<h3 id="马尔科夫奖励过程的贝尔曼方程-bellman-equation-for-mrp">马尔科夫奖励过程的贝尔曼方程(bellman equation for MRP)</h3>
<p>\begin{align*}<br>
v(s) &amp;= \mathbb{E}[G_t|S_t = s]\<br>
&amp;= \mathbb{E}[R_{t+1} + \gamma R_{t+2} + … | S_t = s]\<br>
&amp;= \mathbb{E}[R_{t+1} + \gamma (R_{t+2} + \gamma R_{t+3} + …|S_t = s]\<br>
&amp;= \mathbb{E}[R_{t+1} + \gamma G_{t+1} |S_t = s]\<br>
&amp;= \mathbb{E}[R_{t+1} + \gamma v(S_{t+1})|S_t = s]\<br>
v(s) &amp;= \mathbb{E}[R_{t+1} + \gamma v(S_{t+1})|S_t = s]<br>
\end{align*}<br>
v(s)由两部分组成，一部分是immediate reward的期望(expectation)，$\mathbb{E}[R_{t+1}]$, 只与当前时刻state有关；另一部分是下一时刻state的value function的expectation。如果用s’表示s状态下一时刻的state，那么bellman equation可以写成：<br>
$$v(s) = R_s + \gamma \sum_{s’ \epsilon S} P_{ss’}v(s’)$$<br>
我们最终的目的是通过迭代使得t轮迭代时的v(s)和第t+1轮迭代时的v(s)相等。将其写成矩阵形式为：<br>
$$v_t = R + \gamma P v_{t+1}$$<br>
$$(v_1,v_2,…,v_n)^T = (R_1,R_2,…,R_n)^T + \gamma \begin{bmatrix}P_{11}&amp;P_{12}&amp;…&amp;P_{1n}\P_{21}&amp;P_{22}&amp;…&amp;P_{2n}\&amp;&amp;…&amp;\P_{n1}&amp;P_{n2}&amp;…&amp;P_{nn}\end{bmatrix} (v_1,v_2,…,v_n)^T $$<br>
MRP的Bellman方程组是线性的，可以直接求解:<br>
\begin{align*}<br>
v &amp;= R + \gamma Pv\<br>
(1-\gamma P) &amp;= R\<br>
v &amp;= (1 - \gamma P)^{-1} R<br>
\end{align*}<br>
可以直接解方程，但是复杂度为$O(n^3)$，对于大的MRP方程组不适用，可以通过迭代法求解，常用的迭代法有动态规划,蒙特卡洛算法和时序差分算法等求解(动态规划是迭代法吗？）</p>
<h2 id="马尔科夫决策过程-markov-decision-process">马尔科夫决策过程(markov decision process)</h2>
<p>马尔科夫决策过程，比markov reward process多了一个A,它也是一个tuple $\lt S,A,P,R,\gamma\gt$, 在MRP中奖励R仅仅和状态S相关，在MDP中奖励R和概率P对应的是某个状态S和某个动作A的组合。<br>
\begin{align*}<br>
P_{ss’}^a &amp;= P[S_{t+1} = s’ | S_t = s, A_t = a]\<br>
R_s^a &amp;= \mathbb{E}[R_{t+1} | S_t = s, A_t = a]<br>
\end{align*}<br>
这里的reward不仅仅与state相关，而是与tuple $\lt state，action\gt$相关。</p>
<h3 id="回报">回报</h3>
<p>MDP中的$G_t$和式子$(1)$的$G_t$是一样的，将$G_t$写成和后继时刻相关的形式如下：<br>
\begin{align*}<br>
G_t &amp;= R_{t+1} + \gamma R_{t+2} + \gamma^2 R_{t+3} + \gamma^3 R_{t+4} + …\<br>
&amp;= R_{t+1} + \gamma (R_{t+2} + \gamma^1 R_{t+3} + \gamma^2 R_{t+4} + …)\<br>
&amp;= R_{t+1} + \gamma G_{t+1} \tag{2}<br>
\end{align*}<br>
这里引入$\gamma$之后，即使是在continuing情况下，只要$G_t$是非零常数，$G_t$也可以通过等比数列求和公式进行计算，即:<br>
$$G_t = \sum_{k=1}<sup>{\infty}\gamma</sup>k = \frac{1}{1-\gamma} \tag{3}$$</p>
<h3 id="策略-policy">策略(policy)</h3>
<p>策略$\pi$的定义:给定状态时采取各个动作的概率分布。<br>
$$\pi(a|s) = P[A_t = a | S_t = a] \tag{4}$$</p>
<h3 id="值函数-value-function-v2">值函数(value function)</h3>
<p>这里给出的是值函数的定义，就是这么定义的。<br>
MDP的值函数有两种，状态值函数(state value function)和动作值函数(action value function), 这两种值函数的含义其实是一样的，也可以相互转换。具体来说, 值函数定义为给定一个policy $\pi$，得到的回报的期望(expected return)。<br>
一个MDP的状态s对应的值函数(state value function) $v_{\pi}(s)$是从状态s开始采取策略$\pi$得到的回报的期望。<br>
\begin{align*}<br>
v_{\pi}(s) &amp;= \mathbb{E}<em>{\pi}[G_t|S_t = s]\<br>
&amp;=\mathbb{E}</em>{\pi}[\sum_{k=0}^{\infty} \gamma^{k}R_{t+k+1}|S_t=s] \tag{5}<br>
\end{align*}<br>
这里的$G_t$是式子(2)中的回报。<br>
一个MDP过程中动作值函数(action value function) $q_{\pi}(s,a)$是从状态s开始,采取action a，采取策略$\pi$得到的回报的期望。<br>
&lt;action value function $q_{\pi}(s,a)$ is the expected return starting from states, taking action a, and then following policy \pi.&gt;<br>
\begin{align*}<br>
q_{\pi}(s,a) &amp;= \mathbb{E}<em>{\pi}\left[G_t | S_t = s, A_t = a\right]\<br>
&amp;= \mathbb{E}</em>{\pi}\left[\sum_{k=0}^{\infty} \gamma^{k}R_{t+k+1}|S_t=s, A_t=a\right] \tag{6}<br>
\end{align*}</p>
<h4 id="状态值函数-state-value-function">状态值函数(state value function)</h4>
<p>\begin{align*}<br>
v_{\pi}(s) &amp;= \sum_{a \epsilon A} \pi(a|s) q_{\pi} (s,a) \tag{7}\<br>
v_{\pi}(s) &amp;= \sum_a \pi(a|s)\sum_{s’,r}p(s’,r|s,a) \left[r + \gamma v_{\pi}(s’) \right] \tag{8}\<br>
\end{align*}<br>
式子$(7)$是$v(s)$和$q(s,a)$的关系，式子$(8)$是$v(s)$和它的后继状态$v(s’)$的关系。<br>
式子$(8)$的推导如下：<br>
\begin{align*}<br>
v_{\pi}(s) &amp;= \mathbb{E}<em>{\pi}[G_t|S_t = s]\<br>
&amp;= \mathbb{E}</em>{\pi}\left[R_{t+1}+\gamma G_{t+1}|S_t = s\right]\<br>
&amp;= \sum_a \pi(a|s)\sum_{s’}\sum_rp(s’,r|s,a) \left[r + \gamma \mathbb{E}<em>{\pi}\left[G</em>{t+1}|S_{t+1}=s’\right]\right]\<br>
&amp;= \sum_a \pi(a|s)\sum_{s’,r}p(s’,r|s,a) \left[r + \gamma v_{\pi}(s’) \right]\<br>
\end{align*}</p>
<h4 id="动作值函数-action-value-function">动作值函数(action value function)</h4>
<p>\begin{align*}<br>
q_{\pi}(s,a) &amp;= \sum_{s’}\sum_r p(s’,r|s,a)(r + \gamma  v_{\pi}(s’)) \<br>
q_{\pi}(s,a) &amp;= \sum_{s’}\sum_r p(s’,r|s,a)(r + \gamma  \sum_{a’}\pi(a’|s’)q(s’,a’)) \tag{10}\<br>
\end{align*}<br>
式子$(9)$是$q(s,a)$和$v(s)$的关系，式子$(10)$是$q(s,a)$和它的后继状态$q(s’,a’)$的关系。<br>
以上都是针对MDP来说的，在MDP中，给定policy $\pi$下，状态s下选择a的action value function，$q_{\pi}(s,a)$类似MRP里面的v(s)，而MDP中的v(s)是要考虑在state s下采率各个action后的情况。</p>
<h3 id="贝尔曼期望方程-bellmam-expectation-equation">贝尔曼期望方程(Bellmam expectation equation)</h3>
<p>\begin{align*}<br>
v_{\pi}(s) &amp;= \mathbb{E}<em>{\pi}[R</em>{t+1} + \gamma v_{\pi}(S_{t+1})|S_t = s] \tag{11}\<br>
v_{\pi}(s) &amp;= \mathbb{E}<em>{\pi}\left[q</em>{\pi}(S_t,A_t)|S_t=s,A_t=a\right]\tag{12}\<br>
q_{\pi}(s,a)&amp;= \mathbb{E}<em>{\pi}\left[R+\gamma v</em>{\pi}(S_{t+1}) |S_t=s,A_t=a\right]\tag{13}\<br>
q_{\pi}(s,a) &amp;= \mathbb{E}<em>{\pi}[R</em>{t+1} + \gamma q_{\pi}(S_{t+1},A_{t+1}) | S_t = s, A_t = a] \tag{14}<br>
\end{align*}</p>
<h4 id="矩阵形式">矩阵形式</h4>
<p>\begin{align*}<br>
v_{\pi} &amp;= R^{\pi} + \gamma P^{\pi} v_{\pi}\<br>
v_{\pi} &amp;= (I-\gamma P<sup>{\pi})</sup>{-1} R^{\pi}<br>
\end{align*}</p>
<h2 id="最优策程的求解-how-to-find-optimal-policy">最优策程的求解(how to find optimal policy)</h2>
<h3 id="最优价值函数-optimal-value-function">最优价值函数(optimal value function)</h3>
<p>$v_{*} = max_{\pi}v_{\pi}(s)$,从所有策略产生的state value function中，选取使得state s的价值最大的函数<br>
$q_{*}(s,a) = max_{\pi} q_{\pi}(s,a)$,从所有策略产生的action value function中，选取使$\lt s,a\gt$价值最大的函数<br>
当我们得到了optimal value function，也就知道了每个state的最优价值，便认为这个MDP被解决了</p>
<h3 id="最优策略-optimal-policy">最优策略(optimal policy)</h3>
<p>对于每一个state s，在policy $\pi$下的value 大于在policy $\pi’$的value， 就称策略$\pi$优于策略$\pi’$， $\pi \ge \pi’$ if $v_{\pi}(s) \ge v_{\pi’}(s)$, 对于任意s都成立<br>
对于任何MDP，都满足以下条件：</p>
<ol>
<li>都存在一个optimal policy，它比其他策略好或者至少相等；</li>
<li>所有的optimal policy的optimal value function是相同的；</li>
<li>所有的optimal policy 都有相同的 action value function.</li>
</ol>
<h3 id="寻找最优策略">寻找最优策略</h3>
<p>寻找optimal policy可以通过寻找optimal action value function来实现：<br>
$${\pi}<em>{*}(a|s) =<br>
\begin{cases}<br>
1, &amp;if\quad a = argmax\ q</em>{*}(s,a)\<br>
0, &amp;otherwise\end{cases}$$</p>
<h3 id="贝尔曼最优方程-bellman-optimal-equation">贝尔曼最优方程(bellman optimal equation)</h3>
<p>*号表示最优的策略。</p>
<h4 id="最优状态值函数-state-value-function">最优状态值函数(state value function)</h4>
<p>\begin{align*}<br>
v_{*}(s) &amp;= max_a q_{*}(s,a)\<br>
&amp;= max_a\mathbb{E}<em>{\pi</em>{*}}\left[G_t|S_t=s,A_t=a\right]\<br>
&amp;= max_a\mathbb{E}<em>{\pi</em>{*}}\left[R_{t+1}+\gamma G_t|S_t=s,A_t=a\right]\<br>
&amp;= max_a\mathbb{E}\left[R_{t+1} +\gamma v_{*}(S_{t+1})|S_t=s,A_t=a\right]\<br>
&amp;= max_a \left[\sum_{s’,r} p(s’,r|s,a){*}(r+\gamma v_{*}(s’) )\right] \tag{15}\<br>
\end{align*}</p>
<h4 id="最优动作值函数-action-value-function">最优动作值函数(action value function)</h4>
<p>\begin{align*}<br>
q_{*}(s,a) &amp;= \sum_{s’,r} p(s’,r|s,a) (r + \gamma v_{*}(s’))\<br>
&amp;= \sum_{s’,r} p(s’,r|s,a) (r + \gamma max_{a’} q_{*}(s’,a’))\<br>
&amp;=\mathbb{E}\left[R_{t+1}+\gamma max_{a’}q_{*}(S_{t+1},a’)|S_t=s,A_t=a \right]\tag{16}\<br>
\end{align*}</p>
<h3 id="贝尔曼最优方程的求解-solution-to-bellman-optimal-equation">贝尔曼最优方程的求解(solution to Bellman optimal equation)</h3>
<p>Bellman equation和Bellman optimal equation相比，一个是对于给定的策略，求其对应的value function,是对一个策略的估计，而bellman optimal equation是要寻找最优策略，通过对action value function进行贪心。<br>
Bellman最优方程是非线性的，没有固定的解决方案，只能通过迭代法来解决，如Policy iteration，value iteration，Q-learning，Sarsa等。</p>
<h2 id="参考文献">参考文献</h2>
<p>1.<a href="http://incompleteideas.net/book/the-book-2nd.html" target="_blank" rel="noopener">http://incompleteideas.net/book/the-book-2nd.html</a><br>
2.<a href="https://www.bilibili.com/video/av32149008/?p=2" target="_blank" rel="noopener">https://www.bilibili.com/video/av32149008/?p=2</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mxxhcm.github.io/2018/12/20/linux-常见问题/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="马晓鑫爱马荟荟">
      <meta itemprop="description" content="记录硕士三年自己的积累">
      <meta itemprop="image" content="/images/favicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mxxhcm's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/12/20/linux-常见问题/" class="post-title-link" itemprop="http://mxxhcm.github.io/page/14/index.html">linux 常见问题（不定期更新）</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-12-20 20:30:34" itemprop="dateCreated datePublished" datetime="2018-12-20T20:30:34+08:00">2018-12-20</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-06-03 21:15:30" itemprop="dateModified" datetime="2019-06-03T21:15:30+08:00">2019-06-03</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="问题1-undefined-reference-to-pthread-create-in-linux">问题1 Undefined reference to pthread_create in Linux</h2>
<p>在阅读自然语言处理的一篇论文时，读到了bype pair encoding(bpe)算法。在github找到了一个实现<a href="https://github.com/glample/fastBPE" target="_blank" rel="noopener">fastBPE</a>, 算法是用C++写的，在编译的过程中遇到了问题&quot;Undefined reference to pthread_create in Linux&quot;,</p>
<h3 id="terminal下解决方案">terminal下解决方案</h3>
<p>查阅资料了解到pthread不是Linux操作系统默认的库函数，所以需要在编译的时候将pthread链接该库函数，后来在看fastBPE的文档时发现文档中已经有说明:<br>
Compile with:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">g++ -std=c++11 -pthread -O3 fast.cc -o fast</span><br></pre></td></tr></table></figure>
<h3 id="codeblocks下解决方案">codeblocks下解决方案</h3>
<p>上面给出的方案是使用gcc在terminal进行编译时加入静态库，但是对于不习惯在命令行使用gdb进行调试的人来说没有用。<br>
在codeblocks中，如果要链接静态库,找到Settings --&gt; Compiler… --&gt; Linker settings，点击add，添加相应的库函数即可。</p>
<h2 id="问题2-vim中设置了setexpand不起作用">问题2 vim中设置了setexpand不起作用</h2>
<p>~/.vimrc中进行了如下设置：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">set expandtab</span><br><span class="line">set tabstop=4</span><br><span class="line">set shiftwidth=4</span><br><span class="line">set softtabstop=4</span><br></pre></td></tr></table></figure>
<p>但是发现在markdown甚至~/.vimrc中expandtab都没有设置成功，但是py文件是正常的，后来发现是多加了一个set paste的原因，把它删了就好了。</p>
<h3 id="原因">原因</h3>
<p>因为set paste覆盖了set expandtab。</p>
<h3 id="解决方案">解决方案</h3>
<p>删除set paste行。</p>
<h2 id="参考文献">参考文献</h2>
<p>1:<a href="https://stackoverflow.com/questions/1662909/undefined-reference-to-pthread-create-in-linux" target="_blank" rel="noopener">https://stackoverflow.com/questions/1662909/undefined-reference-to-pthread-create-in-linux</a><br>
2:<a href="https://blog.csdn.net/zhaoyue007101/article/details/7705753" target="_blank" rel="noopener">https://blog.csdn.net/zhaoyue007101/article/details/7705753</a><br>
3.<a href="https://stackoverflow.com/a/37962622/8939281" target="_blank" rel="noopener">https://stackoverflow.com/a/37962622/8939281</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mxxhcm.github.io/2018/12/18/随笔/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="马晓鑫爱马荟荟">
      <meta itemprop="description" content="记录硕士三年自己的积累">
      <meta itemprop="image" content="/images/favicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mxxhcm's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/12/18/随笔/" class="post-title-link" itemprop="http://mxxhcm.github.io/page/14/index.html">随笔</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-12-18 15:43:11" itemprop="dateCreated datePublished" datetime="2018-12-18T15:43:11+08:00">2018-12-18</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-05-12 12:02:11" itemprop="dateModified" datetime="2019-05-12T12:02:11+08:00">2019-05-12</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/工具/" itemprop="url" rel="index"><span itemprop="name">工具</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1>目的</h1>
<p>看到别人在本科，硕士阶段记录了很多自己学到的东西，再看看自己，本科四年什么都没留下，现在进入实验室已经一年多了，没有沉淀下来，本来是很好的一手牌，被自己打的稀烂。今天就下定决心搭建一个自己的博客，用来记录自己的收获，一方面防止自己忘记，另一方面也确定自己是否已经懂了，能否把一个东西讲解出来。</p>
<h1>恩！</h1>
<p>爱你呦，荟荟～</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/13/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/13/">13</a><span class="page-number current">14</span>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/favicon.jpg" alt="马晓鑫爱马荟荟">
            
              <p class="site-author-name" itemprop="name">马晓鑫爱马荟荟</p>
              <p class="site-description motion-element" itemprop="description">记录硕士三年自己的积累</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">135</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">12</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">115</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/mxxhcm" title="GitHub &rarr; https://github.com/mxxhcm" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="mailto:mxxhcm@gmail.com" title="E-Mail &rarr; mailto:mxxhcm@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            </div>
          

          

          
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">马晓鑫爱马荟荟</span>

  

  
</div>


  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v6.6.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script src="/js/src/utils.js?v=6.6.0"></script>

  <script src="/js/src/motion.js?v=6.6.0"></script>



  
  


  <script src="/js/src/affix.js?v=6.6.0"></script>

  <script src="/js/src/schemes/pisces.js?v=6.6.0"></script>



  

  


  <script src="/js/src/bootstrap.js?v=6.6.0"></script>



  



  






<!-- LOCAL: You can save these files to your site and update links -->
    
        
        <link rel="stylesheet" href="https://aimingoo.github.io/gitmint/style/default.css">
        <script src="https://aimingoo.github.io/gitmint/dist/gitmint.browser.js"></script>
    
<!-- END LOCAL -->

    

    







  





  

  

  

  

  
  

  
  
    
      
        
      
    
      
    
      
    
      
    
      
    
  

  
    
      <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      },
      TeX: {equationNumbers: { autoNumber: "AMS" }}
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>
<script src="//cdn.jsdelivr.net/npm/mathjax@2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

<style>
.MathJax_Display {
    overflow: auto hidden;
}
</style>

    
  


  
  

  

  

  

  

  

  

</body>
</html>
