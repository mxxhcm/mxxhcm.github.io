---
title: OS 常见面试题目
date: 2020-02-29 21:43:49
tags:
 - 面试
categories: 面试
---

## netstat
netstat监控网络连接，路由表等，网络接口等。
netstat默认打印所有打开的socket连接。
-a, --all展示所有的listening和没有listening的sockets。
-l, --listening，展示所有listening的socket，默认情况下是忽略的。
-p, --program，每一个socket属于哪一个程序和pid。
-n, --numeric，数值展示host，port和用户名。
-t, --tcp
-u, --udp
-r打印路由表。
-i打印网络接口。

## lsof
列出打开的文件。

## ip
ip address，查看ip地址。
ip link，查看网络设备。

## 原子操作
原子操作指的是由多步组成的操作，要么执行完所有步骤，要不一步也不执行。

## 程序和线程
程序是一个存储在硬盘上的可执行文件。
程序的执行实例被称为进程，它是操作系统对一个正在运行的程序的一个抽象。

## 进程和线程的区别
1. 进程是资源分配和调度的最小单位，而线程是CPU调度的最小单位。
2. 一个进程可以包括多个线程，并且至少包括一个线程，所有的线程共享进程的资源。
3. 线程中通常要进行同步操作，当多个线程共享线相同的内存时，需要使用同步操作确保他们看到一致的视图。
4. 线程具有自己的私有属性。
5. 一个进程结束后所有线程都将终止，而一个线程结束不会影响其他线程（如果调用了exit就会终止所有线程。）
6. 线程是轻量级的进程，它的创建和销毁的代价要比进程小。


## fork和vfork区别
1. fork采用copy-on-write，而vfork在调用exec之前和父进程共享数据。
2. fork不对子进程的执行顺序做任何要求，而vfork要求子进程先运行，父进程挂起，知道子进程调用了exec或者exit之后，父进程恢复运行。

## 进程同步

## 线程通信

## 死锁
### 什么是死锁
两个或多个进（线）程在运行过程中相互请求其他进（线）程拥有的资源，造成所有的进程或者线程都无法继续前进。

### 产生死锁的原因
1. 资源竞争。
2. 加锁的顺序不合适。
3. 对同一个互斥量加锁两次。（APUE线程部分）。

### 产生死锁的必要条件
1. 互斥条件：进程要求对所分配的资源进行排他性控制，同一时刻某一个资源只能有一个用户。
2. 请求和保持：进程因请求某个资源而阻塞时，保持已经获得的资源不放。
3. 不剥夺：进程获得的资源没有使用完前，不能被剥夺。
4. 循环等待：A等待B，B等待A。

### 预防死锁的方法
对应死锁产生的后三个必要条件。资源的互斥条件不能改变。
1. 破坏请求和保持条件：资源一次性分配，只要有有一个资源得不到分配，就不给这个进程分资源。
2. 破坏不可剥夺条件：超时放弃已有的锁。
3. 破坏循环等待条件：对所有资源进行排序，以确定的顺序获得锁。

### 避免死锁的方法
1. 一次封锁法。
2. 顺序封锁法。
3. 银行家算法。

## 虚拟内存

## 参考文献
1.《APUE》第三版
2.https://stackoverflow.com/questions/200469/what-is-the-difference-between-a-process-and-a-thread
3.https://www.geeksforgeeks.org/difference-between-process-and-thread/
