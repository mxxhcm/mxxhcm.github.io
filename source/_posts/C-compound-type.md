---
title: C++ compound type
date: 2019-11-05 17:24:47
tags:
 - C/C++
 - C++复合类型
categories: C/C++
---

## 复合类型
复合类型是指基于其他类型定义的类型，C++中两种常见的复合类型是[引用](https://mxxhcm.github.io/2019/11/13/C-compound-type-reference/)和[指针](https://mxxhcm.github.io/2019/11/13/C-compound-type-pointer/)，还包括[数组](https://mxxhcm.github.io/2019/11/13/C-compound-type-array/)，[类](https://mxxhcm.github.io/2019/11/13/C-compound-type-class/)，结构，联合类型。
一条声明语句由一个基本数据类型和紧随其后的声明符列表组成。每个声明符声明了一个变量并且指定该变量为与基本数据类型有关的某种类型。
基本变量的声明语句由数据类型和变量名组成，声明符就是变量名。而复合类型的声明语句中声明符除了变量名，还会有类型修饰符，如`*`,`&`和`[]`等等。比如引用的声明语句中将声明符写成`&d`的形式，其中`d`是声明的变量名,`&`是类型修饰符。指针是另外一种复合类型，通常将声明符写成`*d`的形式，其中`d`是变量名，`*`是类型修饰符。
```c
int a = 3;
int &b = a;
int *p = &a;
```
在指针操作中，其中操作符`*`称为解引用，操作符`&`称为取地址符。

## 复合类型的声明
变量的定义包含一个基本数据类型和一组声明符。在一条定义语句中，虽然基本数据类型只有一个，但是声明符的形式却可以不同，也就是一条定义语句可能定义处不同类型的变量：```c
int i = 1024, *p = &i, &r = i;
```
在定义语句中，类型修饰符`*`和`&`仅仅修饰紧随其后的变量。关于引用和指针的声明，一般有两种写法：
1. 将修饰符和变量名写在一起，即：```c
int *p1, *p2;
```
2. 把修饰符和类型名写在一块，即：``` c
int* p1;
int* p2;
```

这两种方法都对，C++ primer采用第一种。

### 指向指针的指针
声明符中修饰符的个数没限制，可以写很多个。
```c
int ival = 1024;
int *pi = &ival; //pi指向一个int数
int **pi = &pi; //pi指向一个int的指针。
```

### 指针的引用
引用不是对象，所以指针不能指向引用。但是指针是对象，所以有指针的引用。复杂的指针或者引用的声明语句，从右往左读。

```c
int i = 42;
int *p;
int *&r = p;    //从右往左阅读，r是一个引用，是谁的引用，int*的引用。

r = &i; 
*r = 0; // i=0
```

## 参考文献
1.《C++ Primer第五版》
