---
title: 'C char*, char [], char** and C++ string'
date: 2019-11-05 12:21:22
tags:
 - C/C++
 - C风格字符串
 - string
 - 数组指针
 - 指针数组
 - 指针
categories: C/C++
---

## C类型字符串（字符数组）
1. C语言中存在**字符串**的概念：以NULL字节结尾的零个或者多个字符。
2. 字符串通常存在字符数组中，这也是C语言中没有显式的字符串类型的原因。
3. 因为字符串以NULL结束，所以字符串内部不能有NULL字节。
4. 为什么选择NULL作为字符串的终止符，因为它不是一个可打印的字符。

## 字符和字符串字面值常量
`'a'`是字面值字符常量，`"hello world"`是字符串字面值常量。

## 字符串字面值（字符串常量）
**字符串常量**是用一对双引号包围一串字符。如`"hello"`, `"hi\n"`, `""`等
字符串常量可以为空，但是字符数组不能为空。

## 字符指针

## 字符串常量和指针
程序在使用字符串常量时，编译器会将字符串常量存放在数据区的常量区。当一个字符串常量出现在在一个表达式中，表达式使用的值是字符串常量在内存中的地址，而不是这些字符串常量本身。可以把字符串赋值给“指向字符的指针”，即让指针指向字符串常量在内存中的地址。但是不能把字符串常量赋值给一个字符数组，即不能把字符串常量的地址复制给字符数组。比如```
char *message = "Hello world!";
```
这个代码是将字符串常量中第一个字符的地址传递给message。


## string
字符串字面值和`string`是不同的类型，字符串字面值是为了和C语言兼容，它不是标准库中`string`对象的内容。

##  char\*
1. `char*`是一个指针，指向一个`char`，理论上来说，它并不是一个数组。
2. `char *ptr;`并不为它指向的内容分配内存，而是分配一个`char *`的内存存放`ptr`。

## char\*\*
1. `char**`是一个指针，指向一个　指向`char`的指针。


## char arr[]
1. `char arr[10];`是一个数组，不是一个指针，`char *`和`char[10]`不是一个类型。
2. `char arr[10];`分配10个`char`的空间，`arr`的地址等于第一个字符的地址。



## 参考文献
1.《C++ Primer第五版》
2.https://www.zhihu.com/question/307261590/answer/563448215
3.https://www.zhihu.com/question/307261590/answer/563630017
