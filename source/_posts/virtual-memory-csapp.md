---
title: virtual memory csapp
date: 2019-12-17 02:55:10
tags:
 - 虚拟内存
 - 操作系统
 - 计算机系统
categories: 计算机系统
---


## 物理和虚拟寻址

## 地址空间

## 虚拟内存作为缓存的工具
### DRAM缓存的组织结构

### 页表
页表是一个数据结构，它和操作系统，MMU（内存管理单元中的）地址翻译硬件，将虚拟页翻译成物理页。

### 页命中

### 缺页

### 分配页面

### 局部性和抖动

## 虚拟内存作为内存管理的工具

## 虚拟内存作为内存保护的工具

## 地址翻译
形式上来说，地址翻译是一个N元素的虚拟地址空间(VAS)中的元素和一个M元素的物理地址空间(PAS)中元素之间的映射。
### 结合高速缓存和虚拟内存
### 利用TLB加速地址翻译
### 多级页表
### 端到端的地址翻译


## Intel Core i7/Linux 内存系统

## 内存映射
Linux通过将一个虚拟内存区域和磁盘上的对象关联起来，初始化这个虚拟内存区域中的内容，这个过程叫做内存映射(memory mapping)。

### 再看共享对象
### 再看fork函数
### 再看execve函数

### 使用mmap函数的用户级内存映射

## 动态内存分配
### malloc和free

### 为什么要使用动态内存分配

### 分配器的要求和目标

### 碎片
### 实现问题
### 隐式空闲链表
### 放置已分配的块
### 分隔空闲块
### 获取额外的堆内存
### 合并空闲块

### 带边界标记的合并
### 实现一个简单的分配器

### 显式空闲链表
### 分离的空闲链表

## 垃圾收集

### 基本知识
### Mark和Sweep垃圾收集器
### C程序的保守Mark和Sweep

## C中常见的内存相关错误
### 解引用坏指针

### 读取未初始化的内存

### 允许栈缓冲区溢出

### 假设指针和它们指向的对象是相同大小的

### 造成错位错误

### 引用指针，而不是它所指向的对象
### 误解引用指针
### 引用不存在的变量
### 引用空闲堆块中的数据
### 引起内存泄露

## 参考文献
1.《CSAPP》
