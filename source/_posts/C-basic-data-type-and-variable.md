---
title: C++ basic data type
date: 2019-11-05 17:11:26
tags:
 - C/C++
 - int
 - float
 - basic data type
categories: C/C++
mathjax: true
---

## C++类型
C++中，对象的类型通常有两种：
1. 内置类型，整形和浮点型。整形又包括整数，布尔型，字符串，浮点型又包括单精度浮点型和双精度浮点型。
2. 复合类型，包括数组，指针，引用，类，结构，联合类型。

这一节主要介绍基本类型，复合类型可以查看[C++ compound type](https://mxxhcm.github.io/2019/11/09/C-compound-type/)。

## 算术类型
算术类型有两类：整形和浮点型。算术类型的大小在不同的机器上实现也可能不同。
整形包括字符，布尔型，整形，长整形。
浮点类型有单精度，双精度和扩展精度浮点数，具体怎么表示可以查看[IEEE 754标准](https://mxxhcm.github.io/2019/10/24/IEEE-754-Floating-Point-Standard/)。
一般情况下，`char`占用$1$字节，`int`占用$4$字节，`long`占用$8$字节，`long long`占用$8$个字节。`float`占用$4$字节，`double`占用$8$字节。
除了布尔型和扩展的字符型（wchar_t, char16_t, char32_t)之外，其他整形可以划分为无符号和带符号的两种，无符号类型中所有的比特位都用来存储值，而有符号类型需要使用其中的某些位存储符号。`int`,`long`, `long long`默认是带符号的。`char`可以分为三种，`char`, `signed char`, `unsigned char`，`char`不一定是有符号的，由不同的编译器来决定。

其他注意事项：
1. 算术表达式中不要使用`char`，因为不同的编译器对`char`的处理方式可能不同，一些把`char`当做有符号的，一些把`char`当做无符号的，在不同机器之间进行迁移时可能会出现问题。
2. 浮点数运算用`double`，`float`精度不够，而且计算代价和`double`差不多。

#### 强制类型转换
在将有符号数转化为无符号数的时候，如果这个有符号数是负数，那么会做一个模运算，将它转换为正值。
无符号数永远不可能为负。
如果一个运算同时有有符号数和无符号数参与运算，那么会将有符号数转换为无符号数进行运算。如下示例：
``` C++
    int a = -3;
    unsigned int b = 0;
    b--;
    std::cout << b << std::endl;
    //output: 4294967295
    b = a;
    std::cout << b << std::endl;
    //output: 4294967293
```

## 字面值常量
字面值常量是值一看就知道的量，每一个字面值常量都对应一种数据类型，可以是整形，浮点型，字符，字符串，转义序列，布尔和指针等，数据类型由它的形式和值决定。可以通过前缀或者后缀显式的指定字面值的类型，字符和字符串的字面值类型通过前缀指定，整形和浮点型的字面值类型通过后缀指定。
前缀
- `u`，表示`unicode 16`字符
- `U`，表示`unicode 32`字符
- `L`，表示宽字符
- `u8`，`utf-8`，只用于字符串字面值常量

后缀，这里给出的最小匹配类型，如果不够的话，会自动选择更大的。
- `u,U`，`unsigned`
- `l, L`, `long`
- `ll, LL`, `long long`
- `f, F`, `float`
- `l, L`, `long double`

### 整形字面值常量
如`12`,`1345`等。
十进制的字面值常量是带符号数，比如`12`是`int`, `long`, `long long`中能容纳下的占用最小字节的类型；八进制和十六进制的字面值常量是能容纳其数值的`int`, `long`, `long long`, `unsigned int`, `unsigned long`, `unsigned long`中的最小类型。

### 浮点型字面值常量
浮点型的字面值常量是`double`。

### 字符和字符串字面值常量
`'a'`是字面值字符常量，`"hello world"`是字符串字面值常量。

### 转义序列
包含不可打印和可打印的字符。`\n`,`\r`,`\t`,`\b`,`\a`等。

### 布尔字面值
`true`, `false`是`bool`变量的字面值。

### 指针字面值
`nullptr`是指针字面值。


## 变量
1. 什么是对象，具有某种数据类型的内存空间，并不区分是类还是内置类型，也不区分是否命名和是否只读。
2. 初始化，在变量创建时给定一个特定的值，和赋值不一样，赋值是吧对象的当前值擦除，使用一个新值代替。
3. 默认初始化，变量没有指定初值，被赋予默认值。默认值由变量类型和变量位置决定。
对于内置类型的变量，如果没有显式初始化，它的位置由定义的位置决定。函数内部的内置类型不会被初始化，定义于任何函数外部的内置类型被初始化为$0$。未初始化的变量的值是未定义的。
对于自定义的类型来说，每个类决定初始化对象的方式，而且是否允许不经过初始化就定义对象也由自己决定。如果类允许这种行为，由类决定对象的初始值是什么；如果类要求每个对象显示初始化，在创建类对象没有进行明确的初始化操作时，会引发错误。
4. 声明和定义。
声明需要给出变量的类型和名字，但是不需要申请存储空间。只进行声明的话使用`extern`关键字，不要显式的初始化变量。包含了显式初始化的声明就变成了定义。变量只能定义一次，但是可以声明多次。可以方便的在多个文件中使用同一个变量。

## 参考文献
1.《C++ Primer第五版》
2.https://www.cnblogs.com/yc_sunniwell/archive/2010/06/18/1760034.html
