---
title: C++ class constructor and destructor
date: 2019-12-08 16:56:52
tags:
 - C/C++
 - 类
categories: C/C++
---


## 构造函数
每个类都会定义它的对象被初始化的方式，类通过一个或者几个特殊的成员函数控制每个类的初始化过程,这些函数叫做构造函数。
构造函数的几个特征:
1. 构造函数的任务是初始化类对象的数据成员，无论何时只要类的对象被创建，就会执行构造函数。
2. 构造函数名字和类名相同。
3. 构造函数没有返回类型。
4. 构造函数可以有多个，和重载函数差不多。
5. 构造函数不能声明为`const`。当我们要创建一个const对象时,一直到构造函数完成初始化过程，对象才能获得常量属性。因此,构造函数在const对象的构造过程中可以向其写入。或者说，构造函数要更改对象，如果声明为`const`的话，就无法更改了。

## 默认构造函数
当类没有声明任何构造函数时,编译器提供一个特殊的构造函数,称为默认构造函数,**默认构造函数不需要任何实参**.默认构造函数的初始化规则为:如果存在类内初始值,用它初始化成员,否则使用默认初始化
对于非常简单的类,可以使用默认构造函数,但是对于特别复杂的类,必须定义它自己的默认构造函数,有三个原因:
1. 编译器只有在发现类中不包含任何构造函数的情况下才会生成一个默认的构造函数.如果我们定义了一些其他的构造函数,那么编译器就不会提供默认构造函数了,如果需要默认构造函数需要程序员自己定义.
2. 编译器提供的默认构造函数可能指定错误的操作,因为执行默认初始化时,块中的内置类型或者复合类型的对象都是随机值,所以需要自己自己定义一个默认构造函数.
3. 编译器不能为某些类生成一个默认构造函数,如果类中包含一个其他类类型的成员,并且这个成员没有默认构造函数,那么编译器无法初始化该成员.这样的类,必须由程序员自己定义默认构造函数,否则没有可用的默认构造函数.

## 定义构造函数
### `=default`的含义
`=default`是C++ 11标准的新用法,如果需要编译器提供的默认构造函数,在参数列表最后加上`=default`即可.其中,`=default`可以和声明一起出现在类的内部,也可以作为定义出现在类的外部.如果`=default`在类的内部,那么默认构造函数是内联函数,如果它在类的外部,该成员默认情况下不是内联的.

### 初始值列表
在参数列表之后和花括号之前,加上冒号和一个特殊的列表,这个特殊的列表叫做构造函数初始值列表.这个列表由多个 成员变量的名字,括号括起来的成员变量初始值构成,不同成员变量的初始化通过逗号分隔开来.
**如果初始值列表没有对部分或者全部数据成员变量进行初始化,那么这些的数据成员变量将根据类内初始值进行初始化,如果没有类内初始化值,执行默认初始化.**


## 拷贝构造函数

## 析构函数


## 参考文献
1.
