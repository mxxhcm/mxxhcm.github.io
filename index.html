<!DOCTYPE html>












  


<html class="theme-next pisces use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
































<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=6.6.0" rel="stylesheet" type="text/css">



  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.jpg?v=6.6.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.jpg?v=6.6.0">










<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '6.6.0',
    sidebar: {"position":"left","display":"always","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="记录硕士三年自己的积累">
<meta property="og:type" content="website">
<meta property="og:title" content="mxxhcm&#39;s blog">
<meta property="og:url" content="http://mxxhcm.github.io/index.html">
<meta property="og:site_name" content="mxxhcm&#39;s blog">
<meta property="og:description" content="记录硕士三年自己的积累">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="mxxhcm&#39;s blog">
<meta name="twitter:description" content="记录硕士三年自己的积累">



  <link rel="alternate" href="/atom.xml" title="mxxhcm's blog" type="application/atom+xml">




  <link rel="canonical" href="http://mxxhcm.github.io/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>mxxhcm's blog</title>
  












  <noscript>
  <style>
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion .logo-line-before i { left: initial; }
    .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">mxxhcm's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home menu-item-active">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mxxhcm.github.io/2019/05/07/ubuntu-18-04-alt-tab快捷键/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="马晓鑫爱马荟荟">
      <meta itemprop="description" content="记录硕士三年自己的积累">
      <meta itemprop="image" content="/images/favicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mxxhcm's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/05/07/ubuntu-18-04-alt-tab快捷键/" class="post-title-link" itemprop="http://mxxhcm.github.io/index.html">ubuntu 18.04 alt tab快捷键</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-05-07 21:21:07 / 修改时间：21:25:47" itemprop="dateCreated datePublished" datetime="2019-05-07T21:21:07+08:00">2019-05-07</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h2><p>ubuntu 16.04中，可以使用alt tab快捷键在相同的应用中进行切换，在18.04中alt tab是在不同的应用中切换。事实上，可以使用alt `在该应用内切换，但是我还是想用alt tab。</p>
<h2 id="设置方法"><a href="#设置方法" class="headerlink" title="设置方法"></a>设置方法</h2><p>打开setting &gt;&gt; Devices &gt;&gt; Keyboard<br>找到Switch windows，设置快捷键为alt tab即可。</p>
<h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p>1.<a href="https://superuser.com/questions/394376/how-to-prevent-gnome-shells-alttab-from-grouping-windows-from-similar-apps" target="_blank" rel="noopener">https://superuser.com/questions/394376/how-to-prevent-gnome-shells-alttab-from-grouping-windows-from-similar-apps</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mxxhcm.github.io/2019/05/07/linux-file-perission/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="马晓鑫爱马荟荟">
      <meta itemprop="description" content="记录硕士三年自己的积累">
      <meta itemprop="image" content="/images/favicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mxxhcm's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/05/07/linux-file-perission/" class="post-title-link" itemprop="http://mxxhcm.github.io/index.html">linux file perission</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-05-07 17:08:26 / 修改时间：17:08:55" itemprop="dateCreated datePublished" datetime="2019-05-07T17:08:26+08:00">2019-05-07</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>8.rwx   -r   读权限    查询文件名数据<br>    -w   写权限    a.新建新的文件与目录 b.删除文件或者目录 c.重命名以及转移文件或者目录</p>
<pre><code>-x   可执行权限    a.进入某目录 b.切换到该目录（cd命令）
    cd - 回到上一次工作的目录    
!!!能不能进入某一目录只与该目录的x权限有关，如果不拥有某目录的x权限，即
使拥有r权限，那么也无法执行该目录下的任何命令

但是即使拥有了x权限，但是没有r权限，能进入该目录但是不能打开该目录，因为    没有读取的权限。


sudo mkdir -p /test/test
-R(递归的将某目录下所有的文件以及目录全部修改
sudo chown -R root:root test    

改变文件或者目录的权限
a. sudo chmod 777 test
b. sudo chmod +x test
c. u--user  g--group  o--others  a--all
   sudo chmod u=rwx,g=r,o=r test
改变文件或者目录的属主
a. sudo chown root:root test
b. sudo chown root test    
改变属组
sudo chgrp root test
</code></pre><ol>
<li><p>/bin:可以被单用户执行的命令。其下的命令可以被root用户和普通用户执行，如cat,cd,cp,date,chown,<br>  chmod,等等<br>/sbin/:开机过程所需要的，只能被root用户所执行，普通用户只能进行查询，包括与开机，还原系统所需要<br>  的命令<br>/usr/bin:绝大部分的用户可使用命令都在这里<br>/usr/sbin/:服务器所需要的某些软件程序<br>/usr/local/sbin:本机自行安装的软件产生的系统执行文件</p>
<p>/    根目录<br>/etc    系统的配置文件<br>/lib    执行文件所需要的函数库与内核所需要的模块<br>/bin    重要执行文件<br>/sbin    重要的系统执行文件<br>/dev    所需要的设备文件<br>这五个目录必须和根目录放在一块。<br>10.根目录最好小一些，将一些经常用到的文件目录(/home:/usr:/var:/tmp与根目录分到不同的分区<br>　　　    因为越大的分区，放入的数据也就越多，出错的几率也就越大，而如果根目录出现问题，系统就可能会出现<br>问题。</p>
</li>
</ol>
<p>11.一次性全部输出<br>    cat     -n —打印行号(包含空白行)<br>               -b —打印行号(不含空白行)<br>　             -a —将一些看不见的字符用特殊符号打出来　空格用”^I^” 回车用”$”<br>       tac(反向列出)  cat —&gt; tac<br>       nl(添加行号打印)<br>    分屏输出<br>    more<br>    less<br>    head     [-n number]<br>    tail<br>    非纯文本文件(二进制文件)<br>    od -t     c    ASCII<br>        a    默认字符<br>        o    octal 八进制<br>        d    decimal 十进制<br>        f    浮点数<br>        x    十六进制<br>12.修改文件时间<br>    stat filename    #列出该文件的各种时间</p>
<pre><code>touch     -a    仅修改访问时间
    -t    后面接欲修改的时间而不用当前时间，格式为[YYMMNNhhmm]
    -d    接欲修改的日趋而不用当前日期，也可以用--date=&quot;时间或者日    期&quot;    
    -c    仅修改文件的时间(文件状态改变的时间)
    -m    仅修改mtime(文件内容被更改的时间)

-d 和　-t 修改的是mtime和atime 但是不能修改　ctime
touch     -d &quot;2 days ago&quot; testtouch
touch     -t 150929 testtouch

ls -l 默认显示的是mtime,是内容修改的时间(modify)
touch --time=ctime　　ctime 显示的是状态被改变的时间,指的是文件属性和权限发生改变。
touch --time=atime    atime 访问时间显示的是最近文件被访问的时间(acess),cat and more可以,但是像ls和stat不会改变

ls -lc   #chagne state
ls -lu   #acess time访问时间
ls -l     #modify time 
</code></pre><p>   mkdir<br>    mkdir -p /dir/my_dir<br>    mkdir -p /dir/{test,test1,test2}<br>13.umask</p>
<pre><code>用户创建文件时一般不应有执行的权限
所以创建文件的默认权限为666也即　-rw-rw-rw-
但是目录需要有执行的权限，应为777,即-rwxrwxrwx

~$:umask
0002
~$:umask -S
u=rwx,g=rwx,o=rx

第一个与特殊权限有关，后三个与一般权限有关，在创建文件或者目录时，会将um    -ask所对应的权限拿掉
即新建文件时:
(-rw-rw-rw-)-(--------w-) = (-rw-rw-r--)所以创建文件的一般权限为-rw-rw-r    --
同理可得创建目录时的权限应该为drwxrwxr-x即775

要修改umask的值，可直接在输入umask后接所要减去的权限

即
~$:umask 002

一般情况下root成员的umask为022，这是为了安全考虑，但是一般成员的umask是0    22,即保留了同用户组的写入权利
</code></pre><p>如果同一个用户组的不同用户无法修改另一个用户的文件，那么就可能是同组成员的创建文件时的默认权限不同，可以用umask 俩修改</p>
<p>14.chattr与lsattr 设置文件的隐藏属性。</p>
<pre><code>change attributes
chattr -i 设置文件不可以被删除(包括root用户)
       -a 设置文件只能增加数据，而不能删除或者修改文件(如登陆文件)

chattr    +i +a 可以增加文件的隐藏属性，其他属性不变
    -i -a 可以除去文件的隐藏属性，其他属性不变
    =i a  仅有=后面的属性

lsattr 查看文件的隐藏属性
</code></pre><p>15.文件特殊权限　在文件或者目录中除了rwx外，还会出现s,t,S,T权限</p>
<pre><code>a.SUID    当s出现在文件所有者的x权限上时，

如
~$:ls -l /usr/bin/passwd
-rwsr-xr-x 1 root root ....
~$:ls -l /etc/shadow
-rw-r----- 1 root shadow 

用户密码存在/etc/shadow内，当用户想要修改密码时，可以使用passwd进行修改
用户mxx对于/etc/shadow没有任何权限，但是对于/usr/bin/passwd拥有r-x权限，    所以可以执行passwd命令，由于在passwd命令中有SUID权限，所以mxx在执行pass-    wd命令时，会暂时获得passwd拥有者即root的权限，所以接下来可以用passwd修改    /etc/shadow

！！！此权限仅可用于二进制程序中，且仅在执行该程序的过程中有效，此外只对    于文件有效，对于目录也是无效的


b.SGID　当s权限出现在用户组的x权限时

如
~$:ls -l /usr/bin/mlocate /var/lib/mlocate/mlocate.db
-rwx--s--x 1 root mlocate
同SUID类似，程序执行者会获得该程序用户组的支持，

还可以用在目录上
若该用户在此目录下具有w权限，用户创建的新文件的用户组与此目录组的用户组        相同
~$:su root    
~#:mkdir test
~#:ls -l test
drwxrwxr-x 2 root root ...
~#:chmod 2777 test
~#:ls -l test
drwxrwsrwx 2 root root
~#:su mxx
~$:cd test
~$:touch test
-rw-rw-r-- 1 mxx root ....
！！！此权限对于目录以及文件都有效


c.SBIT 当t出现在others的x权限上时

~$:ls -l /tmp
drwxrwxrwt 13 root root ....

用户对于某个目录具有wx的权限，即可以写入的权限，相当于说目录的属主给了用    户属组或者其他人的身份，并拥有w的权限，那么也就是说这个用户具有删除属主
创建的文件或者目录的删除等权限。但是如果该目录拥有了SBIT的权限，那么该用    户就只能删除自己所创建的文件，而不能删除属主所创建的文件。


！！！此权限只针对目录有效
</code></pre><p>　　如何设置文件以及目录的特殊权限(SUID 4,SGID 2 ,SBIT 1)</p>
<pre><code>最前面的一位为文件的特殊权限
直接用chmod 4755 filename  就可以了
还可以通过加法来实现，如SUID为u+s,SGID为g+s,SBIT为o+t

此外还有大写的S和T，代表空
如
~$:chmod 7666 test 
~$:ls -l test
-rwSrwSrwT 1 mxx mxx 
因为s和t都是替代x的，而当文件所有者以及其他用户用户组都没有x的时候，所以    就不用说其他的操作了，所以也就为空了
</code></pre><p>16.file 查看文件类型　　data或者ASCII或者binary<br>    file /usr/bin/passwd</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mxxhcm.github.io/2019/05/07/linux-search-file-command/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="马晓鑫爱马荟荟">
      <meta itemprop="description" content="记录硕士三年自己的积累">
      <meta itemprop="image" content="/images/favicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mxxhcm's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/05/07/linux-search-file-command/" class="post-title-link" itemprop="http://mxxhcm.github.io/index.html">linux search file command</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-05-07 17:03:36 / 修改时间：17:03:54" itemprop="dateCreated datePublished" datetime="2019-05-07T17:03:36+08:00">2019-05-07</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>17.命令与文件的查询</p>
<pre><code>a.脚本文件的查询which [-a] command 

b.文件的查询
    whereis和locate 利用数据库查找
    find查找硬盘
    find可以查找具有特殊要求的文件，如查找文件所有者，文件大小,SUID
        等等

    find . -size -5k -a size +1k 是会把当前目录也列出来的

    whereis [-bmsu]
    -b 二进制文件
    -m manualz路径下的文件(说明文件)
    -s source源文件
    -u 不在上述范围的其他特殊文件

    locate  查找/var/lic/mlocate数据库内的数据，该数据库每天更新一次            可手动更新，updatedb,因为他是每天更新一次，所以可能会找                到已删除的文件或者是找不到新建立的文件。
    a.与时间有关的参数
        find /tmp mtime n/+n/-n
    b.与用户或者用户组有关的文件
        find /     -uid n 
            -gid n
            -user name
            -group name
            -nouser
            -nogroup
    c.与文件权限或者名称有关的参数
        find /     -name filename    
            -size [+-]SIZE
            -type TYPE[-fbcdls]
            -perm mode    刚好等于mode
            -perm -mode    全部包含
            -perm /mode    任意一个
    find / -perm +7000 -exec ls -l {} \;
        http://www.cnblogs.com/wanqieddy/archive/2011/06/09/2076785.html
</code></pre>
          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mxxhcm.github.io/2019/05/07/linux-file-system/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="马晓鑫爱马荟荟">
      <meta itemprop="description" content="记录硕士三年自己的积累">
      <meta itemprop="image" content="/images/favicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mxxhcm's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/05/07/linux-file-system/" class="post-title-link" itemprop="http://mxxhcm.github.io/index.html">linux file system</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-05-07 17:02:37 / 修改时间：17:03:00" itemprop="dateCreated datePublished" datetime="2019-05-07T17:02:37+08:00">2019-05-07</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>18.　碎片整理，文件写入的block太碎了，文件的读写性能太差，所以可以通过碎片整理将    一个文件的block回合在一起　FAT文件系统经常需要碎片整理,但是Ext2文件类型        是索引式文件系统，所以不太需要经常碎片整理的。</p>
<ol>
<li>df 查询挂载的设备<br>dumpe2fs [-bh]    查询每个区段以及superblock的信息<br> -b<br> -h 仅列出superblock的数据<br> ls -i 查看文件的inode编号<br> 目录并不一定只占一个block，当目录内的文件数太多时，会增加该目录            的block</li>
</ol>
<pre><code>df [-haiT]　[dir/file]    显示文件系统的整体磁盘用量
    -a 列出所有的文件
    -h 显示文件系统的大写，自行显示格式
    -i 可用的inode
    -T 联通分区文件系统的名称

du [-ashkm] [dir/filename] 目录或者文件所占的容量
    默认显示的是目录的容量，不包含文件
    -s 该目录下所有文件的容量，不细列出来
    -a 显示所有的目录与文件的容量
    -h 以人们熟悉的大小方式显示出来
    -k 以kb列出容量
    -m 以mb列出容量:
</code></pre><ol>
<li>ln [-s] 链接文件<br>hard-link    硬链接，将某个目录下的block多写入一个数据,磁盘的inode与b            lock数量一般不会改变，磁盘容量也不会改变，而且删除一个文            件并不会响另一个文件的读写，但是其对于目录是没有作用的，            对于不同的文件系统也是没有用的。<br>sybomlic    </li>
</ol>
<p>21.磁盘分区　　格式化　检验与挂载</p>
<pre><code>df + 目录  查看某个目录挂载的磁盘位置
eg: df /

sudo fdisk [-l]　+ 设备　输出后面设备所有的分区内容　如不加设备名称，列                    　出整个系统。

新增或者删除分区
sudo fdisk + 设备　　对设备进行操作  
partprobe


sudo mkfs [-t ext2/ext2/vfat] + 设备名　 将某个设备格式化为某种文件系统

sudo mke2fs [-b block_size] [-i inode_size]  [-L 卷标] [-cj -c 检查磁盘                错误　-j 加入日志文件] + 设备名

sudo fsck [-CAay] [-t filesystem] + 设备
    -C  使用直方图显示进度
    -A  依据/etc/fstab内容，扫描设备
    -a  自动修复检查到的有问题的扇区
    -y  与-a 类似
    ext2 ext3 支持额外参数　　[-fD] -f 强制进入设备进行检查
                    -D 对文件系统下的目录进行优化配                                置
sudo badblocks [-sv] + 设备  -s 在屏幕上列出进度 -v 在屏幕上看到进度
</code></pre><p>22.mount [-aoltnL] 挂载文件系统与磁盘 P227</p>
<pre><code>-a　按照/etc/fstab的配置信息将所有未挂载的磁盘挂载上来
-l　可增加label名称
-t　加上文件类型
-n　默认情况下会将挂载情况写入/etc/mtab，加入-n可以不写入
-L　可以利用卷标名来挂载
-o 加一些挂载时的额外参数　
    ro(只读)　rw(可写)
    async sync 此文件系统是否使用同步写入或者异步的内存机制
    auto noauto 允许此分区以mount -a自动挂载(auto)
    dev nodev 是否运行在此分区创建设备文件
    suid nosuid 
    exec noexec 是否可拥有可执行binary文件
    user,nouer 设置user参数可以让一般user能对此分区挂载
    defaults　默认为rw,suid,dev,exec,auto,nouser,async
    remount 重新挂载，在系统出错，或者重新更新参数时
mount 设备文件名　挂载点

用卷标名挂载设备
~#:mount -L mxx_logical /medic/mxx    

用磁盘设备名挂载
~#:mount /dev/sdb1 /mnt/usb

~#:mount -t iso9660 /dev/cdrom /media/cdrom

~#:mount -o remount,rw,auto /dir

~#:mount -o loop ~/my.iso/myfile.iso /mnt/iso
....
</code></pre><p>23.磁盘参数修改<br>    设备用文件来代表    通过文件的major与minor数值来替代<br>                Major 主设备代码    Minor　次设备代码<br>                /dev/hd<em>  major = 3<br>                /dev/sd</em>  minor = 8<br>    mknod [bcp]<br>        b    设置设备名称成为一个外部存储文件，如硬盘<br>        c    设置设备名称成为一个外部输入文件，如鼠标/键盘<br>        p    设置设备名称成为一个FIFO文件</p>
<pre><code>e2label /dev/sdb5 + 新的label名称

tune2fs [-jlL]
    -l  类似 dupme2fs -h 
    -j  将ext2转换为ext3
    -L  类似于　e2label 

hdparm -Tt /dev/sd*  测试SATA硬盘的读取性能
</code></pre><p>24.挂载.iso文件</p>
<pre><code>mount -o loop /home/mxx/ubuntu16.04 /mnt/ubuntu16.04

dd命令　创建一个大文件 
dd if=/dev/zero of=/home/mxx/filename bs=1M count=512
    if--input file    /dev/zero 一直输出0
    of--output file    将if中的内容加入到of接的文件名中
    bs--block size    
    count    共有多少个bs
</code></pre><p>25.构建swap空间</p>
<pre><code>例如将第二快硬盘的第五个分区改为swap分区
~#:sudo fdisk -l /dev/sdb
    p
    t 5
    82
    w
    partprobe
将/dev/sdb5更改为swap类型的文件系统

~#:mkswap /dev/sdb5

~#:free 查看memory以及swap分区的使用情况

~#:swapon /dev/sdb5 使用/deb/sdb5的swap分区    
~#:swapon -s 查看目前使用的swap设备有哪些
~#:swapoff /dev/sdb5
</code></pre><p>26.boost sector 与　superblock 的关系<br>    1.superblock的大小为1024b<br>    boost sector与superblock 各占一个block ,可以查看/boot的挂载目录<br>        0号block给boost ，1号block给superblock<br>    2.superblock的大小大于1024b,如为4096b<br>    superblock在0号blok ,但是superblock 只有1024b,所以为了防止空间浪费，于是        在0号block内，superblock(1024-2047),boost sector(0-1023),2048后            面的空间保留。<br>    实际情况中，由于在比较大的block中，我们能将引导装载程序安装到superblock            所在的0号block,但事实上还是安装到启动扇区的保留区域。<br>    比较正确的说法是，安装到文件系统最前面的1024b内的区域，就是启动扇区</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mxxhcm.github.io/2019/05/07/linux-compress-uncompress/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="马晓鑫爱马荟荟">
      <meta itemprop="description" content="记录硕士三年自己的积累">
      <meta itemprop="image" content="/images/favicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mxxhcm's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/05/07/linux-compress-uncompress/" class="post-title-link" itemprop="http://mxxhcm.github.io/index.html">linux compress uncompress</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-05-07 17:01:24 / 修改时间：17:02:06" itemprop="dateCreated datePublished" datetime="2019-05-07T17:01:24+08:00">2019-05-07</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>29.gzip ,zcat ,bzip2,bzcat , gunzip ,bunzip2,7z,zip,rar</p>
<pre><code>gzip 和 bzip2　公用    
    -d 解压缩参数    
    -# #取1-9　压缩等级 -1最快
    -v 显示压缩比
    -k 保留原文件
    -z 压缩参数
    -c 将压缩过程中产生的数据输出到屏幕上(压缩后的数据)可以将其输出重定向
    -t 检验一个压缩文件的一致性

zip [-dmbrfFg]
    -d　从zip文件中移除一个文件
    -m  将特定文件移入zip文件，且删除特定文件
    -g　将文件压缩附加到zip文件中
    -r  包括子目录
    -f  以新文件取代旧文件
    -F　修复已经损毁的压缩文件
    -b　暂存文件的路径
    -v　显示详细信息
    -u　值更新改变过的文件
    -T　测试zip文件是否正常
    -x　不需要压缩的文件
~#:zip -r myfile.zip ./*
~#:zip -d myfile.zip myfile　 //删除压缩文件内的某个文件
~#:zip -g myfile.zip myfile   //向一个压缩文件内添加新文件
~#:zip -u myzip

unzip [-dnovj]
    -v  查看压缩文件目录，但是不解压
    -d  指定解压到的目录
    -n　不覆盖已有文件
    -o　覆盖已有文件
    -j  不重建文档的目录结构，把所有文件解压到同一目录下

7z
~#:apt-get install p7zip
7z [x|a] [-rotr]
    a　代表添加文件到压缩包
    x　代表解压缩文件
    -r 表示递归所有文件
    -t 制定压缩类型
    -o 指定解压到的目录
~#:7z a -t 7z -r myfile.7z  ~/myfile
~#:7z x myfile.7z -r -o ~/

rar
~#:apt-get install rar
~#:rar x myfile.rar
~#:rar a myfile.rar myfile    
</code></pre><p>30.tar命令</p>
<pre><code>-c  --create
-x  --extract
-t  --list
-v  --verbose
-f  --file
-j  --bzip2
-z  --gzip --gunzip 
-C  --directory DIR
           change to directory DIR

-p  --preserve-permissions, --same-permissions
-P  --absolute-names

--exclude=file

~#:tar -cvj -f ~/my_bak/etc.newer.passwd.tar.bz2 --newer-mtime=&quot;2016/09/23&quot;            /etc/*

~#:tar -cvj -f ~/my_bak/etc.tar.gz   /etc
~#:tar -xvj -f ~/my_bak/etc.tar.gz -C /tmp
~#:tar -xvj -f ~/my_bak/etc.tar.gz |etc/shadow
~#:tar -tfj -f ~/my_bak/etc.tar.gz | grep &#39;shadow&#39;

tarfiel tarball

磁带机/dev/st0
tar -cv -f /dev/st0 /home /root /etc
</code></pre><ol>
<li><p>dump 与　restore</p>
<p>dump </p>
<pre><code>-S    size
-u    update    recode the dump time to /var/lib/dumpdates
    -u只能对level 0 操作
-j    add compress bz2(默认压缩等级为 2)
-v    verbose   详细的
-W    列出/etc/fstab中的具有dump设置的分区是否被备份过
-f    
-level    备份的等级(0-9) 对于文件系统有九个等级
            对于单个目录只有0级
</code></pre><p>~#:dump -0u -f /root/etc.dump /etc</p>
</li>
</ol>
<pre><code>restore
    -t    list
    -C    compare
    -i    itera
    -r    r    

~#:restore -t -f /root/boot.dump
~#:restore -C -f /root/boot.dump
~#:mkdir test_restore
~#:sudo fdisk /dev/sdb
    new a /dev/sdb2
~#:cd test_restore    
~#:restore -r -f /root/boot.dump
~#:restore -i -f /root/etc.dump.bz2
    help
    ls
    add
    delete
    extract
    quit
</code></pre><p>32.mkisofs<br>    -o +生成的镜像名<br>    -r 记录更完整的文件信息，包括UID,GID与权限等<br>    -v 显示构建iso的过程<br>    -V 新建Volume<br>    -m exclude 排除某文件<br>    -graft-point </p>
<pre><code>~#:mkisofs -r -v -o ~/my.iso/system.iso -m /home/lost+found -graft-point/home=/home /root=/root /etc=/etc
</code></pre><p>33.dd<br>    可以备份整块硬盘或者整块磁盘　　包括　superblocks以及boot sector 等等</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mxxhcm.github.io/2019/05/07/linux-vim/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="马晓鑫爱马荟荟">
      <meta itemprop="description" content="记录硕士三年自己的积累">
      <meta itemprop="image" content="/images/favicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mxxhcm's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/05/07/linux-vim/" class="post-title-link" itemprop="http://mxxhcm.github.io/index.html">linux vim</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-05-07 16:58:22 / 修改时间：16:59:23" itemprop="dateCreated datePublished" datetime="2019-05-07T16:58:22+08:00">2019-05-07</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>34.常用的vim命令</p>
<pre><code>0 $
hjkl
oO iI aA
1G gg G nG
n-space n-ENTER nG
nj nk nh nl
x dd yy p
/word ?word
n N
:1,10s/word/word.rp/g(c)
:1,$s/word/word.rp/g(c)
ctrl+f ctrl+b
J  
u . ctrl+r

:w [filename]
:r [filename]
:n1,n2 w [filename]


:set nu
</code></pre><p>35.其他vim使用事项(290)</p>
<p>　　　中文编码<br>    tty1-tty6默认不支持中文编码　　<br>    修改终端　接口语系　<br>    LANG=zh_CN.big5</p>
<pre><code>ubuntu  don&#39;t have dos2UNIX or UNIX2dos  but is has tofrodos

　　　    frodos filename
    todos filename
        -b .bak
        -v ver

语系编码转换
iconv -o保留原文件，-o加新文件名
iconv -f big5 -t utf8 filename -o filename
</code></pre>
          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mxxhcm.github.io/2019/05/07/linux-git/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="马晓鑫爱马荟荟">
      <meta itemprop="description" content="记录硕士三年自己的积累">
      <meta itemprop="image" content="/images/favicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mxxhcm's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/05/07/linux-git/" class="post-title-link" itemprop="http://mxxhcm.github.io/index.html">linux git</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-05-07 16:56:44 / 修改时间：16:57:03" itemprop="dateCreated datePublished" datetime="2019-05-07T16:56:44+08:00">2019-05-07</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>27.how to use github in ubuntu</p>
<pre><code>安装github
sudo apt-get install git git-core git-gui
检查ssh
ssh -T git@gitgub.com
如果看到
Warning: Permanently added ‘github.com,204.232.175.90’ (RSA) to the list         of known hosts. 
Permission denied (publickey).
则可以继续
~$:cd ~/.ssh
查看是否有ssh keys
并没有发现执行下一步    
~$:ssh-keygen -t rsa -C &quot;github 邮箱&quot;
在github上登陆自己的账号，找到Settings-&gt;SSH Keys -&gt; ADD SSH Key 将
    is_rsa.pub文件中的字符串复制进去，不含空格和回车。
~$:ssh -T git$github.com

git config  --gloabl user.name &quot;github用户名&quot;
git config  --gloabl user.email &quot;github邮箱&quot;

在github上新建repository 名为 testgit
~$:cd mkdir /home/mxx/github/testgit
~$:cd github/testgit
~$:git init
~$:touch Readme
~$:git add Readme
~$:git commit -m &#39;add readme file&#39;
    版本回退
    ~$:git reset --hard HEAD^ 回退到上个版本 
    ~$:git reflog 查看提交的id
    ~$:git reset --hard id
    管理修改
     在工作区修改后回退　
    ~$:vim file
    ~$:git checkout -- file
     加入缓存区后回退
    ~$:git add file
    ~$:git status
    ~$:git reset HEAD file 清除了缓存去但是工作区还有修改
    ~$:git status
    ~$:git checkout -- file 清除工作区修改
     加入版本库后回退
    ~$:git commit -m &quot;add file&quot;
    ~$:git reset --hard HEAD^ 但是在提交到远程库后不能撤销。。
    删除文件
    ~$:rm test
    ~$:git status 查看状态
    ~$:git rm test
    ~$:git commit -m &quot;delete file test&quot;
    如果误删了文件的话可以用(前提是已经提交到版本库，否则无法恢复)
    ~$:git checkout -- file

远程库
~$:git remote add origin git@github.com:mxxhcm/testgit.git
~$:git remote add origin https://github.com/github用户名/github仓库.git
~$:git push -u origin master 把本地的master库和远程的master库连接起来，
            以后推送或者拉取就会简单
    输入github账号和密码
　推送
~$:git push origin master
　拉取
~$:git pull    

还可以直接克隆一个已有的仓库，
~$:git clone https://github.com/github用户名/github仓库.git


分支管理
~$:git branch dev 创建分支
~$:git checkout dev 切换分支
~$:git branch 查看当前分支
~$:git merge dev 将分支合并
~$:git brancd -d dev 删除分支
</code></pre>
          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mxxhcm.github.io/2019/05/07/linux-bash/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="马晓鑫爱马荟荟">
      <meta itemprop="description" content="记录硕士三年自己的积累">
      <meta itemprop="image" content="/images/favicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mxxhcm's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/05/07/linux-bash/" class="post-title-link" itemprop="http://mxxhcm.github.io/index.html">linux bash</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-05-07 16:55:17 / 修改时间：16:55:40" itemprop="dateCreated datePublished" datetime="2019-05-07T16:55:17+08:00">2019-05-07</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>36.type 查看命令的来自于哪里　　是bash还是外部命令还是别名<br>    file外部命令<br>    alias别名<br>    builtin内置在bash内<br>        -t -p -a</p>
<pre><code>type -t ls 
~$:alias 以file builtin alias 列出该命令的类型
type -a ls 列出所有的名为ls的命令
</code></pre><p>37.echo 与 unset</p>
<pre><code>~#:echo $PATH
~#:echo ${PATH}

&quot;&quot;内的特殊字符可以保持原有特性　var=&quot;lang is $LANG&quot; 那么 echo $var 输出            var=en_US.UTF-8
&#39;&#39;内的特殊字符仅保存为一般文本

反单引号`可以获得其他命令的信息
version=`uname -r`  =$(uname -r)    
</code></pre><p>38.env以及export查看常见变量<br>    /etc/profile<br>    /etc/bash.bashrc</p>
<pre><code>RANDOM产生0~32767的随机数
产生0-9的用declare -i number=$RANDOM*10/32767    echo $number


HOME
SHELL
HISTSIZE
MAIL
PATH    /etc/environment
LANG
RANDOM
</code></pre><p>　　set查所有变量</p>
<pre><code>HISTFILE=~/.bash_history
MAILCHECK
PS1    提示符的设置
$    关于本shell的PID
?    上个变量的回传码，正确返回0，错误返回其他值，可以利用代码差错
OSTYPE HOSTTYPE MACHTYPE    主机硬件与内核的等级    


export将自定义变量转换为环境变量

locale -a 文件的语系

read 赌球来自键盘输入的变量
-p    用户可以输入提示语
-t    光标等待用户输入时间

~#:read -p &quot;hello&quot; -t 10 variable

declare 声明变量的类型　　默认为字符串
-x    声明环境变量 
-i    将变量定义为整形
-a    将变量定义为数组
-r    将变量设置为readonly  若要删除该变量，必须退出该bash重进
-p    单独列出变量的类型

ulimit 与文件系统以及程序的限制关系
-a 后面不接任何参数,可以列出所有的限制额度
-c 某些进程发生错误，系统可能会将该进程在内存中的信息写成文件，这种文件            就称为内核文件(core file)。此为限制每个内核文件的最大容量
-f 此文件可以创建的最大文件容量,一般为2G:
-d 进程可使用的最大断裂内存(segment)容量
-l 可用于锁定(lock)的内存量
-t 可使用的最大CPU时间
-u 用户可使用的最大进程(process)数量

-H hard limit 严格的限制　　必须不能超过
-S soft limit 警告的限制　　可以超过，但要有警告信息
</code></pre><p>40.变量的使用<br>　　变量内容的测试与内容替换<br>    echo ${variable#<em>}<br>    echo ${variable##</em>}</p>
<pre><code>echo ${variable%*}
echo ${variable%%*}

echo ${variable/bin/BIN}
echo ${variable//bin/BIN}

变量的测试与替换

new_var=${old_var-content}
用新的变量的值区替代旧的变量的值，新旧变量可为同一个，若old_var不存在，则将
content的值给new_var,而若old_var的值存在则将其赋给new_var;
</code></pre><p>　　加上:的话，即使old_var为空的话，也会用content的值去赋给new_var</p>
<pre><code>username=&quot;&quot;
username=${username:-root}
echo $username

将-换成=是将原变量一同更改
</code></pre><p>　　将-换成?是当变量不存在时，可以发出错误信息</p>
<p>40.命令别名设置功能　</p>
<pre><code>alias
alias lm=&#39;ls -al&#39;

unalias
</code></pre><p>41.history命令与文件<br>    history (n)列出最近的第(n)条命令</p>
<pre><code>!number    执行history的第number条命令
!command　由最近的命令开始搜寻开头为command的命令
!!    执行上一个命令
</code></pre><p>42.Bash Shell的操作环境</p>
<p>　　　路径与命令查找顺序<br>    先由相对路径或者绝对路径寻找<br>    a.alias<br>    b.builtin<br>    c.$PATH这个变量的顺序找到的第一个命令<br>　　　<br>　　  bash的登陆界面以及欢迎信息<br>    /etc/issue  #<br>    /etc/issue.net  #提供telnet远程登陆，当使用telnet连接到主机时显示该内容<br>    /etc/motd(?)-&gt;/etc/update-motd.d/　<br>    /etc/issue    \d \l \m \n \o \r \t \s \v<br>        \d 本地端时间的日期<br>        \l 显示第几个终端机<br>        \m 显示硬件等级<br>        \n 显示主机的网络名称<br>        \o 显示domain name<br>        \r 操作系统的版本<br>        \t 显示本地端时间的时间<br>        \s 操作系统的名称<br>        \v 操作系统的版本</p>
<pre><code>  bash的环境配置文件    

login shell 以及non-login shell
   /etc/profile系统整体的设置
   ~/.profile用户个人设置

login shell
    /etc/profile
    /etc/inputrc    /etc/profile.d/*sh
    ~/.profile
    ~/.bashrc    /etc/bashrc
    开始操作bash

non-login shell
    取得non-login shell 时，该bash配置文件仅会读取~/.bashrc


source 配置文件名
如
    source ~/.bashrc
    . ~/.bashrc

/etc/manpath.config使用man时man page的路径到哪里去找
用tarball的方式安装的时候,那么man page可能放置在/usr/local/softpackage/\    man里，需要以手动的方式将该路径加入到/etc/man.config里面

 终端机的环境设置
stty　　setting tty(终端机的意思)
    -a 将所有的stty参数列出来

    如何设置呢  比如将erase设置为ctrl+h来控制stty erase ^h
    ctrl + c 终止目前的命令
　　ctrl + d 输入结束，例如邮件结束
　　ctrl + m ENTER
    ctrl + u 在提示符下，将整行命令删除
　　ctrl + z 暂停目前的命令

set
　set $-　那个$-变量内容是set的所有设置 
  uvxhHmBC

/etc/inputrc其他的按键设置功能

 通配符与特殊符号
通配符* ? [] - ^
特殊字符　# \ | ; ~ $ &amp; ! / &gt;,&gt;&gt; &lt;,&lt;&lt; &#39;&#39; &quot;&quot; ``或者$() () {}
</code></pre><p>43.数据流重定向</p>
<pre><code>&gt; &gt;&gt;
&gt;　输出重定向　
    ls -ld /etc/ ~/directiry/etc_dir
std output 
    find / -name ~/.bashrc &gt; find_result 
std error output
    find / -name ~/.bashrc &gt;fing_right 2&gt; find_error !必须为2&gt;

    find / -name ~/.bashrc &gt; find_result 2&gt;/dev/null

    find / -name ~/.bashrc &gt;find_result 2&gt;&amp;1
&gt;&gt; 追加到某个文件结尾

&lt; &lt;&lt;
cat &gt; catfile
&gt;
&gt;
&gt; ctrl + D
从文件中读入数据
cat &gt; catfile &lt; ~/.bashrc
重定义输入结束符
cat &gt; catfile &lt;&lt; &quot;eof&quot;

&amp;&amp; || 命令从左到右依次执行　根据回传码$0的值，继续向右执行命令
</code></pre><p>44.PIPE</p>
<pre><code>管道命令仅会处理stdout并不会处理stderrout
管道命令必须要能接受前一个命令传回来的数据成为stdinput

cut -d &#39;分隔字符&#39; -f (fields)fields为数字
cut -c 字符范围

    cut -d &#39;:&#39; -f 2,3
    echo $PATH | cut -d &#39;:&#39; -f 2,4

    cut -c 20-30
    export | cut -c 12-

    不过cut 对于多个空格当做分隔字符的处理做的不够好

    last最近登录的用户

grep [-aincv] [--color=auto] &#39;关键字&#39; filename
    -a 将binary文件以text的方式查找数据
    -i 忽略大小写
    -c 计算查找到的字符串的个数
    -n 顺便输出行号
    -v 反向选择
dmesg | grep -n A3 B2 &#39;eth&#39;
    A --after  B --before

last | grep &#39;mxx&#39; | cut -d &#39;&#39; -f 1

sort wc uniq

sort     排序
    [-fbMnrutk] [file]
        -f 不区分大小写
        -u uniq
        -t 分隔符
        -k 以第几个字段进行排序
        -n 以数字进行排序(默认是以字母)
        -m 反向排序
    eg:
    sort -t &#39;:&#39; -k 3 -n /etc/passwd    
    or
    cat /etc/passwd | sort -t &#39;:&#39; -k 3 -n

uniq 去重
    [-il] [file]
    -i 不区分大小写
    -c 进行计数    

    last | cut -d &#39; &#39; -f 1 | sort | uniq
    首先需要排序　才能去重    
last | cut -d &#39; &#39; -f 1 | sort | uniq -c

tee双重重定向将一份数据可以同时传到文件内以及屏幕中
    last | tee last.list | sort 

tr 删除一段文字或者对文字内容进行替换(如删除dos中的换行符^M)
    [-ds]
    -d 删除信息中的某个字串
    -s 替换重复字符

    last | tr &#39;[a-z]&#39;  &#39;[A-Z]&#39;
    echo $PATH -d &#39;:/&#39;
    cat /root/passwd | tr -d &#39;\r&#39; &gt; passwd.linux

col 简单处理
    [-xb]
    -x 将tab键换成空格键

    cat  manpath.config | col -x | cat -A | more



join 将两个文件中具有相同数据的一行相加
    join [-ti12] file1 file2
    -i 大小写忽视
    join -t &#39;:&#39; passwd shadow
    join -t &#39;:&#39; -1 4 passwd -2 3 group


paste直接将两行粘在一起，默认并以tab键分开
    -d后面可以加分隔字符默认以tab分隔
    -表示来自standard input的数据的意思
    paste shadow passwd
    cat shadow | paste passwd - | head -n 3

expand将tab键换成空格默认是8个空格
    -t 参数可以自行设定空格数
    nl file | expand -t 6 - | cat -A

split [-bl] file PREFIX
    -b后面加文件欲切割成的文件大小
    -l以行数来切割
    split -b 1M /etc/termcap termcap
    ls -l termcap*

    cat termcap* &gt;&gt; termcapback

    ls -l / | spilt -l 10 -lsroot
    wc -l lsroot

xargs产生某个命令的参数
    [-pne0]
    -p 执行每个命令询问用户
    -e 是EOF的意思，后面可接一个字符，当xargs遇到这个字符，便会停止                操作    
    -n 后面接次数，每次command命令执行时，要使用几个参数
-用来代替stdout以及stdin
tar -cvf - /home | tar xvf -    
</code></pre><p>正则表达式</p>
<p>45.dmesg 查看内核信息</p>
<p>46.grep -n  ‘^$’ regular_express<br>    grep ‘^the’ file<br>    grep ‘<sup><a href="#fn_[:lower:]" id="reffn_[:lower:]">[:lower:]</a></sup>‘ file<br>    grep ‘.$’ file<br>    grep ‘^<sup><a href="#fn_a-zA-Z" id="reffn_a-zA-Z">a-zA-Z</a></sup>‘ file<br>    grep ‘go\{2,3\}g’ file</p>
<pre><code>对比
ls -l /etc/a*
grep -n &#39;^a.*/&#39; 
</code></pre><p>nl 打印出文件并加上行号</p>
<p>47.sed 工具    </p>
<pre><code>[-in]
-i    直接修改文件内容
-n    静默
-e 直接在shell下编辑
-c replace
-a append
-p print

nl file | sed &#39;2,3d&#39;
nl file | sed &#39;$a add a test&#39;
nl file | sed -n &#39;5,7p&#39;
nl file | sed &#39;2,5c jkadfk\
            &gt;fdasf\
            &gt;asfddf &#39;
nl file | sed &#39;s/s_place/s_replace/g&#39;    
nl file | sed &#39;/^$/d&#39;
</code></pre><p>48.egrep 扩展正则表达式</p>
<pre><code>egrep -n &#39;^$|^#&#39; file
egrep -n &#39;go?d&#39; file　0个或者一个?之前的字符
egrep -n &#39;go+d&#39; file　一个及以上+之前的字符
grep -n &#39;go*d&#39; file　0个或者0个以上*之前的字符
</code></pre><p>49.printf 格式化打印</p>
<pre><code>printf &#39;%s\t %s\t %s\t \n&#39; $(cat file)
printf &#39;%10s %5i %5i \n&#39; $(cat file)
</code></pre><p>50.awk</p>
<pre><code>last | awk &#39;{print $1 &quot;\t&quot; S3 &quot;\t&quot; $4 NF NR}&#39;
cat /etc/passwd | awk &#39;BEGIN {FS=&quot;:&quot;} $3 &lt; 10 {print $1 &quot;\t&quot; $3 }&#39;

cat /etc/passwd | awk &#39;NR==1{printf &quot;%10s %10s %10s %10s &quot;,$1,$2,$3,&quot;tot        al&quot;}
    NR&gt;=2{total=$2+$3;
        printf &quot;%10s %10d %10d %10.f&quot;,$1,$2,$3,total&quot;}&#39;
</code></pre><p>51.diff 文本比较，通常比较一个文件的不同版本<br>    diff [-bBi] file1 file2<br>        -b　忽略一行中仅有多个空白的区别<br>        -B  忽略空白行的区别<br>        -i  忽略大小写<br>    diff test.old test.new<br>    diff -Naur test.olc test.new &gt; test.patch<br>    patch 补丁<br>    cat test.patch<br>    patch -pN test.patch 更新旧版<br>    patch -R -pN test.patch 恢复为旧版</p>
<p>学习shell script<br>看一下自己写的/home/mxx/scripts/delete_dir<br>52.echo $(($num1 operand $num2))<br>    进行运算<br>53.source file.sh   sh file.sh   ./file.sh<br>    source 是将该shell拿到父进程中来执行，所以各项操作都会在该bash内执行<br>    sh和./是开启一个新的shell来执行<br>54.test<br>    test [-rwxfd]<br>        [-nt -ot -ef ]<br>        [-eq -nq -gt -lt -ge -le]<br>        [-z ]<br>        [-a -o]</p>
<pre><code>test -r filename
test &quot;$filename&quot; == &quot;content&quot;

[ &quot;$filename&quot; == &quot;$varible&quot; ]
</code></pre><p>55.$# $@ $<em><br>    $#:变量个数<br>    $@:变量内容<br>    $</em>:</p>
<p>56.netstat -tuln 列出本机上的网络服务</p>
<p>57.if,case,function,<br>     if<br>    if [ “$filename” == “mxx” ];<br>    then<br>        …<br>    elif [ … ];<br>    then<br>        ….<br>    else<br>        ….<br>    fi<br>     case<br>    case $variable in<br>        “first”)<br>        …<br>        ;;<br>        “second”)<br>        …<br>        ;;<br>     function<br>    function printfinfo()<br>    {<br>        echo “This is a file”<br>    }<br>58.循环 while, until , for<br>      while<br>    while [ “$i” -lt “$n” ]<br>    do<br>        ..<br>    done<br>      until<br>    until [ “$i” -ge “$n” ]<br>    do<br>        …<br>    done</p>
<pre><code>  for
for var in f1 f2 f3...
do
    ...
done

  for ((初始化值;控制值;执行步长))
</code></pre><p>59.seq 产生一系列数<br>    seq [-s]</p>
<pre><code>~$:seq -s &quot; &quot; 3 10
3 4 5 6 7 8 9 10
</code></pre><p>60.sh [-vxn] my.sh<br>    sh -x    执行过程<br>    sh -n    查询语法问题</p>
<p>61.联想Y400/y400/Y500/y500拆机教程<br>    <a href="http://v.youku.com/v_show/id_XNTA4MDI1NDky.html?from=s1.8-1-1.2" target="_blank" rel="noopener">http://v.youku.com/v_show/id_XNTA4MDI1NDky.html?from=s1.8-1-1.2</a><br>    换屏幕视频<br>    <a href="http://v.youku.com/v_show/id_XODAzOTM2OTAw.html?from=s1.8-1-1.2" target="_blank" rel="noopener">http://v.youku.com/v_show/id_XODAzOTM2OTAw.html?from=s1.8-1-1.2</a></p>
<p>62.id和finger<br>    id 用来显示某个用户的id信息<br>    finger 用来分析某个用户信息</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mxxhcm.github.io/2019/05/07/linux-account/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="马晓鑫爱马荟荟">
      <meta itemprop="description" content="记录硕士三年自己的积累">
      <meta itemprop="image" content="/images/favicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mxxhcm's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/05/07/linux-account/" class="post-title-link" itemprop="http://mxxhcm.github.io/index.html">linux account</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-05-07 16:54:11 / 修改时间：16:54:39" itemprop="dateCreated datePublished" datetime="2019-05-07T16:54:11+08:00">2019-05-07</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ol>
<li><p>/etc/passwd /etc/shadow /etc/group /etc/gshadow<br>/etc/passwd<br>mxx:x:1000:1000:mxx,,,:/home/mxx:/bin/bash<br>账号名称,密码，UID,GID,用户信息说明列，主文件夹，shell<br>/etc/shadow<br>mxx:……..:17034:0:99999:7:::<br>账号名称，密码，最近密码更改日期，密码更改多久后才能重新更改，密码多长时间需要重新修改，密码需要修改前多少天发送警告，密码过期后宽限时间，账号失效日期，(形式和密码更改日期一样)，保留字段<br>/etc/group</p>
<p>用户组名称，用户组密码,GID,此用户组支持的账号名称</p>
<p>/etc/gshawod<br>用户组名，<br>密码列，开头为!表示无合法密码<br>用户组管理员的账号<br>该用户组的所属账号</p>
<p>UID 0系统管理员</p>
<pre><code>1-99系统账户
100-499用户创建的系统账号
500-65535一般用户
</code></pre><p>64.修改密码<br>一般账户:passwd<br>root账户:<br>重启后进入单用户维护模式<br>忘记密码后，以各种方式清空/etc/shadow中root的密码字段。登陆后再用passwd修改密码    </p>
</li>
</ol>
<p>65.账号管理</p>
<pre><code>usermod -G group user将一个用户加入其他用户组
初始用户组用户的/etc/passwd的第四个字段即为该用户的初始用户组的GID
groups查看当前登陆用户的用户组。第一个为有效用户组
newgrp更改用户的有效用户组，但是用户组必须当前用户支持的用户组

UID/GID密码参数的设置在 /etc/login.defs

useradd [-ugGmMcdrsef]　　调用/etc/default/useradd的数据
    -u UID             /etc/skel用户主文件加参考基准目录
    -g initial group  
    -G 这个账户可以加入的其他用户组
    -m 创建用户主文件　
    -M 不创建用户主文件
    -s 接一个默认shell
    -r 创建一个系统账户
    -c /etc/passwd的第五列说明
    -d 制定某个目录成为主文件夹
    -e 后面跟一个日期YYYYMMDD写入shadow的第八字段，账号的失效日期从1970年来总日数，若账号失效，无论密码是否正确，都无法登陆
    -f 后面接shadow的第七字段,判定密码是否会失效,0为立即失效,-1为永不失效(密码只会过期强制登陆时重新设置),大于0的表示如n，如果在n天后，没有登陆修改密码，那么在n天后密码会失效，再也无法登陆，但是在如果在n天内登陆并修改密码，就可以继续使用。
</code></pre><p>例子<br>~#:useradd -d /home/mxxhcm -k /etc/skel/ -m mxxhcm -s /bin/bash</p>
<pre><code>    -D useradd的默认值    

修改密码
passwd [账号]　[--stdin]
~#:passwd　后面没有接密码，就是修改当前用户的密码
passwd -l -u -S -n -x -w -i
-l lock
-u unlock
-S 密码相关参数
-n next　多长时间不能修改第四个字段
-x 多少天必须修改　第五个字段
-w warn第六个字段
-i 失效日期　第七个字段

echo &quot;passwd&quot; | passwd --stdin user

chage [-ldEImMW] 账号名
    -l　列出详细参数
    -d　第三字段
    -E　第八字段　账号失效　
    -I　第七字段　密码失效
    -m　第四字段
    -M　第五字段
    -W　第六字段

chage -d 0 user

usermod [-;cdefgGasuLU]
    -l 修改账户名称
    -L lock
    -U unlock
    修改/etc/shadow
    -f 第七字段
    -e 第六字段
    -c /etc/passwd 第五字段
    -d /etc/passwd 主文件夹第六字段
    -g /etc/passwd 第四个字段GID
    -G 后面接次要用户组，修改这个用户能支持的用户组，修改/etc/group
    -a 与-G连用，增加次要用户组的支持而非设置
    -u UID /etc/passwd的第三个字段,UID
    -s 接shell的实际文件

sudo usermod -l &#39;my_usename&#39; username


userdel 
    userdel -r username　删除主文件夹
    find / -user username
    userdel username
</code></pre><p>66.finger查看用户的数据<br>    finger 查看当前用户的数据<br>    finger username 查看某用户的信息</p>
<pre><code>chfn 就是相当于-c参数,修改当前用户/etc/passwd的第五个字段值


chsh -s　修改当前用户的shell

chsh -s /bin/bash

id [username]
列出当前用户或者username的所有id
</code></pre><p>67.group的增加与修改<br>    groupadd [-gr]<br>        -g　指定GID<br>        -r　新建系统用户组<br>    groupmod [-gn]<br>        -n　修改组名<br>    groupdel [groupname]</p>
<pre><code>尽量少修改GID否则会造成系统资源的混乱
当用户组为某个用户的初始用户组时，就无法删除该用户组

gpasswd　[-AMrR] groupname
    -A 将groupname的控制权交给后面用户
        gpasswd -A mxx groupname
    -M 将某些账号加入到这个用户组中
    -r 将groupname的密码删除
    -R 将groupname的密码失效

gpasswd groupname 设置groupname管理密码
gpasswd groupname 
-A 增加groupname的管理员
-r让密码删除

gpasswd -ad username groupname
    -a增加
    -d删除
</code></pre><p>68.ACL  Acess Control List<br>    针对单一用户或者目录来进行rwx的权限设置<br>    setfacl　[-m|-x]    -m设置acl参数    -x删除后续acl参数<br>        [-bkRd]<br>        -b删除所有的acl参数;-k删除默认的acl参数;-R递归设置acl;-d设置默认的acl，只对目录有效<br>    setfacl [-m|-x] [bkRd]<br>        -b　删除所有ACL参数<br>        -k　删除默认ACL参数<br>        -R　递归设置ACL参数，包括子目录<br>        -d  设置默认ACL参数，只对目录有效</p>
<pre><code>    -x　删除后续的ACL参数
    -m  设置后续的ACL参数

    -m u:mxx:rw my_file

getfacl my_file

针对有效权限mask的设置
setfacl -m m:rwx my_file
mask在此可以来规定最大允许的权限。取得是mask和用户以及用户组的权限交集。        若用户mxx的权限为rwx 但是mask为r--，那么mxx的权限只能为r--.

~#:setfacl -m d:u:mxx:rwx file　递归设置目录的acl
~#:setfacl -m m:rw acl_test
~#:setfacl -m g:mxx:rwx acl_test
~#:getfacl acl_test
~#:setfacl -b file 删除acl
</code></pre><p>69.切换用户，切换账号<br>    su[- -l -m -c]<br>    su - 切换到root用户以login shell变量的读取方式<br>    su 切换到root用户，以nologin shell变量的读取方式登陆系统<br>｀｀    su -l 加想要切换的账号login shell<br>    su -c 只提升一次到root权限<br>    su -m 使用目前用户的环境变量，不读取新用户的配置文件</p>
<pre><code>su - -c cat /etc/shadow

sudo -u mxx ...提升到mxx权限
</code></pre><p>70.visudo的设置<br>    1.<br>    visudo 修改/etc/sudoers<br>    其他用户使用root身份<br>    root ALL=(ALL) ALL<br>    用户账号<br>    登陆者的来源主机名，<br>    可切换的身份<br>    可执行的命令<br>    2.<br>    最左边加一个%表示用户组<br>    利用用户组以及免密码<br>    %wheel ALL=(ALL) ALL<br>    usermod -a -G wheel user</p>
<pre><code>免密
%wheel ALL=(ALL) NOPASSWD: ALL
3.
mxx ALL=(root) /usr/bin/passwd
mxx可以切换到root的身份使用passwd命令

mxx ALL=(root) !/usr/bin/passwd, /usr/bin/passwd [A-Za-z]*,\
        !/usr/bin/passwd root
4.别名设置
User_Alias MYUSER=mxx,mahuihui
Cmnd_Alias MYCOMMAND=!/usr/bin/passwd, /usr/bin/passwd [A-Za-z]*,\
        !/usr/bin/passwd root
MYUSER all=(root) MYCOMMAND

5.用自己的密码切换成root

sudo su -
</code></pre><p>71.PAM模块介绍<br>    P434</p>
<p>72.用户信息传递</p>
<pre><code>查询用户
w    who    last    lastlog

用户对谈

mesg y
mesg n

write    
write mxx tty1

wall &quot;hello&quot;　每个人都会收到

mail mahuihui -s &quot;Hi,mahuihui,nihaoa&quot;
...
...
ctrl+d

mail 收信
?查看命令

q离开,离开后，会将该信件移动到~/home/mbox，收信箱
读取
mail -f /home/mxx/mbox    
</code></pre><p>73.手工添加账号</p>
<pre><code>pwck

pwconv将/etc/passwd相关信息移动到/etc/shadow,把在/etc/passwd中存在的账号            但是在/etc/shadow没有对应密码的列新增密码

grpconv

pwunconv    

chpasswd    修改密码
echo &quot;mxx:mypaswd&quot; | chpasswd -m
</code></pre><p>新建账号<br>    vim /etc/group<br>    mygroup:x:1020:<br>    grpconv</p>
<pre><code>vim /etc/passwd
myuser:x:1200:1020::/home/myuser:/bin/bash
pwconv

passwd myuser

cp -a /etc/skel /home/myuser
chmod -R myuser:mygroup /home/myuser
chmod 700 /home/myuser    
</code></pre>
          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mxxhcm.github.io/2019/05/07/linux-quota/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="马晓鑫爱马荟荟">
      <meta itemprop="description" content="记录硕士三年自己的积累">
      <meta itemprop="image" content="/images/favicon.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mxxhcm's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/05/07/linux-quota/" class="post-title-link" itemprop="http://mxxhcm.github.io/index.html">linux quota</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-05-07 16:53:04 / 修改时间：16:53:32" itemprop="dateCreated datePublished" datetime="2019-05-07T16:53:04+08:00">2019-05-07</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>74.quota示范<br>  文件系统开启quota<br>    df -h /home<br>    mount -o remount,usrquota,grpquota /home<br>    mount | grep ‘home’<br>    cat /etc/mtab<br>    /etc/mtab会被写入这些操作</p>
<pre><code>或者写入/etc/fstab
vim /etc/fstab
LABEL=/home /home ext4 defaults,usrquota,groquota

umount /home
mount -a
mount | grep &#39;home&#39;
</code></pre><p>  新建quota配置文件<br>    sudo apt-get install quota<br>    quotacheck [-avugmf]<br>        -c 创建磁盘配额数据文件<br>        -a 创建在/etc/mtab所有磁盘的配额数据库文件，使用此参数，后无需加            挂载点<br>        -u 创建用户的磁盘配额数据库文件<br>        -g 用户组的<br>        -m 把一起的磁盘配额信息清除，对/分区创建时，必须用此参数<br>        -v 显示创建的过程<br>  启动quota<br>    quotaon [-avug]　[挂载点]<br>        -a 根据/etc/fstab的设置来启动有关的quota<br>        -v<br>  关闭quota<br>    quotaoff [-aug] [mount-point]</p>
<p>  编辑quota<br>    edquota [-ugtp]<br>        -t 修改宽限时间<br>        -p 复制范本，，模板账号为已存在并设置好quota的账号<br>            edquota -p 范本账号 -u 新账号<br>        edquota -u myquota<br>        edquota -g myquotagrp<br>          edquota -t<br>        edquota -p quotagrp -u myquota</p>
<p>  quota的报表表<br>    单一用户<br>    quota [-ugvs]<br>        -s 以1024的整数倍显示</p>
<pre><code>repquota [-a] [-uvgs] 
    /dev/sda[012]
</code></pre><p>　warnquota    root给用户以及root发邮件　P461</p>
<pre><code> 在 /etc/warnquota.conf 中设置邮件内容
</code></pre><p>　setquota [-u|-g] name block(soft) block(hard) inode(soft) inode(hard) 文件系统<br>    setquota -u myquota5 2000 3000 0 0 /home<br>    quota-uv myquota5</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/favicon.jpg" alt="马晓鑫爱马荟荟">
            
              <p class="site-author-name" itemprop="name">马晓鑫爱马荟荟</p>
              <p class="site-description motion-element" itemprop="description">记录硕士三年自己的积累</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">92</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">10</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">107</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/mxxhcm" title="GitHub &rarr; https://github.com/mxxhcm" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="mailto:mxxhcm@gmail.com" title="E-Mail &rarr; mailto:mxxhcm@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            </div>
          

          

          
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">马晓鑫爱马荟荟</span>

  

  
</div>


  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v6.6.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script src="/js/src/utils.js?v=6.6.0"></script>

  <script src="/js/src/motion.js?v=6.6.0"></script>



  
  


  <script src="/js/src/affix.js?v=6.6.0"></script>

  <script src="/js/src/schemes/pisces.js?v=6.6.0"></script>



  

  


  <script src="/js/src/bootstrap.js?v=6.6.0"></script>



  



  






<!-- LOCAL: You can save these files to your site and update links -->
    
        
        <link rel="stylesheet" href="https://aimingoo.github.io/gitmint/style/default.css">
        <script src="https://aimingoo.github.io/gitmint/dist/gitmint.browser.js"></script>
    
<!-- END LOCAL -->

    

    







  





  

  

  

  

  
  

  
  
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
  

  


  
  

  

  

  

  

  

  

</body>
</html>
